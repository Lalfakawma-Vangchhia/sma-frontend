{"ast":null,"code":"// API Client for Backend Integration\nclass ApiClient {\n  constructor() {\n    // For localhost development, match the frontend protocol\n    // This ensures HTTPS frontend talks to HTTPS backend\n    const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';\n    let defaultURL;\n    if (isLocalhost) {\n      // Match the frontend protocol for localhost development\n      const protocol = window.location.protocol;\n      defaultURL = `${protocol}//localhost:8000/api`;\n    } else {\n      // For production, match the current protocol\n      const isHttps = window.location.protocol === 'https:';\n      const protocol = isHttps ? 'https:' : 'http:';\n      defaultURL = `${protocol}//localhost:8000/api`;\n    }\n    this.baseURL = process.env.REACT_APP_API_URL || defaultURL;\n    this.token = localStorage.getItem('authToken');\n    console.log('üîç DEBUG: API Client initialized with baseURL:', this.baseURL);\n    console.log('üîç DEBUG: Frontend protocol:', window.location.protocol);\n    console.log('üîç DEBUG: Backend will use same protocol for localhost');\n  }\n  setToken(token) {\n    this.token = token;\n    if (token) {\n      localStorage.setItem('authToken', token);\n    } else {\n      localStorage.removeItem('authToken');\n    }\n  }\n  getHeaders() {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (this.token) {\n      headers['Authorization'] = `Bearer ${this.token}`;\n    }\n    return headers;\n  }\n  async request(endpoint, options = {}) {\n    const url = `${this.baseURL}${endpoint}`;\n    const config = {\n      headers: this.getHeaders(),\n      ...options\n    };\n    try {\n      console.log(`Making API request to: ${url}`);\n\n      // Dynamic timeout ‚Äì longer for AI image endpoints which can take ~30-60 s\n      let timeoutMs = 300000; // default  s\n      const longRunningEndpoints = ['/facebook/generate-image', '/facebook/post-with-image', '/facebook/ai-post-with-image', '/facebook/post-with-pre-generated-image', '/facebook/create-post',\n      // Add the unified Facebook post endpoint\n      '/instagram/post-carousel',\n      // Add Instagram carousel endpoint\n      '/social/instagram/upload-video',\n      // Add video upload endpoint\n      '/social/instagram/upload-image',\n      // Add image upload endpoint\n      '/social/instagram/upload-video',\n      // Alternative video upload path\n      '/social/instagram/upload-image',\n      // Alternative image upload path\n      '/social/instagram/generate-carousel',\n      // AI carousel generation\n      '/social/instagram/generate-image',\n      // AI image generation\n      '/social/instagram/generate-caption',\n      // AI caption generation\n      '/social/facebook/generate-image',\n      // Facebook AI image generation\n      '/social/facebook/generate-caption-with-strategy',\n      // Facebook AI caption generation\n      '/social/facebook/generate-bulk-captions',\n      // Facebook AI bulk caption generation\n      '/ai/generate-content',\n      // General AI content generation\n      '/social/instagram/create-post',\n      // Instagram post creation\n      '/social/facebook/create-post',\n      // Facebook post creation\n      '/social/instagram/post-carousel',\n      // Instagram carousel posting\n      '/social/instagram/post',\n      // Instagram post endpoint\n      '/social/facebook/post',\n      // Facebook post endpoint\n      '/ai/',\n      // All AI endpoints\n      '/generate',\n      // Any generation endpoint\n      '/carousel',\n      // Carousel operations\n      '/upload' // Upload operations\n      ];\n\n      // Check for specific high-load operations\n      const isAIGeneration = endpoint.includes('generate') || endpoint.includes('ai/');\n      const isCarouselOperation = endpoint.includes('carousel');\n      const isUploadOperation = endpoint.includes('upload');\n      if (longRunningEndpoints.some(ep => endpoint.includes(ep))) {\n        if (isAIGeneration || isCarouselOperation) {\n          timeoutMs = 300000; // 5 minutes for AI generation and carousel operations\n        } else if (isUploadOperation) {\n          timeoutMs = 180000; // 3 minutes for upload operations\n        } else {\n          timeoutMs = 120000; // 2 minutes for other long-running operations\n        }\n      }\n      console.log(`‚è± Using timeout ${timeoutMs / 1000}s for this request`);\n      console.log(`üîç Endpoint: ${endpoint}`);\n      console.log(`üîç Is AI Generation: ${isAIGeneration}`);\n      console.log(`üîç Is Carousel Operation: ${isCarouselOperation}`);\n      console.log(`üîç Is Upload Operation: ${isUploadOperation}`);\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => {\n        console.error(`‚è∞ Timeout after ${timeoutMs / 1000}s for endpoint: ${endpoint}`);\n        controller.abort();\n      }, timeoutMs);\n      const response = await fetch(url, {\n        ...config,\n        signal: controller.signal\n      });\n      clearTimeout(timeoutId);\n      if (!response.ok) {\n        let errorData = {};\n        try {\n          errorData = await response.json();\n        } catch (e) {\n          console.warn('Failed to parse error response as JSON');\n        }\n\n        // Handle 401 Unauthorized specifically\n        if (response.status === 401) {\n          console.warn('Authentication failed - token may be expired');\n          this.setToken(null); // Clear invalid token\n          throw new Error('Could not validate credentials - please log in again');\n        }\n\n        // Handle validation errors (422)\n        if (response.status === 422 && errorData.detail) {\n          // Handle Pydantic validation errors\n          if (Array.isArray(errorData.detail)) {\n            const validationErrors = errorData.detail.map(err => `${err.loc.join('.')}: ${err.msg}`).join(', ');\n            throw new Error(`Validation Error: ${validationErrors}`);\n          } else {\n            throw new Error(errorData.detail);\n          }\n        }\n\n        // Extract error message properly\n        let errorMessage = 'Unknown error occurred';\n        if (typeof errorData === 'string') {\n          errorMessage = errorData;\n        } else if (errorData.error) {\n          errorMessage = errorData.error;\n        } else if (errorData.detail) {\n          errorMessage = errorData.detail;\n        } else if (errorData.message) {\n          errorMessage = errorData.message;\n        } else {\n          errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n      const responseData = await response.json();\n      console.log(`API response from ${endpoint}:`, responseData);\n      return responseData;\n    } catch (error) {\n      if (error.name === 'AbortError') {\n        console.error(`API request timeout for ${endpoint}`);\n        throw new Error('Request timed out - backend server may not be responding');\n      }\n      console.error(`API Error (${endpoint}):`, error);\n      throw error;\n    }\n  }\n\n  // Test connection to backend\n  async testConnection() {\n    try {\n      // Use the same protocol as the frontend for localhost\n      const protocol = window.location.protocol;\n      const healthURL = `${protocol}//localhost:8000/health`;\n      console.log('Testing backend connection to:', healthURL);\n      const response = await fetch(healthURL);\n      console.log('Backend connection test result:', response.status, response.ok);\n      return response.ok;\n    } catch (error) {\n      console.error('Backend connection test failed:', error);\n      if (window.location.protocol === 'https:') {\n        console.error('This is likely due to SSL certificate issues. Please visit https://localhost:8000/health in your browser and accept the certificate.');\n      } else {\n        console.error('Make sure the backend server is running on the correct protocol.');\n      }\n      return false;\n    }\n  }\n\n  // Authentication endpoints\n  async register(userData) {\n    return this.request('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify(userData)\n    });\n  }\n  async login(email, password) {\n    console.log('üîç DEBUG: Attempting login...');\n    console.log('üîç DEBUG: Email:', email);\n    console.log('üîç DEBUG: API Base URL:', this.baseURL);\n    console.log('üîç DEBUG: Full login URL:', `${this.baseURL}/auth/login`);\n    const response = await this.request('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    });\n    console.log('üîç DEBUG: Login response:', response);\n    if (response.access_token) {\n      this.setToken(response.access_token);\n      console.log('üîç DEBUG: Token set successfully');\n    }\n    return response;\n  }\n  async getCurrentUser() {\n    return this.request('/auth/me');\n  }\n  async logout() {\n    this.setToken(null);\n  }\n\n  // OTP endpoints\n  async sendOTP(email) {\n    return this.request('/auth/send-otp', {\n      method: 'POST',\n      body: JSON.stringify({\n        email\n      })\n    });\n  }\n  async verifyOTP(email, otp) {\n    return this.request('/auth/verify-otp', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        otp\n      })\n    });\n  }\n  async resendOTP(email) {\n    return this.request('/auth/resend-otp', {\n      method: 'POST',\n      body: JSON.stringify({\n        email\n      })\n    });\n  }\n\n  // Google OAuth endpoints\n  async getGoogleOAuthUrl() {\n    return this.request('/auth/google/url');\n  }\n  async googleOAuthCallback(code, redirectUri) {\n    const response = await this.request('/auth/google/callback', {\n      method: 'POST',\n      body: JSON.stringify({\n        code: code,\n        redirect_uri: redirectUri\n      })\n    });\n    if (response.access_token) {\n      this.setToken(response.access_token);\n    }\n    return response;\n  }\n  async disconnectGoogleAccount() {\n    return this.request('/auth/google/disconnect', {\n      method: 'DELETE'\n    });\n  }\n\n  // Facebook endpoints\n  async getFacebookStatus() {\n    return this.request('/social/facebook/status');\n  }\n  async connectFacebook(accessToken, userId, pages = []) {\n    return this.request('/social/facebook/connect', {\n      method: 'POST',\n      body: JSON.stringify({\n        access_token: accessToken,\n        user_id: userId,\n        pages: pages\n      })\n    });\n  }\n  async refreshFacebookTokens() {\n    return this.request('/social/facebook/refresh-tokens', {\n      method: 'POST'\n    });\n  }\n  async logoutFacebook() {\n    return this.request('/social/facebook/logout', {\n      method: 'POST'\n    });\n  }\n\n  // (No scheduled post methods here anymore)\n\n  async getSocialPosts(platform = null, limit = 50, socialAccountId = null) {\n    const params = new URLSearchParams();\n    if (platform) params.append('platform', platform);\n    params.append('limit', limit.toString());\n    if (socialAccountId) params.append('social_account_id', socialAccountId);\n    return this.request(`/api/social/posts?${params.toString()}`);\n  }\n  async connectInstagram(accessToken) {\n    return this.request('/social/instagram/connect', {\n      method: 'POST',\n      body: JSON.stringify({\n        access_token: accessToken\n      })\n    });\n  }\n  async createInstagramPost(data) {\n    return this.request('/social/instagram/post', {\n      method: 'POST',\n      body: JSON.stringify(data)\n    });\n  }\n\n  // Get Instagram media\n  async getInstagramMedia(instagramUserId, limit = 25) {\n    return this.request(`/social/instagram/media/${instagramUserId}?limit=${limit}`);\n  }\n\n  // Debug Instagram API\n  async debugInstagramApi(instagramUserId) {\n    return this.request(`/social/debug/instagram-api-test/${instagramUserId}`);\n  }\n\n  // Test Instagram post creation\n  async testInstagramPost(instagramUserId, testImageUrl, testCaption) {\n    return this.request(`/social/debug/instagram-test-post/${instagramUserId}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        test_image_url: testImageUrl,\n        test_caption: testCaption\n      })\n    });\n  }\n\n  // Upload image to Cloudinary for Instagram\n  async uploadImageToCloudinary(file) {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    // Use custom FormData upload method\n    const url = `${this.baseURL}/social/instagram/upload-image`;\n    const config = {\n      method: 'POST',\n      body: formData\n    };\n\n    // Add authorization header manually for FormData\n    if (this.token) {\n      config.headers = {\n        'Authorization': `Bearer ${this.token}`\n      };\n      console.log('üîç DEBUG: Token found, adding Authorization header');\n    } else {\n      console.log('üîç DEBUG: No token found!');\n      console.log('üîç DEBUG: this.token:', this.token);\n      console.log('üîç DEBUG: localStorage authToken:', localStorage.getItem('authToken'));\n    }\n    try {\n      console.log(`üîç DEBUG: Uploading image to Cloudinary via ${url}`);\n      console.log(`üîç DEBUG: Request config:`, config);\n      const response = await fetch(url, config);\n      console.log(`üîç DEBUG: Response status:`, response.status);\n      console.log(`üîç DEBUG: Response headers:`, Object.fromEntries(response.headers.entries()));\n      if (!response.ok) {\n        let errorData = {};\n        try {\n          errorData = await response.json();\n          console.log(`üîç DEBUG: Error response data:`, errorData);\n        } catch (e) {\n          console.warn('Failed to parse error response as JSON');\n        }\n        let errorMessage = 'Unknown error occurred';\n        if (typeof errorData === 'string') {\n          errorMessage = errorData;\n        } else if (errorData.error) {\n          errorMessage = errorData.error;\n        } else if (errorData.detail) {\n          errorMessage = errorData.detail;\n        } else if (errorData.message) {\n          errorMessage = errorData.message;\n        } else {\n          errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n      const responseData = await response.json();\n      console.log(`FormData upload response:`, responseData);\n      return responseData;\n    } catch (error) {\n      console.error(`FormData upload error:`, error);\n      throw error;\n    }\n  }\n\n  // Upload thumbnail to Cloudinary for Instagram reels\n  async uploadThumbnailToCloudinary(file) {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    // Use custom FormData upload method\n    const url = `${this.baseURL}/social/instagram/upload-thumbnail`;\n    const config = {\n      method: 'POST',\n      body: formData\n    };\n\n    // Add authorization header manually for FormData\n    if (this.token) {\n      config.headers = {\n        'Authorization': `Bearer ${this.token}`\n      };\n    }\n    try {\n      console.log(`üîç DEBUG: Uploading thumbnail to Cloudinary via ${url}`);\n      const response = await fetch(url, config);\n      if (!response.ok) {\n        let errorData = {};\n        try {\n          errorData = await response.json();\n        } catch (e) {\n          console.warn('Failed to parse error response as JSON');\n        }\n        let errorMessage = 'Unknown error occurred';\n        if (typeof errorData === 'string') {\n          errorMessage = errorData;\n        } else if (errorData.error) {\n          errorMessage = errorData.error;\n        } else if (errorData.detail) {\n          errorMessage = errorData.detail;\n        } else if (errorData.message) {\n          errorMessage = errorData.message;\n        } else {\n          errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n      const responseData = await response.json();\n      console.log(`Thumbnail upload response:`, responseData);\n      return responseData;\n    } catch (error) {\n      console.error(`Thumbnail upload error:`, error);\n      throw error;\n    }\n  }\n\n  // Upload video to Cloudinary for Instagram\n  async uploadVideoToCloudinary(file) {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    // Use custom FormData upload method\n    const url = `${this.baseURL}/social/instagram/upload-video`;\n    const config = {\n      method: 'POST',\n      body: formData\n    };\n\n    // Add authorization header manually for FormData\n    if (this.token) {\n      config.headers = {\n        'Authorization': `Bearer ${this.token}`\n      };\n    }\n    try {\n      console.log(`üîç DEBUG: Uploading video to Cloudinary via ${url}`);\n      const response = await fetch(url, config);\n      if (!response.ok) {\n        let errorData = {};\n        try {\n          errorData = await response.json();\n        } catch (e) {\n          console.warn('Failed to parse error response as JSON');\n        }\n        let errorMessage = 'Unknown error occurred';\n        if (typeof errorData === 'string') {\n          errorMessage = errorData;\n        } else if (errorData.error) {\n          errorMessage = errorData.error;\n        } else if (errorData.detail) {\n          errorMessage = errorData.detail;\n        } else if (errorData.message) {\n          errorMessage = errorData.message;\n        } else {\n          errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n      const responseData = await response.json();\n      console.log(`Thumbnail upload response:`, responseData);\n      return responseData;\n    } catch (error) {\n      console.error(`Thumbnail upload error:`, error);\n      throw error;\n    }\n  }\n\n  // Google Drive integration for Instagram\n  async getGoogleDriveFiles(mimeType = null) {\n    const params = mimeType ? `?mime_type=${mimeType}` : '';\n    return this.request(`/api/google-drive/files${params}`);\n  }\n  async downloadGoogleDriveFile(fileId) {\n    return this.request(`/api/google-drive/download/${fileId}`);\n  }\n  async getGoogleDriveAuth() {\n    return this.request('/google-drive/auth');\n  }\n  async getGoogleDriveStatus() {\n    return this.request('/google-drive/status');\n  }\n  async getGoogleDriveAuthorizeUrl() {\n    return this.request('/google-drive/authorize');\n  }\n  async getGoogleDriveToken() {\n    const response = await this.request('/google-drive/token');\n    return response;\n  }\n  async debugGoogleDrive() {\n    return this.request('/google-drive/debug');\n  }\n  async testGoogleDriveImages() {\n    return this.request('/google-drive/test-images');\n  }\n  async disconnectGoogleDrive() {\n    return this.request('/google-drive/disconnect', {\n      method: 'POST'\n    });\n  }\n\n  // Generate Instagram image using Stability AI\n  async generateInstagramImage(imagePrompt, postType = 'feed') {\n    return this.request('/social/instagram/generate-image', {\n      method: 'POST',\n      body: JSON.stringify({\n        prompt: imagePrompt,\n        post_type: postType\n      })\n    });\n  }\n\n  // Unified Instagram post creation endpoint\n  async createUnifiedInstagramPost(instagramUserId, options = {}) {\n    const payload = {\n      instagram_user_id: instagramUserId,\n      caption: options.caption,\n      post_type: options.post_type || 'feed',\n      media_type: options.media_type || 'image',\n      use_ai_text: options.use_ai_text || false,\n      use_ai_image: options.use_ai_image || false,\n      content_prompt: options.content_prompt,\n      image_prompt: options.image_prompt,\n      image_url: options.image_url,\n      video_url: options.video_url,\n      video_filename: options.video_filename,\n      media_file: options.media_file,\n      media_filename: options.media_filename,\n      is_reel: options.is_reel || false,\n      thumbnail_url: options.thumbnail_url,\n      thumbnail_filename: options.thumbnail_filename,\n      thumbnail_file: options.thumbnail_file,\n      location: options.location,\n      hashtags: options.hashtags\n    };\n\n    // Remove undefined and null values\n    const cleanPayload = Object.fromEntries(Object.entries(payload).filter(([key, value]) => value !== null && value !== undefined && value !== ''));\n    return this.request('/social/instagram/create-post', {\n      method: 'POST',\n      body: JSON.stringify(cleanPayload)\n    });\n  }\n\n  // REPLACE Make.com auto-reply webhook\n  async toggleAutoReply(pageId, enabled, responseTemplate = 'Thank you for your comment!', selectedPostIds = []) {\n    return this.request('/social/facebook/auto-reply', {\n      method: 'POST',\n      body: JSON.stringify({\n        page_id: pageId,\n        enabled: enabled,\n        response_template: responseTemplate,\n        selected_post_ids: selectedPostIds\n      })\n    });\n  }\n\n  // Get posts for auto-reply selection\n  async getPostsForAutoReply(pageId) {\n    return this.request(`/social/facebook/posts-for-auto-reply?page_id=${pageId}`);\n  }\n\n  // Instagram Auto-Reply Methods\n  async toggleInstagramAutoReply(instagramUserId, enabled, responseTemplate = 'Thank you for your comment!', selectedPostIds = []) {\n    return this.request('/social/instagram/auto-reply', {\n      method: 'POST',\n      body: JSON.stringify({\n        instagram_user_id: instagramUserId,\n        enabled: enabled,\n        response_template: responseTemplate,\n        selected_post_ids: selectedPostIds\n      })\n    });\n  }\n  async getInstagramPostsForAutoReply(instagramUserId) {\n    return this.request(`/social/instagram/posts-for-auto-reply?instagram_user_id=${instagramUserId}`);\n  }\n  async syncInstagramPosts(instagramUserId) {\n    return this.request('/social/instagram/sync-posts', {\n      method: 'POST',\n      body: JSON.stringify({\n        instagram_user_id: instagramUserId\n      })\n    });\n  }\n\n  // Get connected social accounts\n  async getSocialAccounts() {\n    return this.request('/social/accounts');\n  }\n  async getInstagramAccounts() {\n    // This assumes your backend endpoint is /api/social/accounts and returns only Instagram accounts\n    try {\n      console.log('üîç DEBUG: Fetching Instagram accounts from /social/accounts');\n      console.log('üîç DEBUG: Current token:', this.token ? 'Token exists' : 'No token');\n      console.log('üîç DEBUG: Base URL:', this.baseURL);\n      const response = await this.request('/social/accounts', {\n        method: 'GET'\n      });\n      console.log('üîç DEBUG: Instagram accounts response:', response);\n      return response;\n    } catch (error) {\n      console.error('üîç DEBUG: Failed to fetch Instagram accounts:', error);\n      console.error('üîç DEBUG: Error type:', error.constructor.name);\n      console.error('üîç DEBUG: Error message:', error.message);\n      if (error.message.includes('Failed to fetch')) {\n        console.error('üîç DEBUG: This is likely a network, CORS, or SSL certificate issue.');\n        console.error('üîç DEBUG: Please visit https://localhost:8000/health and https://localhost:8000/api/social/accounts in your browser to accept the SSL certificate.');\n        console.error('üîç DEBUG: Also check if backend is running with HTTPS.');\n      }\n      if (error.message.includes('Could not validate credentials')) {\n        console.error('üîç DEBUG: Authentication failed - token may be expired or invalid.');\n        console.error('üîç DEBUG: Please try logging out and logging back in.');\n      }\n      throw error;\n    }\n  }\n\n  // Get posts\n  async getPosts(platform = null, status = null, limit = 50) {\n    const params = new URLSearchParams();\n    if (platform) params.append('platform', platform);\n    if (status) params.append('status', status);\n    if (limit) params.append('limit', limit.toString());\n    const query = params.toString();\n    return this.request(`/api/social/posts${query ? `?${query}` : ''}`);\n  }\n\n  // Get automation rules\n  async getAutomationRules(platform = null, ruleType = null) {\n    const params = new URLSearchParams();\n    if (platform) params.append('platform', platform);\n    if (ruleType) params.append('rule_type', ruleType);\n    const query = params.toString();\n    return this.request(`/social/automation-rules${query ? `?${query}` : ''}`);\n  }\n\n  // Generate content using Groq API\n  async generateContent(prompt) {\n    return this.request('/ai/generate-content', {\n      method: 'POST',\n      body: JSON.stringify({\n        prompt: prompt\n      })\n    });\n  }\n  async generateInstagramCaption(prompt) {\n    try {\n      const response = await this.request('/social/instagram/generate-caption', {\n        method: 'POST',\n        body: JSON.stringify({\n          prompt: prompt\n        })\n      });\n      if (!response || !response.content) {\n        console.error('Invalid response format from caption generation:', response);\n        return {\n          success: false,\n          error: 'Invalid response format from server'\n        };\n      }\n      return {\n        success: true,\n        content: response.content,\n        ...response\n      };\n    } catch (error) {\n      var _error$response;\n      console.error('Error generating Instagram caption:', error);\n      return {\n        success: false,\n        error: error.message || 'Failed to generate caption',\n        details: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.toString()\n      };\n    }\n  }\n  async generateCaptionWithStrategy(customStrategy, context = \"\", maxLength = 2000) {\n    const response = await this.request('/social/generate-caption-with-strategy', {\n      method: 'POST',\n      body: JSON.stringify({\n        custom_strategy: customStrategy,\n        context: context,\n        max_length: maxLength\n      })\n    });\n    return response;\n  }\n  async generateFacebookCaptionWithStrategy(customStrategy, context = \"\", maxLength = 2000) {\n    const response = await this.request('/social/facebook/generate-caption-with-strategy', {\n      method: 'POST',\n      body: JSON.stringify({\n        custom_strategy: customStrategy,\n        context: context,\n        max_length: maxLength\n      })\n    });\n    return response;\n  }\n  async generateFacebookBulkCaptions(customStrategy, contexts, maxLength = 2000) {\n    const response = await this.request('/social/facebook/generate-bulk-captions', {\n      method: 'POST',\n      body: JSON.stringify({\n        custom_strategy: customStrategy,\n        contexts: contexts,\n        max_length: maxLength\n      })\n    });\n    return response;\n  }\n  async generateBulkCaptions(customStrategy, contexts, maxLength = 2000) {\n    const response = await this.request('/social/generate-bulk-captions', {\n      method: 'POST',\n      body: JSON.stringify({\n        custom_strategy: customStrategy,\n        contexts: contexts,\n        max_length: maxLength\n      })\n    });\n    return response;\n  }\n\n  // Generate Instagram carousel\n  async generateInstagramCarousel(prompt, count = 3) {\n    const response = await this.request('/social/instagram/generate-carousel', {\n      method: 'POST',\n      body: JSON.stringify({\n        prompt: prompt,\n        count: count\n      })\n    });\n    return response;\n  }\n\n  // Post Instagram carousel\n  async postInstagramCarousel(instagramUserId, caption, imageUrls) {\n    const response = await this.request('/social/instagram/post-carousel', {\n      method: 'POST',\n      body: JSON.stringify({\n        instagram_user_id: instagramUserId,\n        caption: caption,\n        image_urls: imageUrls\n      })\n    });\n    return response;\n  }\n\n  // Unified Facebook post creation endpoint\n  async createFacebookPost(pageId, options = {}) {\n    return this.request('/social/facebook/create-post', {\n      method: 'POST',\n      body: JSON.stringify({\n        page_id: pageId,\n        message: options.message,\n        image_url: options.image_url,\n        post_type: options.post_type || 'feed',\n        use_ai: options.use_ai || false,\n        prompt: options.prompt,\n        scheduled_time: options.scheduled_time,\n        carousel_images: options.carousel_images || [],\n        video_url: options.video_url,\n        location: options.location,\n        hashtags: options.hashtags\n      })\n    });\n  }\n\n  // Stability AI Image Generation endpoint (standalone)\n  async generateFacebookImage(imagePrompt, postType = 'feed') {\n    return this.request('/social/facebook/generate-image', {\n      method: 'POST',\n      body: JSON.stringify({\n        prompt: imagePrompt,\n        post_type: postType\n      })\n    });\n  }\n\n  // Get AI service status including Stability AI\n  async getAIServiceStatus() {\n    return this.request('/ai/status');\n  }\n\n  // Debug endpoint for Stability AI troubleshooting\n  async debugStabilityAI() {\n    return this.request('/social/debug/stability-ai-status');\n  }\n\n  // Debug endpoint for testing Facebook image posts\n  async debugFacebookImagePost(pageId, message = \"Test post from debug\") {\n    return this.request('/social/facebook/debug-image-post', {\n      method: 'POST',\n      body: JSON.stringify({\n        page_id: pageId,\n        message: message\n      })\n    });\n  }\n\n  // Bulk Composer - Schedule multiple posts\n  async bulkSchedulePosts(requestData) {\n    const response = await this.request('/social/bulk-composer/schedule', {\n      method: 'POST',\n      body: JSON.stringify(requestData)\n    });\n    return response;\n  }\n\n  // Notification endpoints\n  async getNotifications(limit = 50, offset = 0) {\n    const params = new URLSearchParams();\n    params.append('limit', limit.toString());\n    params.append('offset', offset.toString());\n    return this.request(`/notifications?${params.toString()}`);\n  }\n  async markNotificationRead(notificationId) {\n    return this.request(`/notifications/${notificationId}/mark-read`, {\n      method: 'POST'\n    });\n  }\n  async markAllNotificationsRead() {\n    return this.request('/notifications/mark-all-read', {\n      method: 'POST'\n    });\n  }\n  async getNotificationPreferences() {\n    return this.request('/notification-preferences');\n  }\n  async updateNotificationPreferences(preferences) {\n    return this.request('/notification-preferences', {\n      method: 'PUT',\n      body: JSON.stringify(preferences)\n    });\n  }\n\n  // Bulk Composer - Schedule multiple posts for Instagram\n  async bulkScheduleInstagramPosts({\n    social_account_id,\n    posts\n  }) {\n    // Send social_account_id as a query param, posts as the body\n    return this.request(`/social/instagram/bulk-schedule?social_account_id=${encodeURIComponent(social_account_id)}`, {\n      method: 'POST',\n      body: JSON.stringify(posts)\n    });\n  }\n\n  // Bulk Composer - Get scheduled posts\n  async getBulkComposerContent(socialAccountId = null) {\n    let endpoint = '/social/bulk-composer/content';\n    if (socialAccountId) {\n      endpoint += `?social_account_id=${socialAccountId}`;\n    }\n    return this.request(endpoint);\n  }\n\n  // Bulk Composer - Update post caption\n  async updateBulkComposerPost(postId, caption) {\n    return this.request(`/social/bulk-composer/content/${postId}`, {\n      method: 'PUT',\n      body: JSON.stringify({\n        caption: caption\n      })\n    });\n  }\n\n  // Bulk Composer - Cancel/delete scheduled post\n  async cancelBulkComposerPost(postId) {\n    return this.request(`/social/bulk-composer/content/${postId}`, {\n      method: 'DELETE'\n    });\n  }\n\n  // LinkedIn endpoints\n  async getLinkedInStatus() {\n    return this.request('/social/linkedin/status');\n  }\n  async getLinkedInConfig() {\n    return this.request('/social/linkedin/config');\n  }\n  async connectLinkedIn(data) {\n    return this.request('/social/linkedin/connect', {\n      method: 'POST',\n      body: JSON.stringify(data)\n    });\n  }\n  async exchangeLinkedInCode(code) {\n    return this.request('/social/linkedin/exchange-code', {\n      method: 'POST',\n      body: JSON.stringify({\n        code\n      })\n    });\n  }\n  async disconnectLinkedIn() {\n    return this.request('/social/linkedin/disconnect', {\n      method: 'POST'\n    });\n  }\n  async refreshLinkedInTokens() {\n    return this.request('/social/linkedin/refresh-tokens', {\n      method: 'POST'\n    });\n  }\n\n  // Get Instagram DM auto-reply status\n  async getInstagramDmAutoReplyStatus(instagramUserId) {\n    return this.request(`/social/instagram/dm-auto-reply/status/${instagramUserId}`);\n  }\n\n  // Enable global Instagram auto-reply\n  async enableGlobalInstagramAutoReply(instagramUserId) {\n    return this.request(`/social/instagram/auto_reply/global/enable?instagram_user_id=${instagramUserId}`, {\n      method: 'POST'\n    });\n  }\n\n  // Disable global Instagram auto-reply\n  async disableGlobalInstagramAutoReply(instagramUserId) {\n    return this.request(`/social/instagram/auto_reply/global/disable?instagram_user_id=${instagramUserId}`, {\n      method: 'POST'\n    });\n  }\n\n  // Get global auto-reply status\n  async getGlobalInstagramAutoReplyStatus(instagramUserId) {\n    return this.request(`/social/instagram/auto_reply/global/status?instagram_user_id=${instagramUserId}`);\n  }\n\n  // Get global auto-reply progress\n  async getGlobalInstagramAutoReplyProgress(instagramUserId) {\n    return this.request(`/social/instagram/auto_reply/global/progress?instagram_user_id=${instagramUserId}`);\n  }\n  async getScheduledPosts() {\n    // Adjust the endpoint if your backend uses a different path\n    return this.request('/social/scheduled-posts');\n  }\n}\nconst apiClient = new ApiClient();\nexport default apiClient;","map":{"version":3,"names":["ApiClient","constructor","isLocalhost","window","location","hostname","defaultURL","protocol","isHttps","baseURL","process","env","REACT_APP_API_URL","token","localStorage","getItem","console","log","setToken","setItem","removeItem","getHeaders","headers","request","endpoint","options","url","config","timeoutMs","longRunningEndpoints","isAIGeneration","includes","isCarouselOperation","isUploadOperation","some","ep","controller","AbortController","timeoutId","setTimeout","error","abort","response","fetch","signal","clearTimeout","ok","errorData","json","e","warn","status","Error","detail","Array","isArray","validationErrors","map","err","loc","join","msg","errorMessage","message","statusText","responseData","name","testConnection","healthURL","register","userData","method","body","JSON","stringify","login","email","password","access_token","getCurrentUser","logout","sendOTP","verifyOTP","otp","resendOTP","getGoogleOAuthUrl","googleOAuthCallback","code","redirectUri","redirect_uri","disconnectGoogleAccount","getFacebookStatus","connectFacebook","accessToken","userId","pages","user_id","refreshFacebookTokens","logoutFacebook","getSocialPosts","platform","limit","socialAccountId","params","URLSearchParams","append","toString","connectInstagram","createInstagramPost","data","getInstagramMedia","instagramUserId","debugInstagramApi","testInstagramPost","testImageUrl","testCaption","test_image_url","test_caption","uploadImageToCloudinary","file","formData","FormData","Object","fromEntries","entries","uploadThumbnailToCloudinary","uploadVideoToCloudinary","getGoogleDriveFiles","mimeType","downloadGoogleDriveFile","fileId","getGoogleDriveAuth","getGoogleDriveStatus","getGoogleDriveAuthorizeUrl","getGoogleDriveToken","debugGoogleDrive","testGoogleDriveImages","disconnectGoogleDrive","generateInstagramImage","imagePrompt","postType","prompt","post_type","createUnifiedInstagramPost","payload","instagram_user_id","caption","media_type","use_ai_text","use_ai_image","content_prompt","image_prompt","image_url","video_url","video_filename","media_file","media_filename","is_reel","thumbnail_url","thumbnail_filename","thumbnail_file","hashtags","cleanPayload","filter","key","value","undefined","toggleAutoReply","pageId","enabled","responseTemplate","selectedPostIds","page_id","response_template","selected_post_ids","getPostsForAutoReply","toggleInstagramAutoReply","getInstagramPostsForAutoReply","syncInstagramPosts","getSocialAccounts","getInstagramAccounts","getPosts","query","getAutomationRules","ruleType","generateContent","generateInstagramCaption","content","success","_error$response","details","generateCaptionWithStrategy","customStrategy","context","maxLength","custom_strategy","max_length","generateFacebookCaptionWithStrategy","generateFacebookBulkCaptions","contexts","generateBulkCaptions","generateInstagramCarousel","count","postInstagramCarousel","imageUrls","image_urls","createFacebookPost","use_ai","scheduled_time","carousel_images","generateFacebookImage","getAIServiceStatus","debugStabilityAI","debugFacebookImagePost","bulkSchedulePosts","requestData","getNotifications","offset","markNotificationRead","notificationId","markAllNotificationsRead","getNotificationPreferences","updateNotificationPreferences","preferences","bulkScheduleInstagramPosts","social_account_id","posts","encodeURIComponent","getBulkComposerContent","updateBulkComposerPost","postId","cancelBulkComposerPost","getLinkedInStatus","getLinkedInConfig","connectLinkedIn","exchangeLinkedInCode","disconnectLinkedIn","refreshLinkedInTokens","getInstagramDmAutoReplyStatus","enableGlobalInstagramAutoReply","disableGlobalInstagramAutoReply","getGlobalInstagramAutoReplyStatus","getGlobalInstagramAutoReplyProgress","getScheduledPosts","apiClient"],"sources":["C:/Users/THORSIGNIA/Projects/automation-dash/frontend/src/services/apiClient.js"],"sourcesContent":["// API Client for Backend Integration\r\nclass ApiClient {\r\n  constructor() {\r\n    // For localhost development, match the frontend protocol\r\n    // This ensures HTTPS frontend talks to HTTPS backend\r\n    const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';\r\n\r\n    let defaultURL;\r\n    if (isLocalhost) {\r\n      // Match the frontend protocol for localhost development\r\n      const protocol = window.location.protocol;\r\n      defaultURL = `${protocol}//localhost:8000/api`;\r\n    } else {\r\n      // For production, match the current protocol\r\n      const isHttps = window.location.protocol === 'https:';\r\n      const protocol = isHttps ? 'https:' : 'http:';\r\n      defaultURL = `${protocol}//localhost:8000/api`;\r\n    }\r\n\r\n    this.baseURL = process.env.REACT_APP_API_URL || defaultURL;\r\n    this.token = localStorage.getItem('authToken');\r\n\r\n    console.log('üîç DEBUG: API Client initialized with baseURL:', this.baseURL);\r\n    console.log('üîç DEBUG: Frontend protocol:', window.location.protocol);\r\n    console.log('üîç DEBUG: Backend will use same protocol for localhost');\r\n  }\r\n\r\n  setToken(token) {\r\n    this.token = token;\r\n    if (token) {\r\n      localStorage.setItem('authToken', token);\r\n    } else {\r\n      localStorage.removeItem('authToken');\r\n    }\r\n  }\r\n\r\n  getHeaders() {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n    };\r\n\r\n    if (this.token) {\r\n      headers['Authorization'] = `Bearer ${this.token}`;\r\n    }\r\n\r\n    return headers;\r\n  }\r\n\r\n  async request(endpoint, options = {}) {\r\n    const url = `${this.baseURL}${endpoint}`;\r\n\r\n    const config = {\r\n      headers: this.getHeaders(),\r\n      ...options,\r\n    };\r\n\r\n    try {\r\n      console.log(`Making API request to: ${url}`);\r\n\r\n      // Dynamic timeout ‚Äì longer for AI image endpoints which can take ~30-60 s\r\n      let timeoutMs = 300000; // default  s\r\n      const longRunningEndpoints = [\r\n        '/facebook/generate-image',\r\n        '/facebook/post-with-image',\r\n        '/facebook/ai-post-with-image',\r\n        '/facebook/post-with-pre-generated-image',\r\n        '/facebook/create-post',  // Add the unified Facebook post endpoint\r\n        '/instagram/post-carousel',  // Add Instagram carousel endpoint\r\n        '/social/instagram/upload-video',  // Add video upload endpoint\r\n        '/social/instagram/upload-image',  // Add image upload endpoint\r\n        '/social/instagram/upload-video',  // Alternative video upload path\r\n        '/social/instagram/upload-image',   // Alternative image upload path\r\n        '/social/instagram/generate-carousel',  // AI carousel generation\r\n        '/social/instagram/generate-image',     // AI image generation\r\n        '/social/instagram/generate-caption',   // AI caption generation\r\n        '/social/facebook/generate-image',      // Facebook AI image generation\r\n        '/social/facebook/generate-caption-with-strategy',  // Facebook AI caption generation\r\n        '/social/facebook/generate-bulk-captions',          // Facebook AI bulk caption generation\r\n        '/ai/generate-content',                 // General AI content generation\r\n        '/social/instagram/create-post',        // Instagram post creation\r\n        '/social/facebook/create-post',         // Facebook post creation\r\n        '/social/instagram/post-carousel',      // Instagram carousel posting\r\n        '/social/instagram/post',               // Instagram post endpoint\r\n        '/social/facebook/post',                // Facebook post endpoint\r\n        '/ai/',                                 // All AI endpoints\r\n        '/generate',                                // Any generation endpoint\r\n        '/carousel',                                // Carousel operations\r\n        '/upload'                                   // Upload operations\r\n      ];\r\n\r\n      // Check for specific high-load operations\r\n      const isAIGeneration = endpoint.includes('generate') || endpoint.includes('ai/');\r\n      const isCarouselOperation = endpoint.includes('carousel');\r\n      const isUploadOperation = endpoint.includes('upload');\r\n\r\n      if (longRunningEndpoints.some(ep => endpoint.includes(ep))) {\r\n        if (isAIGeneration || isCarouselOperation) {\r\n          timeoutMs = 300000; // 5 minutes for AI generation and carousel operations\r\n        } else if (isUploadOperation) {\r\n          timeoutMs = 180000; // 3 minutes for upload operations\r\n        } else {\r\n          timeoutMs = 120000; // 2 minutes for other long-running operations\r\n        }\r\n      }\r\n\r\n      console.log(`‚è± Using timeout ${timeoutMs / 1000}s for this request`);\r\n      console.log(`üîç Endpoint: ${endpoint}`);\r\n      console.log(`üîç Is AI Generation: ${isAIGeneration}`);\r\n      console.log(`üîç Is Carousel Operation: ${isCarouselOperation}`);\r\n      console.log(`üîç Is Upload Operation: ${isUploadOperation}`);\r\n\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => {\r\n        console.error(`‚è∞ Timeout after ${timeoutMs / 1000}s for endpoint: ${endpoint}`);\r\n        controller.abort();\r\n      }, timeoutMs);\r\n\r\n      const response = await fetch(url, {\r\n        ...config,\r\n        signal: controller.signal\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      if (!response.ok) {\r\n        let errorData = {};\r\n        try {\r\n          errorData = await response.json();\r\n        } catch (e) {\r\n          console.warn('Failed to parse error response as JSON');\r\n        }\r\n\r\n        // Handle 401 Unauthorized specifically\r\n        if (response.status === 401) {\r\n          console.warn('Authentication failed - token may be expired');\r\n          this.setToken(null); // Clear invalid token\r\n          throw new Error('Could not validate credentials - please log in again');\r\n        }\r\n\r\n        // Handle validation errors (422)\r\n        if (response.status === 422 && errorData.detail) {\r\n          // Handle Pydantic validation errors\r\n          if (Array.isArray(errorData.detail)) {\r\n            const validationErrors = errorData.detail.map(err =>\r\n              `${err.loc.join('.')}: ${err.msg}`\r\n            ).join(', ');\r\n            throw new Error(`Validation Error: ${validationErrors}`);\r\n          } else {\r\n            throw new Error(errorData.detail);\r\n          }\r\n        }\r\n\r\n        // Extract error message properly\r\n        let errorMessage = 'Unknown error occurred';\r\n        if (typeof errorData === 'string') {\r\n          errorMessage = errorData;\r\n        } else if (errorData.error) {\r\n          errorMessage = errorData.error;\r\n        } else if (errorData.detail) {\r\n          errorMessage = errorData.detail;\r\n        } else if (errorData.message) {\r\n          errorMessage = errorData.message;\r\n        } else {\r\n          errorMessage = `HTTP ${response.status}: ${response.statusText}`;\r\n        }\r\n\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      const responseData = await response.json();\r\n      console.log(`API response from ${endpoint}:`, responseData);\r\n      return responseData;\r\n    } catch (error) {\r\n      if (error.name === 'AbortError') {\r\n        console.error(`API request timeout for ${endpoint}`);\r\n        throw new Error('Request timed out - backend server may not be responding');\r\n      }\r\n      console.error(`API Error (${endpoint}):`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Test connection to backend\r\n  async testConnection() {\r\n    try {\r\n      // Use the same protocol as the frontend for localhost\r\n      const protocol = window.location.protocol;\r\n      const healthURL = `${protocol}//localhost:8000/health`;\r\n      console.log('Testing backend connection to:', healthURL);\r\n      const response = await fetch(healthURL);\r\n      console.log('Backend connection test result:', response.status, response.ok);\r\n      return response.ok;\r\n    } catch (error) {\r\n      console.error('Backend connection test failed:', error);\r\n      if (window.location.protocol === 'https:') {\r\n        console.error('This is likely due to SSL certificate issues. Please visit https://localhost:8000/health in your browser and accept the certificate.');\r\n      } else {\r\n        console.error('Make sure the backend server is running on the correct protocol.');\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Authentication endpoints\r\n  async register(userData) {\r\n    return this.request('/auth/register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n  }\r\n\r\n  async login(email, password) {\r\n    console.log('üîç DEBUG: Attempting login...');\r\n    console.log('üîç DEBUG: Email:', email);\r\n    console.log('üîç DEBUG: API Base URL:', this.baseURL);\r\n    console.log('üîç DEBUG: Full login URL:', `${this.baseURL}/auth/login`);\r\n    \r\n    const response = await this.request('/auth/login', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, password }),\r\n    });\r\n\r\n    console.log('üîç DEBUG: Login response:', response);\r\n\r\n    if (response.access_token) {\r\n      this.setToken(response.access_token);\r\n      console.log('üîç DEBUG: Token set successfully');\r\n    }\r\n\r\n    return response;\r\n  }\r\n\r\n  async getCurrentUser() {\r\n    return this.request('/auth/me');\r\n  }\r\n\r\n  async logout() {\r\n    this.setToken(null);\r\n  }\r\n\r\n  // OTP endpoints\r\n  async sendOTP(email) {\r\n    return this.request('/auth/send-otp', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email }),\r\n    });\r\n  }\r\n\r\n  async verifyOTP(email, otp) {\r\n    return this.request('/auth/verify-otp', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, otp }),\r\n    });\r\n  }\r\n\r\n  async resendOTP(email) {\r\n    return this.request('/auth/resend-otp', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email }),\r\n    });\r\n  }\r\n\r\n  // Google OAuth endpoints\r\n  async getGoogleOAuthUrl() {\r\n    return this.request('/auth/google/url');\r\n  }\r\n\r\n  async googleOAuthCallback(code, redirectUri) {\r\n    const response = await this.request('/auth/google/callback', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        code: code,\r\n        redirect_uri: redirectUri\r\n      }),\r\n    });\r\n\r\n    if (response.access_token) {\r\n      this.setToken(response.access_token);\r\n    }\r\n\r\n    return response;\r\n  }\r\n\r\n  async disconnectGoogleAccount() {\r\n    return this.request('/auth/google/disconnect', {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  // Facebook endpoints\r\n  async getFacebookStatus() {\r\n    return this.request('/social/facebook/status');\r\n  }\r\n\r\n  async connectFacebook(accessToken, userId, pages = []) {\r\n    return this.request('/social/facebook/connect', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        access_token: accessToken,\r\n        user_id: userId,\r\n        pages: pages\r\n      }),\r\n    });\r\n  }\r\n\r\n  async refreshFacebookTokens() {\r\n    return this.request('/social/facebook/refresh-tokens', {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async logoutFacebook() {\r\n    return this.request('/social/facebook/logout', {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  // (No scheduled post methods here anymore)\r\n\r\n  async getSocialPosts(platform = null, limit = 50, socialAccountId = null) {\r\n    const params = new URLSearchParams();\r\n    if (platform) params.append('platform', platform);\r\n    params.append('limit', limit.toString());\r\n    if (socialAccountId) params.append('social_account_id', socialAccountId);\r\n\r\n    return this.request(`/api/social/posts?${params.toString()}`);\r\n  }\r\n\r\n  async connectInstagram(accessToken) {\r\n    return this.request('/social/instagram/connect', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        access_token: accessToken\r\n      }),\r\n    });\r\n  }\r\n\r\n  async createInstagramPost(data) {\r\n    return this.request('/social/instagram/post', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Get Instagram media\r\n  async getInstagramMedia(instagramUserId, limit = 25) {\r\n    return this.request(`/social/instagram/media/${instagramUserId}?limit=${limit}`);\r\n  }\r\n\r\n  // Debug Instagram API\r\n  async debugInstagramApi(instagramUserId) {\r\n    return this.request(`/social/debug/instagram-api-test/${instagramUserId}`);\r\n  }\r\n\r\n  // Test Instagram post creation\r\n  async testInstagramPost(instagramUserId, testImageUrl, testCaption) {\r\n    return this.request(`/social/debug/instagram-test-post/${instagramUserId}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        test_image_url: testImageUrl,\r\n        test_caption: testCaption\r\n      })\r\n    });\r\n  }\r\n\r\n  // Upload image to Cloudinary for Instagram\r\n  async uploadImageToCloudinary(file) {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    // Use custom FormData upload method\r\n    const url = `${this.baseURL}/social/instagram/upload-image`;\r\n    const config = {\r\n      method: 'POST',\r\n      body: formData,\r\n    };\r\n\r\n    // Add authorization header manually for FormData\r\n    if (this.token) {\r\n      config.headers = {\r\n        'Authorization': `Bearer ${this.token}`\r\n      };\r\n      console.log('üîç DEBUG: Token found, adding Authorization header');\r\n    } else {\r\n      console.log('üîç DEBUG: No token found!');\r\n      console.log('üîç DEBUG: this.token:', this.token);\r\n      console.log('üîç DEBUG: localStorage authToken:', localStorage.getItem('authToken'));\r\n    }\r\n\r\n    try {\r\n      console.log(`üîç DEBUG: Uploading image to Cloudinary via ${url}`);\r\n      console.log(`üîç DEBUG: Request config:`, config);\r\n      const response = await fetch(url, config);\r\n\r\n      console.log(`üîç DEBUG: Response status:`, response.status);\r\n      console.log(`üîç DEBUG: Response headers:`, Object.fromEntries(response.headers.entries()));\r\n\r\n      if (!response.ok) {\r\n        let errorData = {};\r\n        try {\r\n          errorData = await response.json();\r\n          console.log(`üîç DEBUG: Error response data:`, errorData);\r\n        } catch (e) {\r\n          console.warn('Failed to parse error response as JSON');\r\n        }\r\n\r\n        let errorMessage = 'Unknown error occurred';\r\n        if (typeof errorData === 'string') {\r\n          errorMessage = errorData;\r\n        } else if (errorData.error) {\r\n          errorMessage = errorData.error;\r\n        } else if (errorData.detail) {\r\n          errorMessage = errorData.detail;\r\n        } else if (errorData.message) {\r\n          errorMessage = errorData.message;\r\n        } else {\r\n          errorMessage = `HTTP ${response.status}: ${response.statusText}`;\r\n        }\r\n\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      const responseData = await response.json();\r\n      console.log(`FormData upload response:`, responseData);\r\n      return responseData;\r\n    } catch (error) {\r\n      console.error(`FormData upload error:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Upload thumbnail to Cloudinary for Instagram reels\r\n  async uploadThumbnailToCloudinary(file) {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    // Use custom FormData upload method\r\n    const url = `${this.baseURL}/social/instagram/upload-thumbnail`;\r\n    const config = {\r\n      method: 'POST',\r\n      body: formData,\r\n    };\r\n\r\n    // Add authorization header manually for FormData\r\n    if (this.token) {\r\n      config.headers = {\r\n        'Authorization': `Bearer ${this.token}`\r\n      };\r\n    }\r\n\r\n    try {\r\n      console.log(`üîç DEBUG: Uploading thumbnail to Cloudinary via ${url}`);\r\n      const response = await fetch(url, config);\r\n\r\n      if (!response.ok) {\r\n        let errorData = {};\r\n        try {\r\n          errorData = await response.json();\r\n        } catch (e) {\r\n          console.warn('Failed to parse error response as JSON');\r\n        }\r\n\r\n        let errorMessage = 'Unknown error occurred';\r\n        if (typeof errorData === 'string') {\r\n          errorMessage = errorData;\r\n        } else if (errorData.error) {\r\n          errorMessage = errorData.error;\r\n        } else if (errorData.detail) {\r\n          errorMessage = errorData.detail;\r\n        } else if (errorData.message) {\r\n          errorMessage = errorData.message;\r\n        } else {\r\n          errorMessage = `HTTP ${response.status}: ${response.statusText}`;\r\n        }\r\n\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      const responseData = await response.json();\r\n      console.log(`Thumbnail upload response:`, responseData);\r\n      return responseData;\r\n    } catch (error) {\r\n      console.error(`Thumbnail upload error:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Upload video to Cloudinary for Instagram\r\n  async uploadVideoToCloudinary(file) {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    // Use custom FormData upload method\r\n    const url = `${this.baseURL}/social/instagram/upload-video`;\r\n    const config = {\r\n      method: 'POST',\r\n      body: formData,\r\n    };\r\n\r\n    // Add authorization header manually for FormData\r\n    if (this.token) {\r\n      config.headers = {\r\n        'Authorization': `Bearer ${this.token}`\r\n      };\r\n    }\r\n\r\n    try {\r\n      console.log(`üîç DEBUG: Uploading video to Cloudinary via ${url}`);\r\n      const response = await fetch(url, config);\r\n\r\n      if (!response.ok) {\r\n        let errorData = {};\r\n        try {\r\n          errorData = await response.json();\r\n        } catch (e) {\r\n          console.warn('Failed to parse error response as JSON');\r\n        }\r\n\r\n        let errorMessage = 'Unknown error occurred';\r\n        if (typeof errorData === 'string') {\r\n          errorMessage = errorData;\r\n        } else if (errorData.error) {\r\n          errorMessage = errorData.error;\r\n        } else if (errorData.detail) {\r\n          errorMessage = errorData.detail;\r\n        } else if (errorData.message) {\r\n          errorMessage = errorData.message;\r\n        } else {\r\n          errorMessage = `HTTP ${response.status}: ${response.statusText}`;\r\n        }\r\n\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      const responseData = await response.json();\r\n      console.log(`Thumbnail upload response:`, responseData);\r\n      return responseData;\r\n    } catch (error) {\r\n      console.error(`Thumbnail upload error:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Google Drive integration for Instagram\r\n  async getGoogleDriveFiles(mimeType = null) {\r\n    const params = mimeType ? `?mime_type=${mimeType}` : '';\r\n    return this.request(`/api/google-drive/files${params}`);\r\n  }\r\n\r\n  async downloadGoogleDriveFile(fileId) {\r\n    return this.request(`/api/google-drive/download/${fileId}`);\r\n  }\r\n\r\n  async getGoogleDriveAuth() {\r\n    return this.request('/google-drive/auth');\r\n  }\r\n\r\n  async getGoogleDriveStatus() {\r\n    return this.request('/google-drive/status');\r\n  }\r\n\r\n  async getGoogleDriveAuthorizeUrl() {\r\n    return this.request('/google-drive/authorize');\r\n  }\r\n\r\n  async getGoogleDriveToken() {\r\n    const response = await this.request('/google-drive/token');\r\n    return response;\r\n  }\r\n\r\n  async debugGoogleDrive() {\r\n    return this.request('/google-drive/debug');\r\n  }\r\n\r\n  async testGoogleDriveImages() {\r\n    return this.request('/google-drive/test-images');\r\n  }\r\n\r\n  async disconnectGoogleDrive() {\r\n    return this.request('/google-drive/disconnect', {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  // Generate Instagram image using Stability AI\r\n  async generateInstagramImage(imagePrompt, postType = 'feed') {\r\n    return this.request('/social/instagram/generate-image', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        prompt: imagePrompt,\r\n        post_type: postType\r\n      }),\r\n    });\r\n  }\r\n\r\n  // Unified Instagram post creation endpoint\r\n  async createUnifiedInstagramPost(instagramUserId, options = {}) {\r\n    const payload = {\r\n      instagram_user_id: instagramUserId,\r\n      caption: options.caption,\r\n      post_type: options.post_type || 'feed',\r\n      media_type: options.media_type || 'image',\r\n      use_ai_text: options.use_ai_text || false,\r\n      use_ai_image: options.use_ai_image || false,\r\n      content_prompt: options.content_prompt,\r\n      image_prompt: options.image_prompt,\r\n      image_url: options.image_url,\r\n      video_url: options.video_url,\r\n      video_filename: options.video_filename,\r\n      media_file: options.media_file,\r\n      media_filename: options.media_filename,\r\n      is_reel: options.is_reel || false,\r\n      thumbnail_url: options.thumbnail_url,\r\n      thumbnail_filename: options.thumbnail_filename,\r\n      thumbnail_file: options.thumbnail_file,\r\n      location: options.location,\r\n      hashtags: options.hashtags\r\n    };\r\n\r\n    // Remove undefined and null values\r\n    const cleanPayload = Object.fromEntries(\r\n      Object.entries(payload).filter(([key, value]) =>\r\n        value !== null && value !== undefined && value !== ''\r\n      )\r\n    );\r\n\r\n    return this.request('/social/instagram/create-post', {\r\n      method: 'POST',\r\n      body: JSON.stringify(cleanPayload),\r\n    });\r\n  }\r\n\r\n  // REPLACE Make.com auto-reply webhook\r\n  async toggleAutoReply(pageId, enabled, responseTemplate = 'Thank you for your comment!', selectedPostIds = []) {\r\n    return this.request('/social/facebook/auto-reply', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        page_id: pageId,\r\n        enabled: enabled,\r\n        response_template: responseTemplate,\r\n        selected_post_ids: selectedPostIds\r\n      }),\r\n    });\r\n  }\r\n\r\n  // Get posts for auto-reply selection\r\n  async getPostsForAutoReply(pageId) {\r\n    return this.request(`/social/facebook/posts-for-auto-reply?page_id=${pageId}`);\r\n  }\r\n\r\n  // Instagram Auto-Reply Methods\r\n  async toggleInstagramAutoReply(instagramUserId, enabled, responseTemplate = 'Thank you for your comment!', selectedPostIds = []) {\r\n    return this.request('/social/instagram/auto-reply', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        instagram_user_id: instagramUserId,\r\n        enabled: enabled,\r\n        response_template: responseTemplate,\r\n        selected_post_ids: selectedPostIds\r\n      }),\r\n    });\r\n  }\r\n\r\n  async getInstagramPostsForAutoReply(instagramUserId) {\r\n    return this.request(`/social/instagram/posts-for-auto-reply?instagram_user_id=${instagramUserId}`);\r\n  }\r\n\r\n  async syncInstagramPosts(instagramUserId) {\r\n    return this.request('/social/instagram/sync-posts', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        instagram_user_id: instagramUserId\r\n      }),\r\n    });\r\n  }\r\n\r\n  // Get connected social accounts\r\n  async getSocialAccounts() {\r\n    return this.request('/social/accounts');\r\n  }\r\n\r\n  async getInstagramAccounts() {\r\n    // This assumes your backend endpoint is /api/social/accounts and returns only Instagram accounts\r\n    try {\r\n      console.log('üîç DEBUG: Fetching Instagram accounts from /social/accounts');\r\n      console.log('üîç DEBUG: Current token:', this.token ? 'Token exists' : 'No token');\r\n      console.log('üîç DEBUG: Base URL:', this.baseURL);\r\n\r\n      const response = await this.request('/social/accounts', {\r\n        method: 'GET',\r\n      });\r\n      console.log('üîç DEBUG: Instagram accounts response:', response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error('üîç DEBUG: Failed to fetch Instagram accounts:', error);\r\n      console.error('üîç DEBUG: Error type:', error.constructor.name);\r\n      console.error('üîç DEBUG: Error message:', error.message);\r\n\r\n      if (error.message.includes('Failed to fetch')) {\r\n        console.error('üîç DEBUG: This is likely a network, CORS, or SSL certificate issue.');\r\n        console.error('üîç DEBUG: Please visit https://localhost:8000/health and https://localhost:8000/api/social/accounts in your browser to accept the SSL certificate.');\r\n        console.error('üîç DEBUG: Also check if backend is running with HTTPS.');\r\n      }\r\n\r\n      if (error.message.includes('Could not validate credentials')) {\r\n        console.error('üîç DEBUG: Authentication failed - token may be expired or invalid.');\r\n        console.error('üîç DEBUG: Please try logging out and logging back in.');\r\n      }\r\n\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Get posts\r\n  async getPosts(platform = null, status = null, limit = 50) {\r\n    const params = new URLSearchParams();\r\n    if (platform) params.append('platform', platform);\r\n    if (status) params.append('status', status);\r\n    if (limit) params.append('limit', limit.toString());\r\n\r\n    const query = params.toString();\r\n    return this.request(`/api/social/posts${query ? `?${query}` : ''}`);\r\n  }\r\n\r\n  // Get automation rules\r\n  async getAutomationRules(platform = null, ruleType = null) {\r\n    const params = new URLSearchParams();\r\n    if (platform) params.append('platform', platform);\r\n    if (ruleType) params.append('rule_type', ruleType);\r\n\r\n    const query = params.toString();\r\n    return this.request(`/social/automation-rules${query ? `?${query}` : ''}`);\r\n  }\r\n\r\n  // Generate content using Groq API\r\n  async generateContent(prompt) {\r\n    return this.request('/ai/generate-content', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        prompt: prompt\r\n      }),\r\n    });\r\n  }\r\n\r\n  async generateInstagramCaption(prompt) {\r\n    try {\r\n      const response = await this.request('/social/instagram/generate-caption', {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n          prompt: prompt\r\n        }),\r\n      });\r\n\r\n      if (!response || !response.content) {\r\n        console.error('Invalid response format from caption generation:', response);\r\n        return {\r\n          success: false,\r\n          error: 'Invalid response format from server'\r\n        };\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        content: response.content,\r\n        ...response\r\n      };\r\n    } catch (error) {\r\n      console.error('Error generating Instagram caption:', error);\r\n      return {\r\n        success: false,\r\n        error: error.message || 'Failed to generate caption',\r\n        details: error.response?.data || error.toString()\r\n      };\r\n    }\r\n  }\r\n\r\n  async generateCaptionWithStrategy(customStrategy, context = \"\", maxLength = 2000) {\r\n    const response = await this.request('/social/generate-caption-with-strategy', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        custom_strategy: customStrategy,\r\n        context: context,\r\n        max_length: maxLength\r\n      }),\r\n    });\r\n    return response;\r\n  }\r\n\r\n  async generateFacebookCaptionWithStrategy(customStrategy, context = \"\", maxLength = 2000) {\r\n    const response = await this.request('/social/facebook/generate-caption-with-strategy', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        custom_strategy: customStrategy,\r\n        context: context,\r\n        max_length: maxLength\r\n      }),\r\n    });\r\n    return response;\r\n  }\r\n\r\n  async generateFacebookBulkCaptions(customStrategy, contexts, maxLength = 2000) {\r\n    const response = await this.request('/social/facebook/generate-bulk-captions', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        custom_strategy: customStrategy,\r\n        contexts: contexts,\r\n        max_length: maxLength\r\n      }),\r\n    });\r\n    return response;\r\n  }\r\n\r\n  async generateBulkCaptions(customStrategy, contexts, maxLength = 2000) {\r\n    const response = await this.request('/social/generate-bulk-captions', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        custom_strategy: customStrategy,\r\n        contexts: contexts,\r\n        max_length: maxLength\r\n      }),\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // Generate Instagram carousel\r\n  async generateInstagramCarousel(prompt, count = 3) {\r\n    const response = await this.request('/social/instagram/generate-carousel', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        prompt: prompt,\r\n        count: count\r\n      }),\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // Post Instagram carousel\r\n  async postInstagramCarousel(instagramUserId, caption, imageUrls) {\r\n    const response = await this.request('/social/instagram/post-carousel', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        instagram_user_id: instagramUserId,\r\n        caption: caption,\r\n        image_urls: imageUrls\r\n      }),\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // Unified Facebook post creation endpoint\r\n  async createFacebookPost(pageId, options = {}) {\r\n    return this.request('/social/facebook/create-post', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        page_id: pageId,\r\n        message: options.message,\r\n        image_url: options.image_url,\r\n        post_type: options.post_type || 'feed',\r\n        use_ai: options.use_ai || false,\r\n        prompt: options.prompt,\r\n        scheduled_time: options.scheduled_time,\r\n        carousel_images: options.carousel_images || [],\r\n        video_url: options.video_url,\r\n        location: options.location,\r\n        hashtags: options.hashtags\r\n      }),\r\n    });\r\n  }\r\n\r\n  // Stability AI Image Generation endpoint (standalone)\r\n  async generateFacebookImage(imagePrompt, postType = 'feed') {\r\n    return this.request('/social/facebook/generate-image', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        prompt: imagePrompt,\r\n        post_type: postType\r\n      }),\r\n    });\r\n  }\r\n\r\n  // Get AI service status including Stability AI\r\n  async getAIServiceStatus() {\r\n    return this.request('/ai/status');\r\n  }\r\n\r\n  // Debug endpoint for Stability AI troubleshooting\r\n  async debugStabilityAI() {\r\n    return this.request('/social/debug/stability-ai-status');\r\n  }\r\n\r\n  // Debug endpoint for testing Facebook image posts\r\n  async debugFacebookImagePost(pageId, message = \"Test post from debug\") {\r\n    return this.request('/social/facebook/debug-image-post', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        page_id: pageId,\r\n        message: message\r\n      }),\r\n    });\r\n  }\r\n\r\n  // Bulk Composer - Schedule multiple posts\r\n  async bulkSchedulePosts(requestData) {\r\n    const response = await this.request('/social/bulk-composer/schedule', {\r\n      method: 'POST',\r\n      body: JSON.stringify(requestData),\r\n    });\r\n    return response;\r\n  }\r\n\r\n  // Notification endpoints\r\n  async getNotifications(limit = 50, offset = 0) {\r\n    const params = new URLSearchParams();\r\n    params.append('limit', limit.toString());\r\n    params.append('offset', offset.toString());\r\n    \r\n    return this.request(`/notifications?${params.toString()}`);\r\n  }\r\n\r\n  async markNotificationRead(notificationId) {\r\n    return this.request(`/notifications/${notificationId}/mark-read`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async markAllNotificationsRead() {\r\n    return this.request('/notifications/mark-all-read', {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async getNotificationPreferences() {\r\n    return this.request('/notification-preferences');\r\n  }\r\n\r\n  async updateNotificationPreferences(preferences) {\r\n    return this.request('/notification-preferences', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(preferences),\r\n    });\r\n  }\r\n\r\n  // Bulk Composer - Schedule multiple posts for Instagram\r\n  async bulkScheduleInstagramPosts({ social_account_id, posts }) {\r\n    // Send social_account_id as a query param, posts as the body\r\n    return this.request(`/social/instagram/bulk-schedule?social_account_id=${encodeURIComponent(social_account_id)}`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(posts),\r\n    });\r\n  }\r\n\r\n  // Bulk Composer - Get scheduled posts\r\n  async getBulkComposerContent(socialAccountId = null) {\r\n    let endpoint = '/social/bulk-composer/content';\r\n    if (socialAccountId) {\r\n      endpoint += `?social_account_id=${socialAccountId}`;\r\n    }\r\n    return this.request(endpoint);\r\n  }\r\n\r\n  // Bulk Composer - Update post caption\r\n  async updateBulkComposerPost(postId, caption) {\r\n    return this.request(`/social/bulk-composer/content/${postId}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify({\r\n        caption: caption\r\n      }),\r\n    });\r\n  }\r\n\r\n  // Bulk Composer - Cancel/delete scheduled post\r\n  async cancelBulkComposerPost(postId) {\r\n    return this.request(`/social/bulk-composer/content/${postId}`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  // LinkedIn endpoints\r\n  async getLinkedInStatus() {\r\n    return this.request('/social/linkedin/status');\r\n  }\r\n\r\n  async getLinkedInConfig() {\r\n    return this.request('/social/linkedin/config');\r\n  }\r\n\r\n  async connectLinkedIn(data) {\r\n    return this.request('/social/linkedin/connect', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async exchangeLinkedInCode(code) {\r\n    return this.request('/social/linkedin/exchange-code', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ code }),\r\n    });\r\n  }\r\n\r\n  async disconnectLinkedIn() {\r\n    return this.request('/social/linkedin/disconnect', {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async refreshLinkedInTokens() {\r\n    return this.request('/social/linkedin/refresh-tokens', {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  // Get Instagram DM auto-reply status\r\n  async getInstagramDmAutoReplyStatus(instagramUserId) {\r\n    return this.request(`/social/instagram/dm-auto-reply/status/${instagramUserId}`);\r\n  }\r\n\r\n  // Enable global Instagram auto-reply\r\n  async enableGlobalInstagramAutoReply(instagramUserId) {\r\n    return this.request(`/social/instagram/auto_reply/global/enable?instagram_user_id=${instagramUserId}`, {\r\n      method: 'POST'\r\n    });\r\n  }\r\n\r\n  // Disable global Instagram auto-reply\r\n  async disableGlobalInstagramAutoReply(instagramUserId) {\r\n    return this.request(`/social/instagram/auto_reply/global/disable?instagram_user_id=${instagramUserId}`, {\r\n      method: 'POST'\r\n    });\r\n  }\r\n\r\n  // Get global auto-reply status\r\n  async getGlobalInstagramAutoReplyStatus(instagramUserId) {\r\n    return this.request(`/social/instagram/auto_reply/global/status?instagram_user_id=${instagramUserId}`);\r\n  }\r\n\r\n  // Get global auto-reply progress\r\n  async getGlobalInstagramAutoReplyProgress(instagramUserId) {\r\n    return this.request(`/social/instagram/auto_reply/global/progress?instagram_user_id=${instagramUserId}`);\r\n  }\r\n\r\n  async getScheduledPosts() {\r\n    // Adjust the endpoint if your backend uses a different path\r\n    return this.request('/social/scheduled-posts');\r\n  }\r\n}\r\n\r\nconst apiClient = new ApiClient();\r\nexport default apiClient;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}