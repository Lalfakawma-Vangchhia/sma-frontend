{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\THORSIGNIA\\\\Projects\\\\automation-dash\\\\frontend\\\\src\\\\components\\\\igBulkComposer.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNotifications } from '../contexts/NotificationContext';\nimport apiClient from '../services/apiClient';\nimport { fileToBase64 } from './FacebookUtils';\nimport './igBulkComposer.css';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction IgBulkComposer({\n  selectedAccount,\n  onClose\n}) {\n  _s();\n  var _mediaPreviewModal$me, _mediaPreviewModal$me2;\n  const {\n    user\n  } = useAuth();\n\n  // Strategy step state\n  const [strategyData, setStrategyData] = useState({\n    promptTemplate: '',\n    customStrategyTemplate: '',\n    brandName: '',\n    hookIdea: '',\n    features: '',\n    location: '',\n    phone: '',\n    website: '',\n    callToAction: '',\n    imagePrompt: '',\n    startDate: '',\n    endDate: '',\n    frequency: 'daily',\n    customCron: '',\n    timeSlot: '09:00'\n  });\n\n  // Composer grid state\n  const [composerRows, setComposerRows] = useState([]);\n  const [selectedRows, setSelectedRows] = useState([]);\n  const [editingCell, setEditingCell] = useState(null);\n  const [dragStartRow, setDragStartRow] = useState(null);\n\n  // Post type state\n  const [postType, setPostType] = useState('photo'); // photo, carousel, reel\n  const [carouselImageCount, setCarouselImageCount] = useState(3);\n\n  // Calendar preview state\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n\n  // Queue state\n  const [isScheduling, setIsScheduling] = useState(false);\n  const [scheduleProgress, setScheduleProgress] = useState(0);\n\n  // Expanded view state\n  const [expandedCaption, setExpandedCaption] = useState(null);\n  const [mediaPreviewModal, setMediaPreviewModal] = useState(null);\n  const [scheduledGridRows, setScheduledGridRows] = useState([]);\n  const navigate = useNavigate();\n\n  // Prompt templates for Instagram\n  const [promptTemplates] = useState([{\n    id: 1,\n    name: 'Daily Inspiration',\n    prompt: 'Share an inspiring quote or motivational message for your Instagram audience'\n  }, {\n    id: 2,\n    name: 'Product Showcase',\n    prompt: 'Highlight your best products with engaging descriptions and hashtags'\n  }, {\n    id: 3,\n    name: 'Behind the Scenes',\n    prompt: 'Share behind-the-scenes content about your business or team'\n  }, {\n    id: 4,\n    name: 'Customer Spotlight',\n    prompt: 'Feature customer testimonials or success stories'\n  }, {\n    id: 5,\n    name: 'Industry Tips',\n    prompt: 'Share valuable tips and insights related to your industry'\n  }, {\n    id: 6,\n    name: 'Lifestyle Content',\n    prompt: 'Share lifestyle content that resonates with your audience'\n  }, {\n    id: 7,\n    name: 'User Generated Content',\n    prompt: 'Repost and credit amazing content from your community'\n  }, {\n    id: 8,\n    name: 'Custom',\n    prompt: 'custom'\n  }]);\n  const gridRef = useRef(null);\n  const carouselInputRefs = useRef({});\n\n  // Initialize composer with default rows\n  useEffect(() => {\n    if (strategyData.startDate && strategyData.frequency) {\n      generateInitialRows();\n    }\n    // eslint-disable-next-line\n  }, [strategyData.startDate, strategyData.endDate, strategyData.frequency, strategyData.timeSlot]);\n  const generateInitialRows = () => {\n    if (!strategyData.startDate) return;\n    const startDateParts = strategyData.startDate.split('-');\n    const startDate = new Date(parseInt(startDateParts[0]), parseInt(startDateParts[1]) - 1, parseInt(startDateParts[2]));\n    let endDate = null;\n    if (strategyData.endDate) {\n      const endDateParts = strategyData.endDate.split('-');\n      endDate = new Date(parseInt(endDateParts[0]), parseInt(endDateParts[1]) - 1, parseInt(endDateParts[2]));\n    }\n    const rows = [];\n    const maxDays = 30; // Instagram's 30-day limit\n    let currentDate = new Date(startDate);\n    let dayCount = 0;\n    let rowCount = 0;\n    if (!endDate) {\n      const formattedDate = startDate.toISOString().split('T')[0];\n      rows.push({\n        id: `row-0`,\n        caption: '',\n        mediaFile: null,\n        mediaPreview: null,\n        thumbnailFile: null,\n        thumbnailPreview: null,\n        postType: postType.toLowerCase(),\n        carouselImageCount: carouselImageCount,\n        carouselImages: [],\n        scheduledDate: formattedDate,\n        scheduledTime: strategyData.timeSlot,\n        status: 'draft',\n        isSelected: false\n      });\n    } else {\n      // Fix: include the end date by using <= in the comparison\n      while (dayCount < maxDays && rowCount < 30) {\n        if (endDate && currentDate > endDate) break;\n        const maxAllowedDate = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000);\n        if (currentDate > maxAllowedDate) break;\n        let shouldInclude = false;\n        switch (strategyData.frequency) {\n          case 'daily':\n            shouldInclude = true;\n            break;\n          case 'weekly':\n            shouldInclude = currentDate.getDay() === startDate.getDay();\n            break;\n          case 'monthly':\n            shouldInclude = currentDate.getDate() === startDate.getDate();\n            break;\n          case 'custom':\n            shouldInclude = true;\n            break;\n          default:\n            shouldInclude = true;\n        }\n        if (shouldInclude) {\n          // Format as YYYY-MM-DD using local date parts\n          const yyyy = currentDate.getFullYear();\n          const mm = String(currentDate.getMonth() + 1).padStart(2, '0');\n          const dd = String(currentDate.getDate()).padStart(2, '0');\n          const formattedDate = `${yyyy}-${mm}-${dd}`;\n          rows.push({\n            id: `row-${rowCount}`,\n            caption: '',\n            mediaFile: null,\n            mediaPreview: null,\n            thumbnailFile: null,\n            thumbnailPreview: null,\n            postType: postType.toLowerCase(),\n            carouselImageCount: carouselImageCount,\n            carouselImages: [],\n            scheduledDate: formattedDate,\n            scheduledTime: strategyData.timeSlot,\n            status: 'draft',\n            isSelected: false\n          });\n          rowCount++;\n        }\n        // Fix: increment date at the end, and break if we've reached the end date\n        if (endDate && currentDate.getTime() === endDate.getTime()) break;\n        currentDate.setDate(currentDate.getDate() + 1);\n        dayCount++;\n      }\n    }\n    setComposerRows(rows);\n  };\n  const handleStrategyChange = (field, value) => {\n    setStrategyData(prev => {\n      const newData = {\n        ...prev,\n        [field]: value\n      };\n      // If start date is changed and end date is before it, clear end date\n      if (field === 'startDate' && prev.endDate && value > prev.endDate) {\n        newData.endDate = '';\n      }\n      return newData;\n    });\n\n    // If prompt template is selected, apply it to all rows\n    if (field === 'promptTemplate' && value && value !== 'custom') {\n      setComposerRows(prev => prev.map(row => ({\n        ...row,\n        caption: value\n      })));\n    }\n  };\n\n  // Update post type for all rows\n  const handlePostTypeChange = newPostType => {\n    setPostType(newPostType);\n    setComposerRows(prev => prev.map(row => ({\n      ...row,\n      postType: newPostType.toLowerCase(),\n      carouselImageCount: newPostType === 'carousel' ? carouselImageCount : null,\n      carouselImages: newPostType === 'carousel' ? row.carouselImages || [] : [],\n      // Clear media for photo/reel when switching to carousel\n      mediaFile: newPostType === 'carousel' ? null : row.mediaFile,\n      mediaPreview: newPostType === 'carousel' ? null : row.mediaPreview,\n      // Clear thumbnail when switching away from reel\n      thumbnailFile: newPostType === 'reel' ? row.thumbnailFile : null,\n      thumbnailPreview: newPostType === 'reel' ? row.thumbnailPreview : null\n    })));\n  };\n\n  // Update carousel image count for all rows\n  const handleCarouselImageCountChange = newCount => {\n    setCarouselImageCount(newCount);\n    setComposerRows(prev => prev.map(row => ({\n      ...row,\n      carouselImageCount: row.postType === 'carousel' ? newCount : row.carouselImageCount\n    })));\n  };\n  const handleRowSelect = rowId => {\n    setSelectedRows(prev => prev.includes(rowId) ? prev.filter(id => id !== rowId) : [...prev, rowId]);\n  };\n  const handleSelectAll = () => {\n    if (selectedRows.length === composerRows.length) {\n      setSelectedRows([]);\n    } else {\n      setSelectedRows(composerRows.map(row => row.id));\n    }\n  };\n  const handleCellEdit = (rowId, field, value) => {\n    setComposerRows(prev => prev.map(row => row.id === rowId ? {\n      ...row,\n      [field]: field === 'postType' ? value.toLowerCase() : value,\n      status: (() => {\n        // For carousel posts, check if we have enough images\n        if (field === 'postType' && value.toLowerCase() === 'carousel') {\n          return 'draft'; // Reset status when switching to carousel\n        }\n\n        // For carousel posts, validate image count\n        if (row.postType === 'carousel') {\n          const hasCaption = (row.caption || '').trim();\n          const hasEnoughImages = (row.carouselImages || []).length >= 3;\n          return hasCaption && hasEnoughImages ? 'ready' : 'draft';\n        }\n\n        // For other post types, use existing logic\n        if (field === 'caption' || field === 'mediaFile' || field === 'mediaPreview') {\n          const hasCaption = field === 'caption' ? value.trim() : (row.caption || '').trim();\n          const hasMedia = field === 'mediaFile' ? value : row.mediaFile || row.mediaPreview;\n          return hasCaption && hasMedia ? 'ready' : 'draft';\n        }\n        return row.status;\n      })()\n    } : row));\n  };\n  const handleMediaUpload = async (rowId, event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Find the row to determine post type\n    const row = composerRows.find(r => r.id === rowId);\n    if (!row) return;\n\n    // --- REELS VIDEO UPLOAD LOGIC ---\n    if (row.postType === 'reel') {\n      alert('Your video is converted to: 1080x1920 as instagram policy.');\n      // Proceed to upload to backend as before...\n    }\n\n    // --- PHOTO/CAROUSEL LOGIC (unchanged) ---\n    const reader = new FileReader();\n    reader.onload = e => {\n      setComposerRows(prev => prev.map(row => row.id === rowId ? {\n        ...row,\n        mediaFile: file,\n        mediaPreview: e.target.result,\n        status: (row.caption || '').trim() ? 'ready' : 'draft'\n      } : row));\n    };\n    reader.readAsDataURL(file);\n  };\n  const handleGenerateMedia = async rowId => {\n    try {\n      const row = composerRows.find(r => r.id === rowId);\n      if (!row || !(row.caption || '').trim()) {\n        alert('Please add a caption first to generate an image.');\n        return;\n      }\n      console.log(`Generating image for row ${rowId} with caption: ${row.caption.substring(0, 50)}...`);\n\n      // Truncate caption to 500 characters for image generation\n      const imagePrompt = row.caption.trim().substring(0, 500);\n      console.log(`Using image prompt (truncated): ${imagePrompt.substring(0, 100)}...`);\n      const response = await apiClient.generateInstagramImage(imagePrompt, 'feed');\n      if (response.success && response.data && response.data.image_url) {\n        console.log(`Successfully generated image for row ${rowId}:`, response.data.image_url);\n        setComposerRows(prev => prev.map(r => r.id === rowId ? {\n          ...r,\n          mediaFile: null,\n          mediaPreview: response.data.image_url,\n          status: (r.caption || '').trim() ? 'ready' : 'draft'\n        } : r));\n      } else {\n        console.log(`Failed to generate image for row ${rowId}:`, response);\n        alert('Failed to generate image. Please try again.');\n      }\n    } catch (error) {\n      console.error(`Error generating image for row ${rowId}:`, error);\n      alert('Failed to generate image. Please try again.');\n    }\n  };\n  const handleGenerateAllCaptions = async () => {\n    if (selectedRows.length === 0) {\n      alert('Please select at least one row to generate captions for.');\n      return;\n    }\n    if (!strategyData.promptTemplate) {\n      alert('Please select a strategy template first.');\n      return;\n    }\n    setIsScheduling(true);\n    setScheduleProgress(0);\n    try {\n      const selectedComposerRows = composerRows.filter(row => selectedRows.includes(row.id));\n      const captions = [];\n\n      // Create the base prompt based on the selected template type\n      let prompt = '';\n      if (strategyData.promptTemplate === 'custom') {\n        // Build a detailed prompt for custom templates\n        prompt = `\n          Brand Name: ${strategyData.brandName || 'Not specified'}\n          Hook Idea: ${strategyData.hookIdea || 'Not specified'}\n          Key Features: ${strategyData.features || 'Not specified'}\n          Location: ${strategyData.location || 'Not specified'}\n          Phone: ${strategyData.phone || 'Not specified'}\n          Website: ${strategyData.website || 'Not specified'}\n          Call to Action: ${strategyData.callToAction || 'Not specified'}\n          Image Prompt: ${strategyData.imagePrompt || 'Not specified'}\n          \n          Custom Template:\n          ${strategyData.customStrategyTemplate || ''}\n        `;\n      } else {\n        // Use the selected predefined template\n        const selectedTemplate = promptTemplates.find(t => t.prompt === strategyData.promptTemplate);\n        if (!selectedTemplate) {\n          alert('Invalid strategy template selected.');\n          setIsScheduling(false);\n          return;\n        }\n        prompt = selectedTemplate.prompt;\n      }\n\n      // Generate captions for each selected row\n      for (let i = 0; i < selectedComposerRows.length; i++) {\n        try {\n          const row = selectedComposerRows[i];\n          const context = {\n            scheduledDate: row.scheduledDate\n            // Add any other context you want to include\n          };\n\n          // Add context to the prompt\n          const fullPrompt = `${prompt}\\n\\nContext: ${JSON.stringify(context, null, 2)}`;\n          const captionResponse = await apiClient.generateInstagramCaption(fullPrompt);\n          if (captionResponse.success) {\n            captions.push({\n              content: captionResponse.content || captionResponse.generated_text || 'No content generated',\n              context: context.scheduledDate,\n              success: true\n            });\n          } else {\n            console.error('Caption generation failed:', captionResponse.error);\n            captions.push({\n              content: `Failed to generate caption for: ${context.scheduledDate}`,\n              context: context.scheduledDate,\n              success: false,\n              error: captionResponse.error || 'Unknown error'\n            });\n          }\n        } catch (error) {\n          console.error('Error generating caption:', error);\n          captions.push({\n            content: `Error generating caption for: ${selectedComposerRows[i].scheduledDate}`,\n            context: selectedComposerRows[i].scheduledDate,\n            success: false,\n            error: error.message\n          });\n        }\n\n        // Update progress\n        setScheduleProgress(Math.round((i + 1) / selectedComposerRows.length * 100));\n      }\n\n      // Update the rows with generated captions\n      setComposerRows(prev => prev.map(row => {\n        if (!selectedRows.includes(row.id)) return row;\n        const caption = captions.find(c => c.context === row.scheduledDate);\n        if (caption && caption.success) {\n          return {\n            ...row,\n            caption: caption.content,\n            status: 'ready'\n          };\n        }\n        return row;\n      }));\n\n      // Show success/failure summary\n      const successCount = captions.filter(c => c.success).length;\n      const failedCount = captions.length - successCount;\n      let message = '';\n      if (successCount > 0 && failedCount === 0) {\n        message = `Successfully generated captions for ${successCount} ${successCount === 1 ? 'post' : 'posts'}.`;\n      } else if (successCount > 0) {\n        message = `Generated ${successCount} captions successfully, but failed to generate ${failedCount}.`;\n      } else {\n        message = 'Failed to generate any captions. Please try again.';\n      }\n      alert(message);\n    } catch (error) {\n      console.error('Unexpected error in handleGenerateAllCaptions:', error);\n      alert('An unexpected error occurred while generating captions. Please try again.');\n    } finally {\n      setIsScheduling(false);\n      setScheduleProgress(0);\n    }\n  };\n  const handleGenerateAllImages = async () => {\n    if (selectedRows.length === 0) {\n      alert('Please select at least one row to generate images.');\n      return;\n    }\n    setIsScheduling(true);\n    setScheduleProgress(0);\n    try {\n      const selectedComposerRows = composerRows.filter(row => selectedRows.includes(row.id));\n      let successCount = 0;\n      let errorCount = 0;\n      for (let i = 0; i < selectedComposerRows.length; i++) {\n        const row = selectedComposerRows[i];\n        if (!row.caption || !(row.caption || '').trim()) {\n          console.log(`Skipping image generation for row ${row.id} - no caption available`);\n          continue;\n        }\n        try {\n          console.log(`Generating image for row ${row.id} with caption: ${row.caption.substring(0, 50)}...`);\n\n          // Truncate caption to 500 characters for image generation\n          const imagePrompt = row.caption.trim().substring(0, 500);\n          console.log(`Using image prompt (truncated): ${imagePrompt.substring(0, 100)}...`);\n\n          // Generate image using Stability AI with the caption as prompt\n          const response = await apiClient.generateInstagramImage(imagePrompt, 'feed');\n          if (response.success && response.data && response.data.image_url) {\n            console.log(`Successfully generated image for row ${row.id}:`, response.data.image_url);\n            setComposerRows(prev => prev.map(r => r.id === row.id ? {\n              ...r,\n              mediaFile: null,\n              mediaPreview: response.data.image_url,\n              status: (r.caption || '').trim() ? 'ready' : 'draft'\n            } : r));\n            successCount++;\n          } else {\n            console.log(`Failed to generate image for row ${row.id}:`, response);\n            errorCount++;\n          }\n        } catch (error) {\n          console.error(`Error generating image for row ${row.id}:`, error);\n          errorCount++;\n        }\n      }\n      if (successCount > 0) {\n        alert(`Image generation completed! Successfully generated ${successCount} images${errorCount > 0 ? `, ${errorCount} failed` : ''}`);\n      } else {\n        alert('Failed to generate any images. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error in bulk image generation:', error);\n      alert('Failed to generate images. Please try again.');\n    } finally {\n      setIsScheduling(false);\n      setScheduleProgress(0);\n    }\n  };\n  const handleExpandCaption = rowId => {\n    const row = composerRows.find(r => r.id === rowId);\n    if (row) setExpandedCaption(row);\n  };\n  const handleViewMedia = rowId => {\n    const row = composerRows.find(r => r.id === rowId);\n    if (row && (row.mediaPreview || row.mediaFile)) setMediaPreviewModal(row);\n  };\n  const handleSaveExpandedCaption = (rowId, newCaption) => {\n    setComposerRows(prev => prev.map(row => row.id === rowId ? {\n      ...row,\n      caption: newCaption,\n      status: (newCaption || '').trim() && (row.mediaFile || row.mediaPreview) ? 'ready' : 'draft'\n    } : row));\n    setExpandedCaption(null);\n  };\n  const handleThumbnailUpload = async (rowId, event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      alert('Please select an image file for the thumbnail.');\n      return;\n    }\n\n    // Show loading state\n    setComposerRows(prev => prev.map(row => row.id === rowId ? {\n      ...row,\n      thumbnailUploading: true\n    } : row));\n    try {\n      console.log(`📤 Uploading thumbnail for row ${rowId}: ${file.name}`);\n\n      // Upload thumbnail to Cloudinary via backend\n      const uploadResponse = await apiClient.uploadThumbnailToCloudinary(file);\n      if (uploadResponse && uploadResponse.success && uploadResponse.data && uploadResponse.data.url) {\n        console.log(`✅ Thumbnail uploaded successfully: ${uploadResponse.data.url}`);\n\n        // Update row with Cloudinary URL\n        setComposerRows(prev => prev.map(row => row.id === rowId ? {\n          ...row,\n          thumbnailFile: null,\n          // Clear file since we have URL now\n          thumbnailPreview: uploadResponse.data.url,\n          // Use Cloudinary URL\n          thumbnailUrl: uploadResponse.data.url,\n          // Store Cloudinary URL\n          thumbnailUploading: false\n        } : row));\n        alert('Thumbnail uploaded successfully! It will be optimized for Instagram reel cover image requirements.');\n      } else {\n        console.error(`❌ Failed to upload thumbnail:`, uploadResponse);\n        alert('Failed to upload thumbnail. Please try again.');\n\n        // Clear loading state\n        setComposerRows(prev => prev.map(row => row.id === rowId ? {\n          ...row,\n          thumbnailUploading: false\n        } : row));\n      }\n    } catch (error) {\n      console.error('Error uploading thumbnail:', error);\n      alert(`Failed to upload thumbnail: ${error.message}`);\n\n      // Clear loading state\n      setComposerRows(prev => prev.map(row => row.id === rowId ? {\n        ...row,\n        thumbnailUploading: false\n      } : row));\n    }\n  };\n  const handleRemoveThumbnail = rowId => {\n    setComposerRows(prev => prev.map(row => row.id === rowId ? {\n      ...row,\n      thumbnailFile: null,\n      thumbnailPreview: null,\n      thumbnailUrl: null // Clear Cloudinary URL as well\n    } : row));\n  };\n  const handleRemoveMedia = rowId => {\n    setComposerRows(prev => prev.map(row => row.id === rowId ? {\n      ...row,\n      mediaFile: null,\n      mediaPreview: null,\n      thumbnailFile: null,\n      thumbnailPreview: null,\n      carouselImages: row.postType === 'carousel' ? [] : null,\n      status: (row.caption || '').trim() ? 'draft' : 'draft'\n    } : row));\n  };\n  const handleGenerateCarousel = async rowId => {\n    try {\n      const row = composerRows.find(r => r.id === rowId);\n      if (!row || !(row.caption || '').trim()) {\n        alert('Please add a caption first to generate carousel images.');\n        return;\n      }\n      console.log(`Generating carousel for row ${rowId} with caption: ${row.caption.substring(0, 50)}...`);\n      const imagePrompt = row.caption.trim().substring(0, 500);\n      const imageCount = row.carouselImageCount || 3;\n      if (imageCount < 3 || imageCount > 7) {\n        alert('Carousel must have between 3 and 7 images.');\n        return;\n      }\n      console.log(`🎨 Generating ${imageCount} carousel images with prompt: ${imagePrompt}`);\n      const response = await apiClient.generateInstagramCarousel(imagePrompt, imageCount);\n      if (response.success && response.image_urls && response.image_urls.length >= 3) {\n        console.log(`Successfully generated carousel for row ${rowId}:`, response.image_urls);\n        setComposerRows(prev => prev.map(r => r.id === rowId ? {\n          ...r,\n          carouselImages: response.image_urls,\n          status: (() => {\n            const hasCaption = (r.caption || '').trim();\n            const hasEnoughImages = response.image_urls.length >= 3;\n            return hasCaption && hasEnoughImages ? 'ready' : 'draft';\n          })()\n        } : r));\n      } else {\n        console.log(`Failed to generate carousel for row ${rowId}:`, response);\n        const errorMsg = response.error || 'Failed to generate enough carousel images. Please try again.';\n        alert(`Failed to generate carousel: ${errorMsg}`);\n      }\n    } catch (error) {\n      console.error(`Error generating carousel for row ${rowId}:`, error);\n      alert('Error generating carousel images. Please try again.');\n    }\n  };\n  const handleCarouselUpload = async (rowId, event) => {\n    const files = Array.from(event.target.files);\n    if (files.length === 0) return;\n    const row = composerRows.find(r => r.id === rowId);\n    const maxImages = row.carouselImageCount || 3;\n    const minImages = 3;\n    if (files.length < minImages) {\n      alert(`Please select at least ${minImages} images for a carousel post.`);\n      return;\n    }\n    if (files.length > maxImages) {\n      alert(`Please select only ${maxImages} images for this carousel.`);\n      return;\n    }\n    try {\n      console.log(`🖼️ Uploading ${files.length} carousel images for row ${rowId}`);\n      const imageUrls = [];\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n\n        // Validate file type\n        if (!file.type.startsWith('image/')) {\n          alert(`File ${file.name} is not an image. Please select only image files.`);\n          continue;\n        }\n        console.log(`📤 Uploading carousel image ${i + 1}/${files.length}: ${file.name}`);\n\n        // Upload to Cloudinary\n        const uploadResponse = await apiClient.uploadImageToCloudinary(file);\n        if (uploadResponse && uploadResponse.success && uploadResponse.data && uploadResponse.data.url) {\n          imageUrls.push(uploadResponse.data.url);\n          console.log(`✅ Carousel image ${i + 1} uploaded: ${uploadResponse.data.url}`);\n        } else {\n          console.error(`❌ Failed to upload carousel image ${i + 1}:`, uploadResponse);\n          alert(`Failed to upload image ${file.name}. Please try again.`);\n          return;\n        }\n      }\n      if (imageUrls.length >= minImages) {\n        setComposerRows(prev => prev.map(r => r.id === rowId ? {\n          ...r,\n          carouselImages: imageUrls,\n          status: (() => {\n            const hasCaption = (r.caption || '').trim();\n            const hasEnoughImages = imageUrls.length >= 3;\n            return hasCaption && hasEnoughImages ? 'ready' : 'draft';\n          })()\n        } : r));\n        console.log(`✅ Successfully uploaded ${imageUrls.length} carousel images for row ${rowId}`);\n      } else {\n        alert(`Please upload at least ${minImages} images for a carousel post.`);\n      }\n\n      // Clear the file input\n      if (carouselInputRefs.current[rowId]) {\n        carouselInputRefs.current[rowId].value = '';\n      }\n    } catch (error) {\n      console.error('Error processing carousel upload:', error);\n      alert('Error uploading carousel images. Please try again.');\n    }\n  };\n  const handleDuplicateRow = rowId => {\n    const rowToDuplicate = composerRows.find(row => row.id === rowId);\n    if (rowToDuplicate) {\n      const newRow = {\n        ...rowToDuplicate,\n        id: `row-${Date.now()}-${Math.random()}`,\n        scheduledDate: new Date(rowToDuplicate.scheduledDate).toISOString().split('T')[0],\n        postType: rowToDuplicate.postType ? rowToDuplicate.postType.toLowerCase() : 'photo'\n      };\n      setComposerRows(prev => [...prev, newRow]);\n    }\n  };\n  const handleDeleteRow = rowId => {\n    setComposerRows(prev => prev.filter(row => row.id !== rowId));\n    setSelectedRows(prev => prev.filter(id => id !== rowId));\n  };\n  const handleBulkDelete = () => {\n    setComposerRows(prev => prev.filter(row => !selectedRows.includes(row.id)));\n    setSelectedRows([]);\n  };\n  const handleTimeShift = direction => {\n    setComposerRows(prev => prev.map(row => {\n      if (selectedRows.includes(row.id)) {\n        const [hours, minutes] = row.scheduledTime.split(':');\n        let newHours = parseInt(hours) + (direction === 'forward' ? 1 : -1);\n        if (newHours < 0) newHours = 23;\n        if (newHours > 23) newHours = 0;\n        return {\n          ...row,\n          scheduledTime: `${newHours.toString().padStart(2, '0')}:${minutes}`\n        };\n      }\n      return row;\n    }));\n  };\n  const handleDragStart = rowId => setDragStartRow(rowId);\n  const handleDragOver = e => e.preventDefault();\n  const handleDrop = targetRowId => {\n    if (dragStartRow && dragStartRow !== targetRowId) {\n      const rows = [...composerRows];\n      const sourceIndex = rows.findIndex(row => row.id === dragStartRow);\n      const targetIndex = rows.findIndex(row => row.id === targetRowId);\n      const [movedRow] = rows.splice(sourceIndex, 1);\n      rows.splice(targetIndex, 0, movedRow);\n      setComposerRows(rows);\n    }\n    setDragStartRow(null);\n  };\n  const handleScheduleAll = async () => {\n    if (!selectedAccount || composerRows.length === 0) return;\n    setIsScheduling(true);\n    setScheduleProgress(0);\n    try {\n      const readyRows = composerRows.filter(row => row.status === 'ready');\n      console.log(`🔄 Starting bulk scheduling for ${readyRows.length} posts...`);\n\n      // Progress tracking for media processing\n      let processedCount = 0;\n      const totalPosts = readyRows.length;\n      const postsWithMedia = await Promise.all(readyRows.map(async (row, index) => {\n        const basePost = {\n          caption: row.caption,\n          scheduled_datetime: `${row.scheduledDate}T${row.scheduledTime}:00+05:30`,\n          scheduled_date: row.scheduledDate,\n          scheduled_time: row.scheduledTime,\n          post_type: (row.postType || 'photo').toLowerCase()\n        };\n        if (row.postType === 'photo') {\n          if (row.mediaFile) {\n            const result = {\n              ...basePost,\n              media_file: await fileToBase64(row.mediaFile),\n              media_filename: row.mediaFile.name\n            };\n            processedCount++;\n            setScheduleProgress(processedCount / totalPosts * 30);\n            return result;\n          } else if (row.mediaPreview && row.mediaPreview.startsWith('data:')) {\n            const result = {\n              ...basePost,\n              media_file: row.mediaPreview,\n              media_filename: 'generated_image.jpg'\n            };\n            processedCount++;\n            setScheduleProgress(processedCount / totalPosts * 30);\n            return result;\n          } else if (row.mediaPreview && row.mediaPreview.startsWith('http')) {\n            const result = {\n              ...basePost,\n              image_prompt: row.caption.substring(0, 200)\n            };\n            processedCount++;\n            setScheduleProgress(processedCount / totalPosts * 30);\n            return result;\n          } else {\n            const result = {\n              ...basePost,\n              image_prompt: strategyData.imagePrompt || row.caption.substring(0, 200)\n            };\n            processedCount++;\n            setScheduleProgress(processedCount / totalPosts * 30);\n            return result;\n          }\n        } else if (row.postType === 'carousel') {\n          if (row.carouselImages && row.carouselImages.length > 0) {\n            const carouselFiles = row.carouselImages;\n            const result = {\n              ...basePost,\n              carousel_images: carouselFiles,\n              carousel_filenames: carouselFiles.map((_, idx) => `carousel_image_${idx + 1}.jpg`)\n            };\n            processedCount++;\n            setScheduleProgress(processedCount / totalPosts * 30);\n            return result;\n          } else {\n            const result = {\n              ...basePost,\n              carousel_image_count: row.carouselImageCount || 3,\n              image_prompt: strategyData.imagePrompt || row.caption.substring(0, 200)\n            };\n            processedCount++;\n            setScheduleProgress(processedCount / totalPosts * 30);\n            return result;\n          }\n        } else if (row.postType === 'reel') {\n          if (row.mediaFile) {\n            const result = {\n              ...basePost,\n              media_file: await fileToBase64(row.mediaFile),\n              media_filename: row.mediaFile.name\n            };\n\n            // Add thumbnail if available - prioritize Cloudinary URL over file\n            if (row.thumbnailUrl && row.thumbnailUrl.startsWith('http')) {\n              result.thumbnail_url = row.thumbnailUrl;\n            } else if (row.thumbnailPreview && row.thumbnailPreview.startsWith('http')) {\n              result.thumbnail_url = row.thumbnailPreview;\n            } else if (row.thumbnailFile) {\n              result.thumbnail_file = await fileToBase64(row.thumbnailFile);\n              result.thumbnail_filename = row.thumbnailFile.name;\n            }\n            processedCount++;\n            setScheduleProgress(processedCount / totalPosts * 30);\n            return result;\n          } else if (row.mediaPreview && row.mediaPreview.startsWith('data:')) {\n            const result = {\n              ...basePost,\n              media_file: row.mediaPreview,\n              media_filename: 'generated_video.mp4'\n            };\n\n            // Add thumbnail if available - prioritize Cloudinary URL over file\n            if (row.thumbnailUrl && row.thumbnailUrl.startsWith('http')) {\n              result.thumbnail_url = row.thumbnailUrl;\n            } else if (row.thumbnailPreview && row.thumbnailPreview.startsWith('http')) {\n              result.thumbnail_url = row.thumbnailPreview;\n            } else if (row.thumbnailFile) {\n              result.thumbnail_file = await fileToBase64(row.thumbnailFile);\n              result.thumbnail_filename = row.thumbnailFile.name;\n            }\n            processedCount++;\n            setScheduleProgress(processedCount / totalPosts * 30);\n            return result;\n          } else {\n            const result = {\n              ...basePost,\n              image_prompt: strategyData.imagePrompt || row.caption.substring(0, 200)\n            };\n            processedCount++;\n            setScheduleProgress(processedCount / totalPosts * 30);\n            return result;\n          }\n        }\n        processedCount++;\n        setScheduleProgress(processedCount / totalPosts * 30);\n        return basePost;\n      }));\n\n      // Final normalization: ensure all outgoing post_type values are lowercase\n      const normalizedPostsWithMedia = postsWithMedia.map(post => ({\n        ...post,\n        post_type: (post.post_type || 'photo').toLowerCase()\n      }));\n      const bulkData = {\n        social_account_id: selectedAccount.id,\n        posts: normalizedPostsWithMedia\n      };\n      console.log(`🚀 Sending ${normalizedPostsWithMedia.length} posts to backend for scheduling...`);\n      setScheduleProgress(40); // 40% for API call start\n\n      const response = await apiClient.bulkScheduleInstagramPosts(bulkData);\n      setScheduleProgress(90); // 90% for API response\n      console.log('Bulk schedule response:', response);\n      if (response && response.success) {\n        var _response$scheduled_p;\n        console.log(`✅ Successfully scheduled ${((_response$scheduled_p = response.scheduled_posts) === null || _response$scheduled_p === void 0 ? void 0 : _response$scheduled_p.length) || 0} posts`);\n        setComposerRows(prev => prev.map(row => readyRows.some(r => r.id === row.id) ? {\n          ...row,\n          status: 'scheduled'\n        } : row));\n        setScheduleProgress(100);\n        setScheduledGridRows(response.scheduled_posts || []);\n        // Redirect to InstagramPage with scheduled posts for grid display\n        navigate('/instagram', {\n          state: {\n            scheduledGridRows: response.scheduled_posts || []\n          }\n        });\n      } else if (response && Array.isArray(response.results)) {\n        // Handle legacy or alternate backend response\n        const successCount = response.results.filter(r => r.success).length;\n        const failedCount = response.results.filter(r => !r.success).length;\n        let errorMsg = `Scheduled ${successCount} posts successfully.`;\n        if (failedCount > 0) {\n          errorMsg += `\\n${failedCount} posts failed. Check console for details.`;\n          response.results.forEach((result, idx) => {\n            if (!result.success) {\n              errorMsg += `\\nPost #${idx + 1}: ${result.error || result.message || 'Unknown error'}`;\n            }\n          });\n        }\n        alert(errorMsg);\n        setComposerRows(prev => prev.map(row => {\n          const result = response.results.find(r => r.caption === row.caption && r.scheduled_date === row.scheduledDate);\n          if (result) {\n            return {\n              ...row,\n              status: result.success ? 'scheduled' : 'failed',\n              error: result.success ? null : result.error || 'Unknown error'\n            };\n          }\n          return row;\n        }));\n        setScheduleProgress(100);\n        setScheduledGridRows(response.results.filter(r => r.success));\n        navigate('/instagram', {\n          state: {\n            scheduledGridRows: response.results.filter(r => r.success)\n          }\n        });\n      } else {\n        let errorMsg = 'Error scheduling Instagram posts.';\n        if (response && response.failed_posts && response.failed_posts.length > 0) {\n          errorMsg += '\\nFailed posts:';\n          response.failed_posts.forEach(fp => {\n            errorMsg += `\\nPost #${fp.index + 1}: ${fp.error}`;\n          });\n        } else if (response && response.message) {\n          errorMsg += `\\n${response.message}`;\n        } else if (response && response.errorData) {\n          errorMsg += `\\nAPI Error: ${JSON.stringify(response.errorData)}`;\n        }\n        alert(errorMsg);\n        console.error('Bulk scheduling error:', response);\n      }\n    } catch (error) {\n      let errorMsg = 'Error scheduling Instagram posts. Please try again.';\n      // Check if any of the readyRows are reels\n      const hasReel = composerRows.filter(row => selectedRows.includes(row.id)).some(row => (row.postType || '').toLowerCase() === 'reel');\n      if (error && error.error === 'timeout') {\n        if (hasReel) {\n          errorMsg = 'Your reel is being processed and will be scheduled soon. Please check back in a few minutes.';\n        } else {\n          errorMsg = 'Request timed out. Video processing may take longer. Please try again or check your video file size.';\n        }\n      } else if (error && error.errorData) {\n        errorMsg += `\\nAPI Error: ${JSON.stringify(error.errorData)}`;\n      } else if (error && error.message) {\n        errorMsg += `\\n${error.message}`;\n      }\n      alert(errorMsg);\n      console.error('Bulk scheduling exception:', error);\n    } finally {\n      setIsScheduling(false);\n      setScheduleProgress(0);\n    }\n  };\n\n  // Calendar day click logic\n  const handleCalendarDateSelect = date => {\n    setStrategyData(prev => ({\n      ...prev,\n      startDate: date.toISOString().split('T')[0]\n    }));\n  };\n\n  // UI helpers\n  const getStatusIcon = status => {\n    switch (status) {\n      case 'published':\n        return '✓';\n      case 'failed':\n        return '✗';\n      case 'scheduled':\n        return '⏰';\n      case 'ready':\n        return '🟢';\n      default:\n        return '📝';\n    }\n  };\n  const getStatusClass = status => {\n    switch (status) {\n      case 'published':\n        return 'ig-status-published';\n      case 'failed':\n        return 'ig-status-failed';\n      case 'scheduled':\n        return 'ig-status-scheduled';\n      case 'ready':\n        return 'ig-status-ready';\n      default:\n        return 'ig-status-draft';\n    }\n  };\n\n  // Calendar helpers\n  const generateCalendarDays = (year, month) => {\n    const daysInMonth = new Date(year, month + 1, 0).getDate();\n    const firstDayOfMonth = new Date(year, month, 1).getDay();\n    const days = [];\n    for (let i = 0; i < firstDayOfMonth; i++) days.push({\n      day: null,\n      date: null\n    });\n    for (let i = 1; i <= daysInMonth; i++) {\n      const date = new Date(year, month, i);\n      days.push({\n        day: i,\n        date\n      });\n    }\n    return days;\n  };\n  const getPostsForDate = date => {\n    // Format date as YYYY-MM-DD using local date parts\n    const yyyy = date.getFullYear();\n    const mm = String(date.getMonth() + 1).padStart(2, '0');\n    const dd = String(date.getDate()).padStart(2, '0');\n    const dateString = `${yyyy}-${mm}-${dd}`;\n    return composerRows.filter(row => row.scheduledDate === dateString);\n  };\n  const handleRemoveCarouselImages = rowId => {\n    setComposerRows(prev => prev.map(r => r.id === rowId ? {\n      ...r,\n      carouselImages: [],\n      status: 'draft' // Always reset to draft when removing images\n    } : r));\n    console.log(`🗑️ Removed carousel images for row ${rowId}`);\n  };\n\n  // --- RENDER ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ig-bulk-composer\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ig-bulk-composer-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Instagram Bulk Composer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1154,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ig-bulk-composer-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ig-strategy-step\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Step 1: Strategy & Schedule\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ig-strategy-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Post Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1165,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-post-type-toggle\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: postType === 'photo' ? 'active' : '',\n                onClick: () => handlePostTypeChange('photo'),\n                children: \"\\uD83D\\uDCF8 Photo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1167,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: postType === 'carousel' ? 'active' : '',\n                onClick: () => handlePostTypeChange('carousel'),\n                children: \"\\uD83D\\uDDBC\\uFE0F Carousel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1173,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: postType === 'reel' ? 'active' : '',\n                onClick: () => handlePostTypeChange('reel'),\n                children: \"\\uD83C\\uDFAC Reel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1179,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1166,\n              columnNumber: 15\n            }, this), postType === 'carousel' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Number of Images: \", carouselImageCount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1190,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"range\",\n                min: \"3\",\n                max: \"7\",\n                value: carouselImageCount,\n                onChange: e => handleCarouselImageCountChange(parseInt(e.target.value)),\n                className: \"ig-slider\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1191,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ig-slider-labels\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1200,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1201,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1202,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1203,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1204,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1199,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1189,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Strategy Template\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: strategyData.promptTemplate,\n              onChange: e => handleStrategyChange('promptTemplate', e.target.value),\n              className: \"ig-form-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select a template...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1219,\n                columnNumber: 17\n              }, this), promptTemplates.map(template => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: template.prompt,\n                children: template.name\n              }, template.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1221,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1214,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1212,\n            columnNumber: 13\n          }, this), strategyData.promptTemplate === 'custom' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Brand Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1229,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-form-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ig-form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: strategyData.brandName,\n                  onChange: e => handleStrategyChange('brandName', e.target.value),\n                  placeholder: \"Brand Name\",\n                  className: \"ig-form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1232,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1231,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ig-form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: strategyData.hookIdea,\n                  onChange: e => handleStrategyChange('hookIdea', e.target.value),\n                  placeholder: \"Hook Idea (e.g., Tired of the shore?)\",\n                  className: \"ig-form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1241,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1240,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1230,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Features (one per line)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1252,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: strategyData.features,\n                onChange: e => handleStrategyChange('features', e.target.value),\n                placeholder: \"\\u2705 Feature 1\\\\n\\u2705 Feature 2\\\\n\\u2705 Feature 3\",\n                className: \"ig-form-input\",\n                rows: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1253,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1251,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-form-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ig-form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: strategyData.location,\n                  onChange: e => handleStrategyChange('location', e.target.value),\n                  placeholder: \"Location\",\n                  className: \"ig-form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1264,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1263,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ig-form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: strategyData.phone,\n                  onChange: e => handleStrategyChange('phone', e.target.value),\n                  placeholder: \"Phone Number\",\n                  className: \"ig-form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1273,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1272,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1262,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-form-group\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: strategyData.website,\n                onChange: e => handleStrategyChange('website', e.target.value),\n                placeholder: \"Website URL\",\n                className: \"ig-form-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1284,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1283,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-form-group\",\n              children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: strategyData.callToAction,\n                onChange: e => handleStrategyChange('callToAction', e.target.value),\n                placeholder: \"Call to Action (e.g., Book your appointment today!)\",\n                className: \"ig-form-input\",\n                rows: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1294,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1293,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"ig-form-help\",\n              children: \"This information will be used to generate captions that follow your brand's style and approach.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1303,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1228,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-form-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Start Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1310,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: strategyData.startDate,\n                onChange: e => handleStrategyChange('startDate', e.target.value),\n                className: \"ig-form-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1311,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1309,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"End Date (Optional)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1319,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  value: strategyData.endDate,\n                  onChange: e => handleStrategyChange('endDate', e.target.value),\n                  className: \"ig-form-input\",\n                  min: strategyData.startDate,\n                  disabled: !strategyData.startDate\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1321,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => handleStrategyChange('endDate', ''),\n                  className: \"ig-btn ig-btn-secondary ig-btn-small\",\n                  disabled: !strategyData.endDate,\n                  title: \"Clear end date (single day schedule)\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"12\",\n                    height: \"12\",\n                    viewBox: \"0 0 24 24\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"line\", {\n                      x1: \"18\",\n                      y1: \"6\",\n                      x2: \"6\",\n                      y2: \"18\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1337,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                      x1: \"6\",\n                      y1: \"6\",\n                      x2: \"18\",\n                      y2: \"18\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1338,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1336,\n                    columnNumber: 21\n                  }, this), \"Clear\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1329,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1320,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"ig-form-help\",\n                children: \"Leave empty for single day schedule\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1343,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1318,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Frequency\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1348,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: strategyData.frequency,\n                onChange: e => handleStrategyChange('frequency', e.target.value),\n                className: \"ig-form-select\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"daily\",\n                  children: \"Daily\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1354,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"weekly\",\n                  children: \"Weekly\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1355,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"monthly\",\n                  children: \"Monthly\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1356,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"custom\",\n                  children: \"Custom Cron\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1357,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1349,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1347,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Time Slot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1361,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"time\",\n                value: strategyData.timeSlot,\n                onChange: e => handleStrategyChange('timeSlot', e.target.value),\n                className: \"ig-form-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1362,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1360,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1308,\n            columnNumber: 13\n          }, this), strategyData.frequency === 'custom' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Custom Cron Expression\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1372,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: strategyData.customCron,\n              onChange: e => handleStrategyChange('customCron', e.target.value),\n              placeholder: \"0 9 * * * (daily at 9 AM)\",\n              className: \"ig-form-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1373,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1371,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1161,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ig-calendar-preview-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Calendar Preview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1387,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ig-calendar-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-calendar-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setCurrentMonth(prev => new Date(prev.getFullYear(), prev.getMonth() - 1)),\n              className: \"ig-btn ig-btn-secondary ig-btn-small\",\n              children: \"\\u2190\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1390,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: currentMonth.toLocaleDateString('en-US', {\n                month: 'long',\n                year: 'numeric'\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1396,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setCurrentMonth(prev => new Date(prev.getFullYear(), prev.getMonth() + 1)),\n              className: \"ig-btn ig-btn-secondary ig-btn-small\",\n              children: \"\\u2192\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1397,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1389,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-calendar-grid\",\n            children: [['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-calendar-day-header\",\n              children: day\n            }, day, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1406,\n              columnNumber: 17\n            }, this)), generateCalendarDays(currentMonth.getFullYear(), currentMonth.getMonth()).map((day, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `ig-calendar-day ${day.date ? 'clickable' : ''} ${day.date && getPostsForDate(day.date).length > 0 ? 'has-posts' : ''}`,\n              onClick: () => day.date && handleCalendarDateSelect(day.date),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ig-day-number\",\n                children: day.day\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1414,\n                columnNumber: 19\n              }, this), day.date && getPostsForDate(day.date).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ig-post-indicators\",\n                children: getPostsForDate(day.date).map((post, postIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ig-post-dot\",\n                  title: `${post.scheduledTime} - ${(post.caption || '').substring(0, 30)}...`\n                }, postIndex, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1418,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1416,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1409,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1404,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1388,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1386,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ig-composer-grid-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ig-composer-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Step 2: Content Grid\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1435,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-composer-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                const newRow = {\n                  id: `row-${Date.now()}-${Math.random()}`,\n                  caption: '',\n                  postType: postType.toLowerCase(),\n                  mediaFile: null,\n                  mediaPreview: null,\n                  carouselImages: postType === 'carousel' ? [] : null,\n                  carouselImageCount: postType === 'carousel' ? carouselImageCount : null,\n                  scheduledDate: new Date().toISOString().split('T')[0],\n                  scheduledTime: strategyData.timeSlot,\n                  status: 'draft',\n                  isSelected: false\n                };\n                setComposerRows(prev => [...prev, newRow]);\n              },\n              className: \"ig-btn ig-btn-primary ig-btn-small\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"14\",\n                height: \"14\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"line\", {\n                  x1: \"12\",\n                  y1: \"5\",\n                  x2: \"12\",\n                  y2: \"19\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1457,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                  x1: \"5\",\n                  y1: \"12\",\n                  x2: \"19\",\n                  y2: \"12\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1458,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1456,\n                columnNumber: 17\n              }, this), \"Add Row\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1437,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSelectAll,\n              className: \"ig-btn ig-btn-secondary ig-btn-small\",\n              children: selectedRows.length === composerRows.length ? 'Deselect All' : 'Select All'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1462,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleBulkDelete,\n              disabled: selectedRows.length === 0,\n              className: \"ig-btn ig-btn-danger ig-btn-small\",\n              children: \"Delete Selected\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1468,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"ig-btn ig-btn-primary\",\n              onClick: handleGenerateAllCaptions,\n              disabled: composerRows.length === 0 || selectedRows.length === 0,\n              children: \"Generate Captions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1475,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"ig-btn ig-btn-secondary\",\n              onClick: handleGenerateAllImages,\n              disabled: composerRows.length === 0 || selectedRows.length === 0,\n              children: \"Generate Images\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1482,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-time-shift-controls\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleTimeShift('backward'),\n                disabled: selectedRows.length === 0,\n                className: \"ig-btn ig-btn-secondary ig-btn-small\",\n                children: \"\\u2190 -1h\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1490,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleTimeShift('forward'),\n                disabled: selectedRows.length === 0,\n                className: \"ig-btn ig-btn-secondary ig-btn-small\",\n                children: \"+1h \\u2192\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1497,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1489,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1436,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1434,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ig-composer-grid-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-composer-grid\",\n            ref: gridRef,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-grid-header ig-grid-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ig-grid-cell ig-header-cell\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1511,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ig-grid-cell ig-header-cell\",\n                children: \"Caption\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1512,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ig-grid-cell ig-header-cell\",\n                children: \"Media\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1513,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ig-grid-cell ig-header-cell\",\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1514,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ig-grid-cell ig-header-cell\",\n                children: \"Time\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1515,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ig-grid-cell ig-header-cell\",\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1516,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1510,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-grid-body\",\n              children: composerRows.map((row, index) => {\n                var _row$mediaFile, _row$mediaFile$type;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `ig-grid-row ${row.isSelected ? 'selected' : ''}`,\n                  draggable: true,\n                  onDragStart: () => handleDragStart(row.id),\n                  onDragOver: handleDragOver,\n                  onDrop: () => handleDrop(row.id),\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ig-grid-cell\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: selectedRows.includes(row.id),\n                      onChange: () => handleRowSelect(row.id)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1529,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1528,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ig-grid-cell ig-caption-cell\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"caption-container\",\n                      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                        value: row.caption,\n                        onChange: e => handleCellEdit(row.id, 'caption', e.target.value),\n                        placeholder: \"Enter your Instagram post caption...\",\n                        className: \"ig-caption-input\",\n                        rows: \"3\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1537,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => handleExpandCaption(row.id),\n                        className: \"expand-btn\",\n                        title: \"Expand caption\",\n                        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                          width: \"14\",\n                          height: \"14\",\n                          viewBox: \"0 0 24 24\",\n                          fill: \"none\",\n                          stroke: \"currentColor\",\n                          strokeWidth: \"2\",\n                          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                            d: \"M15 3h6v6\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1550,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                            d: \"M9 21H3v-6\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1551,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                            d: \"M21 3l-7 7\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1552,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                            d: \"M3 21l7-7\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1553,\n                            columnNumber: 29\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1549,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1544,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1536,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1535,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ig-grid-cell ig-media-cell\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"ig-media-options\",\n                      children: !row.mediaPreview && !row.mediaFile && (!row.carouselImages || row.carouselImages.length === 0) ? /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"ig-media-option-group\",\n                        children: [(row.postType === 'photo' || row.postType === 'reel') && /*#__PURE__*/_jsxDEV(_Fragment, {\n                          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"file\",\n                            accept: row.postType === 'photo' ? \"image/*\" : \"video/*\",\n                            onChange: e => handleMediaUpload(row.id, e),\n                            className: \"ig-media-input\",\n                            id: `ig-media-upload-${row.id}`\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1566,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                            htmlFor: `ig-media-upload-${row.id}`,\n                            className: \"ig-media-option-btn upload-btn\",\n                            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                              width: \"16\",\n                              height: \"16\",\n                              viewBox: \"0 0 24 24\",\n                              fill: \"none\",\n                              stroke: \"currentColor\",\n                              strokeWidth: \"2\",\n                              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                                d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1575,\n                                columnNumber: 37\n                              }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                                points: \"7,10 12,15 17,10\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1576,\n                                columnNumber: 37\n                              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                                x1: \"12\",\n                                y1: \"15\",\n                                x2: \"12\",\n                                y2: \"3\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1577,\n                                columnNumber: 37\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1574,\n                              columnNumber: 35\n                            }, this), \"Upload \", row.postType === 'photo' ? 'Image' : 'Video']\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1573,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true), row.postType === 'reel' && /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"ig-media-option-btn upload-btn thumbnail-btn disabled\",\n                          title: \"Please upload a video first\",\n                          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                            width: \"16\",\n                            height: \"16\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            strokeWidth: \"2\",\n                            children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                              x: \"3\",\n                              y: \"3\",\n                              width: \"18\",\n                              height: \"18\",\n                              rx: \"2\",\n                              ry: \"2\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1588,\n                              columnNumber: 35\n                            }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n                              cx: \"8.5\",\n                              cy: \"8.5\",\n                              r: \"1.5\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1589,\n                              columnNumber: 35\n                            }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                              points: \"21,15 16,10 5,21\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1590,\n                              columnNumber: 35\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1587,\n                            columnNumber: 33\n                          }, this), \"Upload Thumbnail (Video Required First)\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1586,\n                          columnNumber: 31\n                        }, this), row.postType === 'photo' && /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => handleGenerateMedia(row.id),\n                          className: \"ig-media-option-btn generate-btn\",\n                          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                            width: \"16\",\n                            height: \"16\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            strokeWidth: \"2\",\n                            children: /*#__PURE__*/_jsxDEV(\"path\", {\n                              d: \"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1603,\n                              columnNumber: 35\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1602,\n                            columnNumber: 33\n                          }, this), \"Generate\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1598,\n                          columnNumber: 31\n                        }, this), row.postType === 'reel' && /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => handleGenerateMedia(row.id),\n                          className: \"ig-media-option-btn generate-btn\",\n                          disabled: true,\n                          title: \"AI video generation not yet available\",\n                          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                            width: \"16\",\n                            height: \"16\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            strokeWidth: \"2\",\n                            children: /*#__PURE__*/_jsxDEV(\"path\", {\n                              d: \"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1618,\n                              columnNumber: 35\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1617,\n                            columnNumber: 33\n                          }, this), \"Generate (Coming Soon)\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1611,\n                          columnNumber: 31\n                        }, this), row.postType === 'carousel' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                            onClick: () => handleGenerateCarousel(row.id),\n                            className: \"ig-media-option-btn generate-btn\",\n                            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                              width: \"16\",\n                              height: \"16\",\n                              viewBox: \"0 0 24 24\",\n                              fill: \"none\",\n                              stroke: \"currentColor\",\n                              strokeWidth: \"2\",\n                              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                                d: \"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1632,\n                                columnNumber: 37\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1631,\n                              columnNumber: 35\n                            }, this), \"Generate \", row.carouselImageCount || 3, \" Images\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1627,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"file\",\n                            accept: \"image/*\",\n                            multiple: true,\n                            ref: el => carouselInputRefs.current[row.id] = el,\n                            onChange: e => handleCarouselUpload(row.id, e),\n                            className: \"ig-media-input\",\n                            id: `ig-carousel-upload-${row.id}`\n                          }, `ig-carousel-upload-${row.id}`, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1636,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                            htmlFor: `ig-carousel-upload-${row.id}`,\n                            className: \"ig-media-option-btn upload-btn\",\n                            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                              width: \"16\",\n                              height: \"16\",\n                              viewBox: \"0 0 24 24\",\n                              fill: \"none\",\n                              stroke: \"currentColor\",\n                              strokeWidth: \"2\",\n                              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                                d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1648,\n                                columnNumber: 37\n                              }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                                points: \"7,10 12,15 17,10\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1649,\n                                columnNumber: 37\n                              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                                x1: \"12\",\n                                y1: \"15\",\n                                x2: \"12\",\n                                y2: \"3\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1650,\n                                columnNumber: 37\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1647,\n                              columnNumber: 35\n                            }, this), \"Upload \", row.carouselImageCount || 3, \" Images\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1646,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1562,\n                        columnNumber: 27\n                      }, this) :\n                      /*#__PURE__*/\n                      /* Show media preview and additional options after upload */\n                      _jsxDEV(\"div\", {\n                        className: \"ig-media-preview-container\",\n                        children: [row.postType === 'reel' && (row.mediaPreview || row.mediaFile) && /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"ig-reel-thumbnail-upload-section\",\n                          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"file\",\n                            accept: \"image/*\",\n                            onChange: e => handleThumbnailUpload(row.id, e),\n                            className: \"ig-media-input\",\n                            id: `ig-thumbnail-upload-${row.id}`,\n                            disabled: row.thumbnailUploading\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1663,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                            htmlFor: `ig-thumbnail-upload-${row.id}`,\n                            className: `ig-media-option-btn upload-btn thumbnail-btn ${row.thumbnailUploading ? 'uploading' : ''}`,\n                            children: row.thumbnailUploading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                                width: \"16\",\n                                height: \"16\",\n                                viewBox: \"0 0 24 24\",\n                                fill: \"none\",\n                                stroke: \"currentColor\",\n                                strokeWidth: \"2\",\n                                className: \"spinning\",\n                                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                                  d: \"M21 12a9 9 0 11-6.219-8.56\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1678,\n                                  columnNumber: 41\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1677,\n                                columnNumber: 39\n                              }, this), \"Uploading...\"]\n                            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                                width: \"16\",\n                                height: \"16\",\n                                viewBox: \"0 0 24 24\",\n                                fill: \"none\",\n                                stroke: \"currentColor\",\n                                strokeWidth: \"2\",\n                                children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                                  x: \"3\",\n                                  y: \"3\",\n                                  width: \"18\",\n                                  height: \"18\",\n                                  rx: \"2\",\n                                  ry: \"2\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1685,\n                                  columnNumber: 41\n                                }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n                                  cx: \"8.5\",\n                                  cy: \"8.5\",\n                                  r: \"1.5\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1686,\n                                  columnNumber: 41\n                                }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                                  points: \"21,15 16,10 5,21\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1687,\n                                  columnNumber: 41\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1684,\n                                columnNumber: 39\n                              }, this), row.thumbnailPreview ? 'Change Thumbnail' : 'Upload Thumbnail (Optional)']\n                            }, void 0, true)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1671,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1662,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"ig-media-preview\",\n                          children: row.postType === 'carousel' && row.carouselImages && row.carouselImages.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"ig-carousel-preview\",\n                            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"ig-carousel-grid\",\n                              children: row.carouselImages.slice(0, row.carouselImageCount || 3).map((url, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"ig-carousel-item\",\n                                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                                  src: url,\n                                  alt: `Carousel ${index + 1}`\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1704,\n                                  columnNumber: 41\n                                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                                  className: \"ig-carousel-number\",\n                                  children: index + 1\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1705,\n                                  columnNumber: 41\n                                }, this)]\n                              }, index, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1703,\n                                columnNumber: 39\n                              }, this))\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1701,\n                              columnNumber: 35\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"ig-carousel-info\",\n                              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"ig-carousel-status\",\n                                children: [row.carouselImages.length, \" / \", row.carouselImageCount || 3, \" images\", row.carouselImages.length < 3 && /*#__PURE__*/_jsxDEV(\"span\", {\n                                  className: \"ig-carousel-warning\",\n                                  children: \"\\u26A0\\uFE0F Need at least 3 images\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1713,\n                                  columnNumber: 41\n                                }, this), row.carouselImages.length >= 3 && /*#__PURE__*/_jsxDEV(\"span\", {\n                                  className: \"ig-carousel-success\",\n                                  children: \"\\u2705 Ready\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1716,\n                                  columnNumber: 41\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1710,\n                                columnNumber: 37\n                              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                                onClick: () => handleRemoveCarouselImages(row.id),\n                                className: \"ig-btn ig-btn-danger ig-btn-small\",\n                                disabled: row.carouselImages.length === 0,\n                                title: \"Remove all carousel images\",\n                                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                                  width: \"12\",\n                                  height: \"12\",\n                                  viewBox: \"0 0 24 24\",\n                                  fill: \"none\",\n                                  stroke: \"currentColor\",\n                                  strokeWidth: \"2\",\n                                  children: [/*#__PURE__*/_jsxDEV(\"line\", {\n                                    x1: \"18\",\n                                    y1: \"6\",\n                                    x2: \"6\",\n                                    y2: \"18\"\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 1726,\n                                    columnNumber: 41\n                                  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                                    x1: \"6\",\n                                    y1: \"6\",\n                                    x2: \"18\",\n                                    y2: \"18\"\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 1727,\n                                    columnNumber: 41\n                                  }, this)]\n                                }, void 0, true, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1725,\n                                  columnNumber: 39\n                                }, this), \"Remove All\"]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1719,\n                                columnNumber: 37\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1709,\n                              columnNumber: 35\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1700,\n                            columnNumber: 33\n                          }, this) :\n                          /*#__PURE__*/\n                          /* Single Media Preview */\n                          _jsxDEV(_Fragment, {\n                            children: row.postType === 'reel' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"ig-reel-preview\",\n                              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"ig-reel-video\",\n                                children: [/*#__PURE__*/_jsxDEV(\"video\", {\n                                  src: row.mediaPreview,\n                                  controls: true\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1739,\n                                  columnNumber: 41\n                                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                                  className: \"ig-reel-label\",\n                                  children: \"Reel Video\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1740,\n                                  columnNumber: 41\n                                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                                  className: \"ig-reel-video-actions\",\n                                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                                    onClick: () => handleViewMedia(row.id),\n                                    className: \"ig-reel-video-view\",\n                                    title: \"View video\",\n                                    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                                      width: \"14\",\n                                      height: \"14\",\n                                      viewBox: \"0 0 24 24\",\n                                      fill: \"none\",\n                                      stroke: \"currentColor\",\n                                      strokeWidth: \"2\",\n                                      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                                        d: \"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"\n                                      }, void 0, false, {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 1748,\n                                        columnNumber: 47\n                                      }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n                                        cx: \"12\",\n                                        cy: \"12\",\n                                        r: \"3\"\n                                      }, void 0, false, {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 1749,\n                                        columnNumber: 47\n                                      }, this)]\n                                    }, void 0, true, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 1747,\n                                      columnNumber: 45\n                                    }, this)\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 1742,\n                                    columnNumber: 43\n                                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                                    onClick: () => handleRemoveMedia(row.id),\n                                    className: \"ig-reel-video-close\",\n                                    title: \"Remove video\",\n                                    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                                      width: \"14\",\n                                      height: \"14\",\n                                      viewBox: \"0 0 24 24\",\n                                      fill: \"none\",\n                                      stroke: \"currentColor\",\n                                      strokeWidth: \"2\",\n                                      children: [/*#__PURE__*/_jsxDEV(\"line\", {\n                                        x1: \"18\",\n                                        y1: \"6\",\n                                        x2: \"6\",\n                                        y2: \"18\"\n                                      }, void 0, false, {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 1758,\n                                        columnNumber: 47\n                                      }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                                        x1: \"6\",\n                                        y1: \"6\",\n                                        x2: \"18\",\n                                        y2: \"18\"\n                                      }, void 0, false, {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 1759,\n                                        columnNumber: 47\n                                      }, this)]\n                                    }, void 0, true, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 1757,\n                                      columnNumber: 45\n                                    }, this)\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 1752,\n                                    columnNumber: 43\n                                  }, this)]\n                                }, void 0, true, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1741,\n                                  columnNumber: 41\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1738,\n                                columnNumber: 39\n                              }, this), row.thumbnailPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: `ig-reel-thumbnail ${row.thumbnailUrl ? 'uploaded' : ''}`,\n                                style: {\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                  gap: '0.5rem'\n                                },\n                                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                                  src: row.thumbnailPreview,\n                                  alt: \"Thumbnail\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1766,\n                                  columnNumber: 43\n                                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                                  htmlFor: `ig-thumbnail-upload-${row.id}`,\n                                  style: {\n                                    cursor: 'pointer',\n                                    marginLeft: '0.5rem',\n                                    display: 'flex',\n                                    alignItems: 'center'\n                                  },\n                                  title: \"Change Thumbnail\",\n                                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                                    width: \"20\",\n                                    height: \"20\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    strokeWidth: \"2\",\n                                    children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                                      d: \"M12 20h9\"\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 1769,\n                                      columnNumber: 47\n                                    }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                                      d: \"M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4 12.5-12.5z\"\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 1770,\n                                      columnNumber: 47\n                                    }, this)]\n                                  }, void 0, true, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 1768,\n                                    columnNumber: 45\n                                  }, this)\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1767,\n                                  columnNumber: 43\n                                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                                  type: \"file\",\n                                  accept: \"image/*\",\n                                  onChange: e => handleThumbnailUpload(row.id, e),\n                                  className: \"ig-media-input\",\n                                  id: `ig-thumbnail-upload-${row.id}`,\n                                  disabled: row.thumbnailUploading,\n                                  style: {\n                                    display: 'none'\n                                  }\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1773,\n                                  columnNumber: 43\n                                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                                  onClick: () => handleRemoveThumbnail(row.id),\n                                  className: \"ig-reel-thumbnail-close\",\n                                  title: \"Remove thumbnail\",\n                                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                                    width: \"14\",\n                                    height: \"14\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    strokeWidth: \"2\",\n                                    children: [/*#__PURE__*/_jsxDEV(\"line\", {\n                                      x1: \"18\",\n                                      y1: \"6\",\n                                      x2: \"6\",\n                                      y2: \"18\"\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 1788,\n                                      columnNumber: 47\n                                    }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                                      x1: \"6\",\n                                      y1: \"6\",\n                                      x2: \"18\",\n                                      y2: \"18\"\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 1789,\n                                      columnNumber: 47\n                                    }, this)]\n                                  }, void 0, true, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 1787,\n                                    columnNumber: 45\n                                  }, this)\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1782,\n                                  columnNumber: 43\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1765,\n                                columnNumber: 41\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1737,\n                              columnNumber: 37\n                            }, this) : (_row$mediaFile = row.mediaFile) !== null && _row$mediaFile !== void 0 && (_row$mediaFile$type = _row$mediaFile.type) !== null && _row$mediaFile$type !== void 0 && _row$mediaFile$type.startsWith('image/') ? /*#__PURE__*/_jsxDEV(\"img\", {\n                              src: row.mediaPreview,\n                              alt: \"Preview\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1796,\n                              columnNumber: 37\n                            }, this) : /*#__PURE__*/_jsxDEV(\"video\", {\n                              src: row.mediaPreview,\n                              controls: true\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1798,\n                              columnNumber: 37\n                            }, this)\n                          }, void 0, false)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1697,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1659,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1559,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1558,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ig-grid-cell ig-date-cell\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"date\",\n                      value: row.scheduledDate,\n                      onChange: e => handleCellEdit(row.id, 'scheduledDate', e.target.value),\n                      className: \"ig-date-input\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1810,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1809,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ig-grid-cell ig-time-cell\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"time\",\n                      value: row.scheduledTime,\n                      onChange: e => handleCellEdit(row.id, 'scheduledTime', e.target.value),\n                      className: \"ig-time-input\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1818,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1817,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ig-grid-cell ig-status-cell\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `ig-status-badge ${getStatusClass(row.status)}`,\n                      children: [getStatusIcon(row.status), \" \", row.status]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1826,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1825,\n                    columnNumber: 21\n                  }, this)]\n                }, row.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1520,\n                  columnNumber: 19\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1518,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1509,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1508,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1433,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ig-queue-confirmation\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Step 3: Schedule & Publish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1839,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ig-confirmation-stats\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ig-stat-label\",\n              children: \"Total Posts:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1842,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ig-stat-value\",\n              children: composerRows.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1843,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1841,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ig-stat-label\",\n              children: \"With Captions:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1846,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ig-stat-value\",\n              children: composerRows.filter(row => (row.caption || '').trim()).length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1847,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1845,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ig-stat-label\",\n              children: \"Ready to Schedule:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1850,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ig-stat-value\",\n              children: composerRows.filter(row => row.status === 'ready').length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1851,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1849,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-stat-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ig-stat-label\",\n              children: \"With Media:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1854,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ig-stat-value\",\n              children: composerRows.filter(row => row.mediaFile || row.mediaPreview).length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1855,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1853,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1840,\n          columnNumber: 11\n        }, this), isScheduling && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ig-schedule-progress\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ig-progress-bar\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ig-progress-fill\",\n              style: {\n                width: `${scheduleProgress}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1861,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1860,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ig-progress-text\",\n            children: [\"Scheduling Instagram posts... \", Math.round(scheduleProgress), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1866,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1859,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ig-confirmation-actions\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleScheduleAll,\n            disabled: isScheduling || composerRows.filter(row => row.status === 'ready').length === 0,\n            className: \"ig-btn ig-btn-primary ig-btn-large\",\n            children: isScheduling ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"16\",\n                height: \"16\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M21 12a9 9 0 11-6.219-8.56\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1878,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1877,\n                columnNumber: 19\n              }, this), \"Scheduling...\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"16\",\n                height: \"16\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                  cx: \"12\",\n                  cy: \"12\",\n                  r: \"10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1885,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                  points: \"12,6 12,12 16,14\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1886,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1884,\n                columnNumber: 19\n              }, this), \"Schedule Ready Posts (\", composerRows.filter(row => row.status === 'ready').length, \")\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1870,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1869,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1838,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1157,\n      columnNumber: 7\n    }, this), expandedCaption && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Edit Caption\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1901,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setExpandedCaption(null),\n            className: \"modal-close\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1902,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1900,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"caption-info\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Scheduled:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1911,\n                columnNumber: 20\n              }, this), \" \", expandedCaption.scheduledDate, \" at \", expandedCaption.scheduledTime]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1911,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1910,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: expandedCaption.caption,\n            onChange: e => setExpandedCaption(prev => ({\n              ...prev,\n              caption: e.target.value\n            })),\n            className: \"expanded-caption-textarea\",\n            rows: \"10\",\n            placeholder: \"Enter your caption...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1913,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1909,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setExpandedCaption(null),\n            className: \"ig-btn ig-btn-secondary\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1922,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSaveExpandedCaption(expandedCaption.id, expandedCaption.caption),\n            className: \"ig-btn ig-btn-primary\",\n            children: \"Save Changes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1928,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1921,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1899,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1898,\n      columnNumber: 9\n    }, this), mediaPreviewModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content media-preview-modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Media Preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1944,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setMediaPreviewModal(null),\n            className: \"modal-close\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1945,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1943,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [(_mediaPreviewModal$me = mediaPreviewModal.mediaFile) !== null && _mediaPreviewModal$me !== void 0 && (_mediaPreviewModal$me2 = _mediaPreviewModal$me.type) !== null && _mediaPreviewModal$me2 !== void 0 && _mediaPreviewModal$me2.startsWith('image/') || !mediaPreviewModal.mediaFile && mediaPreviewModal.mediaPreview ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: mediaPreviewModal.mediaPreview,\n            alt: \"Media preview\",\n            className: \"modal-media\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1954,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"video\", {\n            src: mediaPreviewModal.mediaPreview,\n            controls: true,\n            className: \"modal-media\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1960,\n            columnNumber: 17\n          }, this), mediaPreviewModal.caption && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-caption\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Caption:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1968,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: mediaPreviewModal.caption\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1969,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1967,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1952,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setMediaPreviewModal(null),\n            className: \"ig-btn ig-btn-primary\",\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1974,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1973,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1942,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1941,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1152,\n    columnNumber: 5\n  }, this);\n}\n_s(IgBulkComposer, \"GV9EB2joy3I1zXna9lP8NiBWLzg=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = IgBulkComposer;\nexport default IgBulkComposer;\nvar _c;\n$RefreshReg$(_c, \"IgBulkComposer\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useAuth","useNotifications","apiClient","fileToBase64","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","IgBulkComposer","selectedAccount","onClose","_s","_mediaPreviewModal$me","_mediaPreviewModal$me2","user","strategyData","setStrategyData","promptTemplate","customStrategyTemplate","brandName","hookIdea","features","location","phone","website","callToAction","imagePrompt","startDate","endDate","frequency","customCron","timeSlot","composerRows","setComposerRows","selectedRows","setSelectedRows","editingCell","setEditingCell","dragStartRow","setDragStartRow","postType","setPostType","carouselImageCount","setCarouselImageCount","currentMonth","setCurrentMonth","Date","isScheduling","setIsScheduling","scheduleProgress","setScheduleProgress","expandedCaption","setExpandedCaption","mediaPreviewModal","setMediaPreviewModal","scheduledGridRows","setScheduledGridRows","navigate","promptTemplates","id","name","prompt","gridRef","carouselInputRefs","generateInitialRows","startDateParts","split","parseInt","endDateParts","rows","maxDays","currentDate","dayCount","rowCount","formattedDate","toISOString","push","caption","mediaFile","mediaPreview","thumbnailFile","thumbnailPreview","toLowerCase","carouselImages","scheduledDate","scheduledTime","status","isSelected","maxAllowedDate","now","shouldInclude","getDay","getDate","yyyy","getFullYear","mm","String","getMonth","padStart","dd","getTime","setDate","handleStrategyChange","field","value","prev","newData","map","row","handlePostTypeChange","newPostType","handleCarouselImageCountChange","newCount","handleRowSelect","rowId","includes","filter","handleSelectAll","length","handleCellEdit","hasCaption","trim","hasEnoughImages","hasMedia","handleMediaUpload","event","file","target","files","find","r","alert","reader","FileReader","onload","e","result","readAsDataURL","handleGenerateMedia","console","log","substring","response","generateInstagramImage","success","data","image_url","error","handleGenerateAllCaptions","selectedComposerRows","captions","selectedTemplate","t","i","context","fullPrompt","JSON","stringify","captionResponse","generateInstagramCaption","content","generated_text","message","Math","round","c","successCount","failedCount","handleGenerateAllImages","errorCount","handleExpandCaption","handleViewMedia","handleSaveExpandedCaption","newCaption","handleThumbnailUpload","type","startsWith","thumbnailUploading","uploadResponse","uploadThumbnailToCloudinary","url","thumbnailUrl","handleRemoveThumbnail","handleRemoveMedia","handleGenerateCarousel","imageCount","generateInstagramCarousel","image_urls","errorMsg","handleCarouselUpload","Array","from","maxImages","minImages","imageUrls","uploadImageToCloudinary","current","handleDuplicateRow","rowToDuplicate","newRow","random","handleDeleteRow","handleBulkDelete","handleTimeShift","direction","hours","minutes","newHours","toString","handleDragStart","handleDragOver","preventDefault","handleDrop","targetRowId","sourceIndex","findIndex","targetIndex","movedRow","splice","handleScheduleAll","readyRows","processedCount","totalPosts","postsWithMedia","Promise","all","index","basePost","scheduled_datetime","scheduled_date","scheduled_time","post_type","media_file","media_filename","image_prompt","carouselFiles","carousel_images","carousel_filenames","_","idx","carousel_image_count","thumbnail_url","thumbnail_file","thumbnail_filename","normalizedPostsWithMedia","post","bulkData","social_account_id","posts","bulkScheduleInstagramPosts","_response$scheduled_p","scheduled_posts","some","state","isArray","results","forEach","failed_posts","fp","errorData","hasReel","handleCalendarDateSelect","date","getStatusIcon","getStatusClass","generateCalendarDays","year","month","daysInMonth","firstDayOfMonth","days","day","getPostsForDate","dateString","handleRemoveCarouselImages","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","min","max","onChange","template","placeholder","style","display","alignItems","gap","disabled","title","width","height","viewBox","fill","stroke","strokeWidth","x1","y1","x2","y2","toLocaleDateString","postIndex","ref","_row$mediaFile","_row$mediaFile$type","draggable","onDragStart","onDragOver","onDrop","checked","d","accept","htmlFor","points","x","y","rx","ry","cx","cy","multiple","el","slice","src","alt","controls","cursor","marginLeft","_c","$RefreshReg$"],"sources":["C:/Users/THORSIGNIA/Projects/automation-dash/frontend/src/components/igBulkComposer.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useNotifications } from '../contexts/NotificationContext';\r\nimport apiClient from '../services/apiClient';\r\nimport { fileToBase64 } from './FacebookUtils';\r\nimport './igBulkComposer.css';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction IgBulkComposer({ selectedAccount, onClose }) {\r\n  const { user } = useAuth();\r\n\r\n  // Strategy step state\r\n  const [strategyData, setStrategyData] = useState({\r\n    promptTemplate: '',\r\n    customStrategyTemplate: '',\r\n    brandName: '',\r\n    hookIdea: '',\r\n    features: '',\r\n    location: '',\r\n    phone: '',\r\n    website: '',\r\n    callToAction: '',\r\n    imagePrompt: '',\r\n    startDate: '',\r\n    endDate: '',\r\n    frequency: 'daily',\r\n    customCron: '',\r\n    timeSlot: '09:00'\r\n  });\r\n\r\n  // Composer grid state\r\n  const [composerRows, setComposerRows] = useState([]);\r\n  const [selectedRows, setSelectedRows] = useState([]);\r\n  const [editingCell, setEditingCell] = useState(null);\r\n  const [dragStartRow, setDragStartRow] = useState(null);\r\n\r\n  // Post type state\r\n  const [postType, setPostType] = useState('photo'); // photo, carousel, reel\r\n  const [carouselImageCount, setCarouselImageCount] = useState(3);\r\n\r\n  // Calendar preview state\r\n  const [currentMonth, setCurrentMonth] = useState(new Date());\r\n\r\n  // Queue state\r\n  const [isScheduling, setIsScheduling] = useState(false);\r\n  const [scheduleProgress, setScheduleProgress] = useState(0);\r\n\r\n  // Expanded view state\r\n  const [expandedCaption, setExpandedCaption] = useState(null);\r\n  const [mediaPreviewModal, setMediaPreviewModal] = useState(null);\r\n  const [scheduledGridRows, setScheduledGridRows] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  // Prompt templates for Instagram\r\n  const [promptTemplates] = useState([\r\n    { id: 1, name: 'Daily Inspiration', prompt: 'Share an inspiring quote or motivational message for your Instagram audience' },\r\n    { id: 2, name: 'Product Showcase', prompt: 'Highlight your best products with engaging descriptions and hashtags' },\r\n    { id: 3, name: 'Behind the Scenes', prompt: 'Share behind-the-scenes content about your business or team' },\r\n    { id: 4, name: 'Customer Spotlight', prompt: 'Feature customer testimonials or success stories' },\r\n    { id: 5, name: 'Industry Tips', prompt: 'Share valuable tips and insights related to your industry' },\r\n    { id: 6, name: 'Lifestyle Content', prompt: 'Share lifestyle content that resonates with your audience' },\r\n    { id: 7, name: 'User Generated Content', prompt: 'Repost and credit amazing content from your community' },\r\n    { id: 8, name: 'Custom', prompt: 'custom' }\r\n  ]);\r\n\r\n  const gridRef = useRef(null);\r\n  const carouselInputRefs = useRef({});\r\n\r\n  // Initialize composer with default rows\r\n  useEffect(() => {\r\n    if (strategyData.startDate && strategyData.frequency) {\r\n      generateInitialRows();\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [strategyData.startDate, strategyData.endDate, strategyData.frequency, strategyData.timeSlot]);\r\n\r\n  const generateInitialRows = () => {\r\n    if (!strategyData.startDate) return;\r\n\r\n    const startDateParts = strategyData.startDate.split('-');\r\n    const startDate = new Date(parseInt(startDateParts[0]), parseInt(startDateParts[1]) - 1, parseInt(startDateParts[2]));\r\n\r\n    let endDate = null;\r\n    if (strategyData.endDate) {\r\n      const endDateParts = strategyData.endDate.split('-');\r\n      endDate = new Date(parseInt(endDateParts[0]), parseInt(endDateParts[1]) - 1, parseInt(endDateParts[2]));\r\n    }\r\n\r\n    const rows = [];\r\n    const maxDays = 30; // Instagram's 30-day limit\r\n    let currentDate = new Date(startDate);\r\n    let dayCount = 0;\r\n    let rowCount = 0;\r\n\r\n    if (!endDate) {\r\n      const formattedDate = startDate.toISOString().split('T')[0];\r\n      rows.push({\r\n        id: `row-0`,\r\n        caption: '',\r\n        mediaFile: null,\r\n        mediaPreview: null,\r\n        thumbnailFile: null,\r\n        thumbnailPreview: null,\r\n        postType: postType.toLowerCase(),\r\n        carouselImageCount: carouselImageCount,\r\n        carouselImages: [],\r\n        scheduledDate: formattedDate,\r\n        scheduledTime: strategyData.timeSlot,\r\n        status: 'draft',\r\n        isSelected: false\r\n      });\r\n    } else {\r\n      // Fix: include the end date by using <= in the comparison\r\n      while (dayCount < maxDays && rowCount < 30) {\r\n        if (endDate && currentDate > endDate) break;\r\n        const maxAllowedDate = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000);\r\n        if (currentDate > maxAllowedDate) break;\r\n\r\n        let shouldInclude = false;\r\n        switch (strategyData.frequency) {\r\n          case 'daily':\r\n            shouldInclude = true;\r\n            break;\r\n          case 'weekly':\r\n            shouldInclude = currentDate.getDay() === startDate.getDay();\r\n            break;\r\n          case 'monthly':\r\n            shouldInclude = currentDate.getDate() === startDate.getDate();\r\n            break;\r\n          case 'custom':\r\n            shouldInclude = true;\r\n            break;\r\n          default:\r\n            shouldInclude = true;\r\n        }\r\n\r\n        if (shouldInclude) {\r\n          // Format as YYYY-MM-DD using local date parts\r\n          const yyyy = currentDate.getFullYear();\r\n          const mm = String(currentDate.getMonth() + 1).padStart(2, '0');\r\n          const dd = String(currentDate.getDate()).padStart(2, '0');\r\n          const formattedDate = `${yyyy}-${mm}-${dd}`;\r\n          rows.push({\r\n            id: `row-${rowCount}`,\r\n            caption: '',\r\n            mediaFile: null,\r\n            mediaPreview: null,\r\n            thumbnailFile: null,\r\n            thumbnailPreview: null,\r\n            postType: postType.toLowerCase(),\r\n            carouselImageCount: carouselImageCount,\r\n            carouselImages: [],\r\n            scheduledDate: formattedDate,\r\n            scheduledTime: strategyData.timeSlot,\r\n            status: 'draft',\r\n            isSelected: false\r\n          });\r\n          rowCount++;\r\n        }\r\n        // Fix: increment date at the end, and break if we've reached the end date\r\n        if (endDate && currentDate.getTime() === endDate.getTime()) break;\r\n        currentDate.setDate(currentDate.getDate() + 1);\r\n        dayCount++;\r\n      }\r\n    }\r\n    setComposerRows(rows);\r\n  };\r\n\r\n  const handleStrategyChange = (field, value) => {\r\n    setStrategyData(prev => {\r\n      const newData = { ...prev, [field]: value };\r\n      // If start date is changed and end date is before it, clear end date\r\n      if (field === 'startDate' && prev.endDate && value > prev.endDate) {\r\n        newData.endDate = '';\r\n      }\r\n      return newData;\r\n    });\r\n\r\n    // If prompt template is selected, apply it to all rows\r\n    if (field === 'promptTemplate' && value && value !== 'custom') {\r\n      setComposerRows(prev =>\r\n        prev.map(row => ({\r\n          ...row,\r\n          caption: value\r\n        }))\r\n      );\r\n    }\r\n  };\r\n\r\n  // Update post type for all rows\r\n  const handlePostTypeChange = (newPostType) => {\r\n    setPostType(newPostType);\r\n    setComposerRows(prev =>\r\n      prev.map(row => ({\r\n        ...row,\r\n        postType: newPostType.toLowerCase(),\r\n        carouselImageCount: newPostType === 'carousel' ? carouselImageCount : null,\r\n        carouselImages: newPostType === 'carousel' ? (row.carouselImages || []) : [],\r\n        // Clear media for photo/reel when switching to carousel\r\n        mediaFile: newPostType === 'carousel' ? null : row.mediaFile,\r\n        mediaPreview: newPostType === 'carousel' ? null : row.mediaPreview,\r\n        // Clear thumbnail when switching away from reel\r\n        thumbnailFile: newPostType === 'reel' ? row.thumbnailFile : null,\r\n        thumbnailPreview: newPostType === 'reel' ? row.thumbnailPreview : null\r\n      }))\r\n    );\r\n  };\r\n\r\n  // Update carousel image count for all rows\r\n  const handleCarouselImageCountChange = (newCount) => {\r\n    setCarouselImageCount(newCount);\r\n    setComposerRows(prev =>\r\n      prev.map(row => ({\r\n        ...row,\r\n        carouselImageCount: row.postType === 'carousel' ? newCount : row.carouselImageCount\r\n      }))\r\n    );\r\n  };\r\n\r\n  const handleRowSelect = (rowId) => {\r\n    setSelectedRows(prev => prev.includes(rowId) ? prev.filter(id => id !== rowId) : [...prev, rowId]);\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectedRows.length === composerRows.length) {\r\n      setSelectedRows([]);\r\n    } else {\r\n      setSelectedRows(composerRows.map(row => row.id));\r\n    }\r\n  };\r\n\r\n  const handleCellEdit = (rowId, field, value) => {\r\n    setComposerRows(prev =>\r\n      prev.map(row =>\r\n        row.id === rowId\r\n          ? {\r\n            ...row,\r\n            [field]: field === 'postType' ? value.toLowerCase() : value,\r\n            status: (() => {\r\n              // For carousel posts, check if we have enough images\r\n              if (field === 'postType' && value.toLowerCase() === 'carousel') {\r\n                return 'draft'; // Reset status when switching to carousel\r\n              }\r\n\r\n              // For carousel posts, validate image count\r\n              if (row.postType === 'carousel') {\r\n                const hasCaption = (row.caption || '').trim();\r\n                const hasEnoughImages = (row.carouselImages || []).length >= 3;\r\n                return hasCaption && hasEnoughImages ? 'ready' : 'draft';\r\n              }\r\n\r\n              // For other post types, use existing logic\r\n              if (field === 'caption' || field === 'mediaFile' || field === 'mediaPreview') {\r\n                const hasCaption = field === 'caption' ? value.trim() : (row.caption || '').trim();\r\n                const hasMedia = field === 'mediaFile' ? value : (row.mediaFile || row.mediaPreview);\r\n                return hasCaption && hasMedia ? 'ready' : 'draft';\r\n              }\r\n\r\n              return row.status;\r\n            })()\r\n          }\r\n          : row\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleMediaUpload = async (rowId, event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    // Find the row to determine post type\r\n    const row = composerRows.find(r => r.id === rowId);\r\n    if (!row) return;\r\n\r\n    // --- REELS VIDEO UPLOAD LOGIC ---\r\n    if (row.postType === 'reel') {\r\n      alert('Your video is converted to: 1080x1920 as instagram policy.');\r\n      // Proceed to upload to backend as before...\r\n    }\r\n\r\n    // --- PHOTO/CAROUSEL LOGIC (unchanged) ---\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      setComposerRows(prev =>\r\n        prev.map(row =>\r\n          row.id === rowId\r\n            ? {\r\n              ...row,\r\n              mediaFile: file,\r\n              mediaPreview: e.target.result,\r\n              status: (row.caption || '').trim() ? 'ready' : 'draft'\r\n            }\r\n            : row\r\n        )\r\n      );\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const handleGenerateMedia = async (rowId) => {\r\n    try {\r\n      const row = composerRows.find(r => r.id === rowId);\r\n      if (!row || !(row.caption || '').trim()) {\r\n        alert('Please add a caption first to generate an image.');\r\n        return;\r\n      }\r\n\r\n      console.log(`Generating image for row ${rowId} with caption: ${row.caption.substring(0, 50)}...`);\r\n\r\n      // Truncate caption to 500 characters for image generation\r\n      const imagePrompt = row.caption.trim().substring(0, 500);\r\n      console.log(`Using image prompt (truncated): ${imagePrompt.substring(0, 100)}...`);\r\n\r\n      const response = await apiClient.generateInstagramImage(imagePrompt, 'feed');\r\n\r\n      if (response.success && response.data && response.data.image_url) {\r\n        console.log(`Successfully generated image for row ${rowId}:`, response.data.image_url);\r\n        setComposerRows(prev =>\r\n          prev.map(r =>\r\n            r.id === rowId\r\n              ? {\r\n                ...r,\r\n                mediaFile: null,\r\n                mediaPreview: response.data.image_url,\r\n                status: (r.caption || '').trim() ? 'ready' : 'draft'\r\n              }\r\n              : r\r\n          )\r\n        );\r\n      } else {\r\n        console.log(`Failed to generate image for row ${rowId}:`, response);\r\n        alert('Failed to generate image. Please try again.');\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error generating image for row ${rowId}:`, error);\r\n      alert('Failed to generate image. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleGenerateAllCaptions = async () => {\r\n    if (selectedRows.length === 0) {\r\n      alert('Please select at least one row to generate captions for.');\r\n      return;\r\n    }\r\n\r\n    if (!strategyData.promptTemplate) {\r\n      alert('Please select a strategy template first.');\r\n      return;\r\n    }\r\n\r\n    setIsScheduling(true);\r\n    setScheduleProgress(0);\r\n\r\n    try {\r\n      const selectedComposerRows = composerRows.filter(row => selectedRows.includes(row.id));\r\n      const captions = [];\r\n\r\n      // Create the base prompt based on the selected template type\r\n      let prompt = '';\r\n\r\n      if (strategyData.promptTemplate === 'custom') {\r\n        // Build a detailed prompt for custom templates\r\n        prompt = `\r\n          Brand Name: ${strategyData.brandName || 'Not specified'}\r\n          Hook Idea: ${strategyData.hookIdea || 'Not specified'}\r\n          Key Features: ${strategyData.features || 'Not specified'}\r\n          Location: ${strategyData.location || 'Not specified'}\r\n          Phone: ${strategyData.phone || 'Not specified'}\r\n          Website: ${strategyData.website || 'Not specified'}\r\n          Call to Action: ${strategyData.callToAction || 'Not specified'}\r\n          Image Prompt: ${strategyData.imagePrompt || 'Not specified'}\r\n          \r\n          Custom Template:\r\n          ${strategyData.customStrategyTemplate || ''}\r\n        `;\r\n      } else {\r\n        // Use the selected predefined template\r\n        const selectedTemplate = promptTemplates.find(t => t.prompt === strategyData.promptTemplate);\r\n        if (!selectedTemplate) {\r\n          alert('Invalid strategy template selected.');\r\n          setIsScheduling(false);\r\n          return;\r\n        }\r\n        prompt = selectedTemplate.prompt;\r\n      }\r\n\r\n      // Generate captions for each selected row\r\n      for (let i = 0; i < selectedComposerRows.length; i++) {\r\n        try {\r\n          const row = selectedComposerRows[i];\r\n          const context = {\r\n            scheduledDate: row.scheduledDate,\r\n            // Add any other context you want to include\r\n          };\r\n\r\n          // Add context to the prompt\r\n          const fullPrompt = `${prompt}\\n\\nContext: ${JSON.stringify(context, null, 2)}`;\r\n\r\n          const captionResponse = await apiClient.generateInstagramCaption(fullPrompt);\r\n\r\n          if (captionResponse.success) {\r\n            captions.push({\r\n              content: captionResponse.content || captionResponse.generated_text || 'No content generated',\r\n              context: context.scheduledDate,\r\n              success: true\r\n            });\r\n          } else {\r\n            console.error('Caption generation failed:', captionResponse.error);\r\n            captions.push({\r\n              content: `Failed to generate caption for: ${context.scheduledDate}`,\r\n              context: context.scheduledDate,\r\n              success: false,\r\n              error: captionResponse.error || 'Unknown error'\r\n            });\r\n          }\r\n        } catch (error) {\r\n          console.error('Error generating caption:', error);\r\n          captions.push({\r\n            content: `Error generating caption for: ${selectedComposerRows[i].scheduledDate}`,\r\n            context: selectedComposerRows[i].scheduledDate,\r\n            success: false,\r\n            error: error.message\r\n          });\r\n        }\r\n\r\n        // Update progress\r\n        setScheduleProgress(Math.round(((i + 1) / selectedComposerRows.length) * 100));\r\n      }\r\n\r\n      // Update the rows with generated captions\r\n      setComposerRows(prev =>\r\n        prev.map(row => {\r\n          if (!selectedRows.includes(row.id)) return row;\r\n\r\n          const caption = captions.find(c => c.context === row.scheduledDate);\r\n          if (caption && caption.success) {\r\n            return {\r\n              ...row,\r\n              caption: caption.content,\r\n              status: 'ready'\r\n            };\r\n          }\r\n          return row;\r\n        })\r\n      );\r\n\r\n      // Show success/failure summary\r\n      const successCount = captions.filter(c => c.success).length;\r\n      const failedCount = captions.length - successCount;\r\n\r\n      let message = '';\r\n      if (successCount > 0 && failedCount === 0) {\r\n        message = `Successfully generated captions for ${successCount} ${successCount === 1 ? 'post' : 'posts'}.`;\r\n      } else if (successCount > 0) {\r\n        message = `Generated ${successCount} captions successfully, but failed to generate ${failedCount}.`;\r\n      } else {\r\n        message = 'Failed to generate any captions. Please try again.';\r\n      }\r\n\r\n      alert(message);\r\n    } catch (error) {\r\n      console.error('Unexpected error in handleGenerateAllCaptions:', error);\r\n      alert('An unexpected error occurred while generating captions. Please try again.');\r\n    } finally {\r\n      setIsScheduling(false);\r\n      setScheduleProgress(0);\r\n    }\r\n  };\r\n\r\n  const handleGenerateAllImages = async () => {\r\n    if (selectedRows.length === 0) {\r\n      alert('Please select at least one row to generate images.');\r\n      return;\r\n    }\r\n    setIsScheduling(true);\r\n    setScheduleProgress(0);\r\n    try {\r\n      const selectedComposerRows = composerRows.filter(row => selectedRows.includes(row.id));\r\n      let successCount = 0;\r\n      let errorCount = 0;\r\n\r\n      for (let i = 0; i < selectedComposerRows.length; i++) {\r\n        const row = selectedComposerRows[i];\r\n\r\n        if (!row.caption || !(row.caption || '').trim()) {\r\n          console.log(`Skipping image generation for row ${row.id} - no caption available`);\r\n          continue;\r\n        }\r\n\r\n        try {\r\n          console.log(`Generating image for row ${row.id} with caption: ${row.caption.substring(0, 50)}...`);\r\n\r\n          // Truncate caption to 500 characters for image generation\r\n          const imagePrompt = row.caption.trim().substring(0, 500);\r\n          console.log(`Using image prompt (truncated): ${imagePrompt.substring(0, 100)}...`);\r\n\r\n          // Generate image using Stability AI with the caption as prompt\r\n          const response = await apiClient.generateInstagramImage(imagePrompt, 'feed');\r\n\r\n          if (response.success && response.data && response.data.image_url) {\r\n            console.log(`Successfully generated image for row ${row.id}:`, response.data.image_url);\r\n            setComposerRows(prev =>\r\n              prev.map(r =>\r\n                r.id === row.id\r\n                  ? {\r\n                    ...r,\r\n                    mediaFile: null,\r\n                    mediaPreview: response.data.image_url,\r\n                    status: (r.caption || '').trim() ? 'ready' : 'draft'\r\n                  }\r\n                  : r\r\n              )\r\n            );\r\n            successCount++;\r\n          } else {\r\n            console.log(`Failed to generate image for row ${row.id}:`, response);\r\n            errorCount++;\r\n          }\r\n        } catch (error) {\r\n          console.error(`Error generating image for row ${row.id}:`, error);\r\n          errorCount++;\r\n        }\r\n      }\r\n\r\n      if (successCount > 0) {\r\n        alert(`Image generation completed! Successfully generated ${successCount} images${errorCount > 0 ? `, ${errorCount} failed` : ''}`);\r\n      } else {\r\n        alert('Failed to generate any images. Please try again.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error in bulk image generation:', error);\r\n      alert('Failed to generate images. Please try again.');\r\n    } finally {\r\n      setIsScheduling(false);\r\n      setScheduleProgress(0);\r\n    }\r\n  };\r\n\r\n  const handleExpandCaption = (rowId) => {\r\n    const row = composerRows.find(r => r.id === rowId);\r\n    if (row) setExpandedCaption(row);\r\n  };\r\n\r\n  const handleViewMedia = (rowId) => {\r\n    const row = composerRows.find(r => r.id === rowId);\r\n    if (row && (row.mediaPreview || row.mediaFile)) setMediaPreviewModal(row);\r\n  };\r\n\r\n  const handleSaveExpandedCaption = (rowId, newCaption) => {\r\n    setComposerRows(prev =>\r\n      prev.map(row =>\r\n        row.id === rowId\r\n          ? { ...row, caption: newCaption, status: ((newCaption || '').trim() && (row.mediaFile || row.mediaPreview)) ? 'ready' : 'draft' }\r\n          : row\r\n      )\r\n    );\r\n    setExpandedCaption(null);\r\n  };\r\n\r\n  const handleThumbnailUpload = async (rowId, event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    // Validate file type\r\n    if (!file.type.startsWith('image/')) {\r\n      alert('Please select an image file for the thumbnail.');\r\n      return;\r\n    }\r\n\r\n    // Show loading state\r\n    setComposerRows(prev =>\r\n      prev.map(row =>\r\n        row.id === rowId\r\n          ? {\r\n            ...row,\r\n            thumbnailUploading: true\r\n          }\r\n          : row\r\n      )\r\n    );\r\n\r\n    try {\r\n      console.log(`📤 Uploading thumbnail for row ${rowId}: ${file.name}`);\r\n\r\n      // Upload thumbnail to Cloudinary via backend\r\n      const uploadResponse = await apiClient.uploadThumbnailToCloudinary(file);\r\n\r\n      if (uploadResponse && uploadResponse.success && uploadResponse.data && uploadResponse.data.url) {\r\n        console.log(`✅ Thumbnail uploaded successfully: ${uploadResponse.data.url}`);\r\n\r\n        // Update row with Cloudinary URL\r\n        setComposerRows(prev =>\r\n          prev.map(row =>\r\n            row.id === rowId\r\n              ? {\r\n                ...row,\r\n                thumbnailFile: null, // Clear file since we have URL now\r\n                thumbnailPreview: uploadResponse.data.url, // Use Cloudinary URL\r\n                thumbnailUrl: uploadResponse.data.url, // Store Cloudinary URL\r\n                thumbnailUploading: false\r\n              }\r\n              : row\r\n          )\r\n        );\r\n\r\n        alert('Thumbnail uploaded successfully! It will be optimized for Instagram reel cover image requirements.');\r\n      } else {\r\n        console.error(`❌ Failed to upload thumbnail:`, uploadResponse);\r\n        alert('Failed to upload thumbnail. Please try again.');\r\n\r\n        // Clear loading state\r\n        setComposerRows(prev =>\r\n          prev.map(row =>\r\n            row.id === rowId\r\n              ? {\r\n                ...row,\r\n                thumbnailUploading: false\r\n              }\r\n              : row\r\n          )\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error('Error uploading thumbnail:', error);\r\n      alert(`Failed to upload thumbnail: ${error.message}`);\r\n\r\n      // Clear loading state\r\n      setComposerRows(prev =>\r\n        prev.map(row =>\r\n          row.id === rowId\r\n            ? {\r\n              ...row,\r\n              thumbnailUploading: false\r\n            }\r\n            : row\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleRemoveThumbnail = (rowId) => {\r\n    setComposerRows(prev =>\r\n      prev.map(row =>\r\n        row.id === rowId ? {\r\n          ...row,\r\n          thumbnailFile: null,\r\n          thumbnailPreview: null,\r\n          thumbnailUrl: null // Clear Cloudinary URL as well\r\n        } : row\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleRemoveMedia = (rowId) => {\r\n    setComposerRows(prev =>\r\n      prev.map(row =>\r\n        row.id === rowId ? {\r\n          ...row,\r\n          mediaFile: null,\r\n          mediaPreview: null,\r\n          thumbnailFile: null,\r\n          thumbnailPreview: null,\r\n          carouselImages: row.postType === 'carousel' ? [] : null,\r\n          status: (row.caption || '').trim() ? 'draft' : 'draft'\r\n        } : row\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleGenerateCarousel = async (rowId) => {\r\n    try {\r\n      const row = composerRows.find(r => r.id === rowId);\r\n      if (!row || !(row.caption || '').trim()) {\r\n        alert('Please add a caption first to generate carousel images.');\r\n        return;\r\n      }\r\n\r\n      console.log(`Generating carousel for row ${rowId} with caption: ${row.caption.substring(0, 50)}...`);\r\n\r\n      const imagePrompt = row.caption.trim().substring(0, 500);\r\n      const imageCount = row.carouselImageCount || 3;\r\n\r\n      if (imageCount < 3 || imageCount > 7) {\r\n        alert('Carousel must have between 3 and 7 images.');\r\n        return;\r\n      }\r\n\r\n      console.log(`🎨 Generating ${imageCount} carousel images with prompt: ${imagePrompt}`);\r\n\r\n      const response = await apiClient.generateInstagramCarousel(imagePrompt, imageCount);\r\n\r\n      if (response.success && response.image_urls && response.image_urls.length >= 3) {\r\n        console.log(`Successfully generated carousel for row ${rowId}:`, response.image_urls);\r\n        setComposerRows(prev =>\r\n          prev.map(r =>\r\n            r.id === rowId\r\n              ? {\r\n                ...r,\r\n                carouselImages: response.image_urls,\r\n                status: (() => {\r\n                  const hasCaption = (r.caption || '').trim();\r\n                  const hasEnoughImages = response.image_urls.length >= 3;\r\n                  return hasCaption && hasEnoughImages ? 'ready' : 'draft';\r\n                })()\r\n              }\r\n              : r\r\n          )\r\n        );\r\n      } else {\r\n        console.log(`Failed to generate carousel for row ${rowId}:`, response);\r\n        const errorMsg = response.error || 'Failed to generate enough carousel images. Please try again.';\r\n        alert(`Failed to generate carousel: ${errorMsg}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error generating carousel for row ${rowId}:`, error);\r\n      alert('Error generating carousel images. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleCarouselUpload = async (rowId, event) => {\r\n    const files = Array.from(event.target.files);\r\n    if (files.length === 0) return;\r\n\r\n    const row = composerRows.find(r => r.id === rowId);\r\n    const maxImages = row.carouselImageCount || 3;\r\n    const minImages = 3;\r\n\r\n    if (files.length < minImages) {\r\n      alert(`Please select at least ${minImages} images for a carousel post.`);\r\n      return;\r\n    }\r\n\r\n    if (files.length > maxImages) {\r\n      alert(`Please select only ${maxImages} images for this carousel.`);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      console.log(`🖼️ Uploading ${files.length} carousel images for row ${rowId}`);\r\n\r\n      const imageUrls = [];\r\n      for (let i = 0; i < files.length; i++) {\r\n        const file = files[i];\r\n\r\n        // Validate file type\r\n        if (!file.type.startsWith('image/')) {\r\n          alert(`File ${file.name} is not an image. Please select only image files.`);\r\n          continue;\r\n        }\r\n\r\n        console.log(`📤 Uploading carousel image ${i + 1}/${files.length}: ${file.name}`);\r\n\r\n        // Upload to Cloudinary\r\n        const uploadResponse = await apiClient.uploadImageToCloudinary(file);\r\n\r\n        if (uploadResponse && uploadResponse.success && uploadResponse.data && uploadResponse.data.url) {\r\n          imageUrls.push(uploadResponse.data.url);\r\n          console.log(`✅ Carousel image ${i + 1} uploaded: ${uploadResponse.data.url}`);\r\n        } else {\r\n          console.error(`❌ Failed to upload carousel image ${i + 1}:`, uploadResponse);\r\n          alert(`Failed to upload image ${file.name}. Please try again.`);\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (imageUrls.length >= minImages) {\r\n        setComposerRows(prev =>\r\n          prev.map(r =>\r\n            r.id === rowId\r\n              ? {\r\n                ...r,\r\n                carouselImages: imageUrls,\r\n                status: (() => {\r\n                  const hasCaption = (r.caption || '').trim();\r\n                  const hasEnoughImages = imageUrls.length >= 3;\r\n                  return hasCaption && hasEnoughImages ? 'ready' : 'draft';\r\n                })()\r\n              }\r\n              : r\r\n          )\r\n        );\r\n        console.log(`✅ Successfully uploaded ${imageUrls.length} carousel images for row ${rowId}`);\r\n      } else {\r\n        alert(`Please upload at least ${minImages} images for a carousel post.`);\r\n      }\r\n\r\n      // Clear the file input\r\n      if (carouselInputRefs.current[rowId]) {\r\n        carouselInputRefs.current[rowId].value = '';\r\n      }\r\n    } catch (error) {\r\n      console.error('Error processing carousel upload:', error);\r\n      alert('Error uploading carousel images. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleDuplicateRow = (rowId) => {\r\n    const rowToDuplicate = composerRows.find(row => row.id === rowId);\r\n    if (rowToDuplicate) {\r\n      const newRow = {\r\n        ...rowToDuplicate,\r\n        id: `row-${Date.now()}-${Math.random()}`,\r\n        scheduledDate: new Date(rowToDuplicate.scheduledDate).toISOString().split('T')[0],\r\n        postType: rowToDuplicate.postType ? rowToDuplicate.postType.toLowerCase() : 'photo'\r\n      };\r\n      setComposerRows(prev => [...prev, newRow]);\r\n    }\r\n  };\r\n\r\n  const handleDeleteRow = (rowId) => {\r\n    setComposerRows(prev => prev.filter(row => row.id !== rowId));\r\n    setSelectedRows(prev => prev.filter(id => id !== rowId));\r\n  };\r\n\r\n  const handleBulkDelete = () => {\r\n    setComposerRows(prev => prev.filter(row => !selectedRows.includes(row.id)));\r\n    setSelectedRows([]);\r\n  };\r\n\r\n  const handleTimeShift = (direction) => {\r\n    setComposerRows(prev =>\r\n      prev.map(row => {\r\n        if (selectedRows.includes(row.id)) {\r\n          const [hours, minutes] = row.scheduledTime.split(':');\r\n          let newHours = parseInt(hours) + (direction === 'forward' ? 1 : -1);\r\n          if (newHours < 0) newHours = 23;\r\n          if (newHours > 23) newHours = 0;\r\n          return {\r\n            ...row,\r\n            scheduledTime: `${newHours.toString().padStart(2, '0')}:${minutes}`\r\n          };\r\n        }\r\n        return row;\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleDragStart = (rowId) => setDragStartRow(rowId);\r\n  const handleDragOver = (e) => e.preventDefault();\r\n  const handleDrop = (targetRowId) => {\r\n    if (dragStartRow && dragStartRow !== targetRowId) {\r\n      const rows = [...composerRows];\r\n      const sourceIndex = rows.findIndex(row => row.id === dragStartRow);\r\n      const targetIndex = rows.findIndex(row => row.id === targetRowId);\r\n      const [movedRow] = rows.splice(sourceIndex, 1);\r\n      rows.splice(targetIndex, 0, movedRow);\r\n      setComposerRows(rows);\r\n    }\r\n    setDragStartRow(null);\r\n  };\r\n\r\n  const handleScheduleAll = async () => {\r\n    if (!selectedAccount || composerRows.length === 0) return;\r\n    setIsScheduling(true);\r\n    setScheduleProgress(0);\r\n\r\n    try {\r\n      const readyRows = composerRows.filter(row => row.status === 'ready');\r\n      console.log(`🔄 Starting bulk scheduling for ${readyRows.length} posts...`);\r\n\r\n      // Progress tracking for media processing\r\n      let processedCount = 0;\r\n      const totalPosts = readyRows.length;\r\n\r\n      const postsWithMedia = await Promise.all(\r\n        readyRows.map(async (row, index) => {\r\n          const basePost = {\r\n            caption: row.caption,\r\n            scheduled_datetime: `${row.scheduledDate}T${row.scheduledTime}:00+05:30`,\r\n            scheduled_date: row.scheduledDate,\r\n            scheduled_time: row.scheduledTime,\r\n            post_type: (row.postType || 'photo').toLowerCase()\r\n          };\r\n\r\n          if (row.postType === 'photo') {\r\n            if (row.mediaFile) {\r\n              const result = {\r\n                ...basePost,\r\n                media_file: await fileToBase64(row.mediaFile),\r\n                media_filename: row.mediaFile.name\r\n              };\r\n              processedCount++;\r\n              setScheduleProgress((processedCount / totalPosts) * 30);\r\n              return result;\r\n            } else if (row.mediaPreview && row.mediaPreview.startsWith('data:')) {\r\n              const result = {\r\n                ...basePost,\r\n                media_file: row.mediaPreview,\r\n                media_filename: 'generated_image.jpg'\r\n              };\r\n              processedCount++;\r\n              setScheduleProgress((processedCount / totalPosts) * 30);\r\n              return result;\r\n            } else if (row.mediaPreview && row.mediaPreview.startsWith('http')) {\r\n              const result = {\r\n                ...basePost,\r\n                image_prompt: row.caption.substring(0, 200)\r\n              };\r\n              processedCount++;\r\n              setScheduleProgress((processedCount / totalPosts) * 30);\r\n              return result;\r\n            } else {\r\n              const result = {\r\n                ...basePost,\r\n                image_prompt: strategyData.imagePrompt || row.caption.substring(0, 200)\r\n              };\r\n              processedCount++;\r\n              setScheduleProgress((processedCount / totalPosts) * 30);\r\n              return result;\r\n            }\r\n          } else if (row.postType === 'carousel') {\r\n            if (row.carouselImages && row.carouselImages.length > 0) {\r\n              const carouselFiles = row.carouselImages;\r\n              const result = {\r\n                ...basePost,\r\n                carousel_images: carouselFiles,\r\n                carousel_filenames: carouselFiles.map((_, idx) => `carousel_image_${idx + 1}.jpg`)\r\n              };\r\n              processedCount++;\r\n              setScheduleProgress((processedCount / totalPosts) * 30);\r\n              return result;\r\n            } else {\r\n              const result = {\r\n                ...basePost,\r\n                carousel_image_count: row.carouselImageCount || 3,\r\n                image_prompt: strategyData.imagePrompt || row.caption.substring(0, 200)\r\n              };\r\n              processedCount++;\r\n              setScheduleProgress((processedCount / totalPosts) * 30);\r\n              return result;\r\n            }\r\n          } else if (row.postType === 'reel') {\r\n            if (row.mediaFile) {\r\n              const result = {\r\n                ...basePost,\r\n                media_file: await fileToBase64(row.mediaFile),\r\n                media_filename: row.mediaFile.name\r\n              };\r\n\r\n              // Add thumbnail if available - prioritize Cloudinary URL over file\r\n              if (row.thumbnailUrl && row.thumbnailUrl.startsWith('http')) {\r\n                result.thumbnail_url = row.thumbnailUrl;\r\n              } else if (row.thumbnailPreview && row.thumbnailPreview.startsWith('http')) {\r\n                result.thumbnail_url = row.thumbnailPreview;\r\n              } else if (row.thumbnailFile) {\r\n                result.thumbnail_file = await fileToBase64(row.thumbnailFile);\r\n                result.thumbnail_filename = row.thumbnailFile.name;\r\n              }\r\n\r\n              processedCount++;\r\n              setScheduleProgress((processedCount / totalPosts) * 30);\r\n              return result;\r\n            } else if (row.mediaPreview && row.mediaPreview.startsWith('data:')) {\r\n              const result = {\r\n                ...basePost,\r\n                media_file: row.mediaPreview,\r\n                media_filename: 'generated_video.mp4'\r\n              };\r\n\r\n              // Add thumbnail if available - prioritize Cloudinary URL over file\r\n              if (row.thumbnailUrl && row.thumbnailUrl.startsWith('http')) {\r\n                result.thumbnail_url = row.thumbnailUrl;\r\n              } else if (row.thumbnailPreview && row.thumbnailPreview.startsWith('http')) {\r\n                result.thumbnail_url = row.thumbnailPreview;\r\n              } else if (row.thumbnailFile) {\r\n                result.thumbnail_file = await fileToBase64(row.thumbnailFile);\r\n                result.thumbnail_filename = row.thumbnailFile.name;\r\n              }\r\n\r\n              processedCount++;\r\n              setScheduleProgress((processedCount / totalPosts) * 30);\r\n              return result;\r\n            } else {\r\n              const result = {\r\n                ...basePost,\r\n                image_prompt: strategyData.imagePrompt || row.caption.substring(0, 200)\r\n              };\r\n              processedCount++;\r\n              setScheduleProgress((processedCount / totalPosts) * 30);\r\n              return result;\r\n            }\r\n          }\r\n\r\n          processedCount++;\r\n          setScheduleProgress((processedCount / totalPosts) * 30);\r\n          return basePost;\r\n        })\r\n      );\r\n\r\n      // Final normalization: ensure all outgoing post_type values are lowercase\r\n      const normalizedPostsWithMedia = postsWithMedia.map(post => ({\r\n        ...post,\r\n        post_type: (post.post_type || 'photo').toLowerCase()\r\n      }));\r\n\r\n      const bulkData = {\r\n        social_account_id: selectedAccount.id,\r\n        posts: normalizedPostsWithMedia\r\n      };\r\n\r\n      console.log(`🚀 Sending ${normalizedPostsWithMedia.length} posts to backend for scheduling...`);\r\n      setScheduleProgress(40); // 40% for API call start\r\n\r\n      const response = await apiClient.bulkScheduleInstagramPosts(bulkData);\r\n      setScheduleProgress(90); // 90% for API response\r\n      console.log('Bulk schedule response:', response);\r\n      if (response && response.success) {\r\n        console.log(`✅ Successfully scheduled ${response.scheduled_posts?.length || 0} posts`);\r\n        setComposerRows(prev =>\r\n          prev.map(row =>\r\n            readyRows.some(r => r.id === row.id) ? { ...row, status: 'scheduled' } : row\r\n          )\r\n        );\r\n        setScheduleProgress(100);\r\n        setScheduledGridRows(response.scheduled_posts || []);\r\n        // Redirect to InstagramPage with scheduled posts for grid display\r\n        navigate('/instagram', { state: { scheduledGridRows: response.scheduled_posts || [] } });\r\n      } else if (response && Array.isArray(response.results)) {\r\n        // Handle legacy or alternate backend response\r\n        const successCount = response.results.filter(r => r.success).length;\r\n        const failedCount = response.results.filter(r => !r.success).length;\r\n        let errorMsg = `Scheduled ${successCount} posts successfully.`;\r\n        if (failedCount > 0) {\r\n          errorMsg += `\\n${failedCount} posts failed. Check console for details.`;\r\n          response.results.forEach((result, idx) => {\r\n            if (!result.success) {\r\n              errorMsg += `\\nPost #${idx + 1}: ${result.error || result.message || 'Unknown error'}`;\r\n            }\r\n          });\r\n        }\r\n        alert(errorMsg);\r\n        setComposerRows(prev =>\r\n          prev.map(row => {\r\n            const result = response.results.find(r => r.caption === row.caption && r.scheduled_date === row.scheduledDate);\r\n            if (result) {\r\n              return {\r\n                ...row,\r\n                status: result.success ? 'scheduled' : 'failed',\r\n                error: result.success ? null : (result.error || 'Unknown error')\r\n              };\r\n            }\r\n            return row;\r\n          })\r\n        );\r\n        setScheduleProgress(100);\r\n        setScheduledGridRows(response.results.filter(r => r.success));\r\n        navigate('/instagram', { state: { scheduledGridRows: response.results.filter(r => r.success) } });\r\n      } else {\r\n        let errorMsg = 'Error scheduling Instagram posts.';\r\n        if (response && response.failed_posts && response.failed_posts.length > 0) {\r\n          errorMsg += '\\nFailed posts:';\r\n          response.failed_posts.forEach(fp => {\r\n            errorMsg += `\\nPost #${fp.index + 1}: ${fp.error}`;\r\n          });\r\n        } else if (response && response.message) {\r\n          errorMsg += `\\n${response.message}`;\r\n        } else if (response && response.errorData) {\r\n          errorMsg += `\\nAPI Error: ${JSON.stringify(response.errorData)}`;\r\n        }\r\n        alert(errorMsg);\r\n        console.error('Bulk scheduling error:', response);\r\n      }\r\n    } catch (error) {\r\n      let errorMsg = 'Error scheduling Instagram posts. Please try again.';\r\n      // Check if any of the readyRows are reels\r\n      const hasReel = composerRows.filter(row => selectedRows.includes(row.id)).some(row => (row.postType || '').toLowerCase() === 'reel');\r\n      if (error && error.error === 'timeout') {\r\n        if (hasReel) {\r\n          errorMsg = 'Your reel is being processed and will be scheduled soon. Please check back in a few minutes.';\r\n        } else {\r\n          errorMsg = 'Request timed out. Video processing may take longer. Please try again or check your video file size.';\r\n        }\r\n      } else if (error && error.errorData) {\r\n        errorMsg += `\\nAPI Error: ${JSON.stringify(error.errorData)}`;\r\n      } else if (error && error.message) {\r\n        errorMsg += `\\n${error.message}`;\r\n      }\r\n      alert(errorMsg);\r\n      console.error('Bulk scheduling exception:', error);\r\n    } finally {\r\n      setIsScheduling(false);\r\n      setScheduleProgress(0);\r\n    }\r\n  };\r\n\r\n  // Calendar day click logic\r\n  const handleCalendarDateSelect = (date) => {\r\n    setStrategyData(prev => ({\r\n      ...prev,\r\n      startDate: date.toISOString().split('T')[0]\r\n    }));\r\n  };\r\n\r\n  // UI helpers\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'published': return '✓';\r\n      case 'failed': return '✗';\r\n      case 'scheduled': return '⏰';\r\n      case 'ready': return '🟢';\r\n      default: return '📝';\r\n    }\r\n  };\r\n  const getStatusClass = (status) => {\r\n    switch (status) {\r\n      case 'published': return 'ig-status-published';\r\n      case 'failed': return 'ig-status-failed';\r\n      case 'scheduled': return 'ig-status-scheduled';\r\n      case 'ready': return 'ig-status-ready';\r\n      default: return 'ig-status-draft';\r\n    }\r\n  };\r\n\r\n  // Calendar helpers\r\n  const generateCalendarDays = (year, month) => {\r\n    const daysInMonth = new Date(year, month + 1, 0).getDate();\r\n    const firstDayOfMonth = new Date(year, month, 1).getDay();\r\n    const days = [];\r\n    for (let i = 0; i < firstDayOfMonth; i++) days.push({ day: null, date: null });\r\n    for (let i = 1; i <= daysInMonth; i++) {\r\n      const date = new Date(year, month, i);\r\n      days.push({ day: i, date });\r\n    }\r\n    return days;\r\n  };\r\n  const getPostsForDate = (date) => {\r\n    // Format date as YYYY-MM-DD using local date parts\r\n    const yyyy = date.getFullYear();\r\n    const mm = String(date.getMonth() + 1).padStart(2, '0');\r\n    const dd = String(date.getDate()).padStart(2, '0');\r\n    const dateString = `${yyyy}-${mm}-${dd}`;\r\n    return composerRows.filter(row => row.scheduledDate === dateString);\r\n  };\r\n\r\n  const handleRemoveCarouselImages = (rowId) => {\r\n    setComposerRows(prev =>\r\n      prev.map(r =>\r\n        r.id === rowId\r\n          ? {\r\n            ...r,\r\n            carouselImages: [],\r\n            status: 'draft' // Always reset to draft when removing images\r\n          }\r\n          : r\r\n      )\r\n    );\r\n    console.log(`🗑️ Removed carousel images for row ${rowId}`);\r\n  };\r\n\r\n  // --- RENDER ---\r\n  return (\r\n    <div className=\"ig-bulk-composer\">\r\n      <div className=\"ig-bulk-composer-header\">\r\n        <h2>Instagram Bulk Composer</h2>\r\n      </div>\r\n\r\n      <div className=\"ig-bulk-composer-content\">\r\n        {/* Strategy Step */}\r\n        <div className=\"ig-strategy-step\">\r\n          <h3>Step 1: Strategy & Schedule</h3>\r\n          <div className=\"ig-strategy-form\">\r\n\r\n            {/* Post Type Selection */}\r\n            <div className=\"ig-form-group\">\r\n              <label>Post Type</label>\r\n              <div className=\"ig-post-type-toggle\">\r\n                <button\r\n                  className={postType === 'photo' ? 'active' : ''}\r\n                  onClick={() => handlePostTypeChange('photo')}\r\n                >\r\n                  📸 Photo\r\n                </button>\r\n                <button\r\n                  className={postType === 'carousel' ? 'active' : ''}\r\n                  onClick={() => handlePostTypeChange('carousel')}\r\n                >\r\n                  🖼️ Carousel\r\n                </button>\r\n                <button\r\n                  className={postType === 'reel' ? 'active' : ''}\r\n                  onClick={() => handlePostTypeChange('reel')}\r\n                >\r\n                  🎬 Reel\r\n                </button>\r\n              </div>\r\n\r\n              {/* Carousel Image Count */}\r\n              {postType === 'carousel' && (\r\n                <div className=\"ig-form-group\">\r\n                  <label>Number of Images: {carouselImageCount}</label>\r\n                  <input\r\n                    type=\"range\"\r\n                    min=\"3\"\r\n                    max=\"7\"\r\n                    value={carouselImageCount}\r\n                    onChange={(e) => handleCarouselImageCountChange(parseInt(e.target.value))}\r\n                    className=\"ig-slider\"\r\n                  />\r\n                  <div className=\"ig-slider-labels\">\r\n                    <span>3</span>\r\n                    <span>4</span>\r\n                    <span>5</span>\r\n                    <span>6</span>\r\n                    <span>7</span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* AI Image Prompt */}\r\n\r\n            </div>\r\n            <div className=\"ig-form-group\">\r\n              <label>Strategy Template</label>\r\n              <select\r\n                value={strategyData.promptTemplate}\r\n                onChange={(e) => handleStrategyChange('promptTemplate', e.target.value)}\r\n                className=\"ig-form-select\"\r\n              >\r\n                <option value=\"\">Select a template...</option>\r\n                {promptTemplates.map(template => (\r\n                  <option key={template.id} value={template.prompt}>\r\n                    {template.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            {strategyData.promptTemplate === 'custom' && (\r\n              <div className=\"ig-form-group\">\r\n                <label>Brand Information</label>\r\n                <div className=\"ig-form-row\">\r\n                  <div className=\"ig-form-group\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={strategyData.brandName}\r\n                      onChange={(e) => handleStrategyChange('brandName', e.target.value)}\r\n                      placeholder=\"Brand Name\"\r\n                      className=\"ig-form-input\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"ig-form-group\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={strategyData.hookIdea}\r\n                      onChange={(e) => handleStrategyChange('hookIdea', e.target.value)}\r\n                      placeholder=\"Hook Idea (e.g., Tired of the shore?)\"\r\n                      className=\"ig-form-input\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"ig-form-group\">\r\n                  <label>Features (one per line)</label>\r\n                  <textarea\r\n                    value={strategyData.features}\r\n                    onChange={(e) => handleStrategyChange('features', e.target.value)}\r\n                    placeholder=\"✅ Feature 1\\n✅ Feature 2\\n✅ Feature 3\"\r\n                    className=\"ig-form-input\"\r\n                    rows=\"3\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"ig-form-row\">\r\n                  <div className=\"ig-form-group\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={strategyData.location}\r\n                      onChange={(e) => handleStrategyChange('location', e.target.value)}\r\n                      placeholder=\"Location\"\r\n                      className=\"ig-form-input\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"ig-form-group\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={strategyData.phone}\r\n                      onChange={(e) => handleStrategyChange('phone', e.target.value)}\r\n                      placeholder=\"Phone Number\"\r\n                      className=\"ig-form-input\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"ig-form-group\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={strategyData.website}\r\n                    onChange={(e) => handleStrategyChange('website', e.target.value)}\r\n                    placeholder=\"Website URL\"\r\n                    className=\"ig-form-input\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"ig-form-group\">\r\n                  <textarea\r\n                    value={strategyData.callToAction}\r\n                    onChange={(e) => handleStrategyChange('callToAction', e.target.value)}\r\n                    placeholder=\"Call to Action (e.g., Book your appointment today!)\"\r\n                    className=\"ig-form-input\"\r\n                    rows=\"2\"\r\n                  />\r\n                </div>\r\n\r\n                <small className=\"ig-form-help\">\r\n                  This information will be used to generate captions that follow your brand's style and approach.\r\n                </small>\r\n              </div>\r\n            )}\r\n            <div className=\"ig-form-row\">\r\n              <div className=\"ig-form-group\">\r\n                <label>Start Date</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={strategyData.startDate}\r\n                  onChange={(e) => handleStrategyChange('startDate', e.target.value)}\r\n                  className=\"ig-form-input\"\r\n                />\r\n              </div>\r\n              <div className=\"ig-form-group\">\r\n                <label>End Date (Optional)</label>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={strategyData.endDate}\r\n                    onChange={(e) => handleStrategyChange('endDate', e.target.value)}\r\n                    className=\"ig-form-input\"\r\n                    min={strategyData.startDate}\r\n                    disabled={!strategyData.startDate}\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => handleStrategyChange('endDate', '')}\r\n                    className=\"ig-btn ig-btn-secondary ig-btn-small\"\r\n                    disabled={!strategyData.endDate}\r\n                    title=\"Clear end date (single day schedule)\"\r\n                  >\r\n                    <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                      <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n                    </svg>\r\n                    Clear\r\n                  </button>\r\n                </div>\r\n                <small className=\"ig-form-help\">\r\n                  Leave empty for single day schedule\r\n                </small>\r\n              </div>\r\n              <div className=\"ig-form-group\">\r\n                <label>Frequency</label>\r\n                <select\r\n                  value={strategyData.frequency}\r\n                  onChange={(e) => handleStrategyChange('frequency', e.target.value)}\r\n                  className=\"ig-form-select\"\r\n                >\r\n                  <option value=\"daily\">Daily</option>\r\n                  <option value=\"weekly\">Weekly</option>\r\n                  <option value=\"monthly\">Monthly</option>\r\n                  <option value=\"custom\">Custom Cron</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"ig-form-group\">\r\n                <label>Time Slot</label>\r\n                <input\r\n                  type=\"time\"\r\n                  value={strategyData.timeSlot}\r\n                  onChange={(e) => handleStrategyChange('timeSlot', e.target.value)}\r\n                  className=\"ig-form-input\"\r\n                />\r\n              </div>\r\n            </div>\r\n            {strategyData.frequency === 'custom' && (\r\n              <div className=\"ig-form-group\">\r\n                <label>Custom Cron Expression</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={strategyData.customCron}\r\n                  onChange={(e) => handleStrategyChange('customCron', e.target.value)}\r\n                  placeholder=\"0 9 * * * (daily at 9 AM)\"\r\n                  className=\"ig-form-input\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Calendar Preview */}\r\n        <div className=\"ig-calendar-preview-section\">\r\n          <h3>Calendar Preview</h3>\r\n          <div className=\"ig-calendar-container\">\r\n            <div className=\"ig-calendar-header\">\r\n              <button\r\n                onClick={() => setCurrentMonth(prev => new Date(prev.getFullYear(), prev.getMonth() - 1))}\r\n                className=\"ig-btn ig-btn-secondary ig-btn-small\"\r\n              >\r\n                ←\r\n              </button>\r\n              <h4>{currentMonth.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}</h4>\r\n              <button\r\n                onClick={() => setCurrentMonth(prev => new Date(prev.getFullYear(), prev.getMonth() + 1))}\r\n                className=\"ig-btn ig-btn-secondary ig-btn-small\"\r\n              >\r\n                →\r\n              </button>\r\n            </div>\r\n            <div className=\"ig-calendar-grid\">\r\n              {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (\r\n                <div key={day} className=\"ig-calendar-day-header\">{day}</div>\r\n              ))}\r\n              {generateCalendarDays(currentMonth.getFullYear(), currentMonth.getMonth()).map((day, index) => (\r\n                <div\r\n                  key={index}\r\n                  className={`ig-calendar-day ${day.date ? 'clickable' : ''} ${day.date && getPostsForDate(day.date).length > 0 ? 'has-posts' : ''}`}\r\n                  onClick={() => day.date && handleCalendarDateSelect(day.date)}\r\n                >\r\n                  <span className=\"ig-day-number\">{day.day}</span>\r\n                  {day.date && getPostsForDate(day.date).length > 0 && (\r\n                    <div className=\"ig-post-indicators\">\r\n                      {getPostsForDate(day.date).map((post, postIndex) => (\r\n                        <div\r\n                          key={postIndex}\r\n                          className=\"ig-post-dot\"\r\n                          title={`${post.scheduledTime} - ${(post.caption || '').substring(0, 30)}...`}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Composer Grid */}\r\n        <div className=\"ig-composer-grid-section\">\r\n          <div className=\"ig-composer-header\">\r\n            <h3>Step 2: Content Grid</h3>\r\n            <div className=\"ig-composer-controls\">\r\n              <button\r\n                onClick={() => {\r\n                  const newRow = {\r\n                    id: `row-${Date.now()}-${Math.random()}`,\r\n                    caption: '',\r\n                    postType: postType.toLowerCase(),\r\n                    mediaFile: null,\r\n                    mediaPreview: null,\r\n                    carouselImages: postType === 'carousel' ? [] : null,\r\n                    carouselImageCount: postType === 'carousel' ? carouselImageCount : null,\r\n                    scheduledDate: new Date().toISOString().split('T')[0],\r\n                    scheduledTime: strategyData.timeSlot,\r\n                    status: 'draft',\r\n                    isSelected: false\r\n                  };\r\n                  setComposerRows(prev => [...prev, newRow]);\r\n                }}\r\n                className=\"ig-btn ig-btn-primary ig-btn-small\"\r\n              >\r\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\r\n                  <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\r\n                </svg>\r\n                Add Row\r\n              </button>\r\n              <button\r\n                onClick={handleSelectAll}\r\n                className=\"ig-btn ig-btn-secondary ig-btn-small\"\r\n              >\r\n                {selectedRows.length === composerRows.length ? 'Deselect All' : 'Select All'}\r\n              </button>\r\n              <button\r\n                onClick={handleBulkDelete}\r\n                disabled={selectedRows.length === 0}\r\n                className=\"ig-btn ig-btn-danger ig-btn-small\"\r\n              >\r\n                Delete Selected\r\n              </button>\r\n              <button\r\n                className=\"ig-btn ig-btn-primary\"\r\n                onClick={handleGenerateAllCaptions}\r\n                disabled={composerRows.length === 0 || selectedRows.length === 0}\r\n              >\r\n                Generate Captions\r\n              </button>\r\n              <button\r\n                className=\"ig-btn ig-btn-secondary\"\r\n                onClick={handleGenerateAllImages}\r\n                disabled={composerRows.length === 0 || selectedRows.length === 0}\r\n              >\r\n                Generate Images\r\n              </button>\r\n              <div className=\"ig-time-shift-controls\">\r\n                <button\r\n                  onClick={() => handleTimeShift('backward')}\r\n                  disabled={selectedRows.length === 0}\r\n                  className=\"ig-btn ig-btn-secondary ig-btn-small\"\r\n                >\r\n                  ← -1h\r\n                </button>\r\n                <button\r\n                  onClick={() => handleTimeShift('forward')}\r\n                  disabled={selectedRows.length === 0}\r\n                  className=\"ig-btn ig-btn-secondary ig-btn-small\"\r\n                >\r\n                  +1h →\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"ig-composer-grid-container\">\r\n            <div className=\"ig-composer-grid\" ref={gridRef}>\r\n              <div className=\"ig-grid-header ig-grid-row\">\r\n                <div className=\"ig-grid-cell ig-header-cell\"></div>\r\n                <div className=\"ig-grid-cell ig-header-cell\">Caption</div>\r\n                <div className=\"ig-grid-cell ig-header-cell\">Media</div>\r\n                <div className=\"ig-grid-cell ig-header-cell\">Date</div>\r\n                <div className=\"ig-grid-cell ig-header-cell\">Time</div>\r\n                <div className=\"ig-grid-cell ig-header-cell\">Status</div>\r\n              </div>\r\n              <div className=\"ig-grid-body\">\r\n                {composerRows.map((row, index) => (\r\n                  <div\r\n                    key={row.id}\r\n                    className={`ig-grid-row ${row.isSelected ? 'selected' : ''}`}\r\n                    draggable\r\n                    onDragStart={() => handleDragStart(row.id)}\r\n                    onDragOver={handleDragOver}\r\n                    onDrop={() => handleDrop(row.id)}\r\n                  >\r\n                    <div className=\"ig-grid-cell\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedRows.includes(row.id)}\r\n                        onChange={() => handleRowSelect(row.id)}\r\n                      />\r\n                    </div>\r\n                    <div className=\"ig-grid-cell ig-caption-cell\">\r\n                      <div className=\"caption-container\">\r\n                        <textarea\r\n                          value={row.caption}\r\n                          onChange={(e) => handleCellEdit(row.id, 'caption', e.target.value)}\r\n                          placeholder=\"Enter your Instagram post caption...\"\r\n                          className=\"ig-caption-input\"\r\n                          rows=\"3\"\r\n                        />\r\n                        <button\r\n                          onClick={() => handleExpandCaption(row.id)}\r\n                          className=\"expand-btn\"\r\n                          title=\"Expand caption\"\r\n                        >\r\n                          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                            <path d=\"M15 3h6v6\" />\r\n                            <path d=\"M9 21H3v-6\" />\r\n                            <path d=\"M21 3l-7 7\" />\r\n                            <path d=\"M3 21l7-7\" />\r\n                          </svg>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"ig-grid-cell ig-media-cell\">\r\n                      <div className=\"ig-media-options\">\r\n                        {/* Show upload options when no media is uploaded yet */}\r\n                        {!row.mediaPreview && !row.mediaFile && (!row.carouselImages || row.carouselImages.length === 0) ? (\r\n                          <div className=\"ig-media-option-group\">\r\n                            {/* Photo/Reel Upload */}\r\n                            {(row.postType === 'photo' || row.postType === 'reel') && (\r\n                              <>\r\n                                <input\r\n                                  type=\"file\"\r\n                                  accept={row.postType === 'photo' ? \"image/*\" : \"video/*\"}\r\n                                  onChange={(e) => handleMediaUpload(row.id, e)}\r\n                                  className=\"ig-media-input\"\r\n                                  id={`ig-media-upload-${row.id}`}\r\n                                />\r\n                                <label htmlFor={`ig-media-upload-${row.id}`} className=\"ig-media-option-btn upload-btn\">\r\n                                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                    <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\r\n                                    <polyline points=\"7,10 12,15 17,10\" />\r\n                                    <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\" />\r\n                                  </svg>\r\n                                  Upload {row.postType === 'photo' ? 'Image' : 'Video'}\r\n                                </label>\r\n                              </>\r\n                            )}\r\n\r\n                            {/* Disabled Thumbnail Upload for Reels (Video Required First) */}\r\n                            {row.postType === 'reel' && (\r\n                              <div className=\"ig-media-option-btn upload-btn thumbnail-btn disabled\" title=\"Please upload a video first\">\r\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                  <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\r\n                                  <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\" />\r\n                                  <polyline points=\"21,15 16,10 5,21\" />\r\n                                </svg>\r\n                                Upload Thumbnail (Video Required First)\r\n                              </div>\r\n                            )}\r\n\r\n                            {/* AI Generation for Photo */}\r\n                            {row.postType === 'photo' && (\r\n                              <button\r\n                                onClick={() => handleGenerateMedia(row.id)}\r\n                                className=\"ig-media-option-btn generate-btn\"\r\n                              >\r\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                  <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" />\r\n                                </svg>\r\n                                Generate\r\n                              </button>\r\n                            )}\r\n\r\n                            {/* AI Generation for Reel */}\r\n                            {row.postType === 'reel' && (\r\n                              <button\r\n                                onClick={() => handleGenerateMedia(row.id)}\r\n                                className=\"ig-media-option-btn generate-btn\"\r\n                                disabled={true}\r\n                                title=\"AI video generation not yet available\"\r\n                              >\r\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                  <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" />\r\n                                </svg>\r\n                                Generate (Coming Soon)\r\n                              </button>\r\n                            )}\r\n\r\n                            {/* Carousel Options */}\r\n                            {row.postType === 'carousel' && (\r\n                              <>\r\n                                <button\r\n                                  onClick={() => handleGenerateCarousel(row.id)}\r\n                                  className=\"ig-media-option-btn generate-btn\"\r\n                                >\r\n                                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                    <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" />\r\n                                  </svg>\r\n                                  Generate {row.carouselImageCount || 3} Images\r\n                                </button>\r\n                                <input\r\n                                  key={`ig-carousel-upload-${row.id}`}\r\n                                  type=\"file\"\r\n                                  accept=\"image/*\"\r\n                                  multiple\r\n                                  ref={el => carouselInputRefs.current[row.id] = el}\r\n                                  onChange={(e) => handleCarouselUpload(row.id, e)}\r\n                                  className=\"ig-media-input\"\r\n                                  id={`ig-carousel-upload-${row.id}`}\r\n                                />\r\n                                <label htmlFor={`ig-carousel-upload-${row.id}`} className=\"ig-media-option-btn upload-btn\">\r\n                                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                    <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\r\n                                    <polyline points=\"7,10 12,15 17,10\" />\r\n                                    <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\" />\r\n                                  </svg>\r\n                                  Upload {row.carouselImageCount || 3} Images\r\n                                </label>\r\n                              </>\r\n                            )}\r\n                          </div>\r\n                        ) : (\r\n                          /* Show media preview and additional options after upload */\r\n                          <div className=\"ig-media-preview-container\">\r\n                            {/* Thumbnail Upload for Reels - ONLY show after video is uploaded */}\r\n                            {row.postType === 'reel' && (row.mediaPreview || row.mediaFile) && (\r\n                              <div className=\"ig-reel-thumbnail-upload-section\">\r\n                                <input\r\n                                  type=\"file\"\r\n                                  accept=\"image/*\"\r\n                                  onChange={(e) => handleThumbnailUpload(row.id, e)}\r\n                                  className=\"ig-media-input\"\r\n                                  id={`ig-thumbnail-upload-${row.id}`}\r\n                                  disabled={row.thumbnailUploading}\r\n                                />\r\n                                <label\r\n                                  htmlFor={`ig-thumbnail-upload-${row.id}`}\r\n                                  className={`ig-media-option-btn upload-btn thumbnail-btn ${row.thumbnailUploading ? 'uploading' : ''}`}\r\n                                >\r\n                                  {row.thumbnailUploading ? (\r\n                                    <>\r\n                                      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" className=\"spinning\">\r\n                                        <path d=\"M21 12a9 9 0 11-6.219-8.56\" />\r\n                                      </svg>\r\n                                      Uploading...\r\n                                    </>\r\n                                  ) : (\r\n                                    <>\r\n                                      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                        <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\r\n                                        <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\" />\r\n                                        <polyline points=\"21,15 16,10 5,21\" />\r\n                                      </svg>\r\n                                      {row.thumbnailPreview ? 'Change Thumbnail' : 'Upload Thumbnail (Optional)'}\r\n                                    </>\r\n                                  )}\r\n                                </label>\r\n                              </div>\r\n                            )}\r\n                            \r\n                            {/* Media Preview */}\r\n                            <div className=\"ig-media-preview\">\r\n                              {/* Carousel Preview */}\r\n                              {row.postType === 'carousel' && row.carouselImages && row.carouselImages.length > 0 ? (\r\n                                <div className=\"ig-carousel-preview\">\r\n                                  <div className=\"ig-carousel-grid\">\r\n                                    {row.carouselImages.slice(0, row.carouselImageCount || 3).map((url, index) => (\r\n                                      <div key={index} className=\"ig-carousel-item\">\r\n                                        <img src={url} alt={`Carousel ${index + 1}`} />\r\n                                        <span className=\"ig-carousel-number\">{index + 1}</span>\r\n                                      </div>\r\n                                    ))}\r\n                                  </div>\r\n                                  <div className=\"ig-carousel-info\">\r\n                                    <div className=\"ig-carousel-status\">\r\n                                      {row.carouselImages.length} / {row.carouselImageCount || 3} images\r\n                                      {row.carouselImages.length < 3 && (\r\n                                        <span className=\"ig-carousel-warning\">⚠️ Need at least 3 images</span>\r\n                                      )}\r\n                                      {row.carouselImages.length >= 3 && (\r\n                                        <span className=\"ig-carousel-success\">✅ Ready</span>\r\n                                      )}\r\n                                    </div>\r\n                                    <button\r\n                                      onClick={() => handleRemoveCarouselImages(row.id)}\r\n                                      className=\"ig-btn ig-btn-danger ig-btn-small\"\r\n                                      disabled={row.carouselImages.length === 0}\r\n                                      title=\"Remove all carousel images\"\r\n                                    >\r\n                                      <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                        <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                                        <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n                                      </svg>\r\n                                      Remove All\r\n                                    </button>\r\n                                  </div>\r\n                                </div>\r\n                              ) : (\r\n                                /* Single Media Preview */\r\n                                <>\r\n                                  {row.postType === 'reel' ? (\r\n                                    <div className=\"ig-reel-preview\">\r\n                                      <div className=\"ig-reel-video\">\r\n                                        <video src={row.mediaPreview} controls />\r\n                                        <span className=\"ig-reel-label\">Reel Video</span>\r\n                                        <div className=\"ig-reel-video-actions\">\r\n                                          <button\r\n                                            onClick={() => handleViewMedia(row.id)}\r\n                                            className=\"ig-reel-video-view\"\r\n                                            title=\"View video\"\r\n                                          >\r\n                                            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                              <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\" />\r\n                                              <circle cx=\"12\" cy=\"12\" r=\"3\" />\r\n                                            </svg>\r\n                                          </button>\r\n                                          <button\r\n                                            onClick={() => handleRemoveMedia(row.id)}\r\n                                            className=\"ig-reel-video-close\"\r\n                                            title=\"Remove video\"\r\n                                          >\r\n                                            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                                              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n                                            </svg>\r\n                                          </button>\r\n                                        </div>\r\n                                      </div>\r\n                                      {row.thumbnailPreview && (\r\n                                        <div className={`ig-reel-thumbnail ${row.thumbnailUrl ? 'uploaded' : ''}`} style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                          <img src={row.thumbnailPreview} alt=\"Thumbnail\" />\r\n                                          <label htmlFor={`ig-thumbnail-upload-${row.id}`} style={{ cursor: 'pointer', marginLeft: '0.5rem', display: 'flex', alignItems: 'center' }} title=\"Change Thumbnail\">\r\n                                            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                              <path d=\"M12 20h9\" />\r\n                                              <path d=\"M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4 12.5-12.5z\" />\r\n                                            </svg>\r\n                                          </label>\r\n                                          <input\r\n                                            type=\"file\"\r\n                                            accept=\"image/*\"\r\n                                            onChange={(e) => handleThumbnailUpload(row.id, e)}\r\n                                            className=\"ig-media-input\"\r\n                                            id={`ig-thumbnail-upload-${row.id}`}\r\n                                            disabled={row.thumbnailUploading}\r\n                                            style={{ display: 'none' }}\r\n                                          />\r\n                                          <button\r\n                                            onClick={() => handleRemoveThumbnail(row.id)}\r\n                                            className=\"ig-reel-thumbnail-close\"\r\n                                            title=\"Remove thumbnail\"\r\n                                          >\r\n                                            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                                              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n                                            </svg>\r\n                                          </button>\r\n                                        </div>\r\n                                      )}\r\n                                    </div>\r\n                                  ) : row.mediaFile?.type?.startsWith('image/') ? (\r\n                                    <img src={row.mediaPreview} alt=\"Preview\" />\r\n                                  ) : (\r\n                                    <video src={row.mediaPreview} controls />\r\n                                  )}\r\n                                </>\r\n                              )}\r\n                            \r\n\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"ig-grid-cell ig-date-cell\">\r\n                      <input\r\n                        type=\"date\"\r\n                        value={row.scheduledDate}\r\n                        onChange={(e) => handleCellEdit(row.id, 'scheduledDate', e.target.value)}\r\n                        className=\"ig-date-input\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"ig-grid-cell ig-time-cell\">\r\n                      <input\r\n                        type=\"time\"\r\n                        value={row.scheduledTime}\r\n                        onChange={(e) => handleCellEdit(row.id, 'scheduledTime', e.target.value)}\r\n                        className=\"ig-time-input\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"ig-grid-cell ig-status-cell\">\r\n                      <span className={`ig-status-badge ${getStatusClass(row.status)}`}>\r\n                        {getStatusIcon(row.status)} {row.status}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Queue Confirmation */}\r\n        <div className=\"ig-queue-confirmation\">\r\n          <h3>Step 3: Schedule & Publish</h3>\r\n          <div className=\"ig-confirmation-stats\">\r\n            <div className=\"ig-stat-item\">\r\n              <span className=\"ig-stat-label\">Total Posts:</span>\r\n              <span className=\"ig-stat-value\">{composerRows.length}</span>\r\n            </div>\r\n            <div className=\"ig-stat-item\">\r\n              <span className=\"ig-stat-label\">With Captions:</span>\r\n              <span className=\"ig-stat-value\">{composerRows.filter(row => (row.caption || '').trim()).length}</span>\r\n            </div>\r\n            <div className=\"ig-stat-item\">\r\n              <span className=\"ig-stat-label\">Ready to Schedule:</span>\r\n              <span className=\"ig-stat-value\">{composerRows.filter(row => row.status === 'ready').length}</span>\r\n            </div>\r\n            <div className=\"ig-stat-item\">\r\n              <span className=\"ig-stat-label\">With Media:</span>\r\n              <span className=\"ig-stat-value\">{composerRows.filter(row => row.mediaFile || row.mediaPreview).length}</span>\r\n            </div>\r\n          </div>\r\n          {isScheduling && (\r\n            <div className=\"ig-schedule-progress\">\r\n              <div className=\"ig-progress-bar\">\r\n                <div\r\n                  className=\"ig-progress-fill\"\r\n                  style={{ width: `${scheduleProgress}%` }}\r\n                />\r\n              </div>\r\n              <span className=\"ig-progress-text\">Scheduling Instagram posts... {Math.round(scheduleProgress)}%</span>\r\n            </div>\r\n          )}\r\n          <div className=\"ig-confirmation-actions\">\r\n            <button\r\n              onClick={handleScheduleAll}\r\n              disabled={isScheduling || composerRows.filter(row => row.status === 'ready').length === 0}\r\n              className=\"ig-btn ig-btn-primary ig-btn-large\"\r\n            >\r\n              {isScheduling ? (\r\n                <>\r\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <path d=\"M21 12a9 9 0 11-6.219-8.56\" />\r\n                  </svg>\r\n                  Scheduling...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                    <polyline points=\"12,6 12,12 16,14\" />\r\n                  </svg>\r\n                  Schedule Ready Posts ({composerRows.filter(row => row.status === 'ready').length})\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Expanded Caption Modal */}\r\n      {expandedCaption && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h3>Edit Caption</h3>\r\n              <button\r\n                onClick={() => setExpandedCaption(null)}\r\n                className=\"modal-close\"\r\n              >\r\n                ×\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <div className=\"caption-info\">\r\n                <p><strong>Scheduled:</strong> {expandedCaption.scheduledDate} at {expandedCaption.scheduledTime}</p>\r\n              </div>\r\n              <textarea\r\n                value={expandedCaption.caption}\r\n                onChange={(e) => setExpandedCaption(prev => ({ ...prev, caption: e.target.value }))}\r\n                className=\"expanded-caption-textarea\"\r\n                rows=\"10\"\r\n                placeholder=\"Enter your caption...\"\r\n              />\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                onClick={() => setExpandedCaption(null)}\r\n                className=\"ig-btn ig-btn-secondary\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={() => handleSaveExpandedCaption(expandedCaption.id, expandedCaption.caption)}\r\n                className=\"ig-btn ig-btn-primary\"\r\n              >\r\n                Save Changes\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Media Preview Modal */}\r\n      {mediaPreviewModal && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal-content media-preview-modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>Media Preview</h3>\r\n              <button\r\n                onClick={() => setMediaPreviewModal(null)}\r\n                className=\"modal-close\"\r\n              >\r\n                ×\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              {mediaPreviewModal.mediaFile?.type?.startsWith('image/') || (!mediaPreviewModal.mediaFile && mediaPreviewModal.mediaPreview) ? (\r\n                <img\r\n                  src={mediaPreviewModal.mediaPreview}\r\n                  alt=\"Media preview\"\r\n                  className=\"modal-media\"\r\n                />\r\n              ) : (\r\n                <video\r\n                  src={mediaPreviewModal.mediaPreview}\r\n                  controls\r\n                  className=\"modal-media\"\r\n                />\r\n              )}\r\n              {mediaPreviewModal.caption && (\r\n                <div className=\"modal-caption\">\r\n                  <h4>Caption:</h4>\r\n                  <p>{mediaPreviewModal.caption}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                onClick={() => setMediaPreviewModal(null)}\r\n                className=\"ig-btn ig-btn-primary\"\r\n              >\r\n                Close\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default IgBulkComposer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}