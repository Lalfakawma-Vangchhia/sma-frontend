{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\THORSIGNIA\\\\Projects\\\\automation-dash\\\\frontend\\\\src\\\\components\\\\InstagramPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport apiClient from '../services/apiClient';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNotifications } from '../contexts/NotificationContext';\nimport IgBulkComposer from './igBulkComposer';\nimport './InstagramPage.css';\nimport ScheduledPostHistory from './ScheduledPostHistory';\nimport { loadFacebookSDK } from './FacebookUtils';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ACCEPTED_IMAGE_TYPES = ['image/png', 'image/jpeg', 'image/jpg'];\nconst ACCEPTED_VIDEO_TYPES = ['video/mp4', 'video/quicktime'];\nconst InstagramPage = () => {\n  _s();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    isAuthenticated,\n    loading: authLoading,\n    user\n  } = useAuth();\n  const {\n    addNotification\n  } = useNotifications();\n\n  // UI State\n  const [isConnected, setIsConnected] = useState(false);\n  const [instagramAccounts, setInstagramAccounts] = useState([]);\n  const [selectedAccount, setSelectedAccount] = useState('');\n  const [activeTab, setActiveTab] = useState('connect');\n  const [sdkLoaded, setSdkLoaded] = useState(false);\n  const [fbAccessToken, setFbAccessToken] = useState(null);\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // Post State\n  const [postType, setPostType] = useState('photo'); // photo | carousel | reel\n  const [caption, setCaption] = useState('');\n  const [aiPrompt, setAiPrompt] = useState('');\n  const [aiGenerating, setAiGenerating] = useState(false);\n  const [aiImageUrl, setAiImageUrl] = useState('');\n  const [imageSource, setImageSource] = useState('ai'); // ai | upload | drive\n  const [uploadedImageUrl, setUploadedImageUrl] = useState('');\n  const [uploadingImage, setUploadingImage] = useState(false);\n  const [selectedImageFile, setSelectedImageFile] = useState(null);\n  const [autoGenerateCaption, setAutoGenerateCaption] = useState(false);\n  const [captionPrompt, setCaptionPrompt] = useState('');\n  const [generatingCaption, setGeneratingCaption] = useState(false);\n  const [rateLimitCooldown, setRateLimitCooldown] = useState(0);\n\n  // Strategy Template State\n  const [strategyData, setStrategyData] = useState({\n    promptTemplate: '',\n    brandName: '',\n    hookIdea: '',\n    features: '',\n    location: '',\n    phone: '',\n    website: '',\n    callToAction: '',\n    imagePrompt: '',\n    customStrategyTemplate: ''\n  });\n  const [showStrategyModal, setShowStrategyModal] = useState(false);\n  const [strategyTemplates, setStrategyTemplates] = useState([{\n    id: 'default',\n    name: 'Default Template',\n    prompt: 'Generate a catchy Instagram caption for this post.'\n  }, {\n    id: 'product',\n    name: 'Product Showcase',\n    prompt: 'Create an engaging caption highlighting the key features and benefits of this product.'\n  }, {\n    id: 'event',\n    name: 'Event Promotion',\n    prompt: 'Write an exciting caption to promote this event, including date, time, and location.'\n  }, {\n    id: 'custom',\n    name: 'Custom Template',\n    prompt: ''\n  }]);\n\n  // Carousel State\n  const [carouselImages, setCarouselImages] = useState([]); // URLs\n  const [carouselFiles, setCarouselFiles] = useState([]); // File objects\n  const [carouselCount, setCarouselCount] = useState(3);\n  const [carouselCaption, setCarouselCaption] = useState('');\n  const [carouselGenerating, setCarouselGenerating] = useState(false);\n\n  // Reel State\n  const [reelFile, setReelFile] = useState(null);\n  const [reelUrl, setReelUrl] = useState('');\n  const [reelFilename, setReelFilename] = useState('');\n  const [reelCaption, setReelCaption] = useState('');\n  const [reelUploading, setReelUploading] = useState(false);\n  const [reelAutoGenerateCaption, setReelAutoGenerateCaption] = useState(false);\n  const [reelCaptionPrompt, setReelCaptionPrompt] = useState('');\n  const [generatingReelCaption, setGeneratingReelCaption] = useState(false);\n  // Thumbnail State for Reel\n  const [reelThumbnailFile, setReelThumbnailFile] = useState(null);\n  const [reelThumbnailUrl, setReelThumbnailUrl] = useState('');\n  const [reelThumbnailFilename, setReelThumbnailFilename] = useState('');\n\n  // Media Gallery\n  const [userMedia, setUserMedia] = useState([]);\n  const [loadingMedia, setLoadingMedia] = useState(false);\n\n  // Google Drive Integration\n  const [showDriveModal, setShowDriveModal] = useState(false);\n  const [driveFiles, setDriveFiles] = useState([]);\n  const [loadingDriveFiles, setLoadingDriveFiles] = useState(false);\n  const [driveAuthenticated, setDriveAuthenticated] = useState(false);\n  const [driveAuthLoading, setDriveAuthLoading] = useState(false);\n\n  // Auto-Reply State\n  const [autoReplyEnabled, setAutoReplyEnabled] = useState(false);\n  const [autoReplyTemplate, setAutoReplyTemplate] = useState('Thank you for your comment! We appreciate your engagement. 😊');\n  const [autoReplyPosts, setAutoReplyPosts] = useState([]);\n  const [selectedAutoReplyPosts, setSelectedAutoReplyPosts] = useState([]);\n  const [autoReplyLoading, setAutoReplyLoading] = useState(false);\n  const [loadingAutoReplyPosts, setLoadingAutoReplyPosts] = useState(false);\n  const [isSelectingPosts, setIsSelectingPosts] = useState(false);\n\n  // DM Auto-Reply State\n  const [dmAutoReplyEnabled, setDmAutoReplyEnabled] = useState(false);\n  const [dmAutoReplyTemplate, setDmAutoReplyTemplate] = useState('Thanks for your message! I\\'ll get back to you soon. 😊');\n  const [dmAutoReplyLoading, setDmAutoReplyLoading] = useState(false);\n\n  // File Picker Modal State\n  const [showFilePicker, setShowFilePicker] = useState(false);\n  const [filePickerType, setFilePickerType] = useState(''); // 'photo' or 'video'\n  const [filePickerFormType, setFilePickerFormType] = useState(''); // 'manual' or 'carousel'\n  const [isLoadingGoogleDrive, setIsLoadingGoogleDrive] = useState(false);\n  const [googleDriveAvailable, setGoogleDriveAvailable] = useState(false);\n\n  // Bulk Composer State\n  const [showBulkComposer, setShowBulkComposer] = useState(false);\n\n  // Facebook SDK\n  const INSTAGRAM_APP_ID = process.env.REACT_APP_INSTAGRAM_APP_ID || '24054495060908418';\n\n  // Mobile detection utility\n  const isMobile = () => window.innerWidth <= 768;\n\n  // --- New: Global Auto-Reply State ---\n  const [globalAutoReplyEnabled, setGlobalAutoReplyEnabled] = useState(false);\n  const [globalAutoReplyLoading, setGlobalAutoReplyLoading] = useState(false);\n  const [globalAutoReplyStatus, setGlobalAutoReplyStatus] = useState(''); // For toast/feedback\n\n  // --- New: Global Auto-Reply Progress State ---\n  const [globalAutoReplyProgress, setGlobalAutoReplyProgress] = useState(null);\n\n  // --- New: Global Auto-Reply Error and Retry State ---\n  const [apiError, setApiError] = useState(null);\n  const [retrying, setRetrying] = useState(false);\n\n  // --- New: Toast Notification ---\n  const [toast, setToast] = useState({\n    show: false,\n    message: '',\n    type: 'info'\n  });\n  const showToast = (message, type = 'info') => {\n    setToast({\n      show: true,\n      message,\n      type\n    });\n    setTimeout(() => setToast({\n      show: false,\n      message: '',\n      type: 'info'\n    }), 3500);\n  };\n\n  // --- New: Global Auto-Reply API Logic ---\n  const handleGlobalAutoReplyToggle = async () => {\n    if (!selectedAccount) {\n      showToast('Please select an Instagram account first.', 'error');\n      return;\n    }\n    setGlobalAutoReplyLoading(true);\n    setApiError(null);\n    try {\n      if (!globalAutoReplyEnabled) {\n        const enableRes = await apiClient.enableGlobalInstagramAutoReply(selectedAccount.platform_user_id);\n        if (enableRes.success) {\n          setGlobalAutoReplyEnabled(true);\n          // eslint-disable-next-line no-undef\n          setGlobalAutoReplyStatus('enabled');\n          showToast('Auto-reply enabled for all posts and comments!', 'success');\n        } else {\n          setApiError(enableRes.error || 'Failed to enable auto-reply.');\n          showToast('Failed to enable auto-reply: ' + (enableRes.error || 'Unknown error'), 'error');\n        }\n      } else {\n        const disableRes = await apiClient.disableGlobalInstagramAutoReply(selectedAccount.platform_user_id);\n        if (disableRes.success) {\n          setGlobalAutoReplyEnabled(false);\n          // eslint-disable-next-line no-undef\n          setGlobalAutoReplyStatus('disabled');\n          showToast('Auto-reply disabled.', 'info');\n        } else {\n          setApiError(disableRes.error || 'Failed to disable auto-reply.');\n          showToast('Failed to disable auto-reply: ' + (disableRes.error || 'Unknown error'), 'error');\n        }\n      }\n    } catch (err) {\n      setApiError(err.message || JSON.stringify(err));\n      showToast('Error: ' + (err.message || err.toString()), 'error');\n    } finally {\n      setGlobalAutoReplyLoading(false);\n    }\n  };\n\n  // --- New: Fetch initial global auto-reply status on account select ---\n  useEffect(() => {\n    const fetchGlobalAutoReplyStatus = async () => {\n      if (!selectedAccount) return;\n      try {\n        const statusRes = await apiClient.getGlobalInstagramAutoReplyStatus(selectedAccount.platform_user_id);\n        setGlobalAutoReplyEnabled(!!statusRes.enabled);\n        // eslint-disable-next-line no-undef\n        setGlobalAutoReplyStatus(statusRes.enabled ? 'enabled' : 'disabled');\n      } catch (err) {\n        setGlobalAutoReplyEnabled(false);\n        // eslint-disable-next-line no-undef\n        setGlobalAutoReplyStatus('disabled');\n      }\n    };\n    fetchGlobalAutoReplyStatus();\n  }, [selectedAccount]);\n\n  // --- New: Poll for global auto-reply progress when enabled ---\n  useEffect(() => {\n    let intervalId;\n    const pollProgress = async () => {\n      if (!selectedAccount || !globalAutoReplyEnabled) return;\n      try {\n        const res = await apiClient.getGlobalInstagramAutoReplyProgress(selectedAccount.platform_user_id);\n        if (res.success) {\n          setGlobalAutoReplyProgress(res.progress);\n          setApiError(null);\n        }\n      } catch (err) {\n        setApiError(err.message || JSON.stringify(err));\n        // Optionally, showToast('Progress error: ' + (err.message || err.toString()), 'error');\n      }\n    };\n    if (globalAutoReplyEnabled && selectedAccount) {\n      pollProgress();\n      intervalId = setInterval(pollProgress, 3000);\n    } else {\n      setGlobalAutoReplyProgress(null);\n    }\n    return () => intervalId && clearInterval(intervalId);\n  }, [globalAutoReplyEnabled, selectedAccount]);\n\n  // --- Facebook SDK Helpers ---\n  const checkLoginStatus = () => {\n    if (!window.FB || !isAuthenticated) return;\n    window.FB.getLoginStatus(response => {\n      if (response.status === 'connected') {\n        setFbAccessToken(response.authResponse.accessToken);\n        setMessage('Instagram: Using existing Facebook login session');\n        handleConnectInstagram(response.authResponse.accessToken);\n      } else {\n        setMessage('Instagram: Please connect your Facebook account to continue');\n      }\n    });\n  };\n  const initializeFacebookSDK = () => {\n    if (window.FB) {\n      window.FB.init({\n        appId: INSTAGRAM_APP_ID,\n        cookie: true,\n        xfbml: true,\n        version: 'v18.0'\n      });\n      setSdkLoaded(true);\n      checkLoginStatus();\n      return;\n    }\n    window.fbAsyncInit = function () {\n      window.FB.init({\n        appId: INSTAGRAM_APP_ID,\n        cookie: true,\n        xfbml: true,\n        version: 'v18.0'\n      });\n      setSdkLoaded(true);\n      checkLoginStatus();\n    };\n    (function (d, s, id) {\n      var js,\n        fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) return;\n      js = d.createElement(s);\n      js.id = id;\n      js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, 'script', 'facebook-jssdk');\n  };\n  useEffect(() => {\n    if (isAuthenticated && !authLoading) {\n      loadFacebookSDK(process.env.REACT_APP_FACEBOOK_APP_ID || '697225659875731').then(() => {\n        checkLoginStatus();\n        checkGoogleDriveAvailability();\n      });\n    }\n  }, [isAuthenticated, authLoading]);\n  useEffect(() => {\n    checkLoginStatus();\n    initializeFacebookSDK();\n    // eslint-disable-next-line\n  }, [INSTAGRAM_APP_ID, isAuthenticated]);\n  useEffect(() => {\n    if (isAuthenticated) {\n      setInstagramAccounts([]); // Clear previous state\n      setSelectedAccount('');\n      setIsConnected(false);\n      setActiveTab('connect');\n      setMessage('');\n\n      // Ensure token is set before making request\n      const token = localStorage.getItem('authToken');\n      if (token) {\n        apiClient.setToken(token);\n        console.log('🔍 DEBUG: Token set for Instagram accounts request');\n      } else {\n        console.error('🔍 DEBUG: No auth token found in localStorage');\n        setMessage('Authentication token not found. Please log in again.');\n        return;\n      }\n\n      // Fetch new user's Instagram accounts\n      apiClient.getInstagramAccounts().then(accounts => {\n        console.log('🔍 DEBUG: Successfully fetched Instagram accounts:', accounts);\n        setInstagramAccounts(accounts);\n      }).catch(error => {\n        console.error('🔍 DEBUG: Error fetching Instagram accounts:', error);\n        if (error.message.includes('Could not validate credentials')) {\n          setMessage('Your session has expired. Please log in again.');\n        } else if (error.message.includes('Failed to fetch')) {\n          setMessage('Unable to connect to server. Please check if the backend is running and try again.');\n        } else {\n          setMessage(`Error loading Instagram accounts: ${error.message}`);\n        }\n      });\n    }\n  }, [isAuthenticated]);\n\n  // --- Instagram Connect ---\n  const handleConnectInstagram = async (accessToken = fbAccessToken) => {\n    if (!isAuthenticated) {\n      setMessage('Please log in to your account first before connecting Instagram.');\n      setLoading(false);\n      return;\n    }\n    if (!accessToken) {\n      setMessage('No access token available. Please log in with Facebook first.');\n      setLoading(false);\n      return;\n    }\n    setLoading(true);\n    try {\n      setMessage('Fetching Instagram Business accounts...');\n      const response = await apiClient.connectInstagram(accessToken);\n\n      // Fetch the full list of social accounts from the backend\n      const allAccounts = await apiClient.getSocialAccounts();\n      // Filter for Instagram accounts\n      const instagramAccountsFromBackend = allAccounts.filter(acc => acc.platform === 'instagram');\n\n      // Map and merge info for display\n      const mappedAccounts = instagramAccountsFromBackend.map(account => ({\n        id: account.id,\n        // Internal DB ID\n        platform_user_id: account.platform_user_id,\n        // Instagram user ID\n        username: account.username,\n        name: account.display_name || account.page_name,\n        followers_count: account.follower_count || 0,\n        media_count: account.media_count || 0,\n        profile_picture_url: account.profile_picture_url\n      }));\n      setInstagramAccounts(mappedAccounts);\n      setIsConnected(true);\n      setMessage(`Found ${mappedAccounts.length} Instagram Business account(s)!`);\n      if (mappedAccounts.length === 1) {\n        setSelectedAccount(mappedAccounts[0]);\n        loadUserMedia(mappedAccounts[0].platform_user_id);\n      }\n    } catch (error) {\n      setMessage(error.message || 'Unknown error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFacebookLogin = () => {\n    if (!window.FB) {\n      setMessage('Facebook SDK not loaded');\n      return;\n    }\n    setLoading(true);\n    setMessage('Initiating Instagram OAuth via Facebook...');\n    window.FB.login(response => {\n      if (response.status === 'connected') {\n        const accessToken = response.authResponse.accessToken;\n        setFbAccessToken(accessToken);\n        setMessage('Facebook login successful! Connecting Instagram accounts...');\n        handleConnectInstagram(accessToken);\n      } else {\n        setMessage('Facebook login failed or was cancelled');\n        setLoading(false);\n      }\n    }, {\n      scope: 'pages_show_list,instagram_basic,instagram_content_publish,pages_read_engagement, business_management'\n    });\n  };\n\n  // --- Media Loading ---\n  const loadUserMedia = async instagramUserId => {\n    setLoadingMedia(true);\n    try {\n      var _media$data;\n      const media = await apiClient.getInstagramMedia(instagramUserId);\n      setUserMedia((media === null || media === void 0 ? void 0 : (_media$data = media.data) === null || _media$data === void 0 ? void 0 : _media$data.media) || []);\n    } catch (error) {\n      setMessage(`Error loading media: ${error.message}`);\n    } finally {\n      setLoadingMedia(false);\n    }\n  };\n\n  // --- Image Upload ---\n  const handleImageChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    if (!ACCEPTED_IMAGE_TYPES.includes(file.type)) {\n      setMessage('Please select a PNG or JPG image');\n      return;\n    }\n\n    // Debug authentication status\n    console.log('🔍 DEBUG: Authentication check before upload');\n    console.log('🔍 DEBUG: isAuthenticated:', isAuthenticated);\n    console.log('🔍 DEBUG: user:', user);\n    console.log('🔍 DEBUG: apiClient token exists:', !!apiClient.token);\n    setUploadingImage(true);\n    setMessage('Uploading image...');\n    try {\n      const res = await apiClient.uploadImageToCloudinary(file);\n      if (res && res.success && res.data && res.data.url) {\n        setUploadedImageUrl(res.data.url);\n        setAiImageUrl(res.data.url);\n        setSelectedImageFile(file);\n        setMessage('Image uploaded successfully!');\n      } else {\n        throw new Error((res === null || res === void 0 ? void 0 : res.error) || 'Upload failed');\n      }\n    } catch (err) {\n      console.error('🔍 DEBUG: Upload error details:', err);\n      setMessage(`Image upload failed: ${err.message}`);\n    } finally {\n      setUploadingImage(false);\n    }\n  };\n\n  // --- AI Image Generation ---\n  const handleGenerateAIImage = async () => {\n    if (!aiPrompt.trim()) {\n      setMessage('Please enter a prompt for image generation.');\n      return;\n    }\n    setAiGenerating(true);\n    setMessage('Generating Instagram-optimized image with AI...');\n    try {\n      console.log('🔍 DEBUG: Generating Instagram image with prompt:', aiPrompt.trim());\n      const res = await apiClient.generateInstagramImage(aiPrompt.trim());\n      console.log('🔍 DEBUG: Image generation response:', res);\n      if (res && res.success && res.data && res.data.image_url) {\n        setAiImageUrl(res.data.image_url);\n        const dimensions = res.data.width && res.data.height ? `(${res.data.width}x${res.data.height})` : '';\n        setMessage(`AI image generated successfully! ${dimensions}`);\n        console.log('🔍 DEBUG: Generated image URL:', res.data.image_url);\n        console.log('🔍 DEBUG: Image dimensions:', res.data.width, 'x', res.data.height);\n        console.log('🔍 DEBUG: Enhanced prompt:', res.data.enhanced_prompt);\n      } else if (res && res.data && res.data.image_url) {\n        // Fallback for different response format\n        setAiImageUrl(res.data.image_url);\n        setMessage('AI image generated successfully!');\n        console.log('🔍 DEBUG: Generated image URL (fallback):', res.data.image_url);\n      } else {\n        console.error('🔍 DEBUG: Invalid response format:', res);\n        setMessage('Failed to generate image. Please try again.');\n      }\n    } catch (err) {\n      console.error('🔍 DEBUG: Image generation error:', err);\n\n      // Handle specific error types\n      let errorMessage = err.message || err.toString();\n      if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\n        errorMessage = 'Invalid or expired Stability AI API key. Please check your API key in the backend configuration.';\n      } else if (errorMessage.includes('429') || errorMessage.includes('Too Many Requests')) {\n        errorMessage = 'Rate limit exceeded. Please wait a few minutes before trying again, or upgrade your Stability AI plan.';\n        // Set a 5-minute cooldown\n        setRateLimitCooldown(300);\n        const cooldownInterval = setInterval(() => {\n          setRateLimitCooldown(prev => {\n            if (prev <= 1) {\n              clearInterval(cooldownInterval);\n              return 0;\n            }\n            return prev - 1;\n          });\n        }, 1000);\n      } else if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\n        errorMessage = 'Server error occurred. Please try again in a moment.';\n      } else if (errorMessage.includes('timeout')) {\n        errorMessage = 'Request timed out. Please try again.';\n      }\n      setMessage('Error generating image: ' + errorMessage);\n    } finally {\n      setAiGenerating(false);\n    }\n  };\n\n  // --- Auto Generate Caption ---\n  const handleAutoGenerateCaption = async () => {\n    if (!captionPrompt.trim()) {\n      setMessage('Please enter a prompt for caption generation.');\n      return;\n    }\n    setGeneratingCaption(true);\n    setMessage('Generating caption with AI...');\n    try {\n      console.log('🔍 DEBUG: Generating Instagram caption with prompt:', captionPrompt.trim());\n      const res = await apiClient.generateInstagramCaption(captionPrompt.trim());\n      console.log('🔍 DEBUG: Caption generation response:', res);\n      if (res && res.success && res.data && res.data.content) {\n        setCaption(res.data.content);\n        setMessage('Caption generated successfully!');\n        console.log('🔍 DEBUG: Generated caption:', res.data.content);\n      } else if (res && res.content) {\n        // Fallback for different response format\n        setCaption(res.content);\n        setMessage('Caption generated successfully!');\n        console.log('🔍 DEBUG: Generated caption (fallback):', res.content);\n      } else {\n        console.error('🔍 DEBUG: Invalid response format:', res);\n        setMessage('Failed to generate caption. Please try again.');\n      }\n    } catch (err) {\n      console.error('🔍 DEBUG: Caption generation error:', err);\n      setMessage('Error generating caption: ' + (err.message || err.toString()));\n    } finally {\n      setGeneratingCaption(false);\n    }\n  };\n\n  // --- Generate Image and Caption Together ---\n  const handleGenerateImageAndCaption = async () => {\n    if (!aiPrompt.trim()) {\n      setMessage('Please enter a prompt for generation.');\n      return;\n    }\n    setAiGenerating(true);\n    setGeneratingCaption(true);\n    setMessage('Generating Instagram-optimized image and caption with AI...');\n    try {\n      console.log('🔍 DEBUG: Generating image and caption with prompt:', aiPrompt.trim());\n\n      // Generate image first\n      const imageRes = await apiClient.generateInstagramImage(aiPrompt.trim());\n      console.log('🔍 DEBUG: Image generation response:', imageRes);\n      if (!imageRes || !imageRes.success || !imageRes.data || !imageRes.data.image_url) {\n        throw new Error('Failed to generate image');\n      }\n      setAiImageUrl(imageRes.data.image_url);\n      console.log('🔍 DEBUG: Generated image URL:', imageRes.data.image_url);\n      console.log('🔍 DEBUG: Image dimensions:', imageRes.data.width, 'x', imageRes.data.height);\n\n      // Generate caption using the same prompt\n      const captionRes = await apiClient.generateInstagramCaption(aiPrompt.trim());\n      console.log('🔍 DEBUG: Caption generation response:', captionRes);\n      if (captionRes && captionRes.success && captionRes.data && captionRes.data.content) {\n        setCaption(captionRes.data.content);\n        console.log('🔍 DEBUG: Generated caption:', captionRes.data.content);\n      } else if (captionRes && captionRes.content) {\n        // Fallback for different response format\n        setCaption(captionRes.content);\n        console.log('🔍 DEBUG: Generated caption (fallback):', captionRes.content);\n      } else {\n        console.warn('🔍 DEBUG: Caption generation failed, using fallback');\n        setCaption(`Check out this amazing image! ${aiPrompt.trim()}`);\n      }\n      const dimensions = imageRes.data.width && imageRes.data.height ? `(${imageRes.data.width}x${imageRes.data.height})` : '';\n      setMessage(`Image and caption generated successfully! ${dimensions}`);\n    } catch (err) {\n      console.error('🔍 DEBUG: Image and caption generation error:', err);\n\n      // Handle specific error types\n      let errorMessage = err.message || err.toString();\n      if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\n        errorMessage = 'Invalid or expired Stability AI API key. Please check your API key in the backend configuration.';\n      } else if (errorMessage.includes('429') || errorMessage.includes('Too Many Requests')) {\n        errorMessage = 'Rate limit exceeded. Please wait a few minutes before trying again, or upgrade your Stability AI plan.';\n        // Set a 5-minute cooldown\n        setRateLimitCooldown(300);\n        const cooldownInterval = setInterval(() => {\n          setRateLimitCooldown(prev => {\n            if (prev <= 1) {\n              clearInterval(cooldownInterval);\n              return 0;\n            }\n            return prev - 1;\n          });\n        }, 1000);\n      } else if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\n        errorMessage = 'Server error occurred. Please try again in a moment.';\n      } else if (errorMessage.includes('timeout')) {\n        errorMessage = 'Request timed out. Please try again.';\n      }\n      setMessage('Error generating image and caption: ' + errorMessage);\n\n      // Clear any partial results on error\n      setAiImageUrl('');\n      setCaption('');\n    } finally {\n      setAiGenerating(false);\n      setGeneratingCaption(false);\n    }\n  };\n\n  // --- Retry Image Generation ---\n  const handleRetryImageGeneration = async () => {\n    if (!aiPrompt.trim()) {\n      setMessage('Please enter a prompt for image generation.');\n      return;\n    }\n    setAiGenerating(true);\n    setMessage('Retrying image generation...');\n    try {\n      console.log('🔍 DEBUG: Retrying image generation with prompt:', aiPrompt.trim());\n      const res = await apiClient.generateInstagramImage(aiPrompt.trim());\n      console.log('🔍 DEBUG: Retry image generation response:', res);\n      if (res && res.success && res.data && res.data.image_url) {\n        setAiImageUrl(res.data.image_url);\n        setMessage('Image generated successfully on retry!');\n        console.log('🔍 DEBUG: Generated image URL (retry):', res.data.image_url);\n      } else if (res && res.data && res.data.image_url) {\n        // Fallback for different response format\n        setAiImageUrl(res.data.image_url);\n        setMessage('Image generated successfully on retry!');\n        console.log('🔍 DEBUG: Generated image URL (retry fallback):', res.data.image_url);\n      } else {\n        console.error('🔍 DEBUG: Invalid response format on retry:', res);\n        setMessage('Failed to generate image on retry. Please try again.');\n      }\n    } catch (err) {\n      console.error('🔍 DEBUG: Retry image generation error:', err);\n\n      // Handle specific error types\n      let errorMessage = err.message || err.toString();\n      if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\n        errorMessage = 'Invalid or expired Stability AI API key. Please check your API key in the backend configuration.';\n      } else if (errorMessage.includes('429') || errorMessage.includes('Too Many Requests')) {\n        errorMessage = 'Rate limit exceeded. Please wait a few minutes before trying again, or upgrade your Stability AI plan.';\n        // Set a 5-minute cooldown\n        setRateLimitCooldown(300);\n        const cooldownInterval = setInterval(() => {\n          setRateLimitCooldown(prev => {\n            if (prev <= 1) {\n              clearInterval(cooldownInterval);\n              return 0;\n            }\n            return prev - 1;\n          });\n        }, 1000);\n      } else if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\n        errorMessage = 'Server error occurred. Please try again in a moment.';\n      } else if (errorMessage.includes('timeout')) {\n        errorMessage = 'Request timed out. Please try again.';\n      }\n      setMessage('Error retrying image generation: ' + errorMessage);\n    } finally {\n      setAiGenerating(false);\n    }\n  };\n\n  // --- Carousel Upload ---\n  const handleCarouselFilesChange = async e => {\n    const files = Array.from(e.target.files);\n    if (files.length < 3 || files.length > 7) {\n      setMessage('Please select 3 to 7 images.');\n      return;\n    }\n    setCarouselGenerating(true);\n    setMessage('Uploading carousel images...');\n    try {\n      const urls = [];\n      for (const file of files) {\n        if (!ACCEPTED_IMAGE_TYPES.includes(file.type)) {\n          setMessage('All images must be PNG or JPG.');\n          setCarouselGenerating(false);\n          return;\n        }\n        const res = await apiClient.uploadImageToCloudinary(file);\n        if (res && res.success && res.data && res.data.url) {\n          urls.push(res.data.url);\n        } else {\n          throw new Error((res === null || res === void 0 ? void 0 : res.error) || 'Upload failed');\n        }\n      }\n      setCarouselImages(urls);\n      setMessage(`Uploaded ${urls.length} images for carousel.`);\n    } catch (err) {\n      setMessage('Error uploading carousel images: ' + err.message);\n    } finally {\n      setCarouselGenerating(false);\n    }\n  };\n\n  // --- Carousel Auto Generate Caption ---\n  const handleCarouselAutoGenerateCaption = async () => {\n    if (!captionPrompt.trim()) {\n      setMessage('Please provide a prompt for caption generation.');\n      return;\n    }\n    setGeneratingCaption(true);\n    setMessage('Generating carousel caption...');\n    try {\n      const result = await apiClient.generateInstagramCaption(captionPrompt.trim());\n      if (result.success && result.content) {\n        setCarouselCaption(result.content);\n        setMessage('Caption generated successfully!');\n      } else {\n        setMessage('Failed to generate caption: ' + (result.error || 'Unknown error'));\n      }\n    } catch (err) {\n      setMessage('Error generating caption: ' + err.message);\n    } finally {\n      setGeneratingCaption(false);\n    }\n  };\n\n  // --- Reel Upload ---\n  const handleReelFileChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    if (!ACCEPTED_VIDEO_TYPES.includes(file.type)) {\n      setMessage('Only .mp4 or .mov files are allowed.');\n      return;\n    }\n    setReelUploading(true);\n    setMessage('Uploading video...');\n    try {\n      var _res$data;\n      const res = await apiClient.uploadVideoToCloudinary(file);\n      console.log('Video upload response:', res);\n\n      // Check for different response structures\n      if (res && res.success && (res.url || (_res$data = res.data) !== null && _res$data !== void 0 && _res$data.url)) {\n        var _res$data2, _res$data3;\n        const videoUrl = res.url || ((_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.url);\n        const filename = res.filename || ((_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.filename);\n        setReelUrl(videoUrl);\n        setReelFilename(filename || '');\n        // eslint-disable-next-line no-undef\n        setReelFile(file);\n        console.log('🔍 DEBUG: Video uploaded successfully:', {\n          videoUrl,\n          filename,\n          res\n        });\n        setMessage('Video uploaded successfully!');\n      } else if (res && res.data && res.data.url) {\n        // Alternative response structure\n        setReelUrl(res.data.url);\n        setReelFilename(res.data.filename || '');\n        // eslint-disable-next-line no-undef\n        setReelFile(file);\n        setMessage('Video uploaded successfully!');\n      } else {\n        throw new Error((res === null || res === void 0 ? void 0 : res.error) || (res === null || res === void 0 ? void 0 : res.message) || 'Upload failed');\n      }\n    } catch (err) {\n      console.error('Video upload error:', err);\n      setMessage('Error: ' + (err.message || err.toString()));\n    } finally {\n      setReelUploading(false);\n    }\n  };\n\n  // --- Reel Auto Generate Caption ---\n  const handleReelAutoGenerateCaption = async () => {\n    if (!reelCaptionPrompt.trim()) {\n      setMessage('Please provide a prompt for caption generation.');\n      return;\n    }\n    setGeneratingReelCaption(true);\n    setMessage('Generating reel caption...');\n    try {\n      const result = await apiClient.generateInstagramCaption(reelCaptionPrompt.trim());\n      if (result.success && result.content) {\n        setReelCaption(result.content);\n        setMessage('Reel caption generated successfully!');\n      } else {\n        setMessage('Failed to generate caption: ' + (result.error || 'Unknown error'));\n      }\n    } catch (err) {\n      setMessage('Error generating caption: ' + err.message);\n    } finally {\n      setGeneratingReelCaption(false);\n    }\n  };\n\n  // --- Reel Thumbnail Upload ---\n  const handleReelThumbnailChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    if (!ACCEPTED_IMAGE_TYPES.includes(file.type)) {\n      setMessage('Only .jpg, .jpeg, .png files are allowed for thumbnail.');\n      return;\n    }\n    setMessage('Uploading thumbnail image...');\n    try {\n      var _res$data4;\n      const res = await apiClient.uploadThumbnailToCloudinary(file);\n      if (res && res.success && (res.url || (_res$data4 = res.data) !== null && _res$data4 !== void 0 && _res$data4.url)) {\n        var _res$data5, _res$data6;\n        const imageUrl = res.url || ((_res$data5 = res.data) === null || _res$data5 === void 0 ? void 0 : _res$data5.url);\n        const filename = res.filename || ((_res$data6 = res.data) === null || _res$data6 === void 0 ? void 0 : _res$data6.filename);\n        setReelThumbnailUrl(imageUrl);\n        setReelThumbnailFilename(filename || '');\n        // eslint-disable-next-line no-undef\n        setReelThumbnailFile(file);\n        console.log('🔍 DEBUG: Thumbnail uploaded successfully:', {\n          imageUrl,\n          filename,\n          res\n        });\n        setMessage('Thumbnail uploaded successfully!');\n      } else {\n        throw new Error((res === null || res === void 0 ? void 0 : res.error) || (res === null || res === void 0 ? void 0 : res.message) || 'Thumbnail upload failed');\n      }\n    } catch (err) {\n      setMessage('Error: ' + (err.message || err.toString()));\n    }\n  };\n\n  // --- Google Drive Integration ---\n  const checkGoogleDriveAuth = async () => {\n    try {\n      const response = await apiClient.getGoogleDriveStatus();\n      setDriveAuthenticated(response.authenticated);\n      return response.authenticated;\n    } catch (error) {\n      console.error('Error checking Google Drive auth:', error);\n      setDriveAuthenticated(false);\n      return false;\n    }\n  };\n  const authenticateGoogleDrive = async () => {\n    setDriveAuthLoading(true);\n    try {\n      const response = await apiClient.getGoogleDriveAuthorizeUrl();\n      if (response.consent_url) {\n        // Open popup for OAuth\n        const popup = window.open(response.consent_url, 'google-drive-auth', 'width=500,height=600,scrollbars=yes,resizable=yes');\n\n        // Listen for OAuth completion\n        const handleMessage = event => {\n          if (event.data.success) {\n            setDriveAuthenticated(true);\n            setMessage('Google Drive connected successfully!');\n            loadDriveFiles();\n          } else if (event.data.error) {\n            setMessage(`Google Drive authentication failed: ${event.data.error}`);\n          }\n          window.removeEventListener('message', handleMessage);\n          if (popup) popup.close();\n        };\n        window.addEventListener('message', handleMessage);\n      } else if (response.already_authenticated) {\n        setDriveAuthenticated(true);\n        setMessage('Google Drive already authenticated!');\n        loadDriveFiles();\n      }\n    } catch (error) {\n      setMessage(`Google Drive authentication error: ${error.message}`);\n    } finally {\n      setDriveAuthLoading(false);\n    }\n  };\n  const loadDriveFiles = async () => {\n    if (!driveAuthenticated) return;\n    setLoadingDriveFiles(true);\n    try {\n      const response = await apiClient.getGoogleDriveFiles('image/');\n      if (response.success && response.files) {\n        setDriveFiles(response.files);\n      } else {\n        setMessage('Failed to load Google Drive files');\n      }\n    } catch (error) {\n      setMessage(`Error loading Google Drive files: ${error.message}`);\n    } finally {\n      setLoadingDriveFiles(false);\n    }\n  };\n  const handleDriveFileSelect = async (fileId, fileName) => {\n    setUploadingImage(true);\n    setMessage('Downloading file from Google Drive...');\n    try {\n      const response = await apiClient.downloadGoogleDriveFile(fileId);\n      if (response.success && response.fileContent) {\n        // Convert base64 to blob and upload to Cloudinary\n        const byteCharacters = atob(response.fileContent);\n        const byteNumbers = new Array(byteCharacters.length);\n        for (let i = 0; i < byteCharacters.length; i++) {\n          byteNumbers[i] = byteCharacters.charCodeAt(i);\n        }\n        const byteArray = new Uint8Array(byteNumbers);\n        const blob = new Blob([byteArray], {\n          type: response.mimeType\n        });\n\n        // Create a File object from the blob\n        const file = new File([blob], fileName, {\n          type: response.mimeType\n        });\n\n        // Upload to Cloudinary\n        const uploadResponse = await apiClient.uploadImageToCloudinary(file);\n        if (uploadResponse.success && uploadResponse.data && uploadResponse.data.url) {\n          setUploadedImageUrl(uploadResponse.data.url);\n          setAiImageUrl(uploadResponse.data.url);\n          setMessage('File uploaded from Google Drive successfully!');\n          setShowDriveModal(false);\n        } else {\n          throw new Error(uploadResponse.error || 'Upload failed');\n        }\n      } else {\n        throw new Error(response.error || 'Download failed');\n      }\n    } catch (error) {\n      setMessage(`Error processing Google Drive file: ${error.message}`);\n    } finally {\n      setUploadingImage(false);\n    }\n  };\n  const openDriveModal = async () => {\n    const isAuth = await checkGoogleDriveAuth();\n    if (!isAuth) {\n      await authenticateGoogleDrive();\n    } else {\n      await loadDriveFiles();\n    }\n    setShowDriveModal(true);\n  };\n\n  // File Picker Functions\n  const openFilePicker = (type, formType) => {\n    setFilePickerType(type);\n    setFilePickerFormType(formType);\n    setShowFilePicker(true);\n  };\n  const closeFilePicker = () => {\n    setShowFilePicker(false);\n    setFilePickerType('');\n    setFilePickerFormType('');\n    setIsLoadingGoogleDrive(false);\n  };\n  const handleLocalFileSelect = event => {\n    const files = Array.from(event.target.files);\n    if (files.length === 0) return;\n    if (filePickerFormType === 'carousel') {\n      // Handle carousel upload\n      handleCarouselFilesChange({\n        target: {\n          files\n        }\n      });\n    } else {\n      // Handle single file upload\n      const file = files[0];\n      if (filePickerType === 'photo') {\n        handleImageChange({\n          target: {\n            files: [file]\n          }\n        });\n      } else if (filePickerType === 'video') {\n        handleReelFileChange({\n          target: {\n            files: [file]\n          }\n        });\n      }\n    }\n    closeFilePicker();\n  };\n  const handleGoogleDriveSelect = async () => {\n    setIsLoadingGoogleDrive(true);\n    try {\n      // Check if already authenticated\n      const status = await apiClient.getGoogleDriveStatus();\n      if (!status.authenticated) {\n        // Get consent URL for popup\n        const authResponse = await apiClient.getGoogleDriveAuthorizeUrl();\n        if (authResponse.consent_url) {\n          // Open popup and wait for completion\n          await openDriveAuthPopup(authResponse.consent_url);\n        }\n      }\n\n      // After popup closes, re-check authentication status\n      const finalStatus = await apiClient.getGoogleDriveStatus();\n      if (!finalStatus.authenticated) {\n        throw new Error('Authentication was not completed successfully');\n      }\n\n      // Update state and proceed with Google Drive picker\n      setGoogleDriveAvailable(true);\n\n      // Initialize Google Drive API\n      await loadGoogleDriveAPI();\n\n      // Check if google object is available\n      if (typeof window.google === 'undefined' || !window.google.picker) {\n        throw new Error('Google Picker API failed to load');\n      }\n\n      // Get fresh token for picker\n      const authResult = await apiClient.getGoogleDriveAuth();\n\n      // Open Google Drive picker\n      const picker = new window.google.picker.PickerBuilder().addView(new window.google.picker.DocsView().setIncludeFolders(true).setSelectFolderEnabled(false).setMimeTypes(filePickerType === 'photo' ? 'image/*' : 'video/*')).setOAuthToken(authResult.access_token).setDeveloperKey(process.env.REACT_APP_GOOGLE_DEVELOPER_KEY || '').setCallback(handleGoogleDriveCallback).enableFeature(window.google.picker.Feature.NAV_HIDDEN).enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED, filePickerFormType === 'carousel').setTitle(filePickerFormType === 'carousel' ? 'Select multiple files from Google Drive' : 'Select a file from Google Drive').setSelectableMimeTypes(filePickerType === 'photo' ? 'image/*' : 'video/*').build();\n      picker.setVisible(true);\n    } catch (error) {\n      console.error('Error with Google Drive selection:', error);\n      setMessage(`Google Drive error: ${error.message}`);\n    } finally {\n      setIsLoadingGoogleDrive(false);\n    }\n  };\n  const loadGoogleDriveAPI = () => {\n    return new Promise((resolve, reject) => {\n      if (window.google && window.google.picker) {\n        resolve();\n        return;\n      }\n      const script = document.createElement('script');\n      script.src = 'https://apis.google.com/js/api.js';\n      script.onload = () => {\n        if (window.gapi) {\n          window.gapi.load('picker', () => {\n            resolve();\n          });\n        } else {\n          reject(new Error('Google API failed to load'));\n        }\n      };\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n  };\n  const openDriveAuthPopup = authUrl => {\n    return new Promise((resolve, reject) => {\n      const popup = window.open(authUrl, 'google-drive-auth', 'width=500,height=600,scrollbars=yes,resizable=yes');\n      const messageHandler = event => {\n        if (event.data.success) {\n          setGoogleDriveAvailable(true);\n          setMessage('Google Drive connected successfully!');\n          resolve();\n        } else if (event.data.error) {\n          setMessage(`Google Drive authentication failed: ${event.data.error}`);\n          reject(new Error(event.data.error));\n        }\n        window.removeEventListener('message', messageHandler);\n        if (popup) popup.close();\n      };\n      window.addEventListener('message', messageHandler);\n\n      // Timeout after 5 minutes\n      setTimeout(() => {\n        window.removeEventListener('message', messageHandler);\n        if (popup) popup.close();\n        reject(new Error('Authentication timeout'));\n      }, 300000);\n    });\n  };\n  const handleGoogleDriveCallback = async data => {\n    if (data.action === window.google.picker.Action.PICKED) {\n      const files = data.docs;\n      try {\n        if (filePickerFormType === 'carousel') {\n          // Handle multiple files for carousel\n          const fileObjects = [];\n          for (const file of files) {\n            const fileContent = await downloadGoogleDriveFile(file.id);\n            const blob = new Blob([fileContent], {\n              type: file.mimeType\n            });\n            const fileObj = new File([blob], file.name, {\n              type: file.mimeType\n            });\n            fileObjects.push(fileObj);\n          }\n          handleCarouselFilesChange({\n            target: {\n              files: fileObjects\n            }\n          });\n        } else {\n          // Handle single file\n          const file = files[0];\n          const fileContent = await downloadGoogleDriveFile(file.id);\n          const blob = new Blob([fileContent], {\n            type: file.mimeType\n          });\n          const fileObj = new File([blob], file.name, {\n            type: file.mimeType\n          });\n          if (filePickerType === 'photo') {\n            handleImageChange({\n              target: {\n                files: [fileObj]\n              }\n            });\n          } else if (filePickerType === 'video') {\n            handleReelFileChange({\n              target: {\n                files: [fileObj]\n              }\n            });\n          }\n        }\n        closeFilePicker();\n        setMessage('File(s) selected from Google Drive successfully!');\n      } catch (error) {\n        console.error('Error downloading file from Google Drive:', error);\n        setMessage('Failed to download file from Google Drive: ' + error.message);\n      }\n    }\n  };\n  const downloadGoogleDriveFile = async fileId => {\n    try {\n      const response = await apiClient.downloadGoogleDriveFile(fileId);\n      if (response.success && response.fileContent) {\n        // Convert base64 to blob\n        const byteCharacters = atob(response.fileContent);\n        const byteNumbers = new Array(byteCharacters.length);\n        for (let i = 0; i < byteCharacters.length; i++) {\n          byteNumbers[i] = byteCharacters.charCodeAt(i);\n        }\n        const byteArray = new Uint8Array(byteNumbers);\n        return byteArray;\n      } else {\n        throw new Error(response.error || 'Download failed');\n      }\n    } catch (error) {\n      throw new Error(`Failed to download file: ${error.message}`);\n    }\n  };\n\n  // --- Post Submission ---\n  const handlePublish = async () => {\n    if (!selectedAccount) {\n      setMessage('Please select an Instagram account first');\n      return;\n    }\n    if (postType === 'photo' && (!aiImageUrl || !aiImageUrl.trim()) && (!uploadedImageUrl || !uploadedImageUrl.trim())) {\n      setMessage('Please select or generate an image');\n      return;\n    }\n    if (postType === 'carousel' && carouselImages.length === 0) {\n      setMessage('Please generate or upload carousel images');\n      return;\n    }\n    if (postType === 'reel' && !reelUrl) {\n      setMessage('Please upload a video for the reel');\n      return;\n    }\n    setLoading(true);\n    setMessage('Creating Instagram post...');\n    try {\n      // Use the unified Instagram post endpoint for all post types\n      const options = {\n        instagram_user_id: selectedAccount.platform_user_id,\n        post_type: postType === 'photo' ? 'feed' : postType === 'reel' ? 'reel' : postType,\n        media_type: postType === 'reel' ? 'video' : 'image' // <-- robust: send 'video' for reels\n      };\n\n      // Handle different post types\n      if (postType === 'photo') {\n        options.caption = caption;\n        const imageUrl = imageSource === 'ai' ? aiImageUrl : uploadedImageUrl;\n        if (imageUrl && imageUrl.trim()) {\n          options.image_url = imageUrl;\n        } else {\n          // If no image is available, we can't create a photo post\n          setMessage('Please select or generate an image before creating a photo post');\n          setLoading(false);\n          return;\n        }\n        console.log('🔍 DEBUG: Photo post options:', {\n          postType,\n          imageSource,\n          aiImageUrl,\n          uploadedImageUrl,\n          finalImageUrl: options.image_url,\n          caption: options.caption\n        });\n      } else if (postType === 'carousel') {\n        // For carousel, we need to use the carousel-specific endpoint\n        const response = await apiClient.postInstagramCarousel(selectedAccount.platform_user_id, carouselCaption, carouselImages);\n        if (response.success) {\n          setMessage('Instagram carousel post created successfully!');\n          // Reset form\n          setCarouselImages([]);\n          setCarouselCaption('');\n          setCaptionPrompt('');\n          setAutoGenerateCaption(false);\n          setAiPrompt('');\n\n          // Reload user media\n          if (selectedAccount) {\n            loadUserMedia(selectedAccount.platform_user_id);\n          }\n        } else {\n          setMessage(`Failed to create carousel post: ${response.error}`);\n        }\n        setLoading(false);\n        return;\n      } else if (postType === 'reel') {\n        options.caption = reelCaption;\n        // Always use Cloudinary URL for Reels\n        if (reelUrl && reelUrl.trim().startsWith('http')) {\n          options.video_url = reelUrl;\n        } else if (reelFilename && reelFilename.trim()) {\n          options.video_filename = reelFilename;\n        }\n        options.is_reel = true;\n        if (reelThumbnailUrl && reelThumbnailUrl.trim()) {\n          options.thumbnail_url = reelThumbnailUrl;\n        } else if (reelThumbnailFilename && reelThumbnailFilename.trim()) {\n          options.thumbnail_filename = reelThumbnailFilename;\n        }\n        options.media_type = 'video';\n        // Do NOT send media_file or media_filename for Reels\n        if ('media_file' in options) delete options.media_file;\n        if ('media_filename' in options) delete options.media_filename;\n        if ('image_url' in options) delete options.image_url;\n        console.log('🔍 DEBUG: Reel post options:', options);\n        console.log('🔍 DEBUG: Thumbnail state values:', {\n          reelThumbnailUrl,\n          reelThumbnailFilename,\n          hasThumbnailUrl: reelThumbnailUrl && reelThumbnailUrl.trim(),\n          hasThumbnailFilename: reelThumbnailFilename && reelThumbnailFilename.trim()\n        });\n      }\n\n      // Remove any empty string values from options to avoid backend validation issues\n      const cleanOptions = Object.fromEntries(Object.entries(options).filter(([key, value]) => value !== null && value !== undefined && value !== ''));\n\n      // Additional validation for photo posts\n      if (postType === 'photo' && !cleanOptions.image_url) {\n        setMessage('Photo posts require an image. Please select or generate an image first.');\n        setLoading(false);\n        return;\n      }\n\n      // Additional validation for reel posts\n      if (postType === 'reel' && !cleanOptions.video_url && !cleanOptions.video_filename) {\n        setMessage('Reel posts require a video. Please upload a video first.');\n        setLoading(false);\n        return;\n      }\n      console.log('🔍 DEBUG: Calling createUnifiedInstagramPost with:', {\n        instagramUserId: selectedAccount.platform_user_id,\n        options: cleanOptions,\n        originalPostType: postType,\n        originalOptions: options,\n        reelUrl: reelUrl,\n        reelFilename: reelFilename\n      });\n      console.log('🔍 DEBUG: Final thumbnail state before API call:', {\n        reelThumbnailUrl,\n        reelThumbnailFilename,\n        hasThumbnailUrl: reelThumbnailUrl && reelThumbnailUrl.trim(),\n        hasThumbnailFilename: reelThumbnailFilename && reelThumbnailFilename.trim(),\n        cleanOptionsHasThumbnail: cleanOptions.thumbnail_url || cleanOptions.thumbnail_filename\n      });\n      const response = await apiClient.createUnifiedInstagramPost(selectedAccount.platform_user_id, cleanOptions);\n      if (response.success) {\n        setMessage('Instagram post created successfully!');\n\n        // Create success notification\n        addNotification({\n          type: 'success',\n          platform: 'instagram',\n          strategyName: postType === 'photo' ? 'Photo Post' : postType === 'reel' ? 'Reel Post' : 'Carousel Post',\n          message: `Your Instagram ${postType} post was published successfully!`,\n          timestamp: new Date().toISOString()\n        });\n\n        // Reset form\n        setCaption('');\n        setReelCaption('');\n        setReelCaptionPrompt('');\n        setReelAutoGenerateCaption(false);\n        setAiImageUrl('');\n        setUploadedImageUrl('');\n        setReelUrl('');\n        setReelFilename(''); // Clear the filename too\n        // eslint-disable-next-line no-undef\n        setReelFile(null);\n        setSelectedImageFile(null);\n        setAiPrompt('');\n        setCaptionPrompt('');\n        setReelThumbnailUrl('');\n        setReelThumbnailFilename('');\n        // eslint-disable-next-line no-undef\n        setReelThumbnailFile(null);\n        // Reload user media\n        if (selectedAccount) {\n          loadUserMedia(selectedAccount.platform_user_id);\n        }\n        // --- Synchronize account info for post count ---\n        try {\n          const allAccounts = await apiClient.getSocialAccounts();\n          const updatedAccount = allAccounts.find(acc => acc.id === selectedAccount.id);\n          if (updatedAccount) {\n            setSelectedAccount(updatedAccount);\n            setInstagramAccounts(prev => prev.map(acc => acc.id === updatedAccount.id ? updatedAccount : acc));\n          }\n        } catch (err) {\n          console.warn('Failed to refresh account info after post:', err);\n        }\n        setActiveTab('scheduled-posts');\n      } else {\n        let errorMsg = `Failed to create post: ${response.error || 'Unknown error'}`;\n        if (response.details) {\n          errorMsg += `\\nDetails: ${typeof response.details === 'string' ? response.details : JSON.stringify(response.details)}`;\n        }\n        setMessage(errorMsg);\n        console.error('Instagram post error:', response);\n      }\n    } catch (error) {\n      console.error('Error creating Instagram post:', error);\n      setMessage(`Error creating post: ${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Check Google Drive availability\n  const checkGoogleDriveAvailability = async () => {\n    try {\n      const status = await apiClient.getGoogleDriveStatus();\n      setGoogleDriveAvailable(status.authenticated);\n    } catch (error) {\n      console.error('Error checking Google Drive availability:', error);\n      setGoogleDriveAvailable(false);\n    }\n  };\n\n  // --- Logout ---\n  const handleLogout = () => {\n    setInstagramAccounts([]);\n    setSelectedAccount('');\n    setIsConnected(false);\n    setActiveTab('connect');\n    setMessage('Instagram accounts disconnected');\n  };\n\n  // Auto-Reply Functions\n  const loadAutoReplySettings = async () => {\n    if (!selectedAccount) return;\n    try {\n      console.log('🔄 Loading auto-reply settings for Instagram account:', selectedAccount.platform_user_id, selectedAccount.username);\n\n      // Get automation rules for Instagram auto-reply\n      const rules = await apiClient.getAutomationRules('instagram', 'auto_reply');\n      console.log('📋 Found automation rules:', rules);\n\n      // Find existing auto-reply rule for this account\n      const existingRule = rules.find(rule => rule.social_account_id === selectedAccount.id && rule.rule_type === 'AUTO_REPLY');\n      if (existingRule) {\n        var _existingRule$actions;\n        setAutoReplyEnabled(existingRule.is_active);\n        setAutoReplyTemplate(((_existingRule$actions = existingRule.actions) === null || _existingRule$actions === void 0 ? void 0 : _existingRule$actions.template) || '');\n        console.log('✅ Found existing auto-reply rule:', existingRule);\n      } else {\n        setAutoReplyEnabled(false);\n        setAutoReplyTemplate('');\n        console.log('📝 No existing auto-reply rule found');\n      }\n\n      // Load posts for auto-reply selection\n      await loadPostsForAutoReply();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('❌ Error loading auto-reply settings:', error);\n      let errorMessage = 'Failed to load auto-reply settings';\n      if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.detail) {\n        errorMessage += ': ' + error.response.data.detail;\n      } else if (error.message) {\n        errorMessage += ': ' + error.message;\n      }\n      setMessage(errorMessage);\n    }\n  };\n\n  // DM Auto-Reply Functions\n  const loadDmAutoReplySettings = async () => {\n    if (!selectedAccount) return;\n    try {\n      console.log('🔄 Loading DM auto-reply settings for Instagram account:', selectedAccount.platform_user_id, selectedAccount.username);\n      const statusResponse = await apiClient.getInstagramDmAutoReplyStatus(selectedAccount.platform_user_id);\n      console.log('📋 DM auto-reply status:', statusResponse);\n      if (statusResponse.success) {\n        setDmAutoReplyEnabled(statusResponse.enabled);\n        console.log('✅ DM auto-reply status loaded:', statusResponse.enabled);\n      } else {\n        setDmAutoReplyEnabled(false);\n        showToast('Failed to load DM auto-reply status: ' + (statusResponse.error || 'Unknown error'), 'error');\n        console.log('📝 No DM auto-reply status found');\n      }\n    } catch (error) {\n      setDmAutoReplyEnabled(false);\n      showToast('Error loading DM auto-reply settings: ' + ((error === null || error === void 0 ? void 0 : error.message) || 'Unknown error'), 'error');\n      console.error('❌ Error loading DM auto-reply settings:', error);\n    }\n  };\n  const handleDmAutoReplyToggle = async () => {\n    if (!selectedAccount) {\n      showToast('Please select an Instagram account first.', 'error');\n      return;\n    }\n    setDmAutoReplyLoading(true);\n    try {\n      const response = await apiClient.toggleInstagramDmAutoReply(selectedAccount.platform_user_id, !dmAutoReplyEnabled);\n      if (response.success) {\n        setDmAutoReplyEnabled(!dmAutoReplyEnabled);\n        showToast(!dmAutoReplyEnabled ? 'Auto DM Reply enabled successfully!' : 'Auto DM Reply disabled successfully.', 'success');\n      } else {\n        showToast('Failed to toggle Auto DM Reply: ' + (response.error || 'Unknown error'), 'error');\n        console.error('❌ Failed to toggle Auto DM Reply:', response);\n      }\n    } catch (error) {\n      showToast('Failed to toggle Auto DM Reply: ' + ((error === null || error === void 0 ? void 0 : error.message) || 'Unknown error'), 'error');\n      console.error('❌ Error toggling Auto DM Reply:', error);\n    } finally {\n      setDmAutoReplyLoading(false);\n    }\n  };\n  const loadPostsForAutoReply = async () => {\n    if (!selectedAccount) return;\n    try {\n      setLoadingAutoReplyPosts(true);\n      console.log('🔄 Loading posts for auto-reply selection for Instagram account:', selectedAccount.platform_user_id);\n\n      // First, try to get posts directly from the database\n      const response = await apiClient.getPosts('instagram');\n      console.log('📋 All Instagram posts from database:', response);\n      if (response && Array.isArray(response)) {\n        console.log('🔍 Selected account details:', {\n          id: selectedAccount.id,\n          platform_user_id: selectedAccount.platform_user_id,\n          username: selectedAccount.username\n        });\n\n        // Filter posts for this specific account with better debugging\n        const accountPosts = response.filter(post => {\n          var _post$social_account, _post$social_account2, _post$social_account3, _post$social_account4, _post$social_account5, _post$social_account6;\n          // Primary match: social_account_id (most reliable)\n          const matchesAccountId = ((_post$social_account = post.social_account) === null || _post$social_account === void 0 ? void 0 : _post$social_account.id) === selectedAccount.id;\n\n          // Secondary matches for compatibility\n          const matchesPlatformUserId = ((_post$social_account2 = post.social_account) === null || _post$social_account2 === void 0 ? void 0 : _post$social_account2.platform_user_id) === selectedAccount.platform_user_id;\n          const matchesUsername = ((_post$social_account3 = post.social_account) === null || _post$social_account3 === void 0 ? void 0 : _post$social_account3.username) === selectedAccount.username;\n          const isMatch = matchesAccountId || matchesPlatformUserId || matchesUsername;\n          console.log('🔍 Checking post:', {\n            postId: post.id,\n            postAccountId: (_post$social_account4 = post.social_account) === null || _post$social_account4 === void 0 ? void 0 : _post$social_account4.id,\n            postPlatformUserId: (_post$social_account5 = post.social_account) === null || _post$social_account5 === void 0 ? void 0 : _post$social_account5.platform_user_id,\n            postUsername: (_post$social_account6 = post.social_account) === null || _post$social_account6 === void 0 ? void 0 : _post$social_account6.username,\n            selectedAccountId: selectedAccount.id,\n            selectedPlatformUserId: selectedAccount.platform_user_id,\n            selectedUsername: selectedAccount.username,\n            matchesAccountId,\n            matchesPlatformUserId,\n            matchesUsername,\n            isMatch\n          });\n          return isMatch;\n        });\n        console.log('📋 Posts for this account:', accountPosts.length);\n        console.log('📋 All posts in database:', response.length);\n        console.log('📋 Account posts details:', accountPosts.map(post => {\n          var _post$content, _post$social_account7, _post$social_account8, _post$social_account9;\n          return {\n            id: post.id,\n            content: ((_post$content = post.content) === null || _post$content === void 0 ? void 0 : _post$content.substring(0, 50)) + '...',\n            social_account_id: (_post$social_account7 = post.social_account) === null || _post$social_account7 === void 0 ? void 0 : _post$social_account7.id,\n            platform_user_id: (_post$social_account8 = post.social_account) === null || _post$social_account8 === void 0 ? void 0 : _post$social_account8.platform_user_id,\n            username: (_post$social_account9 = post.social_account) === null || _post$social_account9 === void 0 ? void 0 : _post$social_account9.username\n          };\n        }));\n        if (accountPosts.length === 0) {\n          console.log('⚠️ No posts found for this specific account. Showing all Instagram posts for debugging...');\n\n          // Show all Instagram posts for debugging\n          setAutoReplyPosts(response);\n          console.log('📋 Showing all Instagram posts for debugging:', response.length);\n\n          // Also try to sync from Instagram API\n          console.log('🔄 Attempting to sync from Instagram...');\n          try {\n            const syncResponse = await apiClient.syncInstagramPosts(selectedAccount.platform_user_id);\n            console.log('📡 Sync response:', syncResponse);\n            if (syncResponse.success) {\n              // Re-fetch posts after sync\n              const refreshedResponse = await apiClient.getPosts('instagram');\n              const refreshedAccountPosts = refreshedResponse.filter(post => {\n                var _post$social_account0, _post$social_account1, _post$social_account10;\n                // Primary match: social_account_id (most reliable)\n                const matchesAccountId = ((_post$social_account0 = post.social_account) === null || _post$social_account0 === void 0 ? void 0 : _post$social_account0.id) === selectedAccount.id;\n\n                // Secondary matches for compatibility\n                const matchesPlatformUserId = ((_post$social_account1 = post.social_account) === null || _post$social_account1 === void 0 ? void 0 : _post$social_account1.platform_user_id) === selectedAccount.platform_user_id;\n                const matchesUsername = ((_post$social_account10 = post.social_account) === null || _post$social_account10 === void 0 ? void 0 : _post$social_account10.username) === selectedAccount.username;\n                return matchesAccountId || matchesPlatformUserId || matchesUsername;\n              });\n              if (refreshedAccountPosts.length > 0) {\n                setAutoReplyPosts(refreshedAccountPosts);\n                console.log('✅ Posts loaded after sync:', refreshedAccountPosts.length);\n              } else {\n                console.log('⚠️ Still no posts found after sync. Showing all posts for debugging.');\n                setAutoReplyPosts(refreshedResponse);\n                setMessage('No posts found for this account. Showing all Instagram posts for debugging. Create some posts first using the Create Post tab.');\n              }\n            } else {\n              setMessage('Failed to sync posts from Instagram. Showing all posts for debugging.');\n            }\n          } catch (syncError) {\n            console.error('❌ Sync error:', syncError);\n            setMessage('Failed to sync posts from Instagram. Showing all posts for debugging.');\n          }\n        } else {\n          setAutoReplyPosts(accountPosts);\n          console.log('✅ Posts loaded for auto-reply selection:', accountPosts.length);\n        }\n      } else {\n        throw new Error('Failed to load posts');\n      }\n    } catch (error) {\n      console.error('❌ Error loading posts for auto-reply:', error);\n\n      // Provide more specific error messages\n      let errorMessage = 'Failed to load posts for auto-reply selection';\n      if (error.message.includes('404')) {\n        errorMessage = 'Instagram account not found. Please reconnect your Instagram account.';\n      } else if (error.message.includes('401')) {\n        errorMessage = 'Authentication failed. Please log in again.';\n      } else if (error.message.includes('500')) {\n        errorMessage = 'Server error. Please try again later.';\n      }\n      setMessage(errorMessage);\n    } finally {\n      setLoadingAutoReplyPosts(false);\n    }\n  };\n  const handlePostSelection = postId => {\n    setSelectedAutoReplyPosts(prev => {\n      if (prev.includes(postId)) {\n        return prev.filter(id => id !== postId);\n      } else {\n        return [...prev, postId];\n      }\n    });\n  };\n  const handlePostTouch = (postId, event) => {\n    event.preventDefault();\n    handlePostSelection(postId);\n  };\n  const selectAllPosts = () => {\n    const allPostIds = autoReplyPosts.map(post => post.id);\n    setSelectedAutoReplyPosts(allPostIds);\n  };\n  const deselectAllPosts = () => {\n    setSelectedAutoReplyPosts([]);\n  };\n  const handleSelectPosts = () => {\n    setIsSelectingPosts(true);\n    // Load posts when entering selection mode\n    if (autoReplyPosts.length === 0) {\n      loadPostsForAutoReply();\n    }\n  };\n  const handleDoneSelecting = () => {\n    setIsSelectingPosts(false);\n  };\n  const handleAutoReplyToggle = async () => {\n    if (!selectedAccount) {\n      setMessage('Please select an Instagram account first');\n      return;\n    }\n\n    // Check if posts are available when enabling\n    if (!autoReplyEnabled && autoReplyPosts.length === 0) {\n      setMessage('No posts available for auto-reply. Please create some posts first.');\n      return;\n    }\n\n    // If enabling auto-reply without selected posts, auto-select all posts\n    if (!autoReplyEnabled && selectedAutoReplyPosts.length === 0) {\n      const allPostIds = autoReplyPosts.map(post => post.id);\n      setSelectedAutoReplyPosts(allPostIds);\n      console.log('Auto-selecting all posts for auto-reply:', allPostIds);\n    }\n\n    // Add mobile-friendly confirmation for enabling auto-reply\n    if (!autoReplyEnabled) {\n      const isMobile = window.innerWidth <= 768;\n      const postCount = selectedAutoReplyPosts.length > 0 ? selectedAutoReplyPosts.length : autoReplyPosts.length;\n      const confirmMessage = isMobile ? `Enable auto-reply for ${postCount} post(s)?` : `Enable auto-reply for ${postCount} post(s)? AI will automatically reply to comments mentioning the commenter.`;\n      if (!window.confirm(confirmMessage)) {\n        return;\n      }\n    }\n    setAutoReplyLoading(true);\n    try {\n      console.log('🔄 Toggling auto-reply for Instagram account:', selectedAccount.platform_user_id, selectedAccount.username);\n      console.log('📝 Selected post IDs:', selectedAutoReplyPosts);\n      console.log('🎯 New state will be:', !autoReplyEnabled);\n      const response = await apiClient.toggleInstagramAutoReply(selectedAccount.platform_user_id, !autoReplyEnabled, autoReplyTemplate, selectedAutoReplyPosts);\n      console.log('📡 Backend response:', response);\n      if (response.success) {\n        var _response$data, _response$data2, _response$data3;\n        setAutoReplyEnabled(!autoReplyEnabled);\n        const successMessage = !autoReplyEnabled ? isMobile() ? `Auto-reply enabled for ${((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.selected_posts_count) || selectedAutoReplyPosts.length} post(s)!` : `Auto-reply enabled successfully for ${((_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.selected_posts_count) || selectedAutoReplyPosts.length} post(s)! AI will automatically reply to comments mentioning the commenter.` : 'Auto-reply disabled successfully.';\n        setMessage(successMessage);\n        console.log('✅ Auto-reply toggled successfully:', {\n          enabled: !autoReplyEnabled,\n          selectedPostsCount: (_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : _response$data3.selected_posts_count\n        });\n      } else {\n        throw new Error(response.error || 'Failed to toggle auto-reply');\n      }\n    } catch (error) {\n      console.error('❌ Auto-reply toggle error:', error);\n      setMessage('Error toggling auto-reply: ' + (error.message || 'Unknown error'));\n    } finally {\n      setAutoReplyLoading(false);\n    }\n  };\n\n  // Load auto-reply settings when account is selected\n  useEffect(() => {\n    console.log('🔍 DEBUG: Auto-reply useEffect triggered');\n    console.log('🔍 DEBUG: selectedAccount:', selectedAccount);\n    console.log('🔍 DEBUG: activeTab:', activeTab);\n    if (selectedAccount && activeTab === 'auto-reply') {\n      console.log('🔍 DEBUG: Loading auto-reply settings');\n      loadAutoReplySettings();\n    }\n  }, [selectedAccount, activeTab]);\n\n  // Persist auto-reply state on page refresh\n  useEffect(() => {\n    if (selectedAccount && autoReplyEnabled) {\n      // Re-validate auto-reply state with backend\n      const validateAutoReplyState = async () => {\n        try {\n          const rules = await apiClient.getAutomationRules('instagram', 'auto_reply');\n          const socialAccounts = await apiClient.getSocialAccounts();\n          const instagramAccount = socialAccounts.find(acc => acc.platform === 'instagram' && acc.platform_user_id === selectedAccount.platform_user_id);\n          if (instagramAccount) {\n            const existingRule = rules.find(rule => rule.social_account_id === instagramAccount.id && rule.rule_type === 'AUTO_REPLY');\n            if (!existingRule || !existingRule.is_active) {\n              setAutoReplyEnabled(false);\n              setSelectedAutoReplyPosts([]);\n            }\n          }\n        } catch (error) {\n          console.error('Error validating auto-reply state:', error);\n        }\n      };\n      validateAutoReplyState();\n    }\n  }, [selectedAccount, autoReplyEnabled]);\n\n  // Load user media when account is selected\n  useEffect(() => {\n    if (selectedAccount && activeTab === 'post') {\n      loadUserMedia(selectedAccount.platform_user_id);\n    }\n  }, [selectedAccount, activeTab]);\n\n  // Load DM auto-reply settings when account is selected\n  useEffect(() => {\n    if (selectedAccount && activeTab === 'auto-reply') {\n      loadDmAutoReplySettings();\n    }\n  }, [selectedAccount, activeTab]);\n\n  // Add a useEffect to always load DM auto-reply settings when selectedAccount changes\n  useEffect(() => {\n    if (selectedAccount) {\n      loadDmAutoReplySettings();\n    }\n  }, [selectedAccount]);\n\n  // --- New: Scheduled Posts Grid State ---\n  const [scheduledGridRows, setScheduledGridRows] = useState([]);\n\n  // Show grid if redirected with scheduled posts\n  useEffect(() => {\n    if (location.state && location.state.scheduledGridRows) {\n      setScheduledGridRows(location.state.scheduledGridRows);\n    }\n  }, [location.state]);\n\n  // --- Auto-refresh scheduled posts grid ---\n  useEffect(() => {\n    let intervalId;\n    const fetchScheduledPosts = async () => {\n      try {\n        const posts = await apiClient.getScheduledPosts();\n        setScheduledGridRows(posts.filter(post => post.platform === 'instagram'));\n      } catch (err) {}\n    };\n    fetchScheduledPosts(); // Always fetch on mount\n    intervalId = setInterval(fetchScheduledPosts, 10000);\n    return () => clearInterval(intervalId);\n  }, []);\n\n  // --- UI Render ---\n  if (authLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"instagram-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-screen\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1815,\n          columnNumber: 81\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Checking authentication...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1815,\n          columnNumber: 120\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1815,\n        columnNumber: 49\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1815,\n      columnNumber: 12\n    }, this);\n  }\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"instagram-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/'),\n          className: \"back-button\",\n          children: \"Back to Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1821,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Instagram Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1822,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please log in to your account to connect and manage Instagram.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1823,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1820,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-required\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auth-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1826,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Authentication Required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1827,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You need to be logged in to use Instagram features. Please log in first.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1828,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1825,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1819,\n      columnNumber: 7\n    }, this);\n  }\n  if (!sdkLoaded) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"instagram-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-screen\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1834,\n          columnNumber: 81\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading Instagram SDK...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1834,\n          columnNumber: 120\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1834,\n        columnNumber: 49\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1834,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"instagram-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/'),\n        className: \"back-button\",\n        children: \"Back to Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1840,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1842,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-text\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Instagram Management\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1844,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Connect and manage your Instagram Business accounts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1845,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1843,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1841,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1839,\n      columnNumber: 7\n    }, this), isConnected && selectedAccount && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"global-auto-reply-section\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        background: '#fff',\n        borderRadius: 12,\n        boxShadow: '0 2px 8px rgba(0,0,0,0.04)',\n        padding: '18px 24px',\n        marginBottom: 18,\n        border: '1px solid #eee',\n        flexWrap: 'wrap',\n        gap: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 56,\n            height: 56,\n            borderRadius: '50%',\n            overflow: 'hidden',\n            background: '#f3f3f3',\n            border: '1px solid #e0e0e0'\n          },\n          children: selectedAccount.profile_picture_url ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: selectedAccount.profile_picture_url,\n            alt: selectedAccount.username,\n            style: {\n              width: '100%',\n              height: '100%',\n              objectFit: 'cover'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1860,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100%',\n              height: '100%',\n              background: '#eee'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1862,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1858,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 600,\n              fontSize: 18\n            },\n            children: [\"@\", selectedAccount.username]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1866,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#888',\n              fontSize: 14\n            },\n            children: selectedAccount.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1867,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#666',\n              fontSize: 13,\n              marginTop: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                marginRight: 12\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: selectedAccount.followers_count\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1870,\n                columnNumber: 19\n              }, this), \" followers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1869,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: selectedAccount.media_count\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1873,\n                columnNumber: 19\n              }, this), \" posts\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1872,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1868,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1865,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1857,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"auto-reply-toggle-btn\",\n          onClick: handleGlobalAutoReplyToggle,\n          disabled: globalAutoReplyLoading,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 10,\n            fontWeight: 600,\n            background: globalAutoReplyEnabled ? '#38c172' : '#e0e0e0',\n            color: globalAutoReplyEnabled ? '#fff' : '#444',\n            border: 'none',\n            borderRadius: 20,\n            padding: '10px 22px',\n            fontSize: 16,\n            cursor: globalAutoReplyLoading ? 'not-allowed' : 'pointer',\n            boxShadow: globalAutoReplyEnabled ? '0 2px 8px rgba(56,193,114,0.08)' : 'none',\n            transition: 'background 0.2s'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: 'inline-block',\n              width: 14,\n              height: 14,\n              borderRadius: '50%',\n              background: globalAutoReplyEnabled ? '#2ecc40' : '#bbb',\n              marginRight: 6,\n              border: globalAutoReplyEnabled ? '2px solid #fff' : '2px solid #ccc',\n              boxShadow: globalAutoReplyEnabled ? '0 0 4px #38c172' : 'none',\n              verticalAlign: 'middle'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1893,\n            columnNumber: 15\n          }, this), \"Auto Comment Reply: \", globalAutoReplyEnabled ? 'Enabled' : 'Disabled', globalAutoReplyLoading && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"loading-spinner\",\n            style: {\n              marginLeft: 10,\n              width: 18,\n              height: 18,\n              border: '2px solid #fff',\n              borderTop: '2px solid #38c172',\n              borderRadius: '50%',\n              display: 'inline-block',\n              animation: 'spin 1s linear infinite'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1902,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1879,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"auto-reply-toggle-btn\",\n          onClick: handleDmAutoReplyToggle,\n          disabled: dmAutoReplyLoading,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 10,\n            fontWeight: 600,\n            background: dmAutoReplyEnabled ? '#38c172' : '#e0e0e0',\n            color: dmAutoReplyEnabled ? '#fff' : '#444',\n            border: 'none',\n            borderRadius: 20,\n            padding: '10px 22px',\n            fontSize: 16,\n            cursor: dmAutoReplyLoading ? 'not-allowed' : 'pointer',\n            boxShadow: dmAutoReplyEnabled ? '0 2px 8px rgba(56,193,114,0.08)' : 'none',\n            transition: 'background 0.2s'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: 'inline-block',\n              width: 14,\n              height: 14,\n              borderRadius: '50%',\n              background: dmAutoReplyEnabled ? '#2ecc40' : '#bbb',\n              marginRight: 6,\n              border: dmAutoReplyEnabled ? '2px solid #fff' : '2px solid #ccc',\n              boxShadow: dmAutoReplyEnabled ? '0 0 4px #38c172' : 'none',\n              verticalAlign: 'middle'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1921,\n            columnNumber: 15\n          }, this), \"Auto DM Reply: \", dmAutoReplyEnabled ? 'Enabled' : 'Disabled', dmAutoReplyLoading && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"loading-spinner\",\n            style: {\n              marginLeft: 10,\n              width: 18,\n              height: 18,\n              border: '2px solid #fff',\n              borderTop: '2px solid #38c172',\n              borderRadius: '50%',\n              display: 'inline-block',\n              animation: 'spin 1s linear infinite'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1930,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1907,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1878,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1851,\n      columnNumber: 9\n    }, this), toast.show && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `toast-notification toast-${toast.type}`,\n      style: {\n        position: 'fixed',\n        top: 24,\n        right: 24,\n        zIndex: 9999,\n        background: toast.type === 'success' ? '#38c172' : toast.type === 'error' ? '#e53e3e' : '#333',\n        color: '#fff',\n        padding: '14px 28px',\n        borderRadius: 8,\n        boxShadow: '0 2px 8px rgba(0,0,0,0.12)',\n        fontWeight: 500,\n        fontSize: 16\n      },\n      children: toast.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1938,\n      columnNumber: 9\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-message info\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"message-text\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1945,\n        columnNumber: 56\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1945,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-navigation\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'connect' ? 'active' : ''}`,\n          onClick: () => setActiveTab('connect'),\n          children: \"Connect Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1948,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'post' ? 'active' : ''}`,\n          onClick: () => setActiveTab('post'),\n          disabled: !isConnected,\n          children: \"Create Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1949,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'media' ? 'active' : ''}`,\n          onClick: () => setActiveTab('media'),\n          disabled: !isConnected || !selectedAccount,\n          children: \"Media Gallery\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1950,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'bulk-composer' ? 'active' : ''}`,\n          onClick: () => setActiveTab('bulk-composer'),\n          disabled: !isConnected || !selectedAccount,\n          style: {\n            backgroundColor: activeTab === 'bulk-composer' ? '#e4405f' : undefined,\n            color: activeTab === 'bulk-composer' ? 'white' : undefined,\n            border: 'none'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"Bulk Composer\",\n            children: \"\\uD83D\\uDCC5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1957,\n            columnNumber: 13\n          }, this), \" Bulk Composer\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1951,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'scheduled-posts' ? 'active' : ''}`,\n          onClick: () => setActiveTab('scheduled-posts'),\n          disabled: !isConnected || !selectedAccount,\n          children: \"Scheduled Posts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1959,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1947,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-content\",\n        children: [activeTab === 'connect' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"connect-section\",\n          children: !isConnected ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"connection-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"connection-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1966,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Connect Instagram Account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1967,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Connect your Instagram Business account through Facebook to start posting and managing content.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1968,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleFacebookLogin,\n              disabled: loading,\n              className: \"connect-main-button\",\n              children: loading ? 'Connecting...' : 'Connect via Facebook'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1969,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"requirements-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Requirements\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1971,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Instagram Business or Creator account\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1973,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Connected to a Facebook Page\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1974,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Admin access to the Facebook Page\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1975,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1972,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1970,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1965,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"connected-accounts\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"accounts-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Connected Instagram Accounts\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1982,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleLogout,\n                className: \"logout-button\",\n                children: \"Disconnect\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1983,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1981,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"accounts-grid\",\n              children: instagramAccounts.map(account => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `account-card ${selectedAccount.id === account.id ? 'selected' : ''}`,\n                onClick: () => setSelectedAccount(account),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"account-avatar\",\n                  children: account.profile_picture_url ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: account.profile_picture_url,\n                    alt: account.username\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1988,\n                    columnNumber: 88\n                  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"avatar-placeholder\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1988,\n                    columnNumber: 155\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1988,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"account-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: [\"@\", account.username]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1990,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: account.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1991,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"account-stats\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [account.followers_count, \" followers\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1992,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [account.media_count, \" posts\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1992,\n                      columnNumber: 106\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1992,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1989,\n                  columnNumber: 25\n                }, this), selectedAccount.id === account.id && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"selected-indicator\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1994,\n                  columnNumber: 63\n                }, this)]\n              }, account.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1987,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1985,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1980,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1963,\n          columnNumber: 13\n        }, this), activeTab === 'post' && selectedAccount && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-type-toggle\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: postType === 'photo' ? 'active' : '',\n              onClick: () => setPostType('photo'),\n              children: \"Photo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2005,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: postType === 'carousel' ? 'active' : '',\n              onClick: () => setPostType('carousel'),\n              children: \"Carousel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2006,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: postType === 'reel' ? 'active' : '',\n              onClick: () => setPostType('reel'),\n              children: \"Reel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2007,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2004,\n            columnNumber: 15\n          }, this), postType === 'photo' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Image Source\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2013,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-source-toggle\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: imageSource === 'ai' ? 'active' : '',\n                  onClick: () => setImageSource('ai'),\n                  children: \"AI\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2015,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: imageSource === 'upload' ? 'active' : '',\n                  onClick: () => setImageSource('upload'),\n                  children: \"Upload\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2016,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2014,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2012,\n              columnNumber: 19\n            }, this), imageSource === 'ai' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"AI Prompt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2021,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: aiPrompt,\n                onChange: e => {\n                  setAiPrompt(e.target.value);\n                  // Clear generated content when prompt changes\n                  if (aiImageUrl) {\n                    setAiImageUrl('');\n                  }\n                  if (caption && !caption.trim().includes('Check out this amazing image!')) {\n                    setCaption('');\n                  }\n                },\n                placeholder: \"Describe your image...\",\n                rows: 3,\n                className: \"post-textarea\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2022,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ai-buttons\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"ai-generate-button\",\n                  onClick: handleGenerateAIImage,\n                  disabled: aiGenerating || !aiPrompt.trim() || rateLimitCooldown > 0,\n                  children: aiGenerating ? 'Generating...' : 'Generate Image'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2039,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"ai-generate-button secondary\",\n                  onClick: handleGenerateImageAndCaption,\n                  disabled: aiGenerating || generatingCaption || !aiPrompt.trim() || rateLimitCooldown > 0,\n                  children: aiGenerating || generatingCaption ? 'Generating...' : 'Generate Image & Caption'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2042,\n                  columnNumber: 25\n                }, this), message && message.includes('Error') && aiPrompt.trim() && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"ai-generate-button retry\",\n                  onClick: handleRetryImageGeneration,\n                  disabled: aiGenerating || rateLimitCooldown > 0,\n                  children: aiGenerating ? 'Retrying...' : 'Retry Generation'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2046,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2038,\n                columnNumber: 23\n              }, this), rateLimitCooldown > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: '#e53e3e',\n                  marginTop: 8,\n                  fontWeight: 500\n                },\n                children: [\"Too many requests. Please wait \", Math.floor(rateLimitCooldown / 60), \":\", (rateLimitCooldown % 60).toString().padStart(2, '0'), \" before trying again.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2052,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2020,\n              columnNumber: 19\n            }, this), imageSource === 'upload' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group image-upload\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Select Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2060,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => openFilePicker('photo', 'manual'),\n                className: \"file-picker-button\",\n                disabled: uploadingImage,\n                children: uploadingImage ? 'Uploading...' : 'Choose Image'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2061,\n                columnNumber: 23\n              }, this), uploadedImageUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-preview\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: uploadedImageUrl,\n                  alt: \"Preview\",\n                  className: \"preview-image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2071,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2070,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2059,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Caption\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2077,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"caption-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"caption-toggle\",\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"toggle-label\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: autoGenerateCaption,\n                      onChange: e => setAutoGenerateCaption(e.target.checked)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2081,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"toggle-text\",\n                      children: \"Auto Generate Caption\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2086,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2080,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2079,\n                  columnNumber: 23\n                }, this), autoGenerateCaption ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"caption-prompt-section\",\n                  children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: captionPrompt,\n                    onChange: e => setCaptionPrompt(e.target.value),\n                    placeholder: \"Describe what you want in the caption...\",\n                    rows: 2,\n                    className: \"caption-prompt-textarea\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2091,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleAutoGenerateCaption,\n                    disabled: generatingCaption || !captionPrompt.trim(),\n                    className: \"generate-caption-button\",\n                    children: generatingCaption ? 'Generating...' : 'Generate Caption'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2098,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2090,\n                  columnNumber: 25\n                }, this) : null, /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: caption,\n                  onChange: e => setCaption(e.target.value),\n                  placeholder: autoGenerateCaption ? \"Caption will be generated...\" : \"Write your caption...\",\n                  rows: 3,\n                  className: \"post-textarea\",\n                  disabled: autoGenerateCaption\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2107,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2078,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2076,\n              columnNumber: 19\n            }, this), (aiImageUrl || uploadedImageUrl) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"generated-image\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: aiImageUrl || uploadedImageUrl,\n                alt: \"Preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2117,\n                columnNumber: 89\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2117,\n              columnNumber: 56\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"publish-button\",\n              onClick: handlePublish,\n              disabled: loading || !(aiImageUrl || uploadedImageUrl) || !caption.trim() && !autoGenerateCaption,\n              children: loading ? 'Publishing...' : 'Publish Post'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2118,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2011,\n            columnNumber: 15\n          }, this), postType === 'carousel' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Carousel Mode\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2125,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-source-toggle\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: imageSource === 'ai' ? 'active' : '',\n                  onClick: () => setImageSource('ai'),\n                  disabled: carouselGenerating,\n                  children: \"\\uD83E\\uDD16 AI Generation\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2127,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: imageSource === 'upload' ? 'active' : '',\n                  onClick: () => setImageSource('upload'),\n                  disabled: carouselGenerating,\n                  children: \"\\uD83D\\uDCE4 Manual Upload\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2134,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2126,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2124,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Number of Images: \", carouselCount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2146,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"range\",\n                min: \"3\",\n                max: \"7\",\n                value: carouselCount,\n                onChange: e => setCarouselCount(parseInt(e.target.value)),\n                className: \"slider\",\n                disabled: carouselGenerating\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2147,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"slider-labels\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2157,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2158,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2159,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2160,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2161,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2156,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2145,\n              columnNumber: 19\n            }, this), imageSource === 'ai' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"AI Prompt for Carousel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2168,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: aiPrompt,\n                onChange: e => setAiPrompt(e.target.value),\n                placeholder: \"Describe the carousel content you want to generate...\",\n                rows: \"3\",\n                className: \"post-textarea\",\n                disabled: carouselGenerating\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2169,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ai-generation-note\",\n                children: /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: [\"\\uD83D\\uDCA1 Tip: Carousel generation takes 3-5 minutes for \", carouselCount, \" images. Please be patient!\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2178,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2177,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"generate-button\",\n                onClick: async () => {\n                  if (!aiPrompt.trim()) {\n                    setMessage('Please enter a prompt for carousel generation.');\n                    return;\n                  }\n                  setCarouselGenerating(true);\n                  setMessage(`Generating ${carouselCount} carousel images with AI... This may take 3-5 minutes.`);\n                  try {\n                    const response = await apiClient.generateInstagramCarousel(aiPrompt.trim(), carouselCount);\n                    if (response && response.success && response.image_urls) {\n                      setCarouselImages(response.image_urls);\n                      setCarouselCaption(response.caption || '');\n                      setMessage(`AI carousel generated successfully with ${response.image_urls.length} images!`);\n                    } else {\n                      setMessage(response.error || 'Failed to generate carousel images.');\n                    }\n                  } catch (error) {\n                    console.error('Carousel generation error:', error);\n                    if (error.message && error.message.includes('timeout')) {\n                      setMessage('Carousel generation timed out. This can happen with complex prompts or when generating many images. Please try again with a simpler prompt or fewer images.');\n                    } else {\n                      setMessage('Error generating carousel: ' + (error.message || error.toString()));\n                    }\n                  } finally {\n                    setCarouselGenerating(false);\n                  }\n                },\n                disabled: carouselGenerating || !aiPrompt.trim(),\n                children: carouselGenerating ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"button-spinner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2213,\n                    columnNumber: 25\n                  }, this), \"Generating \", carouselCount, \" Images...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    role: \"img\",\n                    \"aria-label\": \"Generate\",\n                    children: \"\\u2728\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2218,\n                    columnNumber: 29\n                  }, this), \" Generate Carousel\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2180,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2167,\n              columnNumber: 21\n            }, this), imageSource === 'upload' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Upload Images (JPG/PNG)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2228,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => openFilePicker('photo', 'carousel'),\n                className: \"file-picker-button\",\n                disabled: carouselGenerating,\n                children: carouselGenerating ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"button-spinner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2237,\n                    columnNumber: 29\n                  }, this), \"Uploading...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    role: \"img\",\n                    \"aria-label\": \"Upload\",\n                    children: \"\\uD83D\\uDCE4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2242,\n                    columnNumber: 29\n                  }, this), \" Select \", carouselCount, \" Images\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2229,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"file-upload-hint\",\n                children: [\"Select \", carouselCount, \" images for your carousel\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2246,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2227,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Caption\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2254,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"caption-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"caption-toggle\",\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"toggle-label\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: autoGenerateCaption,\n                      onChange: e => setAutoGenerateCaption(e.target.checked)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2258,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"toggle-text\",\n                      children: \"Auto Generate Caption\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2263,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2257,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2256,\n                  columnNumber: 23\n                }, this), autoGenerateCaption ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"caption-prompt-section\",\n                  children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: captionPrompt,\n                    onChange: e => setCaptionPrompt(e.target.value),\n                    placeholder: \"Describe what you want in the caption...\",\n                    rows: 2,\n                    className: \"caption-prompt-textarea\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2268,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleCarouselAutoGenerateCaption,\n                    disabled: generatingCaption || !captionPrompt.trim(),\n                    className: \"generate-caption-button\",\n                    children: generatingCaption ? 'Generating...' : 'Generate Caption'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2275,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2267,\n                  columnNumber: 25\n                }, this) : null, /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: carouselCaption,\n                  onChange: e => setCarouselCaption(e.target.value),\n                  placeholder: autoGenerateCaption ? \"Caption will be generated...\" : \"Write your caption...\",\n                  rows: 3,\n                  className: \"post-textarea\",\n                  disabled: autoGenerateCaption\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2284,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2255,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2253,\n              columnNumber: 19\n            }, this), carouselImages.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"carousel-preview-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Carousel Preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2298,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"carousel-preview-grid\",\n                children: carouselImages.slice(0, carouselCount).map((url, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"carousel-preview-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: url,\n                    alt: `Carousel item ${index + 1}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2302,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"carousel-item-number\",\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2303,\n                    columnNumber: 29\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2301,\n                  columnNumber: 27\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2299,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2297,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"publish-button\",\n              onClick: async () => {\n                if (!selectedAccount) {\n                  setMessage('Please select an Instagram account first.');\n                  return;\n                }\n                if (carouselImages.length < 3) {\n                  setMessage('Please add at least 3 images for carousel.');\n                  return;\n                }\n                if (!carouselCaption.trim() && !autoGenerateCaption) {\n                  setMessage('Please write a caption or enable auto-generate caption.');\n                  return;\n                }\n                if (autoGenerateCaption && !captionPrompt.trim()) {\n                  setMessage('Please provide a prompt for auto-generating caption.');\n                  return;\n                }\n                setLoading(true);\n                setMessage('Publishing carousel post...');\n                try {\n                  console.log('🔍 DEBUG: Carousel publish - selectedAccount:', selectedAccount);\n                  console.log('🔍 DEBUG: Carousel publish - carouselImages:', carouselImages);\n                  console.log('🔍 DEBUG: Carousel publish - carouselCount:', carouselCount);\n                  const finalCaption = autoGenerateCaption && captionPrompt.trim() ? await (async () => {\n                    const res = await apiClient.generateInstagramCaption(captionPrompt.trim());\n                    return res.content || carouselCaption || 'Check out this amazing carousel!';\n                  })() : carouselCaption;\n                  console.log('🔍 DEBUG: Carousel publish - finalCaption:', finalCaption);\n                  const response = await apiClient.postInstagramCarousel(selectedAccount.platform_user_id, finalCaption, carouselImages.slice(0, carouselCount));\n                  if (response.success) {\n                    setMessage('Carousel post published successfully!');\n                    setCarouselImages([]);\n                    setCarouselCaption('');\n                    setCaptionPrompt('');\n                    setAutoGenerateCaption(false);\n                    setAiPrompt('');\n                    loadUserMedia(selectedAccount.platform_user_id);\n                  } else {\n                    setMessage('Failed to publish carousel: ' + (response.error || 'Unknown error'));\n                  }\n                } catch (err) {\n                  setMessage('Error publishing carousel: ' + (err.message || err.toString()));\n                } finally {\n                  setLoading(false);\n                }\n              },\n              disabled: loading || carouselImages.length < 3 || !carouselCaption.trim() && !autoGenerateCaption,\n              children: loading ? 'Publishing...' : 'Publish Carousel'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2310,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2123,\n            columnNumber: 17\n          }, this), postType === 'reel' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Upload Reel Video (.mp4, .mov)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2378,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"video/mp4,video/quicktime,.mp4,.mov\",\n                onChange: handleReelFileChange,\n                disabled: reelUploading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2379,\n                columnNumber: 21\n              }, this), reelUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"video-preview\",\n                children: /*#__PURE__*/_jsxDEV(\"video\", {\n                  src: reelUrl,\n                  controls: true,\n                  style: {\n                    width: '100%',\n                    maxHeight: '300px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2382,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2381,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2377,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Upload Reel Thumbnail (optional):\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2387,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/png,image/jpeg,image/jpg\",\n                onChange: handleReelThumbnailChange,\n                disabled: !reelUrl\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2388,\n                columnNumber: 21\n              }, this), reelThumbnailUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 8,\n                  marginTop: 8\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: reelThumbnailUrl,\n                  alt: \"Reel Thumbnail Preview\",\n                  style: {\n                    maxWidth: 120,\n                    borderRadius: 8,\n                    border: '1px solid #eee'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2391,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => {\n                    setReelThumbnailUrl('');\n                    setReelThumbnailFilename('');\n                    setReelThumbnailFile(null);\n                  },\n                  style: {\n                    background: 'none',\n                    border: 'none',\n                    cursor: 'pointer',\n                    color: '#e53e3e',\n                    fontSize: 18\n                  },\n                  title: \"Remove thumbnail\",\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2392,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2390,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2386,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Caption\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2397,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"caption-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"caption-toggle\",\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"toggle-label\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: reelAutoGenerateCaption,\n                      onChange: e => setReelAutoGenerateCaption(e.target.checked)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2401,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"toggle-text\",\n                      children: \"Auto Generate Caption\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2406,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2400,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2399,\n                  columnNumber: 23\n                }, this), reelAutoGenerateCaption ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"caption-prompt-section\",\n                  children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: reelCaptionPrompt,\n                    onChange: e => setReelCaptionPrompt(e.target.value),\n                    placeholder: \"Describe what you want in the caption...\",\n                    rows: 2,\n                    className: \"caption-prompt-textarea\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2411,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleReelAutoGenerateCaption,\n                    disabled: generatingReelCaption || !reelCaptionPrompt.trim(),\n                    className: \"generate-caption-button\",\n                    children: generatingReelCaption ? 'Generating...' : 'Generate Caption'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2418,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2410,\n                  columnNumber: 25\n                }, this) : null, /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: reelCaption,\n                  onChange: e => setReelCaption(e.target.value),\n                  placeholder: reelAutoGenerateCaption ? \"Caption will be generated...\" : \"Write your caption...\",\n                  rows: 3,\n                  className: \"post-textarea\",\n                  disabled: reelAutoGenerateCaption\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2427,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2398,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2396,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"publish-button\",\n              onClick: handlePublish,\n              disabled: loading || !reelUrl || !reelCaption.trim() && !reelAutoGenerateCaption,\n              children: loading ? 'Publishing...' : 'Publish Reel'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2437,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2376,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2003,\n          columnNumber: 13\n        }, this), activeTab === 'media' && selectedAccount && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"media-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"media-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Recent Posts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2444,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Your latest Instagram content\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2444,\n              columnNumber: 66\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2444,\n            columnNumber: 15\n          }, this), loadingMedia ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-media\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-spinner\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2445,\n              columnNumber: 62\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Loading media...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2445,\n              columnNumber: 101\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2445,\n            columnNumber: 31\n          }, this) : userMedia.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"media-grid\",\n            children: userMedia.slice(0, 12).map(media => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"media-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"media-content\",\n                children: media.media_type === 'IMAGE' ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: media.media_url,\n                  alt: \"Instagram post\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2445,\n                  columnNumber: 329\n                }, this) : media.media_type === 'VIDEO' ? /*#__PURE__*/_jsxDEV(\"video\", {\n                  controls: true,\n                  children: /*#__PURE__*/_jsxDEV(\"source\", {\n                    src: media.media_url,\n                    type: \"video/mp4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2445,\n                    columnNumber: 429\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2445,\n                  columnNumber: 413\n                }, this) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2445,\n                columnNumber: 266\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"media-overlay\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"media-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"media-caption\",\n                    children: media.caption ? media.caption.substring(0, 100) + '...' : 'No caption'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2445,\n                    columnNumber: 559\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"media-date\",\n                    children: new Date(media.timestamp).toLocaleDateString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2445,\n                    columnNumber: 664\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2445,\n                  columnNumber: 531\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2445,\n                columnNumber: 500\n              }, this)]\n            }, media.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2445,\n              columnNumber: 223\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2445,\n            columnNumber: 156\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-media\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"No Media Found\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2445,\n              columnNumber: 797\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No media found for this account. Start creating posts to see them here!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2445,\n              columnNumber: 820\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2445,\n            columnNumber: 771\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2443,\n          columnNumber: 13\n        }, this), activeTab === 'bulk-composer' && selectedAccount && /*#__PURE__*/_jsxDEV(IgBulkComposer, {\n          selectedAccount: selectedAccount,\n          onClose: () => {}\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2449,\n          columnNumber: 13\n        }, this), activeTab === 'scheduled-posts' && /*#__PURE__*/_jsxDEV(ScheduledPostHistory, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2452,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1961,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1946,\n      columnNumber: 7\n    }, this), showDriveModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setShowDriveModal(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Select from Google Drive\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2462,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowDriveModal(false),\n            className: \"modal-close\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2463,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2461,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: !driveAuthenticated ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"drive-auth\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Connect to Google Drive to select files\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2468,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: authenticateGoogleDrive,\n              disabled: driveAuthLoading,\n              className: \"auth-button\",\n              children: driveAuthLoading ? 'Connecting...' : 'Connect Google Drive'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2469,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2467,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"drive-files\",\n            children: loadingDriveFiles ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-files\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-spinner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2477,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Loading files...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2478,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2476,\n              columnNumber: 21\n            }, this) : driveFiles.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"files-grid\",\n              children: driveFiles.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"file-item\",\n                onClick: () => handleDriveFileSelect(file.id, file.name),\n                children: [file.thumbnailLink ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: file.thumbnailLink,\n                  alt: file.name,\n                  className: \"file-thumbnail\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2485,\n                  columnNumber: 29\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"file-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2487,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"file-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"file-name\",\n                    children: file.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2490,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"file-size\",\n                    children: file.size ? `${Math.round(file.size / 1024)} KB` : 'Unknown size'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2491,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2489,\n                  columnNumber: 27\n                }, this)]\n              }, file.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2483,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2481,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-files\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"No image files found in Google Drive\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2498,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2497,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2474,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2465,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2460,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2459,\n      columnNumber: 9\n    }, this), showFilePicker && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: closeFilePicker,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Select \", filePickerType === 'photo' ? 'Photo' : 'Video']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2513,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: closeFilePicker,\n            className: \"modal-close\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"20\",\n              height: \"20\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              children: [/*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"18\",\n                y1: \"6\",\n                x2: \"6\",\n                y2: \"18\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2516,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"6\",\n                y1: \"6\",\n                x2: \"18\",\n                y2: \"18\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2517,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2515,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2514,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2512,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"file-picker-options\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"file-option\",\n              onClick: () => document.getElementById('local-file-input').click(),\n              onTouchStart: e => e.preventDefault(),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"file-option-icon\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"32\",\n                  height: \"32\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  strokeWidth: \"2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2530,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                    points: \"14,2 14,8 20,8\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2531,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                    x1: \"16\",\n                    y1: \"13\",\n                    x2: \"8\",\n                    y2: \"13\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2532,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                    x1: \"16\",\n                    y1: \"17\",\n                    x2: \"8\",\n                    y2: \"17\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2533,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                    points: \"10,9 9,9 8,9\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2534,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2529,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2528,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"file-option-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"From Device\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2538,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Select a file from your computer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2539,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2537,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2523,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `file-option ${!googleDriveAvailable ? 'disabled' : ''}`,\n              onClick: handleGoogleDriveSelect,\n              onTouchStart: e => {\n                if (!googleDriveAvailable) {\n                  e.preventDefault();\n                  return;\n                }\n                e.preventDefault();\n                handleGoogleDriveSelect();\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"file-option-icon\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"32\",\n                  height: \"32\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  strokeWidth: \"2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2557,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                    points: \"9,22 9,12 15,12 15,22\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2558,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2556,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2555,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"file-option-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"From Google Drive\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2562,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: googleDriveAvailable ? 'Select a file from your Google Drive' : 'Google Drive not configured. See setup guide.'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2563,\n                  columnNumber: 21\n                }, this), isLoadingGoogleDrive && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"loading-indicator\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"16\",\n                    height: \"16\",\n                    viewBox: \"0 0 24 24\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"2\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M21 12a9 9 0 11-6.219-8.56\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2572,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2571,\n                    columnNumber: 25\n                  }, this), \"Loading...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2570,\n                  columnNumber: 23\n                }, this), !googleDriveAvailable && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"unavailable-indicator\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"16\",\n                    height: \"16\",\n                    viewBox: \"0 0 24 24\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                      cx: \"12\",\n                      cy: \"12\",\n                      r: \"10\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2580,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                      x1: \"15\",\n                      y1: \"9\",\n                      x2: \"9\",\n                      y2: \"15\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2581,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                      x1: \"9\",\n                      y1: \"9\",\n                      x2: \"15\",\n                      y2: \"15\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2582,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2579,\n                    columnNumber: 25\n                  }, this), \"Not Available\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2578,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2561,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2543,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2522,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"local-file-input\",\n            type: \"file\",\n            accept: filePickerType === 'photo' ? 'image/*' : 'video/*',\n            multiple: filePickerFormType === 'carousel',\n            onChange: handleLocalFileSelect,\n            style: {\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2592,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2521,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2511,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2510,\n      columnNumber: 9\n    }, this), globalAutoReplyEnabled && globalAutoReplyProgress && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auto-reply-progress\",\n      style: {\n        margin: '16px 0',\n        padding: '12px',\n        background: '#f5f5f5',\n        borderRadius: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Auto-Reply Progress:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2607,\n          columnNumber: 14\n        }, this), \" \", globalAutoReplyProgress.status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2607,\n        columnNumber: 11\n      }, this), globalAutoReplyProgress.status === 'processing' && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Processing post \", globalAutoReplyProgress.current_post, \" of \", globalAutoReplyProgress.total_posts, \", comment \", globalAutoReplyProgress.current_comment, \" of \", globalAutoReplyProgress.total_comments]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2609,\n        columnNumber: 13\n      }, this), globalAutoReplyProgress.status === 'done' && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"All comments processed!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2611,\n        columnNumber: 57\n      }, this), globalAutoReplyProgress.details && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: globalAutoReplyProgress.details\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2612,\n        columnNumber: 47\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2606,\n      columnNumber: 9\n    }, this), apiError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"api-error\",\n      style: {\n        color: 'red',\n        margin: '12px 0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Error: \", apiError]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2617,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setApiError(null);\n          setRetrying(true);\n          setTimeout(() => {\n            setRetrying(false);\n            window.location.reload();\n          }, 500);\n        },\n        children: \"Retry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2618,\n        columnNumber: 11\n      }, this), retrying && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Retrying...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2619,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2616,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1838,\n    columnNumber: 5\n  }, this);\n};\n_s(InstagramPage, \"Y92a23s3Yk/tcpzLgkeIqBe5b9k=\", false, function () {\n  return [useNavigate, useLocation, useAuth, useNotifications];\n});\n_c = InstagramPage;\nexport default InstagramPage;\nvar _c;\n$RefreshReg$(_c, \"InstagramPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","apiClient","useAuth","useNotifications","IgBulkComposer","ScheduledPostHistory","loadFacebookSDK","jsxDEV","_jsxDEV","Fragment","_Fragment","ACCEPTED_IMAGE_TYPES","ACCEPTED_VIDEO_TYPES","InstagramPage","_s","navigate","location","isAuthenticated","loading","authLoading","user","addNotification","isConnected","setIsConnected","instagramAccounts","setInstagramAccounts","selectedAccount","setSelectedAccount","activeTab","setActiveTab","sdkLoaded","setSdkLoaded","fbAccessToken","setFbAccessToken","message","setMessage","setLoading","postType","setPostType","caption","setCaption","aiPrompt","setAiPrompt","aiGenerating","setAiGenerating","aiImageUrl","setAiImageUrl","imageSource","setImageSource","uploadedImageUrl","setUploadedImageUrl","uploadingImage","setUploadingImage","selectedImageFile","setSelectedImageFile","autoGenerateCaption","setAutoGenerateCaption","captionPrompt","setCaptionPrompt","generatingCaption","setGeneratingCaption","rateLimitCooldown","setRateLimitCooldown","strategyData","setStrategyData","promptTemplate","brandName","hookIdea","features","phone","website","callToAction","imagePrompt","customStrategyTemplate","showStrategyModal","setShowStrategyModal","strategyTemplates","setStrategyTemplates","id","name","prompt","carouselImages","setCarouselImages","carouselFiles","setCarouselFiles","carouselCount","setCarouselCount","carouselCaption","setCarouselCaption","carouselGenerating","setCarouselGenerating","reelFile","setReelFile","reelUrl","setReelUrl","reelFilename","setReelFilename","reelCaption","setReelCaption","reelUploading","setReelUploading","reelAutoGenerateCaption","setReelAutoGenerateCaption","reelCaptionPrompt","setReelCaptionPrompt","generatingReelCaption","setGeneratingReelCaption","reelThumbnailFile","setReelThumbnailFile","reelThumbnailUrl","setReelThumbnailUrl","reelThumbnailFilename","setReelThumbnailFilename","userMedia","setUserMedia","loadingMedia","setLoadingMedia","showDriveModal","setShowDriveModal","driveFiles","setDriveFiles","loadingDriveFiles","setLoadingDriveFiles","driveAuthenticated","setDriveAuthenticated","driveAuthLoading","setDriveAuthLoading","autoReplyEnabled","setAutoReplyEnabled","autoReplyTemplate","setAutoReplyTemplate","autoReplyPosts","setAutoReplyPosts","selectedAutoReplyPosts","setSelectedAutoReplyPosts","autoReplyLoading","setAutoReplyLoading","loadingAutoReplyPosts","setLoadingAutoReplyPosts","isSelectingPosts","setIsSelectingPosts","dmAutoReplyEnabled","setDmAutoReplyEnabled","dmAutoReplyTemplate","setDmAutoReplyTemplate","dmAutoReplyLoading","setDmAutoReplyLoading","showFilePicker","setShowFilePicker","filePickerType","setFilePickerType","filePickerFormType","setFilePickerFormType","isLoadingGoogleDrive","setIsLoadingGoogleDrive","googleDriveAvailable","setGoogleDriveAvailable","showBulkComposer","setShowBulkComposer","INSTAGRAM_APP_ID","process","env","REACT_APP_INSTAGRAM_APP_ID","isMobile","window","innerWidth","globalAutoReplyEnabled","setGlobalAutoReplyEnabled","globalAutoReplyLoading","setGlobalAutoReplyLoading","globalAutoReplyStatus","setGlobalAutoReplyStatus","globalAutoReplyProgress","setGlobalAutoReplyProgress","apiError","setApiError","retrying","setRetrying","toast","setToast","show","type","showToast","setTimeout","handleGlobalAutoReplyToggle","enableRes","enableGlobalInstagramAutoReply","platform_user_id","success","error","disableRes","disableGlobalInstagramAutoReply","err","JSON","stringify","toString","fetchGlobalAutoReplyStatus","statusRes","getGlobalInstagramAutoReplyStatus","enabled","intervalId","pollProgress","res","getGlobalInstagramAutoReplyProgress","progress","setInterval","clearInterval","checkLoginStatus","FB","getLoginStatus","response","status","authResponse","accessToken","handleConnectInstagram","initializeFacebookSDK","init","appId","cookie","xfbml","version","fbAsyncInit","d","s","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","REACT_APP_FACEBOOK_APP_ID","then","checkGoogleDriveAvailability","token","localStorage","getItem","setToken","console","log","getInstagramAccounts","accounts","catch","includes","connectInstagram","allAccounts","getSocialAccounts","instagramAccountsFromBackend","filter","acc","platform","mappedAccounts","map","account","username","display_name","page_name","followers_count","follower_count","media_count","profile_picture_url","length","loadUserMedia","handleFacebookLogin","login","scope","instagramUserId","_media$data","media","getInstagramMedia","data","handleImageChange","e","file","target","files","uploadImageToCloudinary","url","Error","handleGenerateAIImage","trim","generateInstagramImage","image_url","dimensions","width","height","enhanced_prompt","errorMessage","cooldownInterval","prev","handleAutoGenerateCaption","generateInstagramCaption","content","handleGenerateImageAndCaption","imageRes","captionRes","warn","handleRetryImageGeneration","handleCarouselFilesChange","Array","from","urls","push","handleCarouselAutoGenerateCaption","result","handleReelFileChange","_res$data","uploadVideoToCloudinary","_res$data2","_res$data3","videoUrl","filename","handleReelAutoGenerateCaption","handleReelThumbnailChange","_res$data4","uploadThumbnailToCloudinary","_res$data5","_res$data6","imageUrl","checkGoogleDriveAuth","getGoogleDriveStatus","authenticated","authenticateGoogleDrive","getGoogleDriveAuthorizeUrl","consent_url","popup","open","handleMessage","event","loadDriveFiles","removeEventListener","close","addEventListener","already_authenticated","getGoogleDriveFiles","handleDriveFileSelect","fileId","fileName","downloadGoogleDriveFile","fileContent","byteCharacters","atob","byteNumbers","i","charCodeAt","byteArray","Uint8Array","blob","Blob","mimeType","File","uploadResponse","openDriveModal","isAuth","openFilePicker","formType","closeFilePicker","handleLocalFileSelect","handleGoogleDriveSelect","openDriveAuthPopup","finalStatus","loadGoogleDriveAPI","google","picker","authResult","getGoogleDriveAuth","PickerBuilder","addView","DocsView","setIncludeFolders","setSelectFolderEnabled","setMimeTypes","setOAuthToken","access_token","setDeveloperKey","REACT_APP_GOOGLE_DEVELOPER_KEY","setCallback","handleGoogleDriveCallback","enableFeature","Feature","NAV_HIDDEN","MULTISELECT_ENABLED","setTitle","setSelectableMimeTypes","build","setVisible","Promise","resolve","reject","script","onload","gapi","load","onerror","head","appendChild","authUrl","messageHandler","action","Action","PICKED","docs","fileObjects","fileObj","handlePublish","options","instagram_user_id","post_type","media_type","finalImageUrl","postInstagramCarousel","startsWith","video_url","video_filename","is_reel","thumbnail_url","thumbnail_filename","media_file","media_filename","hasThumbnailUrl","hasThumbnailFilename","cleanOptions","Object","fromEntries","entries","key","value","undefined","originalPostType","originalOptions","cleanOptionsHasThumbnail","createUnifiedInstagramPost","strategyName","timestamp","Date","toISOString","updatedAccount","find","errorMsg","details","handleLogout","loadAutoReplySettings","rules","getAutomationRules","existingRule","rule","social_account_id","rule_type","_existingRule$actions","is_active","actions","template","loadPostsForAutoReply","_error$response","_error$response$data","detail","loadDmAutoReplySettings","statusResponse","getInstagramDmAutoReplyStatus","handleDmAutoReplyToggle","toggleInstagramDmAutoReply","getPosts","isArray","accountPosts","post","_post$social_account","_post$social_account2","_post$social_account3","_post$social_account4","_post$social_account5","_post$social_account6","matchesAccountId","social_account","matchesPlatformUserId","matchesUsername","isMatch","postId","postAccountId","postPlatformUserId","postUsername","selectedAccountId","selectedPlatformUserId","selectedUsername","_post$content","_post$social_account7","_post$social_account8","_post$social_account9","substring","syncResponse","syncInstagramPosts","refreshedResponse","refreshedAccountPosts","_post$social_account0","_post$social_account1","_post$social_account10","syncError","handlePostSelection","handlePostTouch","preventDefault","selectAllPosts","allPostIds","deselectAllPosts","handleSelectPosts","handleDoneSelecting","handleAutoReplyToggle","postCount","confirmMessage","confirm","toggleInstagramAutoReply","_response$data","_response$data2","_response$data3","successMessage","selected_posts_count","selectedPostsCount","validateAutoReplyState","socialAccounts","instagramAccount","scheduledGridRows","setScheduledGridRows","state","fetchScheduledPosts","posts","getScheduledPosts","className","children","_jsxFileName","lineNumber","columnNumber","onClick","style","display","alignItems","justifyContent","background","borderRadius","boxShadow","padding","marginBottom","border","flexWrap","gap","overflow","alt","objectFit","fontWeight","fontSize","color","marginTop","marginRight","disabled","cursor","transition","verticalAlign","marginLeft","borderTop","animation","position","top","right","zIndex","backgroundColor","role","onChange","placeholder","rows","Math","floor","padStart","checked","min","max","parseInt","generateInstagramCarousel","image_urls","slice","index","finalCaption","accept","controls","maxHeight","maxWidth","title","media_url","toLocaleDateString","onClose","stopPropagation","thumbnailLink","size","round","viewBox","fill","stroke","strokeWidth","x1","y1","x2","y2","click","onTouchStart","points","cx","cy","r","multiple","margin","current_post","total_posts","current_comment","total_comments","reload","_c","$RefreshReg$"],"sources":["C:/Users/THORSIGNIA/Projects/automation-dash/frontend/src/components/InstagramPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport apiClient from '../services/apiClient';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useNotifications } from '../contexts/NotificationContext';\r\nimport IgBulkComposer from './igBulkComposer';\r\nimport './InstagramPage.css';\r\nimport ScheduledPostHistory from './ScheduledPostHistory';\r\nimport { loadFacebookSDK } from './FacebookUtils';\r\n\r\nconst ACCEPTED_IMAGE_TYPES = ['image/png', 'image/jpeg', 'image/jpg'];\r\nconst ACCEPTED_VIDEO_TYPES = ['video/mp4', 'video/quicktime'];\r\n\r\nconst InstagramPage = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { isAuthenticated, loading: authLoading, user } = useAuth();\r\n  const { addNotification } = useNotifications();\r\n\r\n  // UI State\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [instagramAccounts, setInstagramAccounts] = useState([]);\r\n  const [selectedAccount, setSelectedAccount] = useState('');\r\n  const [activeTab, setActiveTab] = useState('connect');\r\n  const [sdkLoaded, setSdkLoaded] = useState(false);\r\n  const [fbAccessToken, setFbAccessToken] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Post State\r\n  const [postType, setPostType] = useState('photo'); // photo | carousel | reel\r\n  const [caption, setCaption] = useState('');\r\n  const [aiPrompt, setAiPrompt] = useState('');\r\n  const [aiGenerating, setAiGenerating] = useState(false);\r\n  const [aiImageUrl, setAiImageUrl] = useState('');\r\n  const [imageSource, setImageSource] = useState('ai'); // ai | upload | drive\r\n  const [uploadedImageUrl, setUploadedImageUrl] = useState('');\r\n  const [uploadingImage, setUploadingImage] = useState(false);\r\n  const [selectedImageFile, setSelectedImageFile] = useState(null);\r\n  const [autoGenerateCaption, setAutoGenerateCaption] = useState(false);\r\n  const [captionPrompt, setCaptionPrompt] = useState('');\r\n  const [generatingCaption, setGeneratingCaption] = useState(false);\r\n  const [rateLimitCooldown, setRateLimitCooldown] = useState(0);\r\n\r\n  // Strategy Template State\r\n  const [strategyData, setStrategyData] = useState({\r\n    promptTemplate: '',\r\n    brandName: '',\r\n    hookIdea: '',\r\n    features: '',\r\n    location: '',\r\n    phone: '',\r\n    website: '',\r\n    callToAction: '',\r\n    imagePrompt: '',\r\n    customStrategyTemplate: ''\r\n  });\r\n\r\n  const [showStrategyModal, setShowStrategyModal] = useState(false);\r\n  const [strategyTemplates, setStrategyTemplates] = useState([\r\n    { id: 'default', name: 'Default Template', prompt: 'Generate a catchy Instagram caption for this post.' },\r\n    { id: 'product', name: 'Product Showcase', prompt: 'Create an engaging caption highlighting the key features and benefits of this product.' },\r\n    { id: 'event', name: 'Event Promotion', prompt: 'Write an exciting caption to promote this event, including date, time, and location.' },\r\n    { id: 'custom', name: 'Custom Template', prompt: '' }\r\n  ]);\r\n\r\n  // Carousel State\r\n  const [carouselImages, setCarouselImages] = useState([]); // URLs\r\n  const [carouselFiles, setCarouselFiles] = useState([]); // File objects\r\n  const [carouselCount, setCarouselCount] = useState(3);\r\n  const [carouselCaption, setCarouselCaption] = useState('');\r\n  const [carouselGenerating, setCarouselGenerating] = useState(false);\r\n\r\n  // Reel State\r\n  const [reelFile, setReelFile] = useState(null);\r\n  const [reelUrl, setReelUrl] = useState('');\r\n  const [reelFilename, setReelFilename] = useState('');\r\n  const [reelCaption, setReelCaption] = useState('');\r\n  const [reelUploading, setReelUploading] = useState(false);\r\n  const [reelAutoGenerateCaption, setReelAutoGenerateCaption] = useState(false);\r\n  const [reelCaptionPrompt, setReelCaptionPrompt] = useState('');\r\n  const [generatingReelCaption, setGeneratingReelCaption] = useState(false);\r\n  // Thumbnail State for Reel\r\n  const [reelThumbnailFile, setReelThumbnailFile] = useState(null);\r\n  const [reelThumbnailUrl, setReelThumbnailUrl] = useState('');\r\n  const [reelThumbnailFilename, setReelThumbnailFilename] = useState('');\r\n\r\n  // Media Gallery\r\n  const [userMedia, setUserMedia] = useState([]);\r\n  const [loadingMedia, setLoadingMedia] = useState(false);\r\n\r\n  // Google Drive Integration\r\n  const [showDriveModal, setShowDriveModal] = useState(false);\r\n  const [driveFiles, setDriveFiles] = useState([]);\r\n  const [loadingDriveFiles, setLoadingDriveFiles] = useState(false);\r\n  const [driveAuthenticated, setDriveAuthenticated] = useState(false);\r\n  const [driveAuthLoading, setDriveAuthLoading] = useState(false);\r\n\r\n  // Auto-Reply State\r\n  const [autoReplyEnabled, setAutoReplyEnabled] = useState(false);\r\n  const [autoReplyTemplate, setAutoReplyTemplate] = useState('Thank you for your comment! We appreciate your engagement. 😊');\r\n  const [autoReplyPosts, setAutoReplyPosts] = useState([]);\r\n  const [selectedAutoReplyPosts, setSelectedAutoReplyPosts] = useState([]);\r\n  const [autoReplyLoading, setAutoReplyLoading] = useState(false);\r\n  const [loadingAutoReplyPosts, setLoadingAutoReplyPosts] = useState(false);\r\n  const [isSelectingPosts, setIsSelectingPosts] = useState(false);\r\n\r\n  // DM Auto-Reply State\r\n  const [dmAutoReplyEnabled, setDmAutoReplyEnabled] = useState(false);\r\n  const [dmAutoReplyTemplate, setDmAutoReplyTemplate] = useState('Thanks for your message! I\\'ll get back to you soon. 😊');\r\n  const [dmAutoReplyLoading, setDmAutoReplyLoading] = useState(false);\r\n\r\n  // File Picker Modal State\r\n  const [showFilePicker, setShowFilePicker] = useState(false);\r\n  const [filePickerType, setFilePickerType] = useState(''); // 'photo' or 'video'\r\n  const [filePickerFormType, setFilePickerFormType] = useState(''); // 'manual' or 'carousel'\r\n  const [isLoadingGoogleDrive, setIsLoadingGoogleDrive] = useState(false);\r\n  const [googleDriveAvailable, setGoogleDriveAvailable] = useState(false);\r\n\r\n  // Bulk Composer State\r\n  const [showBulkComposer, setShowBulkComposer] = useState(false);\r\n\r\n  // Facebook SDK\r\n  const INSTAGRAM_APP_ID = process.env.REACT_APP_INSTAGRAM_APP_ID || '24054495060908418';\r\n\r\n  // Mobile detection utility\r\n  const isMobile = () => window.innerWidth <= 768;\r\n\r\n  // --- New: Global Auto-Reply State ---\r\n  const [globalAutoReplyEnabled, setGlobalAutoReplyEnabled] = useState(false);\r\n  const [globalAutoReplyLoading, setGlobalAutoReplyLoading] = useState(false);\r\n  const [globalAutoReplyStatus, setGlobalAutoReplyStatus] = useState(''); // For toast/feedback\r\n\r\n  // --- New: Global Auto-Reply Progress State ---\r\n  const [globalAutoReplyProgress, setGlobalAutoReplyProgress] = useState(null);\r\n\r\n  // --- New: Global Auto-Reply Error and Retry State ---\r\n  const [apiError, setApiError] = useState(null);\r\n  const [retrying, setRetrying] = useState(false);\r\n\r\n  // --- New: Toast Notification ---\r\n  const [toast, setToast] = useState({ show: false, message: '', type: 'info' });\r\n  const showToast = (message, type = 'info') => {\r\n    setToast({ show: true, message, type });\r\n    setTimeout(() => setToast({ show: false, message: '', type: 'info' }), 3500);\r\n  };\r\n\r\n  // --- New: Global Auto-Reply API Logic ---\r\n  const handleGlobalAutoReplyToggle = async () => {\r\n    if (!selectedAccount) {\r\n      showToast('Please select an Instagram account first.', 'error');\r\n      return;\r\n    }\r\n    setGlobalAutoReplyLoading(true);\r\n    setApiError(null);\r\n    try {\r\n      if (!globalAutoReplyEnabled) {\r\n        const enableRes = await apiClient.enableGlobalInstagramAutoReply(selectedAccount.platform_user_id);\r\n        if (enableRes.success) {\r\n                  setGlobalAutoReplyEnabled(true);\r\n        // eslint-disable-next-line no-undef\r\n        setGlobalAutoReplyStatus('enabled');\r\n        showToast('Auto-reply enabled for all posts and comments!', 'success');\r\n        } else {\r\n          setApiError(enableRes.error || 'Failed to enable auto-reply.');\r\n          showToast('Failed to enable auto-reply: ' + (enableRes.error || 'Unknown error'), 'error');\r\n        }\r\n      } else {\r\n        const disableRes = await apiClient.disableGlobalInstagramAutoReply(selectedAccount.platform_user_id);\r\n        if (disableRes.success) {\r\n                  setGlobalAutoReplyEnabled(false);\r\n        // eslint-disable-next-line no-undef\r\n        setGlobalAutoReplyStatus('disabled');\r\n        showToast('Auto-reply disabled.', 'info');\r\n        } else {\r\n          setApiError(disableRes.error || 'Failed to disable auto-reply.');\r\n          showToast('Failed to disable auto-reply: ' + (disableRes.error || 'Unknown error'), 'error');\r\n        }\r\n      }\r\n    } catch (err) {\r\n      setApiError(err.message || JSON.stringify(err));\r\n      showToast('Error: ' + (err.message || err.toString()), 'error');\r\n    } finally {\r\n      setGlobalAutoReplyLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- New: Fetch initial global auto-reply status on account select ---\r\n  useEffect(() => {\r\n    const fetchGlobalAutoReplyStatus = async () => {\r\n      if (!selectedAccount) return;\r\n      try {\r\n        const statusRes = await apiClient.getGlobalInstagramAutoReplyStatus(selectedAccount.platform_user_id);\r\n        setGlobalAutoReplyEnabled(!!statusRes.enabled);\r\n        // eslint-disable-next-line no-undef\r\n        setGlobalAutoReplyStatus(statusRes.enabled ? 'enabled' : 'disabled');\r\n      } catch (err) {\r\n        setGlobalAutoReplyEnabled(false);\r\n        // eslint-disable-next-line no-undef\r\n        setGlobalAutoReplyStatus('disabled');\r\n      }\r\n    };\r\n    fetchGlobalAutoReplyStatus();\r\n  }, [selectedAccount]);\r\n\r\n  // --- New: Poll for global auto-reply progress when enabled ---\r\n  useEffect(() => {\r\n    let intervalId;\r\n    const pollProgress = async () => {\r\n      if (!selectedAccount || !globalAutoReplyEnabled) return;\r\n      try {\r\n        const res = await apiClient.getGlobalInstagramAutoReplyProgress(selectedAccount.platform_user_id);\r\n        if (res.success) {\r\n          setGlobalAutoReplyProgress(res.progress);\r\n          setApiError(null);\r\n        }\r\n      } catch (err) {\r\n        setApiError(err.message || JSON.stringify(err));\r\n        // Optionally, showToast('Progress error: ' + (err.message || err.toString()), 'error');\r\n      }\r\n    };\r\n    if (globalAutoReplyEnabled && selectedAccount) {\r\n      pollProgress();\r\n      intervalId = setInterval(pollProgress, 3000);\r\n    } else {\r\n      setGlobalAutoReplyProgress(null);\r\n    }\r\n    return () => intervalId && clearInterval(intervalId);\r\n  }, [globalAutoReplyEnabled, selectedAccount]);\r\n\r\n  // --- Facebook SDK Helpers ---\r\n    const checkLoginStatus = () => {\r\n      if (!window.FB || !isAuthenticated) return;\r\n      window.FB.getLoginStatus((response) => {\r\n        if (response.status === 'connected') {\r\n          setFbAccessToken(response.authResponse.accessToken);\r\n          setMessage('Instagram: Using existing Facebook login session');\r\n          handleConnectInstagram(response.authResponse.accessToken);\r\n        } else {\r\n          setMessage('Instagram: Please connect your Facebook account to continue');\r\n        }\r\n      });\r\n    };\r\n    const initializeFacebookSDK = () => {\r\n      if (window.FB) {\r\n      window.FB.init({ appId: INSTAGRAM_APP_ID, cookie: true, xfbml: true, version: 'v18.0' });\r\n        setSdkLoaded(true);\r\n        checkLoginStatus();\r\n        return;\r\n      }\r\n      window.fbAsyncInit = function() {\r\n      window.FB.init({ appId: INSTAGRAM_APP_ID, cookie: true, xfbml: true, version: 'v18.0' });\r\n        setSdkLoaded(true);\r\n        checkLoginStatus();\r\n      };\r\n      (function(d, s, id) {\r\n        var js, fjs = d.getElementsByTagName(s)[0];\r\n        if (d.getElementById(id)) return;\r\n        js = d.createElement(s); js.id = id;\r\n        js.src = \"https://connect.facebook.net/en_US/sdk.js\";\r\n        fjs.parentNode.insertBefore(js, fjs);\r\n      }(document, 'script', 'facebook-jssdk'));\r\n    };\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated && !authLoading) {\r\n      loadFacebookSDK(process.env.REACT_APP_FACEBOOK_APP_ID || '697225659875731').then(() => {\r\n        checkLoginStatus();\r\n        checkGoogleDriveAvailability();\r\n      });\r\n    }\r\n  }, [isAuthenticated, authLoading]);\r\n\r\n  useEffect(() => {\r\n    checkLoginStatus();\r\n    initializeFacebookSDK();\r\n    // eslint-disable-next-line\r\n  }, [INSTAGRAM_APP_ID, isAuthenticated]);\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      setInstagramAccounts([]); // Clear previous state\r\n      setSelectedAccount('');\r\n      setIsConnected(false);\r\n      setActiveTab('connect');\r\n      setMessage('');\r\n      \r\n      // Ensure token is set before making request\r\n      const token = localStorage.getItem('authToken');\r\n      if (token) {\r\n        apiClient.setToken(token);\r\n        console.log('🔍 DEBUG: Token set for Instagram accounts request');\r\n      } else {\r\n        console.error('🔍 DEBUG: No auth token found in localStorage');\r\n        setMessage('Authentication token not found. Please log in again.');\r\n        return;\r\n      }\r\n      \r\n      // Fetch new user's Instagram accounts\r\n      apiClient.getInstagramAccounts()\r\n        .then(accounts => {\r\n          console.log('🔍 DEBUG: Successfully fetched Instagram accounts:', accounts);\r\n          setInstagramAccounts(accounts);\r\n        })\r\n        .catch(error => {\r\n          console.error('🔍 DEBUG: Error fetching Instagram accounts:', error);\r\n          if (error.message.includes('Could not validate credentials')) {\r\n            setMessage('Your session has expired. Please log in again.');\r\n          } else if (error.message.includes('Failed to fetch')) {\r\n            setMessage('Unable to connect to server. Please check if the backend is running and try again.');\r\n          } else {\r\n            setMessage(`Error loading Instagram accounts: ${error.message}`);\r\n          }\r\n        });\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  // --- Instagram Connect ---\r\n  const handleConnectInstagram = async (accessToken = fbAccessToken) => {\r\n    if (!isAuthenticated) {\r\n      setMessage('Please log in to your account first before connecting Instagram.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    if (!accessToken) {\r\n      setMessage('No access token available. Please log in with Facebook first.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      setMessage('Fetching Instagram Business accounts...');\r\n      const response = await apiClient.connectInstagram(accessToken);\r\n\r\n      // Fetch the full list of social accounts from the backend\r\n      const allAccounts = await apiClient.getSocialAccounts();\r\n      // Filter for Instagram accounts\r\n      const instagramAccountsFromBackend = allAccounts.filter(acc => acc.platform === 'instagram');\r\n\r\n      // Map and merge info for display\r\n      const mappedAccounts = instagramAccountsFromBackend.map(account => ({\r\n        id: account.id, // Internal DB ID\r\n        platform_user_id: account.platform_user_id, // Instagram user ID\r\n        username: account.username,\r\n        name: account.display_name || account.page_name,\r\n        followers_count: account.follower_count || 0,\r\n        media_count: account.media_count || 0,\r\n        profile_picture_url: account.profile_picture_url\r\n      }));\r\n\r\n      setInstagramAccounts(mappedAccounts);\r\n      setIsConnected(true);\r\n      setMessage(`Found ${mappedAccounts.length} Instagram Business account(s)!`);\r\n      if (mappedAccounts.length === 1) {\r\n        setSelectedAccount(mappedAccounts[0]);\r\n        loadUserMedia(mappedAccounts[0].platform_user_id);\r\n      }\r\n    } catch (error) {\r\n      setMessage(error.message || 'Unknown error occurred');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFacebookLogin = () => {\r\n    if (!window.FB) {\r\n      setMessage('Facebook SDK not loaded');\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    setMessage('Initiating Instagram OAuth via Facebook...');\r\n    window.FB.login((response) => {\r\n      if (response.status === 'connected') {\r\n        const accessToken = response.authResponse.accessToken;\r\n        setFbAccessToken(accessToken);\r\n        setMessage('Facebook login successful! Connecting Instagram accounts...');\r\n        handleConnectInstagram(accessToken);\r\n      } else {\r\n        setMessage('Facebook login failed or was cancelled');\r\n        setLoading(false);\r\n      }\r\n    }, {\r\n      scope: 'pages_show_list,instagram_basic,instagram_content_publish,pages_read_engagement, business_management'\r\n    });\r\n  };\r\n\r\n  // --- Media Loading ---\r\n  const loadUserMedia = async (instagramUserId) => {\r\n    setLoadingMedia(true);\r\n    try {\r\n      const media = await apiClient.getInstagramMedia(instagramUserId);\r\n      setUserMedia(media?.data?.media || []);\r\n    } catch (error) {\r\n      setMessage(`Error loading media: ${error.message}`);\r\n    } finally {\r\n      setLoadingMedia(false);\r\n    }\r\n  };\r\n\r\n  // --- Image Upload ---\r\n  const handleImageChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    if (!ACCEPTED_IMAGE_TYPES.includes(file.type)) {\r\n      setMessage('Please select a PNG or JPG image');\r\n      return;\r\n    }\r\n\r\n    // Debug authentication status\r\n    console.log('🔍 DEBUG: Authentication check before upload');\r\n    console.log('🔍 DEBUG: isAuthenticated:', isAuthenticated);\r\n    console.log('🔍 DEBUG: user:', user);\r\n    console.log('🔍 DEBUG: apiClient token exists:', !!apiClient.token);\r\n    \r\n    setUploadingImage(true);\r\n    setMessage('Uploading image...');\r\n    try {\r\n      const res = await apiClient.uploadImageToCloudinary(file);\r\n      if (res && res.success && res.data && res.data.url) {\r\n        setUploadedImageUrl(res.data.url);\r\n        setAiImageUrl(res.data.url);\r\n        setSelectedImageFile(file);\r\n        setMessage('Image uploaded successfully!');\r\n      } else {\r\n        throw new Error(res?.error || 'Upload failed');\r\n      }\r\n    } catch (err) {\r\n      console.error('🔍 DEBUG: Upload error details:', err);\r\n      setMessage(`Image upload failed: ${err.message}`);\r\n    } finally {\r\n      setUploadingImage(false);\r\n    }\r\n  };\r\n\r\n  // --- AI Image Generation ---\r\n  const handleGenerateAIImage = async () => {\r\n    if (!aiPrompt.trim()) {\r\n      setMessage('Please enter a prompt for image generation.');\r\n      return;\r\n    }\r\n    \r\n    setAiGenerating(true);\r\n    setMessage('Generating Instagram-optimized image with AI...');\r\n    \r\n    try {\r\n      console.log('🔍 DEBUG: Generating Instagram image with prompt:', aiPrompt.trim());\r\n      \r\n      const res = await apiClient.generateInstagramImage(aiPrompt.trim());\r\n      console.log('🔍 DEBUG: Image generation response:', res);\r\n      \r\n      if (res && res.success && res.data && res.data.image_url) {\r\n        setAiImageUrl(res.data.image_url);\r\n        const dimensions = res.data.width && res.data.height ? `(${res.data.width}x${res.data.height})` : '';\r\n        setMessage(`AI image generated successfully! ${dimensions}`);\r\n        console.log('🔍 DEBUG: Generated image URL:', res.data.image_url);\r\n        console.log('🔍 DEBUG: Image dimensions:', res.data.width, 'x', res.data.height);\r\n        console.log('🔍 DEBUG: Enhanced prompt:', res.data.enhanced_prompt);\r\n      } else if (res && res.data && res.data.image_url) {\r\n        // Fallback for different response format\r\n        setAiImageUrl(res.data.image_url);\r\n        setMessage('AI image generated successfully!');\r\n        console.log('🔍 DEBUG: Generated image URL (fallback):', res.data.image_url);\r\n      } else {\r\n        console.error('🔍 DEBUG: Invalid response format:', res);\r\n        setMessage('Failed to generate image. Please try again.');\r\n      }\r\n    } catch (err) {\r\n      console.error('🔍 DEBUG: Image generation error:', err);\r\n      \r\n      // Handle specific error types\r\n      let errorMessage = err.message || err.toString();\r\n      \r\n      if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\r\n        errorMessage = 'Invalid or expired Stability AI API key. Please check your API key in the backend configuration.';\r\n      } else if (errorMessage.includes('429') || errorMessage.includes('Too Many Requests')) {\r\n        errorMessage = 'Rate limit exceeded. Please wait a few minutes before trying again, or upgrade your Stability AI plan.';\r\n        // Set a 5-minute cooldown\r\n        setRateLimitCooldown(300);\r\n        const cooldownInterval = setInterval(() => {\r\n          setRateLimitCooldown(prev => {\r\n            if (prev <= 1) {\r\n              clearInterval(cooldownInterval);\r\n              return 0;\r\n            }\r\n            return prev - 1;\r\n          });\r\n        }, 1000);\r\n      } else if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\r\n        errorMessage = 'Server error occurred. Please try again in a moment.';\r\n      } else if (errorMessage.includes('timeout')) {\r\n        errorMessage = 'Request timed out. Please try again.';\r\n      }\r\n      \r\n      setMessage('Error generating image: ' + errorMessage);\r\n    } finally {\r\n      setAiGenerating(false);\r\n    }\r\n  };\r\n\r\n  // --- Auto Generate Caption ---\r\n  const handleAutoGenerateCaption = async () => {\r\n    if (!captionPrompt.trim()) {\r\n      setMessage('Please enter a prompt for caption generation.');\r\n      return;\r\n    }\r\n    \r\n    setGeneratingCaption(true);\r\n    setMessage('Generating caption with AI...');\r\n    \r\n    try {\r\n      console.log('🔍 DEBUG: Generating Instagram caption with prompt:', captionPrompt.trim());\r\n      \r\n      const res = await apiClient.generateInstagramCaption(captionPrompt.trim());\r\n      console.log('🔍 DEBUG: Caption generation response:', res);\r\n      \r\n      if (res && res.success && res.data && res.data.content) {\r\n        setCaption(res.data.content);\r\n        setMessage('Caption generated successfully!');\r\n        console.log('🔍 DEBUG: Generated caption:', res.data.content);\r\n      } else if (res && res.content) {\r\n        // Fallback for different response format\r\n        setCaption(res.content);\r\n        setMessage('Caption generated successfully!');\r\n        console.log('🔍 DEBUG: Generated caption (fallback):', res.content);\r\n      } else {\r\n        console.error('🔍 DEBUG: Invalid response format:', res);\r\n        setMessage('Failed to generate caption. Please try again.');\r\n      }\r\n    } catch (err) {\r\n      console.error('🔍 DEBUG: Caption generation error:', err);\r\n      setMessage('Error generating caption: ' + (err.message || err.toString()));\r\n    } finally {\r\n      setGeneratingCaption(false);\r\n    }\r\n  };\r\n\r\n  // --- Generate Image and Caption Together ---\r\n  const handleGenerateImageAndCaption = async () => {\r\n    if (!aiPrompt.trim()) {\r\n      setMessage('Please enter a prompt for generation.');\r\n      return;\r\n    }\r\n\r\n    setAiGenerating(true);\r\n    setGeneratingCaption(true);\r\n    setMessage('Generating Instagram-optimized image and caption with AI...');\r\n    \r\n    try {\r\n      console.log('🔍 DEBUG: Generating image and caption with prompt:', aiPrompt.trim());\r\n      \r\n      // Generate image first\r\n      const imageRes = await apiClient.generateInstagramImage(aiPrompt.trim());\r\n      console.log('🔍 DEBUG: Image generation response:', imageRes);\r\n      \r\n      if (!imageRes || !imageRes.success || !imageRes.data || !imageRes.data.image_url) {\r\n        throw new Error('Failed to generate image');\r\n      }\r\n      \r\n      setAiImageUrl(imageRes.data.image_url);\r\n      console.log('🔍 DEBUG: Generated image URL:', imageRes.data.image_url);\r\n      console.log('🔍 DEBUG: Image dimensions:', imageRes.data.width, 'x', imageRes.data.height);\r\n      \r\n      // Generate caption using the same prompt\r\n      const captionRes = await apiClient.generateInstagramCaption(aiPrompt.trim());\r\n      console.log('🔍 DEBUG: Caption generation response:', captionRes);\r\n      \r\n      if (captionRes && captionRes.success && captionRes.data && captionRes.data.content) {\r\n        setCaption(captionRes.data.content);\r\n        console.log('🔍 DEBUG: Generated caption:', captionRes.data.content);\r\n      } else if (captionRes && captionRes.content) {\r\n        // Fallback for different response format\r\n        setCaption(captionRes.content);\r\n        console.log('🔍 DEBUG: Generated caption (fallback):', captionRes.content);\r\n      } else {\r\n        console.warn('🔍 DEBUG: Caption generation failed, using fallback');\r\n        setCaption(`Check out this amazing image! ${aiPrompt.trim()}`);\r\n      }\r\n      \r\n      const dimensions = imageRes.data.width && imageRes.data.height ? `(${imageRes.data.width}x${imageRes.data.height})` : '';\r\n      setMessage(`Image and caption generated successfully! ${dimensions}`);\r\n      \r\n    } catch (err) {\r\n      console.error('🔍 DEBUG: Image and caption generation error:', err);\r\n      \r\n      // Handle specific error types\r\n      let errorMessage = err.message || err.toString();\r\n      \r\n      if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\r\n        errorMessage = 'Invalid or expired Stability AI API key. Please check your API key in the backend configuration.';\r\n      } else if (errorMessage.includes('429') || errorMessage.includes('Too Many Requests')) {\r\n        errorMessage = 'Rate limit exceeded. Please wait a few minutes before trying again, or upgrade your Stability AI plan.';\r\n        // Set a 5-minute cooldown\r\n        setRateLimitCooldown(300);\r\n        const cooldownInterval = setInterval(() => {\r\n          setRateLimitCooldown(prev => {\r\n            if (prev <= 1) {\r\n              clearInterval(cooldownInterval);\r\n              return 0;\r\n            }\r\n            return prev - 1;\r\n          });\r\n        }, 1000);\r\n      } else if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\r\n        errorMessage = 'Server error occurred. Please try again in a moment.';\r\n      } else if (errorMessage.includes('timeout')) {\r\n        errorMessage = 'Request timed out. Please try again.';\r\n      }\r\n      \r\n      setMessage('Error generating image and caption: ' + errorMessage);\r\n      \r\n      // Clear any partial results on error\r\n      setAiImageUrl('');\r\n      setCaption('');\r\n    } finally {\r\n      setAiGenerating(false);\r\n      setGeneratingCaption(false);\r\n    }\r\n  };\r\n\r\n  // --- Retry Image Generation ---\r\n  const handleRetryImageGeneration = async () => {\r\n    if (!aiPrompt.trim()) {\r\n      setMessage('Please enter a prompt for image generation.');\r\n        return;\r\n    }\r\n    \r\n    setAiGenerating(true);\r\n    setMessage('Retrying image generation...');\r\n    \r\n    try {\r\n      console.log('🔍 DEBUG: Retrying image generation with prompt:', aiPrompt.trim());\r\n      \r\n      const res = await apiClient.generateInstagramImage(aiPrompt.trim());\r\n      console.log('🔍 DEBUG: Retry image generation response:', res);\r\n      \r\n      if (res && res.success && res.data && res.data.image_url) {\r\n        setAiImageUrl(res.data.image_url);\r\n        setMessage('Image generated successfully on retry!');\r\n        console.log('🔍 DEBUG: Generated image URL (retry):', res.data.image_url);\r\n      } else if (res && res.data && res.data.image_url) {\r\n        // Fallback for different response format\r\n        setAiImageUrl(res.data.image_url);\r\n        setMessage('Image generated successfully on retry!');\r\n        console.log('🔍 DEBUG: Generated image URL (retry fallback):', res.data.image_url);\r\n      } else {\r\n        console.error('🔍 DEBUG: Invalid response format on retry:', res);\r\n        setMessage('Failed to generate image on retry. Please try again.');\r\n      }\r\n    } catch (err) {\r\n      console.error('🔍 DEBUG: Retry image generation error:', err);\r\n      \r\n      // Handle specific error types\r\n      let errorMessage = err.message || err.toString();\r\n      \r\n      if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\r\n        errorMessage = 'Invalid or expired Stability AI API key. Please check your API key in the backend configuration.';\r\n      } else if (errorMessage.includes('429') || errorMessage.includes('Too Many Requests')) {\r\n        errorMessage = 'Rate limit exceeded. Please wait a few minutes before trying again, or upgrade your Stability AI plan.';\r\n        // Set a 5-minute cooldown\r\n        setRateLimitCooldown(300);\r\n        const cooldownInterval = setInterval(() => {\r\n          setRateLimitCooldown(prev => {\r\n            if (prev <= 1) {\r\n              clearInterval(cooldownInterval);\r\n              return 0;\r\n            }\r\n            return prev - 1;\r\n          });\r\n        }, 1000);\r\n      } else if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\r\n        errorMessage = 'Server error occurred. Please try again in a moment.';\r\n      } else if (errorMessage.includes('timeout')) {\r\n        errorMessage = 'Request timed out. Please try again.';\r\n      }\r\n      \r\n      setMessage('Error retrying image generation: ' + errorMessage);\r\n    } finally {\r\n      setAiGenerating(false);\r\n    }\r\n  };\r\n\r\n  // --- Carousel Upload ---\r\n  const handleCarouselFilesChange = async (e) => {\r\n    const files = Array.from(e.target.files);\r\n    if (files.length < 3 || files.length > 7) {\r\n      setMessage('Please select 3 to 7 images.');\r\n      return;\r\n    }\r\n    setCarouselGenerating(true);\r\n    setMessage('Uploading carousel images...');\r\n    try {\r\n      const urls = [];\r\n      for (const file of files) {\r\n        if (!ACCEPTED_IMAGE_TYPES.includes(file.type)) {\r\n          setMessage('All images must be PNG or JPG.');\r\n          setCarouselGenerating(false);\r\n          return;\r\n        }\r\n        const res = await apiClient.uploadImageToCloudinary(file);\r\n        if (res && res.success && res.data && res.data.url) {\r\n          urls.push(res.data.url);\r\n      } else {\r\n          throw new Error(res?.error || 'Upload failed');\r\n        }\r\n      }\r\n      setCarouselImages(urls);\r\n      setMessage(`Uploaded ${urls.length} images for carousel.`);\r\n    } catch (err) {\r\n      setMessage('Error uploading carousel images: ' + err.message);\r\n    } finally {\r\n      setCarouselGenerating(false);\r\n    }\r\n  };\r\n\r\n  // --- Carousel Auto Generate Caption ---\r\n  const handleCarouselAutoGenerateCaption = async () => {\r\n    if (!captionPrompt.trim()) {\r\n      setMessage('Please provide a prompt for caption generation.');\r\n      return;\r\n    }\r\n    \r\n    setGeneratingCaption(true);\r\n    setMessage('Generating carousel caption...');\r\n    \r\n    try {\r\n      const result = await apiClient.generateInstagramCaption(captionPrompt.trim());\r\n      if (result.success && result.content) {\r\n        setCarouselCaption(result.content);\r\n        setMessage('Caption generated successfully!');\r\n      } else {\r\n        setMessage('Failed to generate caption: ' + (result.error || 'Unknown error'));\r\n      }\r\n    } catch (err) {\r\n      setMessage('Error generating caption: ' + err.message);\r\n    } finally {\r\n      setGeneratingCaption(false);\r\n    }\r\n  };\r\n\r\n  // --- Reel Upload ---\r\n  const handleReelFileChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    if (!ACCEPTED_VIDEO_TYPES.includes(file.type)) {\r\n      setMessage('Only .mp4 or .mov files are allowed.');\r\n      return;\r\n    }\r\n    setReelUploading(true);\r\n    setMessage('Uploading video...');\r\n    try {\r\n      const res = await apiClient.uploadVideoToCloudinary(file);\r\n      console.log('Video upload response:', res);\r\n      \r\n      // Check for different response structures\r\n      if (res && res.success && (res.url || res.data?.url)) {\r\n        const videoUrl = res.url || res.data?.url;\r\n        const filename = res.filename || res.data?.filename;\r\n        setReelUrl(videoUrl);\r\n        setReelFilename(filename || '');\r\n        // eslint-disable-next-line no-undef\r\n        setReelFile(file);\r\n        console.log('🔍 DEBUG: Video uploaded successfully:', {\r\n          videoUrl,\r\n          filename,\r\n          res\r\n        });\r\n        setMessage('Video uploaded successfully!');\r\n      } else if (res && res.data && res.data.url) {\r\n        // Alternative response structure\r\n        setReelUrl(res.data.url);\r\n        setReelFilename(res.data.filename || '');\r\n        // eslint-disable-next-line no-undef\r\n        setReelFile(file);\r\n        setMessage('Video uploaded successfully!');\r\n      } else {\r\n        throw new Error(res?.error || res?.message || 'Upload failed');\r\n      }\r\n    } catch (err) {\r\n      console.error('Video upload error:', err);\r\n      setMessage('Error: ' + (err.message || err.toString()));\r\n    } finally {\r\n      setReelUploading(false);\r\n    }\r\n  };\r\n\r\n  // --- Reel Auto Generate Caption ---\r\n  const handleReelAutoGenerateCaption = async () => {\r\n    if (!reelCaptionPrompt.trim()) {\r\n      setMessage('Please provide a prompt for caption generation.');\r\n      return;\r\n    }\r\n    \r\n    setGeneratingReelCaption(true);\r\n    setMessage('Generating reel caption...');\r\n    \r\n    try {\r\n      const result = await apiClient.generateInstagramCaption(reelCaptionPrompt.trim());\r\n      if (result.success && result.content) {\r\n        setReelCaption(result.content);\r\n        setMessage('Reel caption generated successfully!');\r\n      } else {\r\n        setMessage('Failed to generate caption: ' + (result.error || 'Unknown error'));\r\n      }\r\n    } catch (err) {\r\n      setMessage('Error generating caption: ' + err.message);\r\n    } finally {\r\n      setGeneratingReelCaption(false);\r\n    }\r\n  };\r\n\r\n  // --- Reel Thumbnail Upload ---\r\n  const handleReelThumbnailChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    if (!ACCEPTED_IMAGE_TYPES.includes(file.type)) {\r\n      setMessage('Only .jpg, .jpeg, .png files are allowed for thumbnail.');\r\n      return;\r\n    }\r\n    setMessage('Uploading thumbnail image...');\r\n    try {\r\n      const res = await apiClient.uploadThumbnailToCloudinary(file);\r\n      if (res && res.success && (res.url || res.data?.url)) {\r\n        const imageUrl = res.url || res.data?.url;\r\n        const filename = res.filename || res.data?.filename;\r\n        setReelThumbnailUrl(imageUrl);\r\n        setReelThumbnailFilename(filename || '');\r\n        // eslint-disable-next-line no-undef\r\n        setReelThumbnailFile(file);\r\n        console.log('🔍 DEBUG: Thumbnail uploaded successfully:', {\r\n          imageUrl,\r\n          filename,\r\n          res\r\n        });\r\n        setMessage('Thumbnail uploaded successfully!');\r\n      } else {\r\n        throw new Error(res?.error || res?.message || 'Thumbnail upload failed');\r\n      }\r\n    } catch (err) {\r\n      setMessage('Error: ' + (err.message || err.toString()));\r\n    }\r\n  };\r\n\r\n  // --- Google Drive Integration ---\r\n  const checkGoogleDriveAuth = async () => {\r\n    try {\r\n      const response = await apiClient.getGoogleDriveStatus();\r\n      setDriveAuthenticated(response.authenticated);\r\n      return response.authenticated;\r\n    } catch (error) {\r\n      console.error('Error checking Google Drive auth:', error);\r\n      setDriveAuthenticated(false);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const authenticateGoogleDrive = async () => {\r\n    setDriveAuthLoading(true);\r\n    try {\r\n      const response = await apiClient.getGoogleDriveAuthorizeUrl();\r\n      if (response.consent_url) {\r\n        // Open popup for OAuth\r\n        const popup = window.open(\r\n          response.consent_url,\r\n          'google-drive-auth',\r\n          'width=500,height=600,scrollbars=yes,resizable=yes'\r\n        );\r\n\r\n        // Listen for OAuth completion\r\n        const handleMessage = (event) => {\r\n          if (event.data.success) {\r\n            setDriveAuthenticated(true);\r\n            setMessage('Google Drive connected successfully!');\r\n            loadDriveFiles();\r\n          } else if (event.data.error) {\r\n            setMessage(`Google Drive authentication failed: ${event.data.error}`);\r\n          }\r\n          window.removeEventListener('message', handleMessage);\r\n          if (popup) popup.close();\r\n        };\r\n\r\n        window.addEventListener('message', handleMessage);\r\n      } else if (response.already_authenticated) {\r\n        setDriveAuthenticated(true);\r\n        setMessage('Google Drive already authenticated!');\r\n        loadDriveFiles();\r\n      }\r\n    } catch (error) {\r\n      setMessage(`Google Drive authentication error: ${error.message}`);\r\n    } finally {\r\n      setDriveAuthLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadDriveFiles = async () => {\r\n    if (!driveAuthenticated) return;\r\n    \r\n    setLoadingDriveFiles(true);\r\n    try {\r\n      const response = await apiClient.getGoogleDriveFiles('image/');\r\n      if (response.success && response.files) {\r\n        setDriveFiles(response.files);\r\n      } else {\r\n        setMessage('Failed to load Google Drive files');\r\n      }\r\n    } catch (error) {\r\n      setMessage(`Error loading Google Drive files: ${error.message}`);\r\n    } finally {\r\n      setLoadingDriveFiles(false);\r\n    }\r\n  };\r\n\r\n  const handleDriveFileSelect = async (fileId, fileName) => {\r\n    setUploadingImage(true);\r\n    setMessage('Downloading file from Google Drive...');\r\n    try {\r\n      const response = await apiClient.downloadGoogleDriveFile(fileId);\r\n      if (response.success && response.fileContent) {\r\n        // Convert base64 to blob and upload to Cloudinary\r\n        const byteCharacters = atob(response.fileContent);\r\n        const byteNumbers = new Array(byteCharacters.length);\r\n        for (let i = 0; i < byteCharacters.length; i++) {\r\n          byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n        }\r\n        const byteArray = new Uint8Array(byteNumbers);\r\n        const blob = new Blob([byteArray], { type: response.mimeType });\r\n        \r\n        // Create a File object from the blob\r\n        const file = new File([blob], fileName, { type: response.mimeType });\r\n        \r\n        // Upload to Cloudinary\r\n        const uploadResponse = await apiClient.uploadImageToCloudinary(file);\r\n        if (uploadResponse.success && uploadResponse.data && uploadResponse.data.url) {\r\n          setUploadedImageUrl(uploadResponse.data.url);\r\n          setAiImageUrl(uploadResponse.data.url);\r\n          setMessage('File uploaded from Google Drive successfully!');\r\n          setShowDriveModal(false);\r\n        } else {\r\n          throw new Error(uploadResponse.error || 'Upload failed');\r\n        }\r\n      } else {\r\n        throw new Error(response.error || 'Download failed');\r\n      }\r\n    } catch (error) {\r\n      setMessage(`Error processing Google Drive file: ${error.message}`);\r\n    } finally {\r\n      setUploadingImage(false);\r\n    }\r\n  };\r\n\r\n  const openDriveModal = async () => {\r\n    const isAuth = await checkGoogleDriveAuth();\r\n    if (!isAuth) {\r\n      await authenticateGoogleDrive();\r\n    } else {\r\n      await loadDriveFiles();\r\n    }\r\n    setShowDriveModal(true);\r\n  };\r\n\r\n  // File Picker Functions\r\n  const openFilePicker = (type, formType) => {\r\n    setFilePickerType(type);\r\n    setFilePickerFormType(formType);\r\n    setShowFilePicker(true);\r\n  };\r\n\r\n  const closeFilePicker = () => {\r\n    setShowFilePicker(false);\r\n    setFilePickerType('');\r\n    setFilePickerFormType('');\r\n    setIsLoadingGoogleDrive(false);\r\n  };\r\n\r\n  const handleLocalFileSelect = (event) => {\r\n    const files = Array.from(event.target.files);\r\n    if (files.length === 0) return;\r\n    \r\n    if (filePickerFormType === 'carousel') {\r\n      // Handle carousel upload\r\n      handleCarouselFilesChange({ target: { files } });\r\n    } else {\r\n      // Handle single file upload\r\n      const file = files[0];\r\n      if (filePickerType === 'photo') {\r\n        handleImageChange({ target: { files: [file] } });\r\n      } else if (filePickerType === 'video') {\r\n        handleReelFileChange({ target: { files: [file] } });\r\n      }\r\n    }\r\n    closeFilePicker();\r\n  };\r\n\r\n  const handleGoogleDriveSelect = async () => {\r\n    setIsLoadingGoogleDrive(true);\r\n    try {\r\n      // Check if already authenticated\r\n      const status = await apiClient.getGoogleDriveStatus();\r\n      if (!status.authenticated) {\r\n        // Get consent URL for popup\r\n        const authResponse = await apiClient.getGoogleDriveAuthorizeUrl();\r\n        if (authResponse.consent_url) {\r\n          // Open popup and wait for completion\r\n          await openDriveAuthPopup(authResponse.consent_url);\r\n        }\r\n      }\r\n\r\n      // After popup closes, re-check authentication status\r\n      const finalStatus = await apiClient.getGoogleDriveStatus();\r\n      if (!finalStatus.authenticated) {\r\n        throw new Error('Authentication was not completed successfully');\r\n      }\r\n\r\n      // Update state and proceed with Google Drive picker\r\n      setGoogleDriveAvailable(true);\r\n\r\n      // Initialize Google Drive API\r\n      await loadGoogleDriveAPI();\r\n      \r\n      // Check if google object is available\r\n      if (typeof window.google === 'undefined' || !window.google.picker) {\r\n        throw new Error('Google Picker API failed to load');\r\n      }\r\n      \r\n      // Get fresh token for picker\r\n      const authResult = await apiClient.getGoogleDriveAuth();\r\n      \r\n      // Open Google Drive picker\r\n      const picker = new window.google.picker.PickerBuilder()\r\n        .addView(new window.google.picker.DocsView()\r\n          .setIncludeFolders(true)\r\n          .setSelectFolderEnabled(false)\r\n          .setMimeTypes(filePickerType === 'photo' ? 'image/*' : 'video/*'))\r\n        .setOAuthToken(authResult.access_token)\r\n        .setDeveloperKey(process.env.REACT_APP_GOOGLE_DEVELOPER_KEY || '')\r\n        .setCallback(handleGoogleDriveCallback)\r\n        .enableFeature(window.google.picker.Feature.NAV_HIDDEN)\r\n        .enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED, filePickerFormType === 'carousel')\r\n        .setTitle(filePickerFormType === 'carousel' ? 'Select multiple files from Google Drive' : 'Select a file from Google Drive')\r\n        .setSelectableMimeTypes(filePickerType === 'photo' ? 'image/*' : 'video/*')\r\n        .build();\r\n      \r\n      picker.setVisible(true);\r\n      \r\n    } catch (error) {\r\n      console.error('Error with Google Drive selection:', error);\r\n      setMessage(`Google Drive error: ${error.message}`);\r\n    } finally {\r\n      setIsLoadingGoogleDrive(false);\r\n    }\r\n  };\r\n\r\n  const loadGoogleDriveAPI = () => {\r\n    return new Promise((resolve, reject) => {\r\n      if (window.google && window.google.picker) {\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      const script = document.createElement('script');\r\n      script.src = 'https://apis.google.com/js/api.js';\r\n      script.onload = () => {\r\n        if (window.gapi) {\r\n          window.gapi.load('picker', () => {\r\n            resolve();\r\n          });\r\n        } else {\r\n          reject(new Error('Google API failed to load'));\r\n        }\r\n      };\r\n      script.onerror = reject;\r\n      document.head.appendChild(script);\r\n    });\r\n  };\r\n\r\n  const openDriveAuthPopup = (authUrl) => {\r\n    return new Promise((resolve, reject) => {\r\n      const popup = window.open(\r\n        authUrl,\r\n        'google-drive-auth',\r\n        'width=500,height=600,scrollbars=yes,resizable=yes'\r\n      );\r\n\r\n      const messageHandler = (event) => {\r\n        if (event.data.success) {\r\n          setGoogleDriveAvailable(true);\r\n          setMessage('Google Drive connected successfully!');\r\n          resolve();\r\n        } else if (event.data.error) {\r\n          setMessage(`Google Drive authentication failed: ${event.data.error}`);\r\n          reject(new Error(event.data.error));\r\n        }\r\n        window.removeEventListener('message', messageHandler);\r\n        if (popup) popup.close();\r\n      };\r\n\r\n      window.addEventListener('message', messageHandler);\r\n\r\n      // Timeout after 5 minutes\r\n      setTimeout(() => {\r\n        window.removeEventListener('message', messageHandler);\r\n        if (popup) popup.close();\r\n        reject(new Error('Authentication timeout'));\r\n      }, 300000);\r\n    });\r\n  };\r\n\r\n  const handleGoogleDriveCallback = async (data) => {\r\n    if (data.action === window.google.picker.Action.PICKED) {\r\n      const files = data.docs;\r\n      try {\r\n        if (filePickerFormType === 'carousel') {\r\n          // Handle multiple files for carousel\r\n          const fileObjects = [];\r\n          for (const file of files) {\r\n            const fileContent = await downloadGoogleDriveFile(file.id);\r\n            const blob = new Blob([fileContent], { type: file.mimeType });\r\n            const fileObj = new File([blob], file.name, { type: file.mimeType });\r\n            fileObjects.push(fileObj);\r\n          }\r\n          handleCarouselFilesChange({ target: { files: fileObjects } });\r\n        } else {\r\n          // Handle single file\r\n          const file = files[0];\r\n          const fileContent = await downloadGoogleDriveFile(file.id);\r\n          const blob = new Blob([fileContent], { type: file.mimeType });\r\n          const fileObj = new File([blob], file.name, { type: file.mimeType });\r\n          \r\n          if (filePickerType === 'photo') {\r\n            handleImageChange({ target: { files: [fileObj] } });\r\n          } else if (filePickerType === 'video') {\r\n            handleReelFileChange({ target: { files: [fileObj] } });\r\n          }\r\n        }\r\n        \r\n        closeFilePicker();\r\n        setMessage('File(s) selected from Google Drive successfully!');\r\n      } catch (error) {\r\n        console.error('Error downloading file from Google Drive:', error);\r\n        setMessage('Failed to download file from Google Drive: ' + error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const downloadGoogleDriveFile = async (fileId) => {\r\n    try {\r\n      const response = await apiClient.downloadGoogleDriveFile(fileId);\r\n      if (response.success && response.fileContent) {\r\n        // Convert base64 to blob\r\n        const byteCharacters = atob(response.fileContent);\r\n        const byteNumbers = new Array(byteCharacters.length);\r\n        for (let i = 0; i < byteCharacters.length; i++) {\r\n          byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n        }\r\n        const byteArray = new Uint8Array(byteNumbers);\r\n        return byteArray;\r\n      } else {\r\n        throw new Error(response.error || 'Download failed');\r\n      }\r\n    } catch (error) {\r\n      throw new Error(`Failed to download file: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  // --- Post Submission ---\r\n  const handlePublish = async () => {\r\n    if (!selectedAccount) {\r\n      setMessage('Please select an Instagram account first');\r\n      return;\r\n    }\r\n\r\n    if (postType === 'photo' && (!aiImageUrl || !aiImageUrl.trim()) && (!uploadedImageUrl || !uploadedImageUrl.trim())) {\r\n      setMessage('Please select or generate an image');\r\n      return;\r\n    }\r\n\r\n    if (postType === 'carousel' && carouselImages.length === 0) {\r\n      setMessage('Please generate or upload carousel images');\r\n      return;\r\n    }\r\n\r\n    if (postType === 'reel' && !reelUrl) {\r\n      setMessage('Please upload a video for the reel');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setMessage('Creating Instagram post...');\r\n\r\n    try {\r\n      // Use the unified Instagram post endpoint for all post types\r\n      const options = {\r\n        instagram_user_id: selectedAccount.platform_user_id,\r\n        post_type: postType === 'photo' ? 'feed' : (postType === 'reel' ? 'reel' : postType),\r\n        media_type: postType === 'reel' ? 'video' : 'image' // <-- robust: send 'video' for reels\r\n      };\r\n\r\n      // Handle different post types\r\n      if (postType === 'photo') {\r\n        options.caption = caption;\r\n        const imageUrl = imageSource === 'ai' ? aiImageUrl : uploadedImageUrl;\r\n        if (imageUrl && imageUrl.trim()) {\r\n          options.image_url = imageUrl;\r\n        } else {\r\n          // If no image is available, we can't create a photo post\r\n          setMessage('Please select or generate an image before creating a photo post');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        console.log('🔍 DEBUG: Photo post options:', {\r\n          postType,\r\n          imageSource,\r\n          aiImageUrl,\r\n          uploadedImageUrl,\r\n          finalImageUrl: options.image_url,\r\n          caption: options.caption\r\n        });\r\n      } else if (postType === 'carousel') {\r\n        // For carousel, we need to use the carousel-specific endpoint\r\n        const response = await apiClient.postInstagramCarousel(\r\n          selectedAccount.platform_user_id,\r\n          carouselCaption,\r\n          carouselImages\r\n        );\r\n        \r\n        if (response.success) {\r\n          setMessage('Instagram carousel post created successfully!');\r\n          // Reset form\r\n          setCarouselImages([]);\r\n          setCarouselCaption('');\r\n          setCaptionPrompt('');\r\n          setAutoGenerateCaption(false);\r\n          setAiPrompt('');\r\n          \r\n          // Reload user media\r\n          if (selectedAccount) {\r\n            loadUserMedia(selectedAccount.platform_user_id);\r\n          }\r\n        } else {\r\n          setMessage(`Failed to create carousel post: ${response.error}`);\r\n        }\r\n        setLoading(false);\r\n        return;\r\n      } else if (postType === 'reel') {\r\n        options.caption = reelCaption;\r\n        // Always use Cloudinary URL for Reels\r\n        if (reelUrl && reelUrl.trim().startsWith('http')) {\r\n          options.video_url = reelUrl;\r\n        } else if (reelFilename && reelFilename.trim()) {\r\n          options.video_filename = reelFilename;\r\n        }\r\n        options.is_reel = true;\r\n        if (reelThumbnailUrl && reelThumbnailUrl.trim()) {\r\n          options.thumbnail_url = reelThumbnailUrl;\r\n        } else if (reelThumbnailFilename && reelThumbnailFilename.trim()) {\r\n          options.thumbnail_filename = reelThumbnailFilename;\r\n        }\r\n        options.media_type = 'video';\r\n        // Do NOT send media_file or media_filename for Reels\r\n        if ('media_file' in options) delete options.media_file;\r\n        if ('media_filename' in options) delete options.media_filename;\r\n        if ('image_url' in options) delete options.image_url;\r\n        console.log('🔍 DEBUG: Reel post options:', options);\r\n        console.log('🔍 DEBUG: Thumbnail state values:', {\r\n          reelThumbnailUrl,\r\n          reelThumbnailFilename,\r\n          hasThumbnailUrl: reelThumbnailUrl && reelThumbnailUrl.trim(),\r\n          hasThumbnailFilename: reelThumbnailFilename && reelThumbnailFilename.trim()\r\n        });\r\n      }\r\n\r\n      // Remove any empty string values from options to avoid backend validation issues\r\n      const cleanOptions = Object.fromEntries(\r\n        Object.entries(options).filter(([key, value]) => \r\n          value !== null && value !== undefined && value !== ''\r\n        )\r\n      );\r\n      \r\n      // Additional validation for photo posts\r\n      if (postType === 'photo' && !cleanOptions.image_url) {\r\n        setMessage('Photo posts require an image. Please select or generate an image first.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      \r\n      // Additional validation for reel posts\r\n      if (postType === 'reel' && !cleanOptions.video_url && !cleanOptions.video_filename) {\r\n        setMessage('Reel posts require a video. Please upload a video first.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      \r\n      console.log('🔍 DEBUG: Calling createUnifiedInstagramPost with:', {\r\n        instagramUserId: selectedAccount.platform_user_id,\r\n        options: cleanOptions,\r\n        originalPostType: postType,\r\n        originalOptions: options,\r\n        reelUrl: reelUrl,\r\n        reelFilename: reelFilename\r\n      });\r\n      console.log('🔍 DEBUG: Final thumbnail state before API call:', {\r\n        reelThumbnailUrl,\r\n        reelThumbnailFilename,\r\n        hasThumbnailUrl: reelThumbnailUrl && reelThumbnailUrl.trim(),\r\n        hasThumbnailFilename: reelThumbnailFilename && reelThumbnailFilename.trim(),\r\n        cleanOptionsHasThumbnail: cleanOptions.thumbnail_url || cleanOptions.thumbnail_filename\r\n      });\r\n      const response = await apiClient.createUnifiedInstagramPost(selectedAccount.platform_user_id, cleanOptions);\r\n      \r\n      if (response.success) {\r\n        setMessage('Instagram post created successfully!');\r\n        \r\n        // Create success notification\r\n        addNotification({\r\n          type: 'success',\r\n          platform: 'instagram',\r\n          strategyName: postType === 'photo' ? 'Photo Post' : (postType === 'reel' ? 'Reel Post' : 'Carousel Post'),\r\n          message: `Your Instagram ${postType} post was published successfully!`,\r\n          timestamp: new Date().toISOString()\r\n        });\r\n        \r\n        // Reset form\r\n        setCaption('');\r\n        setReelCaption('');\r\n        setReelCaptionPrompt('');\r\n        setReelAutoGenerateCaption(false);\r\n        setAiImageUrl('');\r\n        setUploadedImageUrl('');\r\n        setReelUrl('');\r\n        setReelFilename(''); // Clear the filename too\r\n        // eslint-disable-next-line no-undef\r\n        setReelFile(null);\r\n        setSelectedImageFile(null);\r\n        setAiPrompt('');\r\n        setCaptionPrompt('');\r\n        setReelThumbnailUrl('');\r\n        setReelThumbnailFilename('');\r\n        // eslint-disable-next-line no-undef\r\n        setReelThumbnailFile(null);\r\n        // Reload user media\r\n        if (selectedAccount) {\r\n          loadUserMedia(selectedAccount.platform_user_id);\r\n        }\r\n        // --- Synchronize account info for post count ---\r\n        try {\r\n          const allAccounts = await apiClient.getSocialAccounts();\r\n          const updatedAccount = allAccounts.find(acc => acc.id === selectedAccount.id);\r\n          if (updatedAccount) {\r\n            setSelectedAccount(updatedAccount);\r\n            setInstagramAccounts(prev =>\r\n              prev.map(acc => acc.id === updatedAccount.id ? updatedAccount : acc)\r\n            );\r\n          }\r\n        } catch (err) {\r\n          console.warn('Failed to refresh account info after post:', err);\r\n        }\r\n        setActiveTab('scheduled-posts');\r\n      } else {\r\n        let errorMsg = `Failed to create post: ${response.error || 'Unknown error'}`;\r\n        if (response.details) {\r\n          errorMsg += `\\nDetails: ${typeof response.details === 'string' ? response.details : JSON.stringify(response.details)}`;\r\n        }\r\n        setMessage(errorMsg);\r\n        console.error('Instagram post error:', response);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating Instagram post:', error);\r\n      setMessage(`Error creating post: ${error.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Check Google Drive availability\r\n  const checkGoogleDriveAvailability = async () => {\r\n    try {\r\n      const status = await apiClient.getGoogleDriveStatus();\r\n      setGoogleDriveAvailable(status.authenticated);\r\n    } catch (error) {\r\n      console.error('Error checking Google Drive availability:', error);\r\n      setGoogleDriveAvailable(false);\r\n    }\r\n  };\r\n\r\n  // --- Logout ---\r\n  const handleLogout = () => {\r\n    setInstagramAccounts([]);\r\n    setSelectedAccount('');\r\n    setIsConnected(false);\r\n    setActiveTab('connect');\r\n    setMessage('Instagram accounts disconnected');\r\n  };\r\n\r\n  // Auto-Reply Functions\r\n  const loadAutoReplySettings = async () => {\r\n    if (!selectedAccount) return;\r\n    \r\n    try {\r\n      console.log('🔄 Loading auto-reply settings for Instagram account:', selectedAccount.platform_user_id, selectedAccount.username);\r\n      \r\n      // Get automation rules for Instagram auto-reply\r\n      const rules = await apiClient.getAutomationRules('instagram', 'auto_reply');\r\n      console.log('📋 Found automation rules:', rules);\r\n      \r\n      // Find existing auto-reply rule for this account\r\n      const existingRule = rules.find(rule => \r\n        rule.social_account_id === selectedAccount.id && \r\n        rule.rule_type === 'AUTO_REPLY'\r\n      );\r\n      \r\n      if (existingRule) {\r\n        setAutoReplyEnabled(existingRule.is_active);\r\n        setAutoReplyTemplate(existingRule.actions?.template || '');\r\n        console.log('✅ Found existing auto-reply rule:', existingRule);\r\n      } else {\r\n        setAutoReplyEnabled(false);\r\n        setAutoReplyTemplate('');\r\n        console.log('📝 No existing auto-reply rule found');\r\n      }\r\n      \r\n      // Load posts for auto-reply selection\r\n      await loadPostsForAutoReply();\r\n      \r\n    } catch (error) {\r\n      console.error('❌ Error loading auto-reply settings:', error);\r\n      \r\n      let errorMessage = 'Failed to load auto-reply settings';\r\n      if (error.response?.data?.detail) {\r\n        errorMessage += ': ' + error.response.data.detail;\r\n      } else if (error.message) {\r\n        errorMessage += ': ' + error.message;\r\n      }\r\n      \r\n      setMessage(errorMessage);\r\n    }\r\n  };\r\n\r\n  // DM Auto-Reply Functions\r\n  const loadDmAutoReplySettings = async () => {\r\n    if (!selectedAccount) return;\r\n    try {\r\n      console.log('🔄 Loading DM auto-reply settings for Instagram account:', selectedAccount.platform_user_id, selectedAccount.username);\r\n      const statusResponse = await apiClient.getInstagramDmAutoReplyStatus(selectedAccount.platform_user_id);\r\n      console.log('📋 DM auto-reply status:', statusResponse);\r\n      if (statusResponse.success) {\r\n        setDmAutoReplyEnabled(statusResponse.enabled);\r\n        console.log('✅ DM auto-reply status loaded:', statusResponse.enabled);\r\n      } else {\r\n        setDmAutoReplyEnabled(false);\r\n        showToast('Failed to load DM auto-reply status: ' + (statusResponse.error || 'Unknown error'), 'error');\r\n        console.log('📝 No DM auto-reply status found');\r\n      }\r\n    } catch (error) {\r\n      setDmAutoReplyEnabled(false);\r\n      showToast('Error loading DM auto-reply settings: ' + (error?.message || 'Unknown error'), 'error');\r\n      console.error('❌ Error loading DM auto-reply settings:', error);\r\n    }\r\n  };\r\n\r\n  const handleDmAutoReplyToggle = async () => {\r\n    if (!selectedAccount) {\r\n      showToast('Please select an Instagram account first.', 'error');\r\n      return;\r\n    }\r\n    setDmAutoReplyLoading(true);\r\n    try {\r\n      const response = await apiClient.toggleInstagramDmAutoReply(\r\n        selectedAccount.platform_user_id,\r\n        !dmAutoReplyEnabled\r\n      );\r\n      if (response.success) {\r\n        setDmAutoReplyEnabled(!dmAutoReplyEnabled);\r\n        showToast(\r\n          !dmAutoReplyEnabled\r\n            ? 'Auto DM Reply enabled successfully!'\r\n            : 'Auto DM Reply disabled successfully.',\r\n          'success'\r\n        );\r\n      } else {\r\n        showToast('Failed to toggle Auto DM Reply: ' + (response.error || 'Unknown error'), 'error');\r\n        console.error('❌ Failed to toggle Auto DM Reply:', response);\r\n      }\r\n    } catch (error) {\r\n      showToast('Failed to toggle Auto DM Reply: ' + (error?.message || 'Unknown error'), 'error');\r\n      console.error('❌ Error toggling Auto DM Reply:', error);\r\n    } finally {\r\n      setDmAutoReplyLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadPostsForAutoReply = async () => {\r\n    if (!selectedAccount) return;\r\n    \r\n    try {\r\n      setLoadingAutoReplyPosts(true);\r\n      console.log('🔄 Loading posts for auto-reply selection for Instagram account:', selectedAccount.platform_user_id);\r\n      \r\n      // First, try to get posts directly from the database\r\n      const response = await apiClient.getPosts('instagram');\r\n      console.log('📋 All Instagram posts from database:', response);\r\n      \r\n      if (response && Array.isArray(response)) {\r\n        console.log('🔍 Selected account details:', {\r\n          id: selectedAccount.id,\r\n          platform_user_id: selectedAccount.platform_user_id,\r\n          username: selectedAccount.username\r\n        });\r\n        \r\n        // Filter posts for this specific account with better debugging\r\n        const accountPosts = response.filter(post => {\r\n          // Primary match: social_account_id (most reliable)\r\n          const matchesAccountId = post.social_account?.id === selectedAccount.id;\r\n          \r\n          // Secondary matches for compatibility\r\n          const matchesPlatformUserId = post.social_account?.platform_user_id === selectedAccount.platform_user_id;\r\n          const matchesUsername = post.social_account?.username === selectedAccount.username;\r\n          \r\n          const isMatch = matchesAccountId || matchesPlatformUserId || matchesUsername;\r\n          \r\n          console.log('🔍 Checking post:', {\r\n            postId: post.id,\r\n            postAccountId: post.social_account?.id,\r\n            postPlatformUserId: post.social_account?.platform_user_id,\r\n            postUsername: post.social_account?.username,\r\n            selectedAccountId: selectedAccount.id,\r\n            selectedPlatformUserId: selectedAccount.platform_user_id,\r\n            selectedUsername: selectedAccount.username,\r\n            matchesAccountId,\r\n            matchesPlatformUserId,\r\n            matchesUsername,\r\n            isMatch\r\n          });\r\n          \r\n          return isMatch;\r\n        });\r\n        \r\n        console.log('📋 Posts for this account:', accountPosts.length);\r\n        console.log('📋 All posts in database:', response.length);\r\n        console.log('📋 Account posts details:', accountPosts.map(post => ({\r\n          id: post.id,\r\n          content: post.content?.substring(0, 50) + '...',\r\n          social_account_id: post.social_account?.id,\r\n          platform_user_id: post.social_account?.platform_user_id,\r\n          username: post.social_account?.username\r\n        })));\r\n        \r\n        if (accountPosts.length === 0) {\r\n          console.log('⚠️ No posts found for this specific account. Showing all Instagram posts for debugging...');\r\n          \r\n          // Show all Instagram posts for debugging\r\n          setAutoReplyPosts(response);\r\n          console.log('📋 Showing all Instagram posts for debugging:', response.length);\r\n          \r\n          // Also try to sync from Instagram API\r\n          console.log('🔄 Attempting to sync from Instagram...');\r\n          try {\r\n            const syncResponse = await apiClient.syncInstagramPosts(selectedAccount.platform_user_id);\r\n            console.log('📡 Sync response:', syncResponse);\r\n            \r\n            if (syncResponse.success) {\r\n              // Re-fetch posts after sync\r\n              const refreshedResponse = await apiClient.getPosts('instagram');\r\n              const refreshedAccountPosts = refreshedResponse.filter(post => {\r\n                // Primary match: social_account_id (most reliable)\r\n                const matchesAccountId = post.social_account?.id === selectedAccount.id;\r\n                \r\n                // Secondary matches for compatibility\r\n                const matchesPlatformUserId = post.social_account?.platform_user_id === selectedAccount.platform_user_id;\r\n                const matchesUsername = post.social_account?.username === selectedAccount.username;\r\n                \r\n                return matchesAccountId || matchesPlatformUserId || matchesUsername;\r\n              });\r\n              \r\n              if (refreshedAccountPosts.length > 0) {\r\n                setAutoReplyPosts(refreshedAccountPosts);\r\n                console.log('✅ Posts loaded after sync:', refreshedAccountPosts.length);\r\n              } else {\r\n                console.log('⚠️ Still no posts found after sync. Showing all posts for debugging.');\r\n                setAutoReplyPosts(refreshedResponse);\r\n                setMessage('No posts found for this account. Showing all Instagram posts for debugging. Create some posts first using the Create Post tab.');\r\n              }\r\n            } else {\r\n              setMessage('Failed to sync posts from Instagram. Showing all posts for debugging.');\r\n            }\r\n          } catch (syncError) {\r\n            console.error('❌ Sync error:', syncError);\r\n            setMessage('Failed to sync posts from Instagram. Showing all posts for debugging.');\r\n          }\r\n        } else {\r\n          setAutoReplyPosts(accountPosts);\r\n          console.log('✅ Posts loaded for auto-reply selection:', accountPosts.length);\r\n        }\r\n      } else {\r\n        throw new Error('Failed to load posts');\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Error loading posts for auto-reply:', error);\r\n      \r\n      // Provide more specific error messages\r\n      let errorMessage = 'Failed to load posts for auto-reply selection';\r\n      if (error.message.includes('404')) {\r\n        errorMessage = 'Instagram account not found. Please reconnect your Instagram account.';\r\n      } else if (error.message.includes('401')) {\r\n        errorMessage = 'Authentication failed. Please log in again.';\r\n      } else if (error.message.includes('500')) {\r\n        errorMessage = 'Server error. Please try again later.';\r\n      }\r\n      \r\n      setMessage(errorMessage);\r\n    } finally {\r\n      setLoadingAutoReplyPosts(false);\r\n    }\r\n  };\r\n\r\n  const handlePostSelection = (postId) => {\r\n    setSelectedAutoReplyPosts(prev => {\r\n      if (prev.includes(postId)) {\r\n        return prev.filter(id => id !== postId);\r\n      } else {\r\n        return [...prev, postId];\r\n      }\r\n    });\r\n  };\r\n\r\n  const handlePostTouch = (postId, event) => {\r\n    event.preventDefault();\r\n    handlePostSelection(postId);\r\n  };\r\n\r\n  const selectAllPosts = () => {\r\n    const allPostIds = autoReplyPosts.map(post => post.id);\r\n    setSelectedAutoReplyPosts(allPostIds);\r\n  };\r\n\r\n  const deselectAllPosts = () => {\r\n    setSelectedAutoReplyPosts([]);\r\n  };\r\n\r\n\r\n\r\n  const handleSelectPosts = () => {\r\n    setIsSelectingPosts(true);\r\n    // Load posts when entering selection mode\r\n    if (autoReplyPosts.length === 0) {\r\n      loadPostsForAutoReply();\r\n    }\r\n  };\r\n\r\n  const handleDoneSelecting = () => {\r\n    setIsSelectingPosts(false);\r\n  };\r\n\r\n  const handleAutoReplyToggle = async () => {\r\n    if (!selectedAccount) {\r\n      setMessage('Please select an Instagram account first');\r\n      return;\r\n    }\r\n\r\n    // Check if posts are available when enabling\r\n    if (!autoReplyEnabled && autoReplyPosts.length === 0) {\r\n      setMessage('No posts available for auto-reply. Please create some posts first.');\r\n      return;\r\n    }\r\n\r\n    // If enabling auto-reply without selected posts, auto-select all posts\r\n    if (!autoReplyEnabled && selectedAutoReplyPosts.length === 0) {\r\n      const allPostIds = autoReplyPosts.map(post => post.id);\r\n      setSelectedAutoReplyPosts(allPostIds);\r\n      console.log('Auto-selecting all posts for auto-reply:', allPostIds);\r\n    }\r\n\r\n    // Add mobile-friendly confirmation for enabling auto-reply\r\n    if (!autoReplyEnabled) {\r\n      const isMobile = window.innerWidth <= 768;\r\n      const postCount = selectedAutoReplyPosts.length > 0 ? selectedAutoReplyPosts.length : autoReplyPosts.length;\r\n      const confirmMessage = isMobile \r\n        ? `Enable auto-reply for ${postCount} post(s)?`\r\n        : `Enable auto-reply for ${postCount} post(s)? AI will automatically reply to comments mentioning the commenter.`;\r\n      \r\n      if (!window.confirm(confirmMessage)) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    setAutoReplyLoading(true);\r\n    try {\r\n      console.log('🔄 Toggling auto-reply for Instagram account:', selectedAccount.platform_user_id, selectedAccount.username);\r\n      console.log('📝 Selected post IDs:', selectedAutoReplyPosts);\r\n      console.log('🎯 New state will be:', !autoReplyEnabled);\r\n      \r\n      const response = await apiClient.toggleInstagramAutoReply(\r\n        selectedAccount.platform_user_id,\r\n        !autoReplyEnabled,\r\n        autoReplyTemplate,\r\n        selectedAutoReplyPosts\r\n      );\r\n\r\n      console.log('📡 Backend response:', response);\r\n\r\n      if (response.success) {\r\n        setAutoReplyEnabled(!autoReplyEnabled);\r\n        \r\n        const successMessage = !autoReplyEnabled \r\n          ? isMobile()\r\n            ? `Auto-reply enabled for ${response.data?.selected_posts_count || selectedAutoReplyPosts.length} post(s)!`\r\n            : `Auto-reply enabled successfully for ${response.data?.selected_posts_count || selectedAutoReplyPosts.length} post(s)! AI will automatically reply to comments mentioning the commenter.`\r\n          : 'Auto-reply disabled successfully.';\r\n        \r\n        setMessage(successMessage);\r\n        \r\n        console.log('✅ Auto-reply toggled successfully:', {\r\n          enabled: !autoReplyEnabled,\r\n          selectedPostsCount: response.data?.selected_posts_count\r\n        });\r\n      } else {\r\n        throw new Error(response.error || 'Failed to toggle auto-reply');\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Auto-reply toggle error:', error);\r\n      setMessage('Error toggling auto-reply: ' + (error.message || 'Unknown error'));\r\n    } finally {\r\n      setAutoReplyLoading(false);\r\n    }\r\n  };\r\n\r\n  // Load auto-reply settings when account is selected\r\n  useEffect(() => {\r\n    console.log('🔍 DEBUG: Auto-reply useEffect triggered');\r\n    console.log('🔍 DEBUG: selectedAccount:', selectedAccount);\r\n    console.log('🔍 DEBUG: activeTab:', activeTab);\r\n    if (selectedAccount && activeTab === 'auto-reply') {\r\n      console.log('🔍 DEBUG: Loading auto-reply settings');\r\n      loadAutoReplySettings();\r\n    }\r\n  }, [selectedAccount, activeTab]);\r\n\r\n  // Persist auto-reply state on page refresh\r\n  useEffect(() => {\r\n    if (selectedAccount && autoReplyEnabled) {\r\n      // Re-validate auto-reply state with backend\r\n      const validateAutoReplyState = async () => {\r\n        try {\r\n          const rules = await apiClient.getAutomationRules('instagram', 'auto_reply');\r\n          const socialAccounts = await apiClient.getSocialAccounts();\r\n          const instagramAccount = socialAccounts.find(acc => \r\n            acc.platform === 'instagram' && acc.platform_user_id === selectedAccount.platform_user_id\r\n          );\r\n          \r\n          if (instagramAccount) {\r\n            const existingRule = rules.find(rule => \r\n              rule.social_account_id === instagramAccount.id && \r\n              rule.rule_type === 'AUTO_REPLY'\r\n            );\r\n            \r\n            if (!existingRule || !existingRule.is_active) {\r\n              setAutoReplyEnabled(false);\r\n              setSelectedAutoReplyPosts([]);\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error('Error validating auto-reply state:', error);\r\n        }\r\n      };\r\n      \r\n      validateAutoReplyState();\r\n    }\r\n  }, [selectedAccount, autoReplyEnabled]);\r\n\r\n  // Load user media when account is selected\r\n  useEffect(() => {\r\n    if (selectedAccount && activeTab === 'post') {\r\n      loadUserMedia(selectedAccount.platform_user_id);\r\n    }\r\n  }, [selectedAccount, activeTab]);\r\n\r\n  // Load DM auto-reply settings when account is selected\r\n  useEffect(() => {\r\n    if (selectedAccount && activeTab === 'auto-reply') {\r\n      loadDmAutoReplySettings();\r\n    }\r\n  }, [selectedAccount, activeTab]);\r\n\r\n  // Add a useEffect to always load DM auto-reply settings when selectedAccount changes\r\n  useEffect(() => {\r\n    if (selectedAccount) {\r\n      loadDmAutoReplySettings();\r\n    }\r\n  }, [selectedAccount]);\r\n\r\n  // --- New: Scheduled Posts Grid State ---\r\n  const [scheduledGridRows, setScheduledGridRows] = useState([]);\r\n\r\n  // Show grid if redirected with scheduled posts\r\n  useEffect(() => {\r\n    if (location.state && location.state.scheduledGridRows) {\r\n      setScheduledGridRows(location.state.scheduledGridRows);\r\n    }\r\n  }, [location.state]);\r\n\r\n  // --- Auto-refresh scheduled posts grid ---\r\n  useEffect(() => {\r\n    let intervalId;\r\n    const fetchScheduledPosts = async () => {\r\n      try {\r\n        const posts = await apiClient.getScheduledPosts();\r\n        setScheduledGridRows(posts.filter(post => post.platform === 'instagram'));\r\n      } catch (err) {}\r\n    };\r\n    fetchScheduledPosts(); // Always fetch on mount\r\n    intervalId = setInterval(fetchScheduledPosts, 10000);\r\n    return () => clearInterval(intervalId);\r\n  }, []);\r\n\r\n  // --- UI Render ---\r\n  if (authLoading) {\r\n    return <div className=\"instagram-container\"><div className=\"loading-screen\"><div className=\"loading-spinner\"></div><p>Checking authentication...</p></div></div>;\r\n  }\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <div className=\"instagram-container\">\r\n        <div className=\"header-section\">\r\n          <button onClick={() => navigate('/')} className=\"back-button\">Back to Dashboard</button>\r\n          <h1>Instagram Management</h1>\r\n          <p>Please log in to your account to connect and manage Instagram.</p>\r\n        </div>\r\n        <div className=\"auth-required\">\r\n          <div className=\"auth-icon\"></div>\r\n          <h2>Authentication Required</h2>\r\n          <p>You need to be logged in to use Instagram features. Please log in first.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  if (!sdkLoaded) {\r\n    return <div className=\"instagram-container\"><div className=\"loading-screen\"><div className=\"loading-spinner\"></div><p>Loading Instagram SDK...</p></div></div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"instagram-container\">\r\n      <div className=\"header-section\">\r\n        <button onClick={() => navigate('/')} className=\"back-button\">Back to Dashboard</button>\r\n        <div className=\"header-content\">\r\n          <div className=\"header-icon\"></div>\r\n          <div className=\"header-text\">\r\n            <h1>Instagram Management</h1>\r\n            <p>Connect and manage your Instagram Business accounts</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* --- Moved: Global Auto-Reply Section --- */}\r\n      {isConnected && selectedAccount && (\r\n        <div className=\"global-auto-reply-section\" style={{\r\n          display: 'flex', alignItems: 'center', justifyContent: 'space-between',\r\n          background: '#fff', borderRadius: 12, boxShadow: '0 2px 8px rgba(0,0,0,0.04)',\r\n          padding: '18px 24px', marginBottom: 18, border: '1px solid #eee',\r\n          flexWrap: 'wrap', gap: 16\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: 16 }}>\r\n            <div style={{ width: 56, height: 56, borderRadius: '50%', overflow: 'hidden', background: '#f3f3f3', border: '1px solid #e0e0e0' }}>\r\n              {selectedAccount.profile_picture_url ? (\r\n                <img src={selectedAccount.profile_picture_url} alt={selectedAccount.username} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n              ) : (\r\n                <div style={{ width: '100%', height: '100%', background: '#eee' }} />\r\n              )}\r\n            </div>\r\n            <div>\r\n              <div style={{ fontWeight: 600, fontSize: 18 }}>@{selectedAccount.username}</div>\r\n              <div style={{ color: '#888', fontSize: 14 }}>{selectedAccount.name}</div>\r\n              <div style={{ color: '#666', fontSize: 13, marginTop: 2 }}>\r\n                <span style={{ marginRight: 12 }}>\r\n                  <b>{selectedAccount.followers_count}</b> followers\r\n                </span>\r\n                <span>\r\n                  <b>{selectedAccount.media_count}</b> posts\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: 16 }}>\r\n            <button\r\n              className=\"auto-reply-toggle-btn\"\r\n              onClick={handleGlobalAutoReplyToggle}\r\n              disabled={globalAutoReplyLoading}\r\n              style={{\r\n                display: 'flex', alignItems: 'center', gap: 10, fontWeight: 600,\r\n                background: globalAutoReplyEnabled ? '#38c172' : '#e0e0e0',\r\n                color: globalAutoReplyEnabled ? '#fff' : '#444',\r\n                border: 'none', borderRadius: 20, padding: '10px 22px', fontSize: 16,\r\n                cursor: globalAutoReplyLoading ? 'not-allowed' : 'pointer',\r\n                boxShadow: globalAutoReplyEnabled ? '0 2px 8px rgba(56,193,114,0.08)' : 'none',\r\n                transition: 'background 0.2s'\r\n              }}\r\n            >\r\n              <span style={{\r\n                display: 'inline-block', width: 14, height: 14, borderRadius: '50%',\r\n                background: globalAutoReplyEnabled ? '#2ecc40' : '#bbb',\r\n                marginRight: 6, border: globalAutoReplyEnabled ? '2px solid #fff' : '2px solid #ccc',\r\n                boxShadow: globalAutoReplyEnabled ? '0 0 4px #38c172' : 'none',\r\n                verticalAlign: 'middle',\r\n              }} />\r\n              Auto Comment Reply: {globalAutoReplyEnabled ? 'Enabled' : 'Disabled'}\r\n              {globalAutoReplyLoading && (\r\n                <span className=\"loading-spinner\" style={{ marginLeft: 10, width: 18, height: 18, border: '2px solid #fff', borderTop: '2px solid #38c172', borderRadius: '50%', display: 'inline-block', animation: 'spin 1s linear infinite' }} />\r\n              )}\r\n            </button>\r\n\r\n            {/* --- DM Auto-Reply Toggle Button --- */}\r\n            <button\r\n              className=\"auto-reply-toggle-btn\"\r\n              onClick={handleDmAutoReplyToggle}\r\n              disabled={dmAutoReplyLoading}\r\n              style={{\r\n                display: 'flex', alignItems: 'center', gap: 10, fontWeight: 600,\r\n                background: dmAutoReplyEnabled ? '#38c172' : '#e0e0e0',\r\n                color: dmAutoReplyEnabled ? '#fff' : '#444',\r\n                border: 'none', borderRadius: 20, padding: '10px 22px', fontSize: 16,\r\n                cursor: dmAutoReplyLoading ? 'not-allowed' : 'pointer',\r\n                boxShadow: dmAutoReplyEnabled ? '0 2px 8px rgba(56,193,114,0.08)' : 'none',\r\n                transition: 'background 0.2s'\r\n              }}\r\n            >\r\n              <span style={{\r\n                display: 'inline-block', width: 14, height: 14, borderRadius: '50%',\r\n                background: dmAutoReplyEnabled ? '#2ecc40' : '#bbb',\r\n                marginRight: 6, border: dmAutoReplyEnabled ? '2px solid #fff' : '2px solid #ccc',\r\n                boxShadow: dmAutoReplyEnabled ? '0 0 4px #38c172' : 'none',\r\n                verticalAlign: 'middle',\r\n              }} />\r\n              Auto DM Reply: {dmAutoReplyEnabled ? 'Enabled' : 'Disabled'}\r\n              {dmAutoReplyLoading && (\r\n                <span className=\"loading-spinner\" style={{ marginLeft: 10, width: 18, height: 18, border: '2px solid #fff', borderTop: '2px solid #38c172', borderRadius: '50%', display: 'inline-block', animation: 'spin 1s linear infinite' }} />\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* --- Toast Notification --- */}\r\n      {toast.show && (\r\n        <div className={`toast-notification toast-${toast.type}`} style={{\r\n          position: 'fixed', top: 24, right: 24, zIndex: 9999, background: toast.type === 'success' ? '#38c172' : toast.type === 'error' ? '#e53e3e' : '#333',\r\n          color: '#fff', padding: '14px 28px', borderRadius: 8, boxShadow: '0 2px 8px rgba(0,0,0,0.12)', fontWeight: 500, fontSize: 16\r\n        }}>\r\n          {toast.message}\r\n        </div>\r\n      )}\r\n      {message && <div className=\"status-message info\"><span className=\"message-text\">{message}</span></div>}\r\n      <div className=\"main-content\">\r\n        <div className=\"tab-navigation\">\r\n          <button className={`tab-button ${activeTab === 'connect' ? 'active' : ''}`} onClick={() => setActiveTab('connect')}>Connect Account</button>\r\n          <button className={`tab-button ${activeTab === 'post' ? 'active' : ''}`} onClick={() => setActiveTab('post')} disabled={!isConnected}>Create Post</button>\r\n          <button className={`tab-button ${activeTab === 'media' ? 'active' : ''}`} onClick={() => setActiveTab('media')} disabled={!isConnected || !selectedAccount}>Media Gallery</button>\r\n          <button \r\n            className={`tab-button ${activeTab === 'bulk-composer' ? 'active' : ''}`} \r\n            onClick={() => setActiveTab('bulk-composer')} \r\n            disabled={!isConnected || !selectedAccount}\r\n            style={{ backgroundColor: activeTab === 'bulk-composer' ? '#e4405f' : undefined, color: activeTab === 'bulk-composer' ? 'white' : undefined, border: 'none' }}\r\n          >\r\n            <span role=\"img\" aria-label=\"Bulk Composer\">📅</span> Bulk Composer\r\n          </button>\r\n          <button className={`tab-button ${activeTab === 'scheduled-posts' ? 'active' : ''}`} onClick={() => setActiveTab('scheduled-posts')} disabled={!isConnected || !selectedAccount}>Scheduled Posts</button>\r\n        </div>\r\n        <div className=\"tab-content\">\r\n          {activeTab === 'connect' && (\r\n            <div className=\"connect-section\">\r\n              {!isConnected ? (\r\n                <div className=\"connection-card\">\r\n                  <div className=\"connection-icon\"></div>\r\n                  <h2>Connect Instagram Account</h2>\r\n                  <p>Connect your Instagram Business account through Facebook to start posting and managing content.</p>\r\n                  <button onClick={handleFacebookLogin} disabled={loading} className=\"connect-main-button\">{loading ? 'Connecting...' : 'Connect via Facebook'}</button>\r\n                  <div className=\"requirements-card\">\r\n                    <h3>Requirements</h3>\r\n                    <ul>\r\n                      <li>Instagram Business or Creator account</li>\r\n                      <li>Connected to a Facebook Page</li>\r\n                      <li>Admin access to the Facebook Page</li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"connected-accounts\">\r\n                  <div className=\"accounts-header\">\r\n                    <h2>Connected Instagram Accounts</h2>\r\n                    <button onClick={handleLogout} className=\"logout-button\">Disconnect</button>\r\n                  </div>\r\n                  <div className=\"accounts-grid\">\r\n                    {instagramAccounts.map(account => (\r\n                      <div key={account.id} className={`account-card ${selectedAccount.id === account.id ? 'selected' : ''}`} onClick={() => setSelectedAccount(account)}>\r\n                        <div className=\"account-avatar\">{account.profile_picture_url ? <img src={account.profile_picture_url} alt={account.username} /> : <div className=\"avatar-placeholder\"></div>}</div>\r\n                        <div className=\"account-info\">\r\n                          <h3>@{account.username}</h3>\r\n                          <p>{account.name}</p>\r\n                          <div className=\"account-stats\"><span>{account.followers_count} followers</span><span>{account.media_count} posts</span></div>\r\n                          </div>\r\n                        {selectedAccount.id === account.id && <div className=\"selected-indicator\"></div>}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n          {activeTab === 'post' && selectedAccount && (\r\n            <div className=\"post-section\">\r\n              <div className=\"post-type-toggle\">\r\n                <button className={postType === 'photo' ? 'active' : ''} onClick={() => setPostType('photo')}>Photo</button>\r\n                <button className={postType === 'carousel' ? 'active' : ''} onClick={() => setPostType('carousel')}>Carousel</button>\r\n                <button className={postType === 'reel' ? 'active' : ''} onClick={() => setPostType('reel')}>Reel</button>\r\n              </div>\r\n              {/* Photo Post */}\r\n              {postType === 'photo' && (\r\n              <div className=\"post-card\">\r\n                  <div className=\"form-group\">\r\n                    <label>Image Source</label>\r\n                    <div className=\"image-source-toggle\">\r\n                      <button className={imageSource === 'ai' ? 'active' : ''} onClick={() => setImageSource('ai')}>AI</button>\r\n                      <button className={imageSource === 'upload' ? 'active' : ''} onClick={() => setImageSource('upload')}>Upload</button>\r\n                </div>\r\n                  </div>\r\n                  {imageSource === 'ai' && (\r\n                  <div className=\"form-group\">\r\n                      <label>AI Prompt</label>\r\n                    <textarea\r\n                        value={aiPrompt} \r\n                        onChange={e => {\r\n                          setAiPrompt(e.target.value);\r\n                          // Clear generated content when prompt changes\r\n                          if (aiImageUrl) {\r\n                            setAiImageUrl('');\r\n                          }\r\n                          if (caption && !caption.trim().includes('Check out this amazing image!')) {\r\n                            setCaption('');\r\n                          }\r\n                        }} \r\n                        placeholder=\"Describe your image...\" \r\n                        rows={3} \r\n                      className=\"post-textarea\"\r\n                    />\r\n                      <div className=\"ai-buttons\">\r\n                        <button className=\"ai-generate-button\" onClick={handleGenerateAIImage} disabled={aiGenerating || !aiPrompt.trim() || rateLimitCooldown > 0}>\r\n                          {aiGenerating ? 'Generating...' : 'Generate Image'}\r\n                        </button>\r\n                        <button className=\"ai-generate-button secondary\" onClick={handleGenerateImageAndCaption} disabled={aiGenerating || generatingCaption || !aiPrompt.trim() || rateLimitCooldown > 0}>\r\n                          {aiGenerating || generatingCaption ? 'Generating...' : 'Generate Image & Caption'}\r\n                        </button>\r\n                        {message && message.includes('Error') && aiPrompt.trim() && (\r\n                          <button className=\"ai-generate-button retry\" onClick={handleRetryImageGeneration} disabled={aiGenerating || rateLimitCooldown > 0}>\r\n                            {aiGenerating ? 'Retrying...' : 'Retry Generation'}\r\n                          </button>\r\n                        )}\r\n                  </div>\r\n                      {rateLimitCooldown > 0 && (\r\n                        <div style={{ color: '#e53e3e', marginTop: 8, fontWeight: 500 }}>\r\n                          Too many requests. Please wait {Math.floor(rateLimitCooldown / 60)}:{(rateLimitCooldown % 60).toString().padStart(2, '0')} before trying again.\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  {imageSource === 'upload' && (\r\n                    <div className=\"form-group image-upload\">\r\n                      <label>Select Image</label>\r\n                      <button \r\n                        type=\"button\" \r\n                        onClick={() => openFilePicker('photo', 'manual')} \r\n                        className=\"file-picker-button\"\r\n                        disabled={uploadingImage}\r\n                      >\r\n                        {uploadingImage ? 'Uploading...' : 'Choose Image'}\r\n                      </button>\r\n                      {uploadedImageUrl && (\r\n                        <div className=\"image-preview\">\r\n                          <img src={uploadedImageUrl} alt=\"Preview\" className=\"preview-image\" />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  <div className=\"form-group\">\r\n                    <label>Caption</label>\r\n                    <div className=\"caption-section\">\r\n                      <div className=\"caption-toggle\">\r\n                        <label className=\"toggle-label\">\r\n                      <input\r\n                            type=\"checkbox\" \r\n                            checked={autoGenerateCaption} \r\n                            onChange={e => setAutoGenerateCaption(e.target.checked)}\r\n                          />\r\n                          <span className=\"toggle-text\">Auto Generate Caption</span>\r\n                      </label>\r\n                      </div>\r\n                      {autoGenerateCaption ? (\r\n                        <div className=\"caption-prompt-section\">\r\n                          <textarea \r\n                            value={captionPrompt} \r\n                            onChange={e => setCaptionPrompt(e.target.value)} \r\n                            placeholder=\"Describe what you want in the caption...\" \r\n                            rows={2} \r\n                            className=\"caption-prompt-textarea\" \r\n                          />\r\n                          <button \r\n                            onClick={handleAutoGenerateCaption} \r\n                            disabled={generatingCaption || !captionPrompt.trim()} \r\n                            className=\"generate-caption-button\"\r\n                          >\r\n                            {generatingCaption ? 'Generating...' : 'Generate Caption'}\r\n                          </button>\r\n                        </div>\r\n                      ) : null}\r\n                      <textarea \r\n                        value={caption} \r\n                        onChange={e => setCaption(e.target.value)} \r\n                        placeholder={autoGenerateCaption ? \"Caption will be generated...\" : \"Write your caption...\"} \r\n                        rows={3} \r\n                        className=\"post-textarea\" \r\n                        disabled={autoGenerateCaption}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  {(aiImageUrl || uploadedImageUrl) && <div className=\"generated-image\"><img src={aiImageUrl || uploadedImageUrl} alt=\"Preview\" /></div>}\r\n                  <button className=\"publish-button\" onClick={handlePublish} disabled={loading || !(aiImageUrl || uploadedImageUrl) || (!caption.trim() && !autoGenerateCaption)}>{loading ? 'Publishing...' : 'Publish Post'}</button>\r\n                </div>\r\n              )}\r\n              {/* Carousel Post */}\r\n              {postType === 'carousel' && (\r\n                <div className=\"post-card\">\r\n                  <div className=\"form-group\">\r\n                    <label>Carousel Mode</label>\r\n                    <div className=\"image-source-toggle\">\r\n                      <button \r\n                        className={imageSource === 'ai' ? 'active' : ''} \r\n                        onClick={() => setImageSource('ai')}\r\n                        disabled={carouselGenerating}\r\n                      >\r\n                        🤖 AI Generation\r\n                      </button>\r\n                      <button \r\n                        className={imageSource === 'upload' ? 'active' : ''} \r\n                        onClick={() => setImageSource('upload')}\r\n                        disabled={carouselGenerating}\r\n                      >\r\n                        📤 Manual Upload\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Image Count Selector */}\r\n                  <div className=\"form-group\">\r\n                    <label>Number of Images: {carouselCount}</label>\r\n                    <input\r\n                      type=\"range\"\r\n                      min=\"3\"\r\n                      max=\"7\"\r\n                      value={carouselCount}\r\n                      onChange={(e) => setCarouselCount(parseInt(e.target.value))}\r\n                      className=\"slider\"\r\n                      disabled={carouselGenerating}\r\n                    />\r\n                    <div className=\"slider-labels\">\r\n                      <span>3</span>\r\n                      <span>4</span>\r\n                      <span>5</span>\r\n                      <span>6</span>\r\n                      <span>7</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* AI Generation Mode */}\r\n                  {imageSource === 'ai' && (\r\n                    <div className=\"form-group\">\r\n                      <label>AI Prompt for Carousel</label>\r\n                      <textarea\r\n                        value={aiPrompt}\r\n                        onChange={(e) => setAiPrompt(e.target.value)}\r\n                        placeholder=\"Describe the carousel content you want to generate...\"\r\n                        rows=\"3\"\r\n                        className=\"post-textarea\"\r\n                        disabled={carouselGenerating}\r\n                      />\r\n                      <div className=\"ai-generation-note\">\r\n                        <small>💡 Tip: Carousel generation takes 3-5 minutes for {carouselCount} images. Please be patient!</small>\r\n                      </div>\r\n                  <button \r\n                        className=\"generate-button\"\r\n                        onClick={async () => {\r\n                          if (!aiPrompt.trim()) {\r\n                            setMessage('Please enter a prompt for carousel generation.');\r\n                            return;\r\n                          }\r\n                          setCarouselGenerating(true);\r\n                          setMessage(`Generating ${carouselCount} carousel images with AI... This may take 3-5 minutes.`);\r\n                          try {\r\n                            const response = await apiClient.generateInstagramCarousel(aiPrompt.trim(), carouselCount);\r\n                            if (response && response.success && response.image_urls) {\r\n                              setCarouselImages(response.image_urls);\r\n                              setCarouselCaption(response.caption || '');\r\n                              setMessage(`AI carousel generated successfully with ${response.image_urls.length} images!`);\r\n                            } else {\r\n                              setMessage(response.error || 'Failed to generate carousel images.');\r\n                            }\r\n                          } catch (error) {\r\n                            console.error('Carousel generation error:', error);\r\n                            if (error.message && error.message.includes('timeout')) {\r\n                              setMessage('Carousel generation timed out. This can happen with complex prompts or when generating many images. Please try again with a simpler prompt or fewer images.');\r\n                            } else {\r\n                              setMessage('Error generating carousel: ' + (error.message || error.toString()));\r\n                            }\r\n                          } finally {\r\n                            setCarouselGenerating(false);\r\n                          }\r\n                        }}\r\n                        disabled={carouselGenerating || !aiPrompt.trim()}\r\n                      >\r\n                        {carouselGenerating ? (\r\n                      <>\r\n                        <div className=\"button-spinner\"></div>\r\n                            Generating {carouselCount} Images...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                            <span role=\"img\" aria-label=\"Generate\">✨</span> Generate Carousel\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n                  )}\r\n\r\n                                    {/* Manual Upload Mode */}\r\n                  {imageSource === 'upload' && (\r\n                    <div className=\"form-group\">\r\n                      <label>Upload Images (JPG/PNG)</label>\r\n                      <button \r\n                        type=\"button\" \r\n                        onClick={() => openFilePicker('photo', 'carousel')} \r\n                        className=\"file-picker-button\"\r\n                        disabled={carouselGenerating}\r\n                      >\r\n                        {carouselGenerating ? (\r\n                          <>\r\n                            <div className=\"button-spinner\"></div>\r\n                            Uploading...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <span role=\"img\" aria-label=\"Upload\">📤</span> Select {carouselCount} Images\r\n                          </>\r\n                        )}\r\n                      </button>\r\n                      <p className=\"file-upload-hint\">\r\n                        Select {carouselCount} images for your carousel\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Caption Generation */}\r\n                  <div className=\"form-group\">\r\n                    <label>Caption</label>\r\n                    <div className=\"caption-section\">\r\n                      <div className=\"caption-toggle\">\r\n                        <label className=\"toggle-label\">\r\n                          <input \r\n                            type=\"checkbox\" \r\n                            checked={autoGenerateCaption} \r\n                            onChange={e => setAutoGenerateCaption(e.target.checked)}\r\n                          />\r\n                          <span className=\"toggle-text\">Auto Generate Caption</span>\r\n                        </label>\r\n                      </div>\r\n                      {autoGenerateCaption ? (\r\n                        <div className=\"caption-prompt-section\">\r\n                          <textarea \r\n                            value={captionPrompt} \r\n                            onChange={e => setCaptionPrompt(e.target.value)} \r\n                            placeholder=\"Describe what you want in the caption...\" \r\n                            rows={2} \r\n                            className=\"caption-prompt-textarea\" \r\n                          />\r\n                          <button \r\n                            onClick={handleCarouselAutoGenerateCaption} \r\n                            disabled={generatingCaption || !captionPrompt.trim()} \r\n                            className=\"generate-caption-button\"\r\n                          >\r\n                            {generatingCaption ? 'Generating...' : 'Generate Caption'}\r\n                          </button>\r\n                        </div>\r\n                      ) : null}\r\n                      <textarea \r\n                        value={carouselCaption} \r\n                        onChange={e => setCarouselCaption(e.target.value)} \r\n                        placeholder={autoGenerateCaption ? \"Caption will be generated...\" : \"Write your caption...\"} \r\n                        rows={3} \r\n                        className=\"post-textarea\" \r\n                        disabled={autoGenerateCaption}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Carousel Preview */}\r\n                  {carouselImages.length > 0 && (\r\n                    <div className=\"carousel-preview-section\">\r\n                      <h4>Carousel Preview</h4>\r\n                      <div className=\"carousel-preview-grid\">\r\n                        {carouselImages.slice(0, carouselCount).map((url, index) => (\r\n                          <div key={index} className=\"carousel-preview-item\">\r\n                            <img src={url} alt={`Carousel item ${index + 1}`} />\r\n                            <span className=\"carousel-item-number\">{index + 1}</span>\r\n                          </div>\r\n                        ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n                  <button \r\n                    className=\"publish-button\" \r\n                    onClick={async () => {\r\n                      if (!selectedAccount) {\r\n                        setMessage('Please select an Instagram account first.');\r\n                        return;\r\n                      }\r\n                      if (carouselImages.length < 3) {\r\n                        setMessage('Please add at least 3 images for carousel.');\r\n                        return;\r\n                      }\r\n                      if (!carouselCaption.trim() && !autoGenerateCaption) {\r\n                        setMessage('Please write a caption or enable auto-generate caption.');\r\n                        return;\r\n                      }\r\n                      if (autoGenerateCaption && !captionPrompt.trim()) {\r\n                        setMessage('Please provide a prompt for auto-generating caption.');\r\n                        return;\r\n                      }\r\n                      \r\n                      setLoading(true);\r\n                      setMessage('Publishing carousel post...');\r\n                      try {\r\n                        console.log('🔍 DEBUG: Carousel publish - selectedAccount:', selectedAccount);\r\n                        console.log('🔍 DEBUG: Carousel publish - carouselImages:', carouselImages);\r\n                        console.log('🔍 DEBUG: Carousel publish - carouselCount:', carouselCount);\r\n                        \r\n                        const finalCaption = autoGenerateCaption && captionPrompt.trim() ? \r\n                          await (async () => {\r\n                            const res = await apiClient.generateInstagramCaption(captionPrompt.trim());\r\n                            return res.content || carouselCaption || 'Check out this amazing carousel!';\r\n                          })() : carouselCaption;\r\n                        \r\n                        console.log('🔍 DEBUG: Carousel publish - finalCaption:', finalCaption);\r\n                        \r\n                        const response = await apiClient.postInstagramCarousel(\r\n                          selectedAccount.platform_user_id, \r\n                          finalCaption, \r\n                          carouselImages.slice(0, carouselCount)\r\n                        );\r\n                        \r\n                        if (response.success) {\r\n                          setMessage('Carousel post published successfully!');\r\n                          setCarouselImages([]);\r\n                          setCarouselCaption('');\r\n                          setCaptionPrompt('');\r\n                          setAutoGenerateCaption(false);\r\n                          setAiPrompt('');\r\n                          loadUserMedia(selectedAccount.platform_user_id);\r\n                        } else {\r\n                          setMessage('Failed to publish carousel: ' + (response.error || 'Unknown error'));\r\n                        }\r\n                      } catch (err) {\r\n                        setMessage('Error publishing carousel: ' + (err.message || err.toString()));\r\n                      } finally {\r\n                        setLoading(false);\r\n                      }\r\n                    }} \r\n                    disabled={loading || carouselImages.length < 3 || (!carouselCaption.trim() && !autoGenerateCaption)}\r\n                  >\r\n                    {loading ? 'Publishing...' : 'Publish Carousel'}\r\n                  </button>\r\n                </div>\r\n              )}\r\n              {/* Reel Post */}\r\n              {postType === 'reel' && (\r\n                <div className=\"post-card\">\r\n                  <div className=\"form-group\">\r\n                    <label>Upload Reel Video (.mp4, .mov)</label>\r\n                    <input type=\"file\" accept=\"video/mp4,video/quicktime,.mp4,.mov\" onChange={handleReelFileChange} disabled={reelUploading} />\r\n                    {reelUrl && (\r\n                      <div className=\"video-preview\">\r\n                        <video src={reelUrl} controls style={{ width: '100%', maxHeight: '300px' }} />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Upload Reel Thumbnail (optional):</label>\r\n                    <input type=\"file\" accept=\"image/png,image/jpeg,image/jpg\" onChange={handleReelThumbnailChange} disabled={!reelUrl} />\r\n                    {reelThumbnailUrl && (\r\n                      <div style={{ display: 'flex', alignItems: 'center', gap: 8, marginTop: 8 }}>\r\n                        <img src={reelThumbnailUrl} alt=\"Reel Thumbnail Preview\" style={{ maxWidth: 120, borderRadius: 8, border: '1px solid #eee' }} />\r\n                        <button type=\"button\" onClick={() => { setReelThumbnailUrl(''); setReelThumbnailFilename(''); setReelThumbnailFile(null); }} style={{ background: 'none', border: 'none', cursor: 'pointer', color: '#e53e3e', fontSize: 18 }} title=\"Remove thumbnail\">&times;</button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Caption</label>\r\n                    <div className=\"caption-section\">\r\n                      <div className=\"caption-toggle\">\r\n                        <label className=\"toggle-label\">\r\n                          <input \r\n                            type=\"checkbox\" \r\n                            checked={reelAutoGenerateCaption} \r\n                            onChange={e => setReelAutoGenerateCaption(e.target.checked)}\r\n                          />\r\n                          <span className=\"toggle-text\">Auto Generate Caption</span>\r\n                        </label>\r\n                      </div>\r\n                      {reelAutoGenerateCaption ? (\r\n                        <div className=\"caption-prompt-section\">\r\n                          <textarea \r\n                            value={reelCaptionPrompt} \r\n                            onChange={e => setReelCaptionPrompt(e.target.value)} \r\n                            placeholder=\"Describe what you want in the caption...\" \r\n                            rows={2} \r\n                            className=\"caption-prompt-textarea\" \r\n                          />\r\n                          <button \r\n                            onClick={handleReelAutoGenerateCaption} \r\n                            disabled={generatingReelCaption || !reelCaptionPrompt.trim()} \r\n                            className=\"generate-caption-button\"\r\n                          >\r\n                            {generatingReelCaption ? 'Generating...' : 'Generate Caption'}\r\n                          </button>\r\n                        </div>\r\n                      ) : null}\r\n                      <textarea \r\n                        value={reelCaption} \r\n                        onChange={e => setReelCaption(e.target.value)} \r\n                        placeholder={reelAutoGenerateCaption ? \"Caption will be generated...\" : \"Write your caption...\"} \r\n                        rows={3} \r\n                        className=\"post-textarea\" \r\n                        disabled={reelAutoGenerateCaption}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <button className=\"publish-button\" onClick={handlePublish} disabled={loading || !reelUrl || (!reelCaption.trim() && !reelAutoGenerateCaption)}>{loading ? 'Publishing...' : 'Publish Reel'}</button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n          {activeTab === 'media' && selectedAccount && (\r\n            <div className=\"media-section\">\r\n              <div className=\"media-header\"><h2>Recent Posts</h2><p>Your latest Instagram content</p></div>\r\n              {loadingMedia ? <div className=\"loading-media\"><div className=\"loading-spinner\"></div><p>Loading media...</p></div> : userMedia.length > 0 ? <div className=\"media-grid\">{userMedia.slice(0, 12).map((media) => <div key={media.id} className=\"media-item\"><div className=\"media-content\">{media.media_type === 'IMAGE' ? <img src={media.media_url} alt=\"Instagram post\" /> : media.media_type === 'VIDEO' ? <video controls><source src={media.media_url} type=\"video/mp4\" /></video> : null}</div><div className=\"media-overlay\"><div className=\"media-info\"><p className=\"media-caption\">{media.caption ? media.caption.substring(0, 100) + '...' : 'No caption'}</p><p className=\"media-date\">{new Date(media.timestamp).toLocaleDateString()}</p></div></div></div>)}</div> : <div className=\"no-media\"><h3>No Media Found</h3><p>No media found for this account. Start creating posts to see them here!</p></div>}\r\n            </div>\r\n          )}\r\n          {activeTab === 'bulk-composer' && selectedAccount && (\r\n            <IgBulkComposer selectedAccount={selectedAccount} onClose={() => {}} />\r\n          )}\r\n          {activeTab === 'scheduled-posts' && (\r\n            <ScheduledPostHistory />\r\n          )}\r\n        </div>\r\n              </div>\r\n              \r\n      {/* Google Drive Modal */}\r\n      {showDriveModal && (\r\n        <div className=\"modal-overlay\" onClick={() => setShowDriveModal(false)}>\r\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h3>Select from Google Drive</h3>\r\n              <button onClick={() => setShowDriveModal(false)} className=\"modal-close\">&times;</button>\r\n                </div>\r\n            <div className=\"modal-body\">\r\n              {!driveAuthenticated ? (\r\n                <div className=\"drive-auth\">\r\n                  <p>Connect to Google Drive to select files</p>\r\n                  <button onClick={authenticateGoogleDrive} disabled={driveAuthLoading} className=\"auth-button\">\r\n                    {driveAuthLoading ? 'Connecting...' : 'Connect Google Drive'}\r\n                  </button>\r\n                      </div>\r\n              ) : (\r\n                <div className=\"drive-files\">\r\n                  {loadingDriveFiles ? (\r\n                    <div className=\"loading-files\">\r\n                      <div className=\"loading-spinner\"></div>\r\n                      <p>Loading files...</p>\r\n                        </div>\r\n                  ) : driveFiles.length > 0 ? (\r\n                    <div className=\"files-grid\">\r\n                      {driveFiles.map((file) => (\r\n                        <div key={file.id} className=\"file-item\" onClick={() => handleDriveFileSelect(file.id, file.name)}>\r\n                          {file.thumbnailLink ? (\r\n                            <img src={file.thumbnailLink} alt={file.name} className=\"file-thumbnail\" />\r\n                          ) : (\r\n                            <div className=\"file-icon\"></div>\r\n                          )}\r\n                          <div className=\"file-info\">\r\n                            <p className=\"file-name\">{file.name}</p>\r\n                            <p className=\"file-size\">{file.size ? `${Math.round(file.size / 1024)} KB` : 'Unknown size'}</p>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                    <div className=\"no-files\">\r\n                      <p>No image files found in Google Drive</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* File Picker Modal */}\r\n      {showFilePicker && (\r\n        <div className=\"modal-overlay\" onClick={closeFilePicker}>\r\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h3>Select {filePickerType === 'photo' ? 'Photo' : 'Video'}</h3>\r\n              <button onClick={closeFilePicker} className=\"modal-close\">\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/>\r\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"/>\r\n                  </svg>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <div className=\"file-picker-options\">\r\n                <div \r\n                  className=\"file-option\" \r\n                  onClick={() => document.getElementById('local-file-input').click()}\r\n                  onTouchStart={(e) => e.preventDefault()}\r\n                >\r\n                  <div className=\"file-option-icon\">\r\n                    <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"/>\r\n                      <polyline points=\"14,2 14,8 20,8\"/>\r\n                      <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\"/>\r\n                      <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\"/>\r\n                      <polyline points=\"10,9 9,9 8,9\"/>\r\n                    </svg>\r\n                  </div>\r\n                  <div className=\"file-option-content\">\r\n                    <h4>From Device</h4>\r\n                    <p>Select a file from your computer</p>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div \r\n                  className={`file-option ${!googleDriveAvailable ? 'disabled' : ''}`} \r\n                  onClick={handleGoogleDriveSelect}\r\n                  onTouchStart={(e) => {\r\n                    if (!googleDriveAvailable) {\r\n                      e.preventDefault();\r\n                      return;\r\n                    }\r\n                    e.preventDefault();\r\n                    handleGoogleDriveSelect();\r\n                  }}\r\n                >\r\n                  <div className=\"file-option-icon\">\r\n                    <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"/>\r\n                      <polyline points=\"9,22 9,12 15,12 15,22\"/>\r\n                    </svg>\r\n                  </div>\r\n                  <div className=\"file-option-content\">\r\n                    <h4>From Google Drive</h4>\r\n                    <p>\r\n                      {googleDriveAvailable \r\n                        ? 'Select a file from your Google Drive' \r\n                        : 'Google Drive not configured. See setup guide.'\r\n                      }\r\n                    </p>\r\n                    {isLoadingGoogleDrive && (\r\n                      <div className=\"loading-indicator\">\r\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                          <path d=\"M21 12a9 9 0 11-6.219-8.56\"/>\r\n                        </svg>\r\n                        Loading...\r\n                </div>\r\n              )}\r\n                    {!googleDriveAvailable && (\r\n                      <div className=\"unavailable-indicator\">\r\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                          <circle cx=\"12\" cy=\"12\" r=\"10\"/>\r\n                          <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"/>\r\n                          <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"/>\r\n                        </svg>\r\n                        Not Available\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n              </div>\r\n              \r\n              {/* Hidden file input for local file selection */}\r\n              <input\r\n                id=\"local-file-input\"\r\n                type=\"file\"\r\n                accept={filePickerType === 'photo' ? 'image/*' : 'video/*'}\r\n                multiple={filePickerFormType === 'carousel'}\r\n                onChange={handleLocalFileSelect}\r\n                style={{ display: 'none' }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {globalAutoReplyEnabled && globalAutoReplyProgress && (\r\n        <div className=\"auto-reply-progress\" style={{ margin: '16px 0', padding: '12px', background: '#f5f5f5', borderRadius: '8px' }}>\r\n          <p><strong>Auto-Reply Progress:</strong> {globalAutoReplyProgress.status}</p>\r\n          {globalAutoReplyProgress.status === 'processing' && (\r\n            <p>Processing post {globalAutoReplyProgress.current_post} of {globalAutoReplyProgress.total_posts}, comment {globalAutoReplyProgress.current_comment} of {globalAutoReplyProgress.total_comments}</p>\r\n          )}\r\n          {globalAutoReplyProgress.status === 'done' && <p>All comments processed!</p>}\r\n          {globalAutoReplyProgress.details && <p>{globalAutoReplyProgress.details}</p>}\r\n        </div>\r\n      )}\r\n      {apiError && (\r\n        <div className=\"api-error\" style={{ color: 'red', margin: '12px 0' }}>\r\n          <p>Error: {apiError}</p>\r\n          <button onClick={() => { setApiError(null); setRetrying(true); setTimeout(() => { setRetrying(false); window.location.reload(); }, 500); }}>Retry</button>\r\n          {retrying && <span>Retrying...</span>}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InstagramPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}