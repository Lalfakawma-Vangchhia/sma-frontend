{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\THORSIGNIA\\\\Projects\\\\automation-dash\\\\frontend\\\\src\\\\components\\\\InstagramPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport apiClient from '../services/apiClient';\nimport { useAuth } from '../contexts/AuthContext';\nimport IgBulkComposer from './igBulkComposer';\nimport './InstagramPage.css';\nimport ScheduledPostHistory from './ScheduledPostHistory';\nimport { loadFacebookSDK } from './FacebookUtils';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ACCEPTED_IMAGE_TYPES = ['image/png', 'image/jpeg', 'image/jpg'];\nconst ACCEPTED_VIDEO_TYPES = ['video/mp4', 'video/quicktime'];\nconst InstagramPage = () => {\n  _s();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    isAuthenticated,\n    loading: authLoading,\n    user\n  } = useAuth();\n\n  // UI State\n  const [isConnected, setIsConnected] = useState(false);\n  const [instagramAccounts, setInstagramAccounts] = useState([]);\n  const [selectedAccount, setSelectedAccount] = useState('');\n  const [activeTab, setActiveTab] = useState('connect');\n  const [sdkLoaded, setSdkLoaded] = useState(false);\n  const [fbAccessToken, setFbAccessToken] = useState(null);\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // Post State\n  const [postType, setPostType] = useState('photo'); // photo | carousel | reel\n  const [caption, setCaption] = useState('');\n  const [aiPrompt, setAiPrompt] = useState('');\n  const [aiGenerating, setAiGenerating] = useState(false);\n  const [aiImageUrl, setAiImageUrl] = useState('');\n  const [imageSource, setImageSource] = useState('ai'); // ai | upload | drive\n  const [uploadedImageUrl, setUploadedImageUrl] = useState('');\n  const [uploadingImage, setUploadingImage] = useState(false);\n  const [selectedImageFile, setSelectedImageFile] = useState(null);\n  const [autoGenerateCaption, setAutoGenerateCaption] = useState(false);\n  const [captionPrompt, setCaptionPrompt] = useState('');\n  const [generatingCaption, setGeneratingCaption] = useState(false);\n  const [rateLimitCooldown, setRateLimitCooldown] = useState(0);\n\n  // Strategy Template State\n  const [strategyData, setStrategyData] = useState({\n    promptTemplate: '',\n    brandName: '',\n    hookIdea: '',\n    features: '',\n    location: '',\n    phone: '',\n    website: '',\n    callToAction: '',\n    imagePrompt: '',\n    customStrategyTemplate: ''\n  });\n  const [showStrategyModal, setShowStrategyModal] = useState(false);\n  const [strategyTemplates, setStrategyTemplates] = useState([{\n    id: 'default',\n    name: 'Default Template',\n    prompt: 'Generate a catchy Instagram caption for this post.'\n  }, {\n    id: 'product',\n    name: 'Product Showcase',\n    prompt: 'Create an engaging caption highlighting the key features and benefits of this product.'\n  }, {\n    id: 'event',\n    name: 'Event Promotion',\n    prompt: 'Write an exciting caption to promote this event, including date, time, and location.'\n  }, {\n    id: 'custom',\n    name: 'Custom Template',\n    prompt: ''\n  }]);\n\n  // Carousel State\n  const [carouselImages, setCarouselImages] = useState([]); // URLs\n  const [carouselFiles, setCarouselFiles] = useState([]); // File objects\n  const [carouselCount, setCarouselCount] = useState(3);\n  const [carouselCaption, setCarouselCaption] = useState('');\n  const [carouselGenerating, setCarouselGenerating] = useState(false);\n\n  // Reel State\n  const [reelFile, setReelFile] = useState(null);\n  const [reelUrl, setReelUrl] = useState('');\n  const [reelFilename, setReelFilename] = useState('');\n  const [reelCaption, setReelCaption] = useState('');\n  const [reelUploading, setReelUploading] = useState(false);\n  const [reelAutoGenerateCaption, setReelAutoGenerateCaption] = useState(false);\n  const [reelCaptionPrompt, setReelCaptionPrompt] = useState('');\n  const [generatingReelCaption, setGeneratingReelCaption] = useState(false);\n  // Thumbnail State for Reel\n  const [reelThumbnailFile, setReelThumbnailFile] = useState(null);\n  const [reelThumbnailUrl, setReelThumbnailUrl] = useState('');\n  const [reelThumbnailFilename, setReelThumbnailFilename] = useState('');\n\n  // Media Gallery\n  const [userMedia, setUserMedia] = useState([]);\n  const [loadingMedia, setLoadingMedia] = useState(false);\n\n  // Google Drive Integration\n  const [showDriveModal, setShowDriveModal] = useState(false);\n  const [driveFiles, setDriveFiles] = useState([]);\n  const [loadingDriveFiles, setLoadingDriveFiles] = useState(false);\n  const [driveAuthenticated, setDriveAuthenticated] = useState(false);\n  const [driveAuthLoading, setDriveAuthLoading] = useState(false);\n\n  // Auto-Reply State\n  const [autoReplyEnabled, setAutoReplyEnabled] = useState(false);\n  const [autoReplyTemplate, setAutoReplyTemplate] = useState('Thank you for your comment! We appreciate your engagement. ðŸ˜Š');\n  const [autoReplyPosts, setAutoReplyPosts] = useState([]);\n  const [selectedAutoReplyPosts, setSelectedAutoReplyPosts] = useState([]);\n  const [autoReplyLoading, setAutoReplyLoading] = useState(false);\n  const [loadingAutoReplyPosts, setLoadingAutoReplyPosts] = useState(false);\n  const [isSelectingPosts, setIsSelectingPosts] = useState(false);\n\n  // DM Auto-Reply State\n  const [dmAutoReplyEnabled, setDmAutoReplyEnabled] = useState(false);\n  const [dmAutoReplyTemplate, setDmAutoReplyTemplate] = useState('Thanks for your message! I\\'ll get back to you soon. ðŸ˜Š');\n  const [dmAutoReplyLoading, setDmAutoReplyLoading] = useState(false);\n\n  // File Picker Modal State\n  const [showFilePicker, setShowFilePicker] = useState(false);\n  const [filePickerType, setFilePickerType] = useState(''); // 'photo' or 'video'\n  const [filePickerFormType, setFilePickerFormType] = useState(''); // 'manual' or 'carousel'\n  const [isLoadingGoogleDrive, setIsLoadingGoogleDrive] = useState(false);\n  const [googleDriveAvailable, setGoogleDriveAvailable] = useState(false);\n\n  // Bulk Composer State\n  const [showBulkComposer, setShowBulkComposer] = useState(false);\n\n  // Facebook SDK\n  const INSTAGRAM_APP_ID = process.env.REACT_APP_INSTAGRAM_APP_ID || '24054495060908418';\n\n  // Mobile detection utility\n  const isMobile = () => window.innerWidth <= 768;\n\n  // --- New: Global Auto-Reply State ---\n  const [globalAutoReplyEnabled, setGlobalAutoReplyEnabled] = useState(false);\n  const [globalAutoReplyLoading, setGlobalAutoReplyLoading] = useState(false);\n  const [globalAutoReplyStatus, setGlobalAutoReplyStatus] = useState(''); // For toast/feedback\n\n  // --- New: Global Auto-Reply Progress State ---\n  const [globalAutoReplyProgress, setGlobalAutoReplyProgress] = useState(null);\n\n  // --- New: Global Auto-Reply Error and Retry State ---\n  const [apiError, setApiError] = useState(null);\n  const [retrying, setRetrying] = useState(false);\n\n  // --- New: Toast Notification ---\n  const [toast, setToast] = useState({\n    show: false,\n    message: '',\n    type: 'info'\n  });\n  const showToast = (message, type = 'info') => {\n    setToast({\n      show: true,\n      message,\n      type\n    });\n    setTimeout(() => setToast({\n      show: false,\n      message: '',\n      type: 'info'\n    }), 3500);\n  };\n\n  // --- New: Global Auto-Reply API Logic ---\n  const handleGlobalAutoReplyToggle = async () => {\n    if (!selectedAccount) {\n      showToast('Please select an Instagram account first.', 'error');\n      return;\n    }\n    setGlobalAutoReplyLoading(true);\n    setApiError(null);\n    try {\n      if (!globalAutoReplyEnabled) {\n        const enableRes = await apiClient.enableGlobalInstagramAutoReply(selectedAccount.platform_user_id);\n        if (enableRes.success) {\n          setGlobalAutoReplyEnabled(true);\n          // eslint-disable-next-line no-undef\n          setGlobalAutoReplyStatus('enabled');\n          showToast('Auto-reply enabled for all posts and comments!', 'success');\n        } else {\n          setApiError(enableRes.error || 'Failed to enable auto-reply.');\n          showToast('Failed to enable auto-reply: ' + (enableRes.error || 'Unknown error'), 'error');\n        }\n      } else {\n        const disableRes = await apiClient.disableGlobalInstagramAutoReply(selectedAccount.platform_user_id);\n        if (disableRes.success) {\n          setGlobalAutoReplyEnabled(false);\n          // eslint-disable-next-line no-undef\n          setGlobalAutoReplyStatus('disabled');\n          showToast('Auto-reply disabled.', 'info');\n        } else {\n          setApiError(disableRes.error || 'Failed to disable auto-reply.');\n          showToast('Failed to disable auto-reply: ' + (disableRes.error || 'Unknown error'), 'error');\n        }\n      }\n    } catch (err) {\n      setApiError(err.message || JSON.stringify(err));\n      showToast('Error: ' + (err.message || err.toString()), 'error');\n    } finally {\n      setGlobalAutoReplyLoading(false);\n    }\n  };\n\n  // --- New: Fetch initial global auto-reply status on account select ---\n  useEffect(() => {\n    const fetchGlobalAutoReplyStatus = async () => {\n      if (!selectedAccount) return;\n      try {\n        const statusRes = await apiClient.getGlobalInstagramAutoReplyStatus(selectedAccount.platform_user_id);\n        setGlobalAutoReplyEnabled(!!statusRes.enabled);\n        // eslint-disable-next-line no-undef\n        setGlobalAutoReplyStatus(statusRes.enabled ? 'enabled' : 'disabled');\n      } catch (err) {\n        setGlobalAutoReplyEnabled(false);\n        // eslint-disable-next-line no-undef\n        setGlobalAutoReplyStatus('disabled');\n      }\n    };\n    fetchGlobalAutoReplyStatus();\n  }, [selectedAccount]);\n\n  // --- New: Poll for global auto-reply progress when enabled ---\n  useEffect(() => {\n    let intervalId;\n    const pollProgress = async () => {\n      if (!selectedAccount || !globalAutoReplyEnabled) return;\n      try {\n        const res = await apiClient.getGlobalInstagramAutoReplyProgress(selectedAccount.platform_user_id);\n        if (res.success) {\n          setGlobalAutoReplyProgress(res.progress);\n          setApiError(null);\n        }\n      } catch (err) {\n        setApiError(err.message || JSON.stringify(err));\n        // Optionally, showToast('Progress error: ' + (err.message || err.toString()), 'error');\n      }\n    };\n    if (globalAutoReplyEnabled && selectedAccount) {\n      pollProgress();\n      intervalId = setInterval(pollProgress, 3000);\n    } else {\n      setGlobalAutoReplyProgress(null);\n    }\n    return () => intervalId && clearInterval(intervalId);\n  }, [globalAutoReplyEnabled, selectedAccount]);\n\n  // --- Facebook SDK Helpers ---\n  const checkLoginStatus = () => {\n    if (!window.FB || !isAuthenticated) return;\n    window.FB.getLoginStatus(response => {\n      if (response.status === 'connected') {\n        setFbAccessToken(response.authResponse.accessToken);\n        setMessage('Instagram: Using existing Facebook login session');\n        handleConnectInstagram(response.authResponse.accessToken);\n      } else {\n        setMessage('Instagram: Please connect your Facebook account to continue');\n      }\n    });\n  };\n  const initializeFacebookSDK = () => {\n    if (window.FB) {\n      window.FB.init({\n        appId: INSTAGRAM_APP_ID,\n        cookie: true,\n        xfbml: true,\n        version: 'v18.0'\n      });\n      setSdkLoaded(true);\n      checkLoginStatus();\n      return;\n    }\n    window.fbAsyncInit = function () {\n      window.FB.init({\n        appId: INSTAGRAM_APP_ID,\n        cookie: true,\n        xfbml: true,\n        version: 'v18.0'\n      });\n      setSdkLoaded(true);\n      checkLoginStatus();\n    };\n    (function (d, s, id) {\n      var js,\n        fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) return;\n      js = d.createElement(s);\n      js.id = id;\n      js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, 'script', 'facebook-jssdk');\n  };\n  useEffect(() => {\n    if (isAuthenticated && !authLoading) {\n      loadFacebookSDK(process.env.REACT_APP_FACEBOOK_APP_ID || '697225659875731').then(() => {\n        checkLoginStatus();\n        checkGoogleDriveAvailability();\n      });\n    }\n  }, [isAuthenticated, authLoading]);\n  useEffect(() => {\n    checkLoginStatus();\n    initializeFacebookSDK();\n    // eslint-disable-next-line\n  }, [INSTAGRAM_APP_ID, isAuthenticated]);\n  useEffect(() => {\n    if (isAuthenticated) {\n      setInstagramAccounts([]); // Clear previous state\n      setSelectedAccount('');\n      setIsConnected(false);\n      setActiveTab('connect');\n      setMessage('');\n      // Fetch new user's Instagram accounts\n      apiClient.getInstagramAccounts().then(accounts => setInstagramAccounts(accounts));\n    }\n  }, [isAuthenticated]);\n\n  // --- Instagram Connect ---\n  const handleConnectInstagram = async (accessToken = fbAccessToken) => {\n    if (!isAuthenticated) {\n      setMessage('Please log in to your account first before connecting Instagram.');\n      setLoading(false);\n      return;\n    }\n    if (!accessToken) {\n      setMessage('No access token available. Please log in with Facebook first.');\n      setLoading(false);\n      return;\n    }\n    setLoading(true);\n    try {\n      setMessage('Fetching Instagram Business accounts...');\n      const response = await apiClient.connectInstagram(accessToken);\n\n      // Fetch the full list of social accounts from the backend\n      const allAccounts = await apiClient.getSocialAccounts();\n      // Filter for Instagram accounts\n      const instagramAccountsFromBackend = allAccounts.filter(acc => acc.platform === 'instagram');\n\n      // Map and merge info for display\n      const mappedAccounts = instagramAccountsFromBackend.map(account => ({\n        id: account.id,\n        // Internal DB ID\n        platform_user_id: account.platform_user_id,\n        // Instagram user ID\n        username: account.username,\n        name: account.display_name || account.page_name,\n        followers_count: account.follower_count || 0,\n        media_count: account.media_count || 0,\n        profile_picture_url: account.profile_picture_url\n      }));\n      setInstagramAccounts(mappedAccounts);\n      setIsConnected(true);\n      setMessage(`Found ${mappedAccounts.length} Instagram Business account(s)!`);\n      if (mappedAccounts.length === 1) {\n        setSelectedAccount(mappedAccounts[0]);\n        loadUserMedia(mappedAccounts[0].platform_user_id);\n      }\n    } catch (error) {\n      setMessage(error.message || 'Unknown error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFacebookLogin = () => {\n    if (!window.FB) {\n      setMessage('Facebook SDK not loaded');\n      return;\n    }\n    setLoading(true);\n    setMessage('Initiating Instagram OAuth via Facebook...');\n    window.FB.login(response => {\n      if (response.status === 'connected') {\n        const accessToken = response.authResponse.accessToken;\n        setFbAccessToken(accessToken);\n        setMessage('Facebook login successful! Connecting Instagram accounts...');\n        handleConnectInstagram(accessToken);\n      } else {\n        setMessage('Facebook login failed or was cancelled');\n        setLoading(false);\n      }\n    }, {\n      scope: 'pages_show_list,instagram_basic,instagram_content_publish,pages_read_engagement, business_management'\n    });\n  };\n\n  // --- Media Loading ---\n  const loadUserMedia = async instagramUserId => {\n    setLoadingMedia(true);\n    try {\n      var _media$data;\n      const media = await apiClient.getInstagramMedia(instagramUserId);\n      setUserMedia((media === null || media === void 0 ? void 0 : (_media$data = media.data) === null || _media$data === void 0 ? void 0 : _media$data.media) || []);\n    } catch (error) {\n      setMessage(`Error loading media: ${error.message}`);\n    } finally {\n      setLoadingMedia(false);\n    }\n  };\n\n  // --- Image Upload ---\n  const handleImageChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    if (!ACCEPTED_IMAGE_TYPES.includes(file.type)) {\n      setMessage('Please select a PNG or JPG image');\n      return;\n    }\n\n    // Debug authentication status\n    console.log('ðŸ” DEBUG: Authentication check before upload');\n    console.log('ðŸ” DEBUG: isAuthenticated:', isAuthenticated);\n    console.log('ðŸ” DEBUG: user:', user);\n    console.log('ðŸ” DEBUG: apiClient token exists:', !!apiClient.token);\n    setUploadingImage(true);\n    setMessage('Uploading image...');\n    try {\n      const res = await apiClient.uploadImageToCloudinary(file);\n      if (res && res.success && res.data && res.data.url) {\n        setUploadedImageUrl(res.data.url);\n        setAiImageUrl(res.data.url);\n        setSelectedImageFile(file);\n        setMessage('Image uploaded successfully!');\n      } else {\n        throw new Error((res === null || res === void 0 ? void 0 : res.error) || 'Upload failed');\n      }\n    } catch (err) {\n      console.error('ðŸ” DEBUG: Upload error details:', err);\n      setMessage(`Image upload failed: ${err.message}`);\n    } finally {\n      setUploadingImage(false);\n    }\n  };\n\n  // --- AI Image Generation ---\n  const handleGenerateAIImage = async () => {\n    if (!aiPrompt.trim()) {\n      setMessage('Please enter a prompt for image generation.');\n      return;\n    }\n    setAiGenerating(true);\n    setMessage('Generating Instagram-optimized image with AI...');\n    try {\n      console.log('ðŸ” DEBUG: Generating Instagram image with prompt:', aiPrompt.trim());\n      const res = await apiClient.generateInstagramImage(aiPrompt.trim());\n      console.log('ðŸ” DEBUG: Image generation response:', res);\n      if (res && res.success && res.data && res.data.image_url) {\n        setAiImageUrl(res.data.image_url);\n        const dimensions = res.data.width && res.data.height ? `(${res.data.width}x${res.data.height})` : '';\n        setMessage(`AI image generated successfully! ${dimensions}`);\n        console.log('ðŸ” DEBUG: Generated image URL:', res.data.image_url);\n        console.log('ðŸ” DEBUG: Image dimensions:', res.data.width, 'x', res.data.height);\n        console.log('ðŸ” DEBUG: Enhanced prompt:', res.data.enhanced_prompt);\n      } else if (res && res.data && res.data.image_url) {\n        // Fallback for different response format\n        setAiImageUrl(res.data.image_url);\n        setMessage('AI image generated successfully!');\n        console.log('ðŸ” DEBUG: Generated image URL (fallback):', res.data.image_url);\n      } else {\n        console.error('ðŸ” DEBUG: Invalid response format:', res);\n        setMessage('Failed to generate image. Please try again.');\n      }\n    } catch (err) {\n      console.error('ðŸ” DEBUG: Image generation error:', err);\n\n      // Handle specific error types\n      let errorMessage = err.message || err.toString();\n      if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\n        errorMessage = 'Invalid or expired Stability AI API key. Please check your API key in the backend configuration.';\n      } else if (errorMessage.includes('429') || errorMessage.includes('Too Many Requests')) {\n        errorMessage = 'Rate limit exceeded. Please wait a few minutes before trying again, or upgrade your Stability AI plan.';\n        // Set a 5-minute cooldown\n        setRateLimitCooldown(300);\n        const cooldownInterval = setInterval(() => {\n          setRateLimitCooldown(prev => {\n            if (prev <= 1) {\n              clearInterval(cooldownInterval);\n              return 0;\n            }\n            return prev - 1;\n          });\n        }, 1000);\n      } else if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\n        errorMessage = 'Server error occurred. Please try again in a moment.';\n      } else if (errorMessage.includes('timeout')) {\n        errorMessage = 'Request timed out. Please try again.';\n      }\n      setMessage('Error generating image: ' + errorMessage);\n    } finally {\n      setAiGenerating(false);\n    }\n  };\n\n  // --- Auto Generate Caption ---\n  const handleAutoGenerateCaption = async () => {\n    if (!captionPrompt.trim()) {\n      setMessage('Please enter a prompt for caption generation.');\n      return;\n    }\n    setGeneratingCaption(true);\n    setMessage('Generating caption with AI...');\n    try {\n      console.log('ðŸ” DEBUG: Generating Instagram caption with prompt:', captionPrompt.trim());\n      const res = await apiClient.generateInstagramCaption(captionPrompt.trim());\n      console.log('ðŸ” DEBUG: Caption generation response:', res);\n      if (res && res.success && res.data && res.data.content) {\n        setCaption(res.data.content);\n        setMessage('Caption generated successfully!');\n        console.log('ðŸ” DEBUG: Generated caption:', res.data.content);\n      } else if (res && res.content) {\n        // Fallback for different response format\n        setCaption(res.content);\n        setMessage('Caption generated successfully!');\n        console.log('ðŸ” DEBUG: Generated caption (fallback):', res.content);\n      } else {\n        console.error('ðŸ” DEBUG: Invalid response format:', res);\n        setMessage('Failed to generate caption. Please try again.');\n      }\n    } catch (err) {\n      console.error('ðŸ” DEBUG: Caption generation error:', err);\n      setMessage('Error generating caption: ' + (err.message || err.toString()));\n    } finally {\n      setGeneratingCaption(false);\n    }\n  };\n\n  // --- Generate Image and Caption Together ---\n  const handleGenerateImageAndCaption = async () => {\n    if (!aiPrompt.trim()) {\n      setMessage('Please enter a prompt for generation.');\n      return;\n    }\n    setAiGenerating(true);\n    setGeneratingCaption(true);\n    setMessage('Generating Instagram-optimized image and caption with AI...');\n    try {\n      console.log('ðŸ” DEBUG: Generating image and caption with prompt:', aiPrompt.trim());\n\n      // Generate image first\n      const imageRes = await apiClient.generateInstagramImage(aiPrompt.trim());\n      console.log('ðŸ” DEBUG: Image generation response:', imageRes);\n      if (!imageRes || !imageRes.success || !imageRes.data || !imageRes.data.image_url) {\n        throw new Error('Failed to generate image');\n      }\n      setAiImageUrl(imageRes.data.image_url);\n      console.log('ðŸ” DEBUG: Generated image URL:', imageRes.data.image_url);\n      console.log('ðŸ” DEBUG: Image dimensions:', imageRes.data.width, 'x', imageRes.data.height);\n\n      // Generate caption using the same prompt\n      const captionRes = await apiClient.generateInstagramCaption(aiPrompt.trim());\n      console.log('ðŸ” DEBUG: Caption generation response:', captionRes);\n      if (captionRes && captionRes.success && captionRes.data && captionRes.data.content) {\n        setCaption(captionRes.data.content);\n        console.log('ðŸ” DEBUG: Generated caption:', captionRes.data.content);\n      } else if (captionRes && captionRes.content) {\n        // Fallback for different response format\n        setCaption(captionRes.content);\n        console.log('ðŸ” DEBUG: Generated caption (fallback):', captionRes.content);\n      } else {\n        console.warn('ðŸ” DEBUG: Caption generation failed, using fallback');\n        setCaption(`Check out this amazing image! ${aiPrompt.trim()}`);\n      }\n      const dimensions = imageRes.data.width && imageRes.data.height ? `(${imageRes.data.width}x${imageRes.data.height})` : '';\n      setMessage(`Image and caption generated successfully! ${dimensions}`);\n    } catch (err) {\n      console.error('ðŸ” DEBUG: Image and caption generation error:', err);\n\n      // Handle specific error types\n      let errorMessage = err.message || err.toString();\n      if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\n        errorMessage = 'Invalid or expired Stability AI API key. Please check your API key in the backend configuration.';\n      } else if (errorMessage.includes('429') || errorMessage.includes('Too Many Requests')) {\n        errorMessage = 'Rate limit exceeded. Please wait a few minutes before trying again, or upgrade your Stability AI plan.';\n        // Set a 5-minute cooldown\n        setRateLimitCooldown(300);\n        const cooldownInterval = setInterval(() => {\n          setRateLimitCooldown(prev => {\n            if (prev <= 1) {\n              clearInterval(cooldownInterval);\n              return 0;\n            }\n            return prev - 1;\n          });\n        }, 1000);\n      } else if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\n        errorMessage = 'Server error occurred. Please try again in a moment.';\n      } else if (errorMessage.includes('timeout')) {\n        errorMessage = 'Request timed out. Please try again.';\n      }\n      setMessage('Error generating image and caption: ' + errorMessage);\n\n      // Clear any partial results on error\n      setAiImageUrl('');\n      setCaption('');\n    } finally {\n      setAiGenerating(false);\n      setGeneratingCaption(false);\n    }\n  };\n\n  // --- Retry Image Generation ---\n  const handleRetryImageGeneration = async () => {\n    if (!aiPrompt.trim()) {\n      setMessage('Please enter a prompt for image generation.');\n      return;\n    }\n    setAiGenerating(true);\n    setMessage('Retrying image generation...');\n    try {\n      console.log('ðŸ” DEBUG: Retrying image generation with prompt:', aiPrompt.trim());\n      const res = await apiClient.generateInstagramImage(aiPrompt.trim());\n      console.log('ðŸ” DEBUG: Retry image generation response:', res);\n      if (res && res.success && res.data && res.data.image_url) {\n        setAiImageUrl(res.data.image_url);\n        setMessage('Image generated successfully on retry!');\n        console.log('ðŸ” DEBUG: Generated image URL (retry):', res.data.image_url);\n      } else if (res && res.data && res.data.image_url) {\n        // Fallback for different response format\n        setAiImageUrl(res.data.image_url);\n        setMessage('Image generated successfully on retry!');\n        console.log('ðŸ” DEBUG: Generated image URL (retry fallback):', res.data.image_url);\n      } else {\n        console.error('ðŸ” DEBUG: Invalid response format on retry:', res);\n        setMessage('Failed to generate image on retry. Please try again.');\n      }\n    } catch (err) {\n      console.error('ðŸ” DEBUG: Retry image generation error:', err);\n\n      // Handle specific error types\n      let errorMessage = err.message || err.toString();\n      if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\n        errorMessage = 'Invalid or expired Stability AI API key. Please check your API key in the backend configuration.';\n      } else if (errorMessage.includes('429') || errorMessage.includes('Too Many Requests')) {\n        errorMessage = 'Rate limit exceeded. Please wait a few minutes before trying again, or upgrade your Stability AI plan.';\n        // Set a 5-minute cooldown\n        setRateLimitCooldown(300);\n        const cooldownInterval = setInterval(() => {\n          setRateLimitCooldown(prev => {\n            if (prev <= 1) {\n              clearInterval(cooldownInterval);\n              return 0;\n            }\n            return prev - 1;\n          });\n        }, 1000);\n      } else if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\n        errorMessage = 'Server error occurred. Please try again in a moment.';\n      } else if (errorMessage.includes('timeout')) {\n        errorMessage = 'Request timed out. Please try again.';\n      }\n      setMessage('Error retrying image generation: ' + errorMessage);\n    } finally {\n      setAiGenerating(false);\n    }\n  };\n\n  // --- Carousel Upload ---\n  const handleCarouselFilesChange = async e => {\n    const files = Array.from(e.target.files);\n    if (files.length < 3 || files.length > 7) {\n      setMessage('Please select 3 to 7 images.');\n      return;\n    }\n    setCarouselGenerating(true);\n    setMessage('Uploading carousel images...');\n    try {\n      const urls = [];\n      for (const file of files) {\n        if (!ACCEPTED_IMAGE_TYPES.includes(file.type)) {\n          setMessage('All images must be PNG or JPG.');\n          setCarouselGenerating(false);\n          return;\n        }\n        const res = await apiClient.uploadImageToCloudinary(file);\n        if (res && res.success && res.data && res.data.url) {\n          urls.push(res.data.url);\n        } else {\n          throw new Error((res === null || res === void 0 ? void 0 : res.error) || 'Upload failed');\n        }\n      }\n      setCarouselImages(urls);\n      setMessage(`Uploaded ${urls.length} images for carousel.`);\n    } catch (err) {\n      setMessage('Error uploading carousel images: ' + err.message);\n    } finally {\n      setCarouselGenerating(false);\n    }\n  };\n\n  // --- Carousel Auto Generate Caption ---\n  const handleCarouselAutoGenerateCaption = async () => {\n    if (!captionPrompt.trim()) {\n      setMessage('Please provide a prompt for caption generation.');\n      return;\n    }\n    setGeneratingCaption(true);\n    setMessage('Generating carousel caption...');\n    try {\n      const result = await apiClient.generateInstagramCaption(captionPrompt.trim());\n      if (result.success && result.content) {\n        setCarouselCaption(result.content);\n        setMessage('Caption generated successfully!');\n      } else {\n        setMessage('Failed to generate caption: ' + (result.error || 'Unknown error'));\n      }\n    } catch (err) {\n      setMessage('Error generating caption: ' + err.message);\n    } finally {\n      setGeneratingCaption(false);\n    }\n  };\n\n  // --- Reel Upload ---\n  const handleReelFileChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    if (!ACCEPTED_VIDEO_TYPES.includes(file.type)) {\n      setMessage('Only .mp4 or .mov files are allowed.');\n      return;\n    }\n    setReelUploading(true);\n    setMessage('Uploading video...');\n    try {\n      var _res$data;\n      const res = await apiClient.uploadVideoToCloudinary(file);\n      console.log('Video upload response:', res);\n\n      // Check for different response structures\n      if (res && res.success && (res.url || (_res$data = res.data) !== null && _res$data !== void 0 && _res$data.url)) {\n        var _res$data2, _res$data3;\n        const videoUrl = res.url || ((_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.url);\n        const filename = res.filename || ((_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.filename);\n        setReelUrl(videoUrl);\n        setReelFilename(filename || '');\n        // eslint-disable-next-line no-undef\n        setReelFile(file);\n        console.log('ðŸ” DEBUG: Video uploaded successfully:', {\n          videoUrl,\n          filename,\n          res\n        });\n        setMessage('Video uploaded successfully!');\n      } else if (res && res.data && res.data.url) {\n        // Alternative response structure\n        setReelUrl(res.data.url);\n        setReelFilename(res.data.filename || '');\n        // eslint-disable-next-line no-undef\n        setReelFile(file);\n        setMessage('Video uploaded successfully!');\n      } else {\n        throw new Error((res === null || res === void 0 ? void 0 : res.error) || (res === null || res === void 0 ? void 0 : res.message) || 'Upload failed');\n      }\n    } catch (err) {\n      console.error('Video upload error:', err);\n      setMessage('Error: ' + (err.message || err.toString()));\n    } finally {\n      setReelUploading(false);\n    }\n  };\n\n  // --- Reel Auto Generate Caption ---\n  const handleReelAutoGenerateCaption = async () => {\n    if (!reelCaptionPrompt.trim()) {\n      setMessage('Please provide a prompt for caption generation.');\n      return;\n    }\n    setGeneratingReelCaption(true);\n    setMessage('Generating reel caption...');\n    try {\n      const result = await apiClient.generateInstagramCaption(reelCaptionPrompt.trim());\n      if (result.success && result.content) {\n        setReelCaption(result.content);\n        setMessage('Reel caption generated successfully!');\n      } else {\n        setMessage('Failed to generate caption: ' + (result.error || 'Unknown error'));\n      }\n    } catch (err) {\n      setMessage('Error generating caption: ' + err.message);\n    } finally {\n      setGeneratingReelCaption(false);\n    }\n  };\n\n  // --- Reel Thumbnail Upload ---\n  const handleReelThumbnailChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    if (!ACCEPTED_IMAGE_TYPES.includes(file.type)) {\n      setMessage('Only .jpg, .jpeg, .png files are allowed for thumbnail.');\n      return;\n    }\n    setMessage('Uploading thumbnail image...');\n    try {\n      var _res$data4;\n      const res = await apiClient.uploadThumbnailToCloudinary(file);\n      if (res && res.success && (res.url || (_res$data4 = res.data) !== null && _res$data4 !== void 0 && _res$data4.url)) {\n        var _res$data5, _res$data6;\n        const imageUrl = res.url || ((_res$data5 = res.data) === null || _res$data5 === void 0 ? void 0 : _res$data5.url);\n        const filename = res.filename || ((_res$data6 = res.data) === null || _res$data6 === void 0 ? void 0 : _res$data6.filename);\n        setReelThumbnailUrl(imageUrl);\n        setReelThumbnailFilename(filename || '');\n        // eslint-disable-next-line no-undef\n        setReelThumbnailFile(file);\n        console.log('ðŸ” DEBUG: Thumbnail uploaded successfully:', {\n          imageUrl,\n          filename,\n          res\n        });\n        setMessage('Thumbnail uploaded successfully!');\n      } else {\n        throw new Error((res === null || res === void 0 ? void 0 : res.error) || (res === null || res === void 0 ? void 0 : res.message) || 'Thumbnail upload failed');\n      }\n    } catch (err) {\n      setMessage('Error: ' + (err.message || err.toString()));\n    }\n  };\n\n  // --- Google Drive Integration ---\n  const checkGoogleDriveAuth = async () => {\n    try {\n      const response = await apiClient.getGoogleDriveStatus();\n      setDriveAuthenticated(response.authenticated);\n      return response.authenticated;\n    } catch (error) {\n      console.error('Error checking Google Drive auth:', error);\n      setDriveAuthenticated(false);\n      return false;\n    }\n  };\n  const authenticateGoogleDrive = async () => {\n    setDriveAuthLoading(true);\n    try {\n      const response = await apiClient.getGoogleDriveAuthorizeUrl();\n      if (response.consent_url) {\n        // Open popup for OAuth\n        const popup = window.open(response.consent_url, 'google-drive-auth', 'width=500,height=600,scrollbars=yes,resizable=yes');\n\n        // Listen for OAuth completion\n        const handleMessage = event => {\n          if (event.data.success) {\n            setDriveAuthenticated(true);\n            setMessage('Google Drive connected successfully!');\n            loadDriveFiles();\n          } else if (event.data.error) {\n            setMessage(`Google Drive authentication failed: ${event.data.error}`);\n          }\n          window.removeEventListener('message', handleMessage);\n          if (popup) popup.close();\n        };\n        window.addEventListener('message', handleMessage);\n      } else if (response.already_authenticated) {\n        setDriveAuthenticated(true);\n        setMessage('Google Drive already authenticated!');\n        loadDriveFiles();\n      }\n    } catch (error) {\n      setMessage(`Google Drive authentication error: ${error.message}`);\n    } finally {\n      setDriveAuthLoading(false);\n    }\n  };\n  const loadDriveFiles = async () => {\n    if (!driveAuthenticated) return;\n    setLoadingDriveFiles(true);\n    try {\n      const response = await apiClient.getGoogleDriveFiles('image/');\n      if (response.success && response.files) {\n        setDriveFiles(response.files);\n      } else {\n        setMessage('Failed to load Google Drive files');\n      }\n    } catch (error) {\n      setMessage(`Error loading Google Drive files: ${error.message}`);\n    } finally {\n      setLoadingDriveFiles(false);\n    }\n  };\n  const handleDriveFileSelect = async (fileId, fileName) => {\n    setUploadingImage(true);\n    setMessage('Downloading file from Google Drive...');\n    try {\n      const response = await apiClient.downloadGoogleDriveFile(fileId);\n      if (response.success && response.fileContent) {\n        // Convert base64 to blob and upload to Cloudinary\n        const byteCharacters = atob(response.fileContent);\n        const byteNumbers = new Array(byteCharacters.length);\n        for (let i = 0; i < byteCharacters.length; i++) {\n          byteNumbers[i] = byteCharacters.charCodeAt(i);\n        }\n        const byteArray = new Uint8Array(byteNumbers);\n        const blob = new Blob([byteArray], {\n          type: response.mimeType\n        });\n\n        // Create a File object from the blob\n        const file = new File([blob], fileName, {\n          type: response.mimeType\n        });\n\n        // Upload to Cloudinary\n        const uploadResponse = await apiClient.uploadImageToCloudinary(file);\n        if (uploadResponse.success && uploadResponse.data && uploadResponse.data.url) {\n          setUploadedImageUrl(uploadResponse.data.url);\n          setAiImageUrl(uploadResponse.data.url);\n          setMessage('File uploaded from Google Drive successfully!');\n          setShowDriveModal(false);\n        } else {\n          throw new Error(uploadResponse.error || 'Upload failed');\n        }\n      } else {\n        throw new Error(response.error || 'Download failed');\n      }\n    } catch (error) {\n      setMessage(`Error processing Google Drive file: ${error.message}`);\n    } finally {\n      setUploadingImage(false);\n    }\n  };\n  const openDriveModal = async () => {\n    const isAuth = await checkGoogleDriveAuth();\n    if (!isAuth) {\n      await authenticateGoogleDrive();\n    } else {\n      await loadDriveFiles();\n    }\n    setShowDriveModal(true);\n  };\n\n  // File Picker Functions\n  const openFilePicker = (type, formType) => {\n    setFilePickerType(type);\n    setFilePickerFormType(formType);\n    setShowFilePicker(true);\n  };\n  const closeFilePicker = () => {\n    setShowFilePicker(false);\n    setFilePickerType('');\n    setFilePickerFormType('');\n    setIsLoadingGoogleDrive(false);\n  };\n  const handleLocalFileSelect = event => {\n    const files = Array.from(event.target.files);\n    if (files.length === 0) return;\n    if (filePickerFormType === 'carousel') {\n      // Handle carousel upload\n      handleCarouselFilesChange({\n        target: {\n          files\n        }\n      });\n    } else {\n      // Handle single file upload\n      const file = files[0];\n      if (filePickerType === 'photo') {\n        handleImageChange({\n          target: {\n            files: [file]\n          }\n        });\n      } else if (filePickerType === 'video') {\n        handleReelFileChange({\n          target: {\n            files: [file]\n          }\n        });\n      }\n    }\n    closeFilePicker();\n  };\n  const handleGoogleDriveSelect = async () => {\n    setIsLoadingGoogleDrive(true);\n    try {\n      // Check if already authenticated\n      const status = await apiClient.getGoogleDriveStatus();\n      if (!status.authenticated) {\n        // Get consent URL for popup\n        const authResponse = await apiClient.getGoogleDriveAuthorizeUrl();\n        if (authResponse.consent_url) {\n          // Open popup and wait for completion\n          await openDriveAuthPopup(authResponse.consent_url);\n        }\n      }\n\n      // After popup closes, re-check authentication status\n      const finalStatus = await apiClient.getGoogleDriveStatus();\n      if (!finalStatus.authenticated) {\n        throw new Error('Authentication was not completed successfully');\n      }\n\n      // Update state and proceed with Google Drive picker\n      setGoogleDriveAvailable(true);\n\n      // Initialize Google Drive API\n      await loadGoogleDriveAPI();\n\n      // Check if google object is available\n      if (typeof window.google === 'undefined' || !window.google.picker) {\n        throw new Error('Google Picker API failed to load');\n      }\n\n      // Get fresh token for picker\n      const authResult = await apiClient.getGoogleDriveAuth();\n\n      // Open Google Drive picker\n      const picker = new window.google.picker.PickerBuilder().addView(new window.google.picker.DocsView().setIncludeFolders(true).setSelectFolderEnabled(false).setMimeTypes(filePickerType === 'photo' ? 'image/*' : 'video/*')).setOAuthToken(authResult.access_token).setDeveloperKey(process.env.REACT_APP_GOOGLE_DEVELOPER_KEY || '').setCallback(handleGoogleDriveCallback).enableFeature(window.google.picker.Feature.NAV_HIDDEN).enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED, filePickerFormType === 'carousel').setTitle(filePickerFormType === 'carousel' ? 'Select multiple files from Google Drive' : 'Select a file from Google Drive').setSelectableMimeTypes(filePickerType === 'photo' ? 'image/*' : 'video/*').build();\n      picker.setVisible(true);\n    } catch (error) {\n      console.error('Error with Google Drive selection:', error);\n      setMessage(`Google Drive error: ${error.message}`);\n    } finally {\n      setIsLoadingGoogleDrive(false);\n    }\n  };\n  const loadGoogleDriveAPI = () => {\n    return new Promise((resolve, reject) => {\n      if (window.google && window.google.picker) {\n        resolve();\n        return;\n      }\n      const script = document.createElement('script');\n      script.src = 'https://apis.google.com/js/api.js';\n      script.onload = () => {\n        if (window.gapi) {\n          window.gapi.load('picker', () => {\n            resolve();\n          });\n        } else {\n          reject(new Error('Google API failed to load'));\n        }\n      };\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n  };\n  const openDriveAuthPopup = authUrl => {\n    return new Promise((resolve, reject) => {\n      const popup = window.open(authUrl, 'google-drive-auth', 'width=500,height=600,scrollbars=yes,resizable=yes');\n      const messageHandler = event => {\n        if (event.data.success) {\n          setGoogleDriveAvailable(true);\n          setMessage('Google Drive connected successfully!');\n          resolve();\n        } else if (event.data.error) {\n          setMessage(`Google Drive authentication failed: ${event.data.error}`);\n          reject(new Error(event.data.error));\n        }\n        window.removeEventListener('message', messageHandler);\n        if (popup) popup.close();\n      };\n      window.addEventListener('message', messageHandler);\n\n      // Timeout after 5 minutes\n      setTimeout(() => {\n        window.removeEventListener('message', messageHandler);\n        if (popup) popup.close();\n        reject(new Error('Authentication timeout'));\n      }, 300000);\n    });\n  };\n  const handleGoogleDriveCallback = async data => {\n    if (data.action === window.google.picker.Action.PICKED) {\n      const files = data.docs;\n      try {\n        if (filePickerFormType === 'carousel') {\n          // Handle multiple files for carousel\n          const fileObjects = [];\n          for (const file of files) {\n            const fileContent = await downloadGoogleDriveFile(file.id);\n            const blob = new Blob([fileContent], {\n              type: file.mimeType\n            });\n            const fileObj = new File([blob], file.name, {\n              type: file.mimeType\n            });\n            fileObjects.push(fileObj);\n          }\n          handleCarouselFilesChange({\n            target: {\n              files: fileObjects\n            }\n          });\n        } else {\n          // Handle single file\n          const file = files[0];\n          const fileContent = await downloadGoogleDriveFile(file.id);\n          const blob = new Blob([fileContent], {\n            type: file.mimeType\n          });\n          const fileObj = new File([blob], file.name, {\n            type: file.mimeType\n          });\n          if (filePickerType === 'photo') {\n            handleImageChange({\n              target: {\n                files: [fileObj]\n              }\n            });\n          } else if (filePickerType === 'video') {\n            handleReelFileChange({\n              target: {\n                files: [fileObj]\n              }\n            });\n          }\n        }\n        closeFilePicker();\n        setMessage('File(s) selected from Google Drive successfully!');\n      } catch (error) {\n        console.error('Error downloading file from Google Drive:', error);\n        setMessage('Failed to download file from Google Drive: ' + error.message);\n      }\n    }\n  };\n  const downloadGoogleDriveFile = async fileId => {\n    try {\n      const response = await apiClient.downloadGoogleDriveFile(fileId);\n      if (response.success && response.fileContent) {\n        // Convert base64 to blob\n        const byteCharacters = atob(response.fileContent);\n        const byteNumbers = new Array(byteCharacters.length);\n        for (let i = 0; i < byteCharacters.length; i++) {\n          byteNumbers[i] = byteCharacters.charCodeAt(i);\n        }\n        const byteArray = new Uint8Array(byteNumbers);\n        return byteArray;\n      } else {\n        throw new Error(response.error || 'Download failed');\n      }\n    } catch (error) {\n      throw new Error(`Failed to download file: ${error.message}`);\n    }\n  };\n\n  // --- Post Submission ---\n  const handlePublish = async () => {\n    if (!selectedAccount) {\n      setMessage('Please select an Instagram account first');\n      return;\n    }\n    if (postType === 'photo' && (!aiImageUrl || !aiImageUrl.trim()) && (!uploadedImageUrl || !uploadedImageUrl.trim())) {\n      setMessage('Please select or generate an image');\n      return;\n    }\n    if (postType === 'carousel' && carouselImages.length === 0) {\n      setMessage('Please generate or upload carousel images');\n      return;\n    }\n    if (postType === 'reel' && !reelUrl) {\n      setMessage('Please upload a video for the reel');\n      return;\n    }\n    setLoading(true);\n    setMessage('Creating Instagram post...');\n    try {\n      // Use the unified Instagram post endpoint for all post types\n      const options = {\n        instagram_user_id: selectedAccount.platform_user_id,\n        post_type: postType === 'photo' ? 'feed' : postType === 'reel' ? 'reel' : postType,\n        media_type: postType === 'reel' ? 'video' : 'image' // <-- robust: send 'video' for reels\n      };\n\n      // Handle different post types\n      if (postType === 'photo') {\n        options.caption = caption;\n        const imageUrl = imageSource === 'ai' ? aiImageUrl : uploadedImageUrl;\n        if (imageUrl && imageUrl.trim()) {\n          options.image_url = imageUrl;\n        } else {\n          // If no image is available, we can't create a photo post\n          setMessage('Please select or generate an image before creating a photo post');\n          setLoading(false);\n          return;\n        }\n        console.log('ðŸ” DEBUG: Photo post options:', {\n          postType,\n          imageSource,\n          aiImageUrl,\n          uploadedImageUrl,\n          finalImageUrl: options.image_url,\n          caption: options.caption\n        });\n      } else if (postType === 'carousel') {\n        // For carousel, we need to use the carousel-specific endpoint\n        const response = await apiClient.postInstagramCarousel(selectedAccount.platform_user_id, carouselCaption, carouselImages);\n        if (response.success) {\n          setMessage('Instagram carousel post created successfully!');\n          // Reset form\n          setCarouselImages([]);\n          setCarouselCaption('');\n          setCaptionPrompt('');\n          setAutoGenerateCaption(false);\n          setAiPrompt('');\n\n          // Reload user media\n          if (selectedAccount) {\n            loadUserMedia(selectedAccount.platform_user_id);\n          }\n        } else {\n          setMessage(`Failed to create carousel post: ${response.error}`);\n        }\n        setLoading(false);\n        return;\n      } else if (postType === 'reel') {\n        options.caption = reelCaption;\n        // Always use Cloudinary URL for Reels\n        if (reelUrl && reelUrl.trim().startsWith('http')) {\n          options.video_url = reelUrl;\n        } else if (reelFilename && reelFilename.trim()) {\n          options.video_filename = reelFilename;\n        }\n        options.is_reel = true;\n        if (reelThumbnailUrl && reelThumbnailUrl.trim()) {\n          options.thumbnail_url = reelThumbnailUrl;\n        } else if (reelThumbnailFilename && reelThumbnailFilename.trim()) {\n          options.thumbnail_filename = reelThumbnailFilename;\n        }\n        options.media_type = 'video';\n        // Do NOT send media_file or media_filename for Reels\n        if ('media_file' in options) delete options.media_file;\n        if ('media_filename' in options) delete options.media_filename;\n        if ('image_url' in options) delete options.image_url;\n        console.log('ðŸ” DEBUG: Reel post options:', options);\n        console.log('ðŸ” DEBUG: Thumbnail state values:', {\n          reelThumbnailUrl,\n          reelThumbnailFilename,\n          hasThumbnailUrl: reelThumbnailUrl && reelThumbnailUrl.trim(),\n          hasThumbnailFilename: reelThumbnailFilename && reelThumbnailFilename.trim()\n        });\n      }\n\n      // Remove any empty string values from options to avoid backend validation issues\n      const cleanOptions = Object.fromEntries(Object.entries(options).filter(([key, value]) => value !== null && value !== undefined && value !== ''));\n\n      // Additional validation for photo posts\n      if (postType === 'photo' && !cleanOptions.image_url) {\n        setMessage('Photo posts require an image. Please select or generate an image first.');\n        setLoading(false);\n        return;\n      }\n\n      // Additional validation for reel posts\n      if (postType === 'reel' && !cleanOptions.video_url && !cleanOptions.video_filename) {\n        setMessage('Reel posts require a video. Please upload a video first.');\n        setLoading(false);\n        return;\n      }\n      console.log('ðŸ” DEBUG: Calling createUnifiedInstagramPost with:', {\n        instagramUserId: selectedAccount.platform_user_id,\n        options: cleanOptions,\n        originalPostType: postType,\n        originalOptions: options,\n        reelUrl: reelUrl,\n        reelFilename: reelFilename\n      });\n      console.log('ðŸ” DEBUG: Final thumbnail state before API call:', {\n        reelThumbnailUrl,\n        reelThumbnailFilename,\n        hasThumbnailUrl: reelThumbnailUrl && reelThumbnailUrl.trim(),\n        hasThumbnailFilename: reelThumbnailFilename && reelThumbnailFilename.trim(),\n        cleanOptionsHasThumbnail: cleanOptions.thumbnail_url || cleanOptions.thumbnail_filename\n      });\n      const response = await apiClient.createUnifiedInstagramPost(selectedAccount.platform_user_id, cleanOptions);\n      if (response.success) {\n        setMessage('Instagram post created successfully!');\n        // Reset form\n        setCaption('');\n        setReelCaption('');\n        setReelCaptionPrompt('');\n        setReelAutoGenerateCaption(false);\n        setAiImageUrl('');\n        setUploadedImageUrl('');\n        setReelUrl('');\n        setReelFilename(''); // Clear the filename too\n        // eslint-disable-next-line no-undef\n        setReelFile(null);\n        setSelectedImageFile(null);\n        setAiPrompt('');\n        setCaptionPrompt('');\n        setReelThumbnailUrl('');\n        setReelThumbnailFilename('');\n        // eslint-disable-next-line no-undef\n        setReelThumbnailFile(null);\n        // Reload user media\n        if (selectedAccount) {\n          loadUserMedia(selectedAccount.platform_user_id);\n        }\n        // --- Synchronize account info for post count ---\n        try {\n          const allAccounts = await apiClient.getSocialAccounts();\n          const updatedAccount = allAccounts.find(acc => acc.id === selectedAccount.id);\n          if (updatedAccount) {\n            setSelectedAccount(updatedAccount);\n            setInstagramAccounts(prev => prev.map(acc => acc.id === updatedAccount.id ? updatedAccount : acc));\n          }\n        } catch (err) {\n          console.warn('Failed to refresh account info after post:', err);\n        }\n        setActiveTab('scheduled-posts');\n      } else {\n        let errorMsg = `Failed to create post: ${response.error || 'Unknown error'}`;\n        if (response.details) {\n          errorMsg += `\\nDetails: ${typeof response.details === 'string' ? response.details : JSON.stringify(response.details)}`;\n        }\n        setMessage(errorMsg);\n        console.error('Instagram post error:', response);\n      }\n    } catch (error) {\n      console.error('Error creating Instagram post:', error);\n      setMessage(`Error creating post: ${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Check Google Drive availability\n  const checkGoogleDriveAvailability = async () => {\n    try {\n      const status = await apiClient.getGoogleDriveStatus();\n      setGoogleDriveAvailable(status.authenticated);\n    } catch (error) {\n      console.error('Error checking Google Drive availability:', error);\n      setGoogleDriveAvailable(false);\n    }\n  };\n\n  // --- Logout ---\n  const handleLogout = () => {\n    setInstagramAccounts([]);\n    setSelectedAccount('');\n    setIsConnected(false);\n    setActiveTab('connect');\n    setMessage('Instagram accounts disconnected');\n  };\n\n  // Auto-Reply Functions\n  const loadAutoReplySettings = async () => {\n    if (!selectedAccount) return;\n    try {\n      console.log('ðŸ”„ Loading auto-reply settings for Instagram account:', selectedAccount.platform_user_id, selectedAccount.username);\n\n      // Get automation rules for Instagram auto-reply\n      const rules = await apiClient.getAutomationRules('instagram', 'auto_reply');\n      console.log('ðŸ“‹ Found automation rules:', rules);\n\n      // Find existing auto-reply rule for this account\n      const existingRule = rules.find(rule => rule.social_account_id === selectedAccount.id && rule.rule_type === 'AUTO_REPLY');\n      if (existingRule) {\n        var _existingRule$actions;\n        setAutoReplyEnabled(existingRule.is_active);\n        setAutoReplyTemplate(((_existingRule$actions = existingRule.actions) === null || _existingRule$actions === void 0 ? void 0 : _existingRule$actions.template) || '');\n        console.log('âœ… Found existing auto-reply rule:', existingRule);\n      } else {\n        setAutoReplyEnabled(false);\n        setAutoReplyTemplate('');\n        console.log('ðŸ“ No existing auto-reply rule found');\n      }\n\n      // Load posts for auto-reply selection\n      await loadPostsForAutoReply();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('âŒ Error loading auto-reply settings:', error);\n      let errorMessage = 'Failed to load auto-reply settings';\n      if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.detail) {\n        errorMessage += ': ' + error.response.data.detail;\n      } else if (error.message) {\n        errorMessage += ': ' + error.message;\n      }\n      setMessage(errorMessage);\n    }\n  };\n\n  // DM Auto-Reply Functions\n  const loadDmAutoReplySettings = async () => {\n    if (!selectedAccount) return;\n    try {\n      console.log('ðŸ”„ Loading DM auto-reply settings for Instagram account:', selectedAccount.platform_user_id, selectedAccount.username);\n      const statusResponse = await apiClient.getInstagramDmAutoReplyStatus(selectedAccount.platform_user_id);\n      console.log('ðŸ“‹ DM auto-reply status:', statusResponse);\n      if (statusResponse.success) {\n        setDmAutoReplyEnabled(statusResponse.enabled);\n        console.log('âœ… DM auto-reply status loaded:', statusResponse.enabled);\n      } else {\n        setDmAutoReplyEnabled(false);\n        showToast('Failed to load DM auto-reply status: ' + (statusResponse.error || 'Unknown error'), 'error');\n        console.log('ðŸ“ No DM auto-reply status found');\n      }\n    } catch (error) {\n      setDmAutoReplyEnabled(false);\n      showToast('Error loading DM auto-reply settings: ' + ((error === null || error === void 0 ? void 0 : error.message) || 'Unknown error'), 'error');\n      console.error('âŒ Error loading DM auto-reply settings:', error);\n    }\n  };\n  const handleDmAutoReplyToggle = async () => {\n    if (!selectedAccount) {\n      showToast('Please select an Instagram account first.', 'error');\n      return;\n    }\n    setDmAutoReplyLoading(true);\n    try {\n      const response = await apiClient.toggleInstagramDmAutoReply(selectedAccount.platform_user_id, !dmAutoReplyEnabled);\n      if (response.success) {\n        setDmAutoReplyEnabled(!dmAutoReplyEnabled);\n        showToast(!dmAutoReplyEnabled ? 'Auto DM Reply enabled successfully!' : 'Auto DM Reply disabled successfully.', 'success');\n      } else {\n        showToast('Failed to toggle Auto DM Reply: ' + (response.error || 'Unknown error'), 'error');\n        console.error('âŒ Failed to toggle Auto DM Reply:', response);\n      }\n    } catch (error) {\n      showToast('Failed to toggle Auto DM Reply: ' + ((error === null || error === void 0 ? void 0 : error.message) || 'Unknown error'), 'error');\n      console.error('âŒ Error toggling Auto DM Reply:', error);\n    } finally {\n      setDmAutoReplyLoading(false);\n    }\n  };\n  const loadPostsForAutoReply = async () => {\n    if (!selectedAccount) return;\n    try {\n      setLoadingAutoReplyPosts(true);\n      console.log('ðŸ”„ Loading posts for auto-reply selection for Instagram account:', selectedAccount.platform_user_id);\n\n      // First, try to get posts directly from the database\n      const response = await apiClient.getPosts('instagram');\n      console.log('ðŸ“‹ All Instagram posts from database:', response);\n      if (response && Array.isArray(response)) {\n        console.log('ðŸ” Selected account details:', {\n          id: selectedAccount.id,\n          platform_user_id: selectedAccount.platform_user_id,\n          username: selectedAccount.username\n        });\n\n        // Filter posts for this specific account with better debugging\n        const accountPosts = response.filter(post => {\n          var _post$social_account, _post$social_account2, _post$social_account3, _post$social_account4, _post$social_account5, _post$social_account6;\n          // Primary match: social_account_id (most reliable)\n          const matchesAccountId = ((_post$social_account = post.social_account) === null || _post$social_account === void 0 ? void 0 : _post$social_account.id) === selectedAccount.id;\n\n          // Secondary matches for compatibility\n          const matchesPlatformUserId = ((_post$social_account2 = post.social_account) === null || _post$social_account2 === void 0 ? void 0 : _post$social_account2.platform_user_id) === selectedAccount.platform_user_id;\n          const matchesUsername = ((_post$social_account3 = post.social_account) === null || _post$social_account3 === void 0 ? void 0 : _post$social_account3.username) === selectedAccount.username;\n          const isMatch = matchesAccountId || matchesPlatformUserId || matchesUsername;\n          console.log('ðŸ” Checking post:', {\n            postId: post.id,\n            postAccountId: (_post$social_account4 = post.social_account) === null || _post$social_account4 === void 0 ? void 0 : _post$social_account4.id,\n            postPlatformUserId: (_post$social_account5 = post.social_account) === null || _post$social_account5 === void 0 ? void 0 : _post$social_account5.platform_user_id,\n            postUsername: (_post$social_account6 = post.social_account) === null || _post$social_account6 === void 0 ? void 0 : _post$social_account6.username,\n            selectedAccountId: selectedAccount.id,\n            selectedPlatformUserId: selectedAccount.platform_user_id,\n            selectedUsername: selectedAccount.username,\n            matchesAccountId,\n            matchesPlatformUserId,\n            matchesUsername,\n            isMatch\n          });\n          return isMatch;\n        });\n        console.log('ðŸ“‹ Posts for this account:', accountPosts.length);\n        console.log('ðŸ“‹ All posts in database:', response.length);\n        console.log('ðŸ“‹ Account posts details:', accountPosts.map(post => {\n          var _post$content, _post$social_account7, _post$social_account8, _post$social_account9;\n          return {\n            id: post.id,\n            content: ((_post$content = post.content) === null || _post$content === void 0 ? void 0 : _post$content.substring(0, 50)) + '...',\n            social_account_id: (_post$social_account7 = post.social_account) === null || _post$social_account7 === void 0 ? void 0 : _post$social_account7.id,\n            platform_user_id: (_post$social_account8 = post.social_account) === null || _post$social_account8 === void 0 ? void 0 : _post$social_account8.platform_user_id,\n            username: (_post$social_account9 = post.social_account) === null || _post$social_account9 === void 0 ? void 0 : _post$social_account9.username\n          };\n        }));\n        if (accountPosts.length === 0) {\n          console.log('âš ï¸ No posts found for this specific account. Showing all Instagram posts for debugging...');\n\n          // Show all Instagram posts for debugging\n          setAutoReplyPosts(response);\n          console.log('ðŸ“‹ Showing all Instagram posts for debugging:', response.length);\n\n          // Also try to sync from Instagram API\n          console.log('ðŸ”„ Attempting to sync from Instagram...');\n          try {\n            const syncResponse = await apiClient.syncInstagramPosts(selectedAccount.platform_user_id);\n            console.log('ðŸ“¡ Sync response:', syncResponse);\n            if (syncResponse.success) {\n              // Re-fetch posts after sync\n              const refreshedResponse = await apiClient.getPosts('instagram');\n              const refreshedAccountPosts = refreshedResponse.filter(post => {\n                var _post$social_account0, _post$social_account1, _post$social_account10;\n                // Primary match: social_account_id (most reliable)\n                const matchesAccountId = ((_post$social_account0 = post.social_account) === null || _post$social_account0 === void 0 ? void 0 : _post$social_account0.id) === selectedAccount.id;\n\n                // Secondary matches for compatibility\n                const matchesPlatformUserId = ((_post$social_account1 = post.social_account) === null || _post$social_account1 === void 0 ? void 0 : _post$social_account1.platform_user_id) === selectedAccount.platform_user_id;\n                const matchesUsername = ((_post$social_account10 = post.social_account) === null || _post$social_account10 === void 0 ? void 0 : _post$social_account10.username) === selectedAccount.username;\n                return matchesAccountId || matchesPlatformUserId || matchesUsername;\n              });\n              if (refreshedAccountPosts.length > 0) {\n                setAutoReplyPosts(refreshedAccountPosts);\n                console.log('âœ… Posts loaded after sync:', refreshedAccountPosts.length);\n              } else {\n                console.log('âš ï¸ Still no posts found after sync. Showing all posts for debugging.');\n                setAutoReplyPosts(refreshedResponse);\n                setMessage('No posts found for this account. Showing all Instagram posts for debugging. Create some posts first using the Create Post tab.');\n              }\n            } else {\n              setMessage('Failed to sync posts from Instagram. Showing all posts for debugging.');\n            }\n          } catch (syncError) {\n            console.error('âŒ Sync error:', syncError);\n            setMessage('Failed to sync posts from Instagram. Showing all posts for debugging.');\n          }\n        } else {\n          setAutoReplyPosts(accountPosts);\n          console.log('âœ… Posts loaded for auto-reply selection:', accountPosts.length);\n        }\n      } else {\n        throw new Error('Failed to load posts');\n      }\n    } catch (error) {\n      console.error('âŒ Error loading posts for auto-reply:', error);\n\n      // Provide more specific error messages\n      let errorMessage = 'Failed to load posts for auto-reply selection';\n      if (error.message.includes('404')) {\n        errorMessage = 'Instagram account not found. Please reconnect your Instagram account.';\n      } else if (error.message.includes('401')) {\n        errorMessage = 'Authentication failed. Please log in again.';\n      } else if (error.message.includes('500')) {\n        errorMessage = 'Server error. Please try again later.';\n      }\n      setMessage(errorMessage);\n    } finally {\n      setLoadingAutoReplyPosts(false);\n    }\n  };\n  const handlePostSelection = postId => {\n    setSelectedAutoReplyPosts(prev => {\n      if (prev.includes(postId)) {\n        return prev.filter(id => id !== postId);\n      } else {\n        return [...prev, postId];\n      }\n    });\n  };\n  const handlePostTouch = (postId, event) => {\n    event.preventDefault();\n    handlePostSelection(postId);\n  };\n  const selectAllPosts = () => {\n    const allPostIds = autoReplyPosts.map(post => post.id);\n    setSelectedAutoReplyPosts(allPostIds);\n  };\n  const deselectAllPosts = () => {\n    setSelectedAutoReplyPosts([]);\n  };\n  const handleSelectPosts = () => {\n    setIsSelectingPosts(true);\n    // Load posts when entering selection mode\n    if (autoReplyPosts.length === 0) {\n      loadPostsForAutoReply();\n    }\n  };\n  const handleDoneSelecting = () => {\n    setIsSelectingPosts(false);\n  };\n  const handleAutoReplyToggle = async () => {\n    if (!selectedAccount) {\n      setMessage('Please select an Instagram account first');\n      return;\n    }\n\n    // Check if posts are available when enabling\n    if (!autoReplyEnabled && autoReplyPosts.length === 0) {\n      setMessage('No posts available for auto-reply. Please create some posts first.');\n      return;\n    }\n\n    // If enabling auto-reply without selected posts, auto-select all posts\n    if (!autoReplyEnabled && selectedAutoReplyPosts.length === 0) {\n      const allPostIds = autoReplyPosts.map(post => post.id);\n      setSelectedAutoReplyPosts(allPostIds);\n      console.log('Auto-selecting all posts for auto-reply:', allPostIds);\n    }\n\n    // Add mobile-friendly confirmation for enabling auto-reply\n    if (!autoReplyEnabled) {\n      const isMobile = window.innerWidth <= 768;\n      const postCount = selectedAutoReplyPosts.length > 0 ? selectedAutoReplyPosts.length : autoReplyPosts.length;\n      const confirmMessage = isMobile ? `Enable auto-reply for ${postCount} post(s)?` : `Enable auto-reply for ${postCount} post(s)? AI will automatically reply to comments mentioning the commenter.`;\n      if (!window.confirm(confirmMessage)) {\n        return;\n      }\n    }\n    setAutoReplyLoading(true);\n    try {\n      console.log('ðŸ”„ Toggling auto-reply for Instagram account:', selectedAccount.platform_user_id, selectedAccount.username);\n      console.log('ðŸ“ Selected post IDs:', selectedAutoReplyPosts);\n      console.log('ðŸŽ¯ New state will be:', !autoReplyEnabled);\n      const response = await apiClient.toggleInstagramAutoReply(selectedAccount.platform_user_id, !autoReplyEnabled, autoReplyTemplate, selectedAutoReplyPosts);\n      console.log('ðŸ“¡ Backend response:', response);\n      if (response.success) {\n        var _response$data, _response$data2, _response$data3;\n        setAutoReplyEnabled(!autoReplyEnabled);\n        const successMessage = !autoReplyEnabled ? isMobile() ? `Auto-reply enabled for ${((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.selected_posts_count) || selectedAutoReplyPosts.length} post(s)!` : `Auto-reply enabled successfully for ${((_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.selected_posts_count) || selectedAutoReplyPosts.length} post(s)! AI will automatically reply to comments mentioning the commenter.` : 'Auto-reply disabled successfully.';\n        setMessage(successMessage);\n        console.log('âœ… Auto-reply toggled successfully:', {\n          enabled: !autoReplyEnabled,\n          selectedPostsCount: (_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : _response$data3.selected_posts_count\n        });\n      } else {\n        throw new Error(response.error || 'Failed to toggle auto-reply');\n      }\n    } catch (error) {\n      console.error('âŒ Auto-reply toggle error:', error);\n      setMessage('Error toggling auto-reply: ' + (error.message || 'Unknown error'));\n    } finally {\n      setAutoReplyLoading(false);\n    }\n  };\n\n  // Load auto-reply settings when account is selected\n  useEffect(() => {\n    console.log('ðŸ” DEBUG: Auto-reply useEffect triggered');\n    console.log('ðŸ” DEBUG: selectedAccount:', selectedAccount);\n    console.log('ðŸ” DEBUG: activeTab:', activeTab);\n    if (selectedAccount && activeTab === 'auto-reply') {\n      console.log('ðŸ” DEBUG: Loading auto-reply settings');\n      loadAutoReplySettings();\n    }\n  }, [selectedAccount, activeTab]);\n\n  // Persist auto-reply state on page refresh\n  useEffect(() => {\n    if (selectedAccount && autoReplyEnabled) {\n      // Re-validate auto-reply state with backend\n      const validateAutoReplyState = async () => {\n        try {\n          const rules = await apiClient.getAutomationRules('instagram', 'auto_reply');\n          const socialAccounts = await apiClient.getSocialAccounts();\n          const instagramAccount = socialAccounts.find(acc => acc.platform === 'instagram' && acc.platform_user_id === selectedAccount.platform_user_id);\n          if (instagramAccount) {\n            const existingRule = rules.find(rule => rule.social_account_id === instagramAccount.id && rule.rule_type === 'AUTO_REPLY');\n            if (!existingRule || !existingRule.is_active) {\n              setAutoReplyEnabled(false);\n              setSelectedAutoReplyPosts([]);\n            }\n          }\n        } catch (error) {\n          console.error('Error validating auto-reply state:', error);\n        }\n      };\n      validateAutoReplyState();\n    }\n  }, [selectedAccount, autoReplyEnabled]);\n\n  // Load user media when account is selected\n  useEffect(() => {\n    if (selectedAccount && activeTab === 'post') {\n      loadUserMedia(selectedAccount.platform_user_id);\n    }\n  }, [selectedAccount, activeTab]);\n\n  // Load DM auto-reply settings when account is selected\n  useEffect(() => {\n    if (selectedAccount && activeTab === 'auto-reply') {\n      loadDmAutoReplySettings();\n    }\n  }, [selectedAccount, activeTab]);\n\n  // Add a useEffect to always load DM auto-reply settings when selectedAccount changes\n  useEffect(() => {\n    if (selectedAccount) {\n      loadDmAutoReplySettings();\n    }\n  }, [selectedAccount]);\n\n  // --- New: Scheduled Posts Grid State ---\n  const [scheduledGridRows, setScheduledGridRows] = useState([]);\n\n  // Show grid if redirected with scheduled posts\n  useEffect(() => {\n    if (location.state && location.state.scheduledGridRows) {\n      setScheduledGridRows(location.state.scheduledGridRows);\n    }\n  }, [location.state]);\n\n  // --- Auto-refresh scheduled posts grid ---\n  useEffect(() => {\n    let intervalId;\n    const fetchScheduledPosts = async () => {\n      try {\n        const posts = await apiClient.getScheduledPosts();\n        setScheduledGridRows(posts.filter(post => post.platform === 'instagram'));\n      } catch (err) {}\n    };\n    fetchScheduledPosts(); // Always fetch on mount\n    intervalId = setInterval(fetchScheduledPosts, 10000);\n    return () => clearInterval(intervalId);\n  }, []);\n\n  // --- UI Render ---\n  if (authLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"instagram-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-screen\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1777,\n          columnNumber: 81\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Checking authentication...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1777,\n          columnNumber: 120\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1777,\n        columnNumber: 49\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1777,\n      columnNumber: 12\n    }, this);\n  }\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"instagram-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/'),\n          className: \"back-button\",\n          children: \"Back to Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1783,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Instagram Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1784,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please log in to your account to connect and manage Instagram.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1785,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1782,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-required\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auth-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1788,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Authentication Required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1789,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You need to be logged in to use Instagram features. Please log in first.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1790,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1787,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1781,\n      columnNumber: 7\n    }, this);\n  }\n  if (!sdkLoaded) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"instagram-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-screen\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1796,\n          columnNumber: 81\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading Instagram SDK...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1796,\n          columnNumber: 120\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1796,\n        columnNumber: 49\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1796,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"instagram-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/'),\n        className: \"back-button\",\n        children: \"Back to Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1802,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1804,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-text\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Instagram Management\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1806,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Connect and manage your Instagram Business accounts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1807,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1805,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1803,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1801,\n      columnNumber: 7\n    }, this), isConnected && selectedAccount && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"global-auto-reply-section\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        background: '#fff',\n        borderRadius: 12,\n        boxShadow: '0 2px 8px rgba(0,0,0,0.04)',\n        padding: '18px 24px',\n        marginBottom: 18,\n        border: '1px solid #eee',\n        flexWrap: 'wrap',\n        gap: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 56,\n            height: 56,\n            borderRadius: '50%',\n            overflow: 'hidden',\n            background: '#f3f3f3',\n            border: '1px solid #e0e0e0'\n          },\n          children: selectedAccount.profile_picture_url ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: selectedAccount.profile_picture_url,\n            alt: selectedAccount.username,\n            style: {\n              width: '100%',\n              height: '100%',\n              objectFit: 'cover'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1822,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100%',\n              height: '100%',\n              background: '#eee'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1824,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1820,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 600,\n              fontSize: 18\n            },\n            children: [\"@\", selectedAccount.username]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1828,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#888',\n              fontSize: 14\n            },\n            children: selectedAccount.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1829,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#666',\n              fontSize: 13,\n              marginTop: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                marginRight: 12\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: selectedAccount.followers_count\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1832,\n                columnNumber: 19\n              }, this), \" followers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1831,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: selectedAccount.media_count\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1835,\n                columnNumber: 19\n              }, this), \" posts\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1834,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1830,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1827,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1819,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"auto-reply-toggle-btn\",\n          onClick: handleGlobalAutoReplyToggle,\n          disabled: globalAutoReplyLoading,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 10,\n            fontWeight: 600,\n            background: globalAutoReplyEnabled ? '#38c172' : '#e0e0e0',\n            color: globalAutoReplyEnabled ? '#fff' : '#444',\n            border: 'none',\n            borderRadius: 20,\n            padding: '10px 22px',\n            fontSize: 16,\n            cursor: globalAutoReplyLoading ? 'not-allowed' : 'pointer',\n            boxShadow: globalAutoReplyEnabled ? '0 2px 8px rgba(56,193,114,0.08)' : 'none',\n            transition: 'background 0.2s'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: 'inline-block',\n              width: 14,\n              height: 14,\n              borderRadius: '50%',\n              background: globalAutoReplyEnabled ? '#2ecc40' : '#bbb',\n              marginRight: 6,\n              border: globalAutoReplyEnabled ? '2px solid #fff' : '2px solid #ccc',\n              boxShadow: globalAutoReplyEnabled ? '0 0 4px #38c172' : 'none',\n              verticalAlign: 'middle'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1855,\n            columnNumber: 15\n          }, this), \"Auto Comment Reply: \", globalAutoReplyEnabled ? 'Enabled' : 'Disabled', globalAutoReplyLoading && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"loading-spinner\",\n            style: {\n              marginLeft: 10,\n              width: 18,\n              height: 18,\n              border: '2px solid #fff',\n              borderTop: '2px solid #38c172',\n              borderRadius: '50%',\n              display: 'inline-block',\n              animation: 'spin 1s linear infinite'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1864,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1841,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"auto-reply-toggle-btn\",\n          onClick: handleDmAutoReplyToggle,\n          disabled: dmAutoReplyLoading,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 10,\n            fontWeight: 600,\n            background: dmAutoReplyEnabled ? '#38c172' : '#e0e0e0',\n            color: dmAutoReplyEnabled ? '#fff' : '#444',\n            border: 'none',\n            borderRadius: 20,\n            padding: '10px 22px',\n            fontSize: 16,\n            cursor: dmAutoReplyLoading ? 'not-allowed' : 'pointer',\n            boxShadow: dmAutoReplyEnabled ? '0 2px 8px rgba(56,193,114,0.08)' : 'none',\n            transition: 'background 0.2s'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: 'inline-block',\n              width: 14,\n              height: 14,\n              borderRadius: '50%',\n              background: dmAutoReplyEnabled ? '#2ecc40' : '#bbb',\n              marginRight: 6,\n              border: dmAutoReplyEnabled ? '2px solid #fff' : '2px solid #ccc',\n              boxShadow: dmAutoReplyEnabled ? '0 0 4px #38c172' : 'none',\n              verticalAlign: 'middle'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1883,\n            columnNumber: 15\n          }, this), \"Auto DM Reply: \", dmAutoReplyEnabled ? 'Enabled' : 'Disabled', dmAutoReplyLoading && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"loading-spinner\",\n            style: {\n              marginLeft: 10,\n              width: 18,\n              height: 18,\n              border: '2px solid #fff',\n              borderTop: '2px solid #38c172',\n              borderRadius: '50%',\n              display: 'inline-block',\n              animation: 'spin 1s linear infinite'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1892,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1869,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1840,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1813,\n      columnNumber: 9\n    }, this), toast.show && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `toast-notification toast-${toast.type}`,\n      style: {\n        position: 'fixed',\n        top: 24,\n        right: 24,\n        zIndex: 9999,\n        background: toast.type === 'success' ? '#38c172' : toast.type === 'error' ? '#e53e3e' : '#333',\n        color: '#fff',\n        padding: '14px 28px',\n        borderRadius: 8,\n        boxShadow: '0 2px 8px rgba(0,0,0,0.12)',\n        fontWeight: 500,\n        fontSize: 16\n      },\n      children: toast.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1900,\n      columnNumber: 9\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-message info\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"message-text\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1907,\n        columnNumber: 56\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1907,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-navigation\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'connect' ? 'active' : ''}`,\n          onClick: () => setActiveTab('connect'),\n          children: \"Connect Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1910,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'post' ? 'active' : ''}`,\n          onClick: () => setActiveTab('post'),\n          disabled: !isConnected,\n          children: \"Create Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1911,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'media' ? 'active' : ''}`,\n          onClick: () => setActiveTab('media'),\n          disabled: !isConnected || !selectedAccount,\n          children: \"Media Gallery\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1912,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'bulk-composer' ? 'active' : ''}`,\n          onClick: () => setActiveTab('bulk-composer'),\n          disabled: !isConnected || !selectedAccount,\n          style: {\n            backgroundColor: activeTab === 'bulk-composer' ? '#e4405f' : undefined,\n            color: activeTab === 'bulk-composer' ? 'white' : undefined,\n            border: 'none'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"Bulk Composer\",\n            children: \"\\uD83D\\uDCC5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1919,\n            columnNumber: 13\n          }, this), \" Bulk Composer\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1913,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'scheduled-posts' ? 'active' : ''}`,\n          onClick: () => setActiveTab('scheduled-posts'),\n          disabled: !isConnected || !selectedAccount,\n          children: \"Scheduled Posts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1921,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1909,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-content\",\n        children: [activeTab === 'connect' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"connect-section\",\n          children: !isConnected ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"connection-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"connection-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1928,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Connect Instagram Account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1929,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Connect your Instagram Business account through Facebook to start posting and managing content.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1930,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleFacebookLogin,\n              disabled: loading,\n              className: \"connect-main-button\",\n              children: loading ? 'Connecting...' : 'Connect via Facebook'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1931,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"requirements-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Requirements\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1933,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Instagram Business or Creator account\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1935,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Connected to a Facebook Page\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1936,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Admin access to the Facebook Page\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1937,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1934,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1932,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1927,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"connected-accounts\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"accounts-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Connected Instagram Accounts\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1944,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleLogout,\n                className: \"logout-button\",\n                children: \"Disconnect\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1945,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1943,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"accounts-grid\",\n              children: instagramAccounts.map(account => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `account-card ${selectedAccount.id === account.id ? 'selected' : ''}`,\n                onClick: () => setSelectedAccount(account),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"account-avatar\",\n                  children: account.profile_picture_url ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: account.profile_picture_url,\n                    alt: account.username\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1950,\n                    columnNumber: 88\n                  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"avatar-placeholder\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1950,\n                    columnNumber: 155\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1950,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"account-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: [\"@\", account.username]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1952,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: account.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1953,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"account-stats\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [account.followers_count, \" followers\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1954,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [account.media_count, \" posts\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1954,\n                      columnNumber: 106\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1954,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1951,\n                  columnNumber: 25\n                }, this), selectedAccount.id === account.id && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"selected-indicator\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1956,\n                  columnNumber: 63\n                }, this)]\n              }, account.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1949,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1947,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1942,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1925,\n          columnNumber: 13\n        }, this), activeTab === 'post' && selectedAccount && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-type-toggle\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: postType === 'photo' ? 'active' : '',\n              onClick: () => setPostType('photo'),\n              children: \"Photo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1967,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: postType === 'carousel' ? 'active' : '',\n              onClick: () => setPostType('carousel'),\n              children: \"Carousel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1968,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: postType === 'reel' ? 'active' : '',\n              onClick: () => setPostType('reel'),\n              children: \"Reel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1969,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1966,\n            columnNumber: 15\n          }, this), postType === 'photo' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Image Source\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1975,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-source-toggle\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: imageSource === 'ai' ? 'active' : '',\n                  onClick: () => setImageSource('ai'),\n                  children: \"AI\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1977,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: imageSource === 'upload' ? 'active' : '',\n                  onClick: () => setImageSource('upload'),\n                  children: \"Upload\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1978,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1976,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1974,\n              columnNumber: 19\n            }, this), imageSource === 'ai' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"AI Prompt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1983,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: aiPrompt,\n                onChange: e => {\n                  setAiPrompt(e.target.value);\n                  // Clear generated content when prompt changes\n                  if (aiImageUrl) {\n                    setAiImageUrl('');\n                  }\n                  if (caption && !caption.trim().includes('Check out this amazing image!')) {\n                    setCaption('');\n                  }\n                },\n                placeholder: \"Describe your image...\",\n                rows: 3,\n                className: \"post-textarea\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1984,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ai-buttons\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"ai-generate-button\",\n                  onClick: handleGenerateAIImage,\n                  disabled: aiGenerating || !aiPrompt.trim() || rateLimitCooldown > 0,\n                  children: aiGenerating ? 'Generating...' : 'Generate Image'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2001,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"ai-generate-button secondary\",\n                  onClick: handleGenerateImageAndCaption,\n                  disabled: aiGenerating || generatingCaption || !aiPrompt.trim() || rateLimitCooldown > 0,\n                  children: aiGenerating || generatingCaption ? 'Generating...' : 'Generate Image & Caption'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2004,\n                  columnNumber: 25\n                }, this), message && message.includes('Error') && aiPrompt.trim() && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"ai-generate-button retry\",\n                  onClick: handleRetryImageGeneration,\n                  disabled: aiGenerating || rateLimitCooldown > 0,\n                  children: aiGenerating ? 'Retrying...' : 'Retry Generation'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2008,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2000,\n                columnNumber: 23\n              }, this), rateLimitCooldown > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: '#e53e3e',\n                  marginTop: 8,\n                  fontWeight: 500\n                },\n                children: [\"Too many requests. Please wait \", Math.floor(rateLimitCooldown / 60), \":\", (rateLimitCooldown % 60).toString().padStart(2, '0'), \" before trying again.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2014,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1982,\n              columnNumber: 19\n            }, this), imageSource === 'upload' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group image-upload\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Select Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2022,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => openFilePicker('photo', 'manual'),\n                className: \"file-picker-button\",\n                disabled: uploadingImage,\n                children: uploadingImage ? 'Uploading...' : 'Choose Image'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2023,\n                columnNumber: 23\n              }, this), uploadedImageUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-preview\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: uploadedImageUrl,\n                  alt: \"Preview\",\n                  className: \"preview-image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2033,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2032,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2021,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Caption\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2039,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"caption-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"caption-toggle\",\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"toggle-label\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: autoGenerateCaption,\n                      onChange: e => setAutoGenerateCaption(e.target.checked)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2043,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"toggle-text\",\n                      children: \"Auto Generate Caption\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2048,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2042,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2041,\n                  columnNumber: 23\n                }, this), autoGenerateCaption ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"caption-prompt-section\",\n                  children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: captionPrompt,\n                    onChange: e => setCaptionPrompt(e.target.value),\n                    placeholder: \"Describe what you want in the caption...\",\n                    rows: 2,\n                    className: \"caption-prompt-textarea\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2053,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleAutoGenerateCaption,\n                    disabled: generatingCaption || !captionPrompt.trim(),\n                    className: \"generate-caption-button\",\n                    children: generatingCaption ? 'Generating...' : 'Generate Caption'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2060,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2052,\n                  columnNumber: 25\n                }, this) : null, /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: caption,\n                  onChange: e => setCaption(e.target.value),\n                  placeholder: autoGenerateCaption ? \"Caption will be generated...\" : \"Write your caption...\",\n                  rows: 3,\n                  className: \"post-textarea\",\n                  disabled: autoGenerateCaption\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2069,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2040,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2038,\n              columnNumber: 19\n            }, this), (aiImageUrl || uploadedImageUrl) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"generated-image\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: aiImageUrl || uploadedImageUrl,\n                alt: \"Preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2079,\n                columnNumber: 89\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2079,\n              columnNumber: 56\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"publish-button\",\n              onClick: handlePublish,\n              disabled: loading || !(aiImageUrl || uploadedImageUrl) || !caption.trim() && !autoGenerateCaption,\n              children: loading ? 'Publishing...' : 'Publish Post'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2080,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1973,\n            columnNumber: 15\n          }, this), postType === 'carousel' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Carousel Mode\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2087,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-source-toggle\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: imageSource === 'ai' ? 'active' : '',\n                  onClick: () => setImageSource('ai'),\n                  disabled: carouselGenerating,\n                  children: \"\\uD83E\\uDD16 AI Generation\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2089,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: imageSource === 'upload' ? 'active' : '',\n                  onClick: () => setImageSource('upload'),\n                  disabled: carouselGenerating,\n                  children: \"\\uD83D\\uDCE4 Manual Upload\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2096,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2088,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2086,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Number of Images: \", carouselCount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2108,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"range\",\n                min: \"3\",\n                max: \"7\",\n                value: carouselCount,\n                onChange: e => setCarouselCount(parseInt(e.target.value)),\n                className: \"slider\",\n                disabled: carouselGenerating\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2109,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"slider-labels\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2119,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2120,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2121,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2122,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2123,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2118,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2107,\n              columnNumber: 19\n            }, this), imageSource === 'ai' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"AI Prompt for Carousel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2130,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: aiPrompt,\n                onChange: e => setAiPrompt(e.target.value),\n                placeholder: \"Describe the carousel content you want to generate...\",\n                rows: \"3\",\n                className: \"post-textarea\",\n                disabled: carouselGenerating\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2131,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ai-generation-note\",\n                children: /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: [\"\\uD83D\\uDCA1 Tip: Carousel generation takes 3-5 minutes for \", carouselCount, \" images. Please be patient!\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2140,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2139,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"generate-button\",\n                onClick: async () => {\n                  if (!aiPrompt.trim()) {\n                    setMessage('Please enter a prompt for carousel generation.');\n                    return;\n                  }\n                  setCarouselGenerating(true);\n                  setMessage(`Generating ${carouselCount} carousel images with AI... This may take 3-5 minutes.`);\n                  try {\n                    const response = await apiClient.generateInstagramCarousel(aiPrompt.trim(), carouselCount);\n                    if (response && response.success && response.image_urls) {\n                      setCarouselImages(response.image_urls);\n                      setCarouselCaption(response.caption || '');\n                      setMessage(`AI carousel generated successfully with ${response.image_urls.length} images!`);\n                    } else {\n                      setMessage(response.error || 'Failed to generate carousel images.');\n                    }\n                  } catch (error) {\n                    console.error('Carousel generation error:', error);\n                    if (error.message && error.message.includes('timeout')) {\n                      setMessage('Carousel generation timed out. This can happen with complex prompts or when generating many images. Please try again with a simpler prompt or fewer images.');\n                    } else {\n                      setMessage('Error generating carousel: ' + (error.message || error.toString()));\n                    }\n                  } finally {\n                    setCarouselGenerating(false);\n                  }\n                },\n                disabled: carouselGenerating || !aiPrompt.trim(),\n                children: carouselGenerating ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"button-spinner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2175,\n                    columnNumber: 25\n                  }, this), \"Generating \", carouselCount, \" Images...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    role: \"img\",\n                    \"aria-label\": \"Generate\",\n                    children: \"\\u2728\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2180,\n                    columnNumber: 29\n                  }, this), \" Generate Carousel\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2142,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2129,\n              columnNumber: 21\n            }, this), imageSource === 'upload' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Upload Images (JPG/PNG)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2190,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => openFilePicker('photo', 'carousel'),\n                className: \"file-picker-button\",\n                disabled: carouselGenerating,\n                children: carouselGenerating ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"button-spinner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2199,\n                    columnNumber: 29\n                  }, this), \"Uploading...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    role: \"img\",\n                    \"aria-label\": \"Upload\",\n                    children: \"\\uD83D\\uDCE4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2204,\n                    columnNumber: 29\n                  }, this), \" Select \", carouselCount, \" Images\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2191,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"file-upload-hint\",\n                children: [\"Select \", carouselCount, \" images for your carousel\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2208,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2189,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Caption\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2216,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"caption-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"caption-toggle\",\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"toggle-label\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: autoGenerateCaption,\n                      onChange: e => setAutoGenerateCaption(e.target.checked)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2220,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"toggle-text\",\n                      children: \"Auto Generate Caption\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2225,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2219,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2218,\n                  columnNumber: 23\n                }, this), autoGenerateCaption ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"caption-prompt-section\",\n                  children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: captionPrompt,\n                    onChange: e => setCaptionPrompt(e.target.value),\n                    placeholder: \"Describe what you want in the caption...\",\n                    rows: 2,\n                    className: \"caption-prompt-textarea\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2230,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleCarouselAutoGenerateCaption,\n                    disabled: generatingCaption || !captionPrompt.trim(),\n                    className: \"generate-caption-button\",\n                    children: generatingCaption ? 'Generating...' : 'Generate Caption'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2237,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2229,\n                  columnNumber: 25\n                }, this) : null, /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: carouselCaption,\n                  onChange: e => setCarouselCaption(e.target.value),\n                  placeholder: autoGenerateCaption ? \"Caption will be generated...\" : \"Write your caption...\",\n                  rows: 3,\n                  className: \"post-textarea\",\n                  disabled: autoGenerateCaption\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2246,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2217,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2215,\n              columnNumber: 19\n            }, this), carouselImages.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"carousel-preview-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Carousel Preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2260,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"carousel-preview-grid\",\n                children: carouselImages.slice(0, carouselCount).map((url, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"carousel-preview-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: url,\n                    alt: `Carousel item ${index + 1}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2264,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"carousel-item-number\",\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2265,\n                    columnNumber: 29\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2263,\n                  columnNumber: 27\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2261,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2259,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"publish-button\",\n              onClick: async () => {\n                if (!selectedAccount) {\n                  setMessage('Please select an Instagram account first.');\n                  return;\n                }\n                if (carouselImages.length < 3) {\n                  setMessage('Please add at least 3 images for carousel.');\n                  return;\n                }\n                if (!carouselCaption.trim() && !autoGenerateCaption) {\n                  setMessage('Please write a caption or enable auto-generate caption.');\n                  return;\n                }\n                if (autoGenerateCaption && !captionPrompt.trim()) {\n                  setMessage('Please provide a prompt for auto-generating caption.');\n                  return;\n                }\n                setLoading(true);\n                setMessage('Publishing carousel post...');\n                try {\n                  console.log('ðŸ” DEBUG: Carousel publish - selectedAccount:', selectedAccount);\n                  console.log('ðŸ” DEBUG: Carousel publish - carouselImages:', carouselImages);\n                  console.log('ðŸ” DEBUG: Carousel publish - carouselCount:', carouselCount);\n                  const finalCaption = autoGenerateCaption && captionPrompt.trim() ? await (async () => {\n                    const res = await apiClient.generateInstagramCaption(captionPrompt.trim());\n                    return res.content || carouselCaption || 'Check out this amazing carousel!';\n                  })() : carouselCaption;\n                  console.log('ðŸ” DEBUG: Carousel publish - finalCaption:', finalCaption);\n                  const response = await apiClient.postInstagramCarousel(selectedAccount.platform_user_id, finalCaption, carouselImages.slice(0, carouselCount));\n                  if (response.success) {\n                    setMessage('Carousel post published successfully!');\n                    setCarouselImages([]);\n                    setCarouselCaption('');\n                    setCaptionPrompt('');\n                    setAutoGenerateCaption(false);\n                    setAiPrompt('');\n                    loadUserMedia(selectedAccount.platform_user_id);\n                  } else {\n                    setMessage('Failed to publish carousel: ' + (response.error || 'Unknown error'));\n                  }\n                } catch (err) {\n                  setMessage('Error publishing carousel: ' + (err.message || err.toString()));\n                } finally {\n                  setLoading(false);\n                }\n              },\n              disabled: loading || carouselImages.length < 3 || !carouselCaption.trim() && !autoGenerateCaption,\n              children: loading ? 'Publishing...' : 'Publish Carousel'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2272,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2085,\n            columnNumber: 17\n          }, this), postType === 'reel' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Upload Reel Video (.mp4, .mov)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2340,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"video/mp4,video/quicktime,.mp4,.mov\",\n                onChange: handleReelFileChange,\n                disabled: reelUploading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2341,\n                columnNumber: 21\n              }, this), reelUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"video-preview\",\n                children: /*#__PURE__*/_jsxDEV(\"video\", {\n                  src: reelUrl,\n                  controls: true,\n                  style: {\n                    width: '100%',\n                    maxHeight: '300px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2344,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2343,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2339,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Upload Reel Thumbnail (optional):\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2349,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/png,image/jpeg,image/jpg\",\n                onChange: handleReelThumbnailChange,\n                disabled: !reelUrl\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2350,\n                columnNumber: 21\n              }, this), reelThumbnailUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 8,\n                  marginTop: 8\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: reelThumbnailUrl,\n                  alt: \"Reel Thumbnail Preview\",\n                  style: {\n                    maxWidth: 120,\n                    borderRadius: 8,\n                    border: '1px solid #eee'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2353,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => {\n                    setReelThumbnailUrl('');\n                    setReelThumbnailFilename('');\n                    setReelThumbnailFile(null);\n                  },\n                  style: {\n                    background: 'none',\n                    border: 'none',\n                    cursor: 'pointer',\n                    color: '#e53e3e',\n                    fontSize: 18\n                  },\n                  title: \"Remove thumbnail\",\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2354,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2352,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2348,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Caption\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2359,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"caption-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"caption-toggle\",\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"toggle-label\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: reelAutoGenerateCaption,\n                      onChange: e => setReelAutoGenerateCaption(e.target.checked)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2363,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"toggle-text\",\n                      children: \"Auto Generate Caption\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2368,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2362,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2361,\n                  columnNumber: 23\n                }, this), reelAutoGenerateCaption ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"caption-prompt-section\",\n                  children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: reelCaptionPrompt,\n                    onChange: e => setReelCaptionPrompt(e.target.value),\n                    placeholder: \"Describe what you want in the caption...\",\n                    rows: 2,\n                    className: \"caption-prompt-textarea\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2373,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleReelAutoGenerateCaption,\n                    disabled: generatingReelCaption || !reelCaptionPrompt.trim(),\n                    className: \"generate-caption-button\",\n                    children: generatingReelCaption ? 'Generating...' : 'Generate Caption'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2380,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2372,\n                  columnNumber: 25\n                }, this) : null, /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: reelCaption,\n                  onChange: e => setReelCaption(e.target.value),\n                  placeholder: reelAutoGenerateCaption ? \"Caption will be generated...\" : \"Write your caption...\",\n                  rows: 3,\n                  className: \"post-textarea\",\n                  disabled: reelAutoGenerateCaption\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2389,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2360,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2358,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"publish-button\",\n              onClick: handlePublish,\n              disabled: loading || !reelUrl || !reelCaption.trim() && !reelAutoGenerateCaption,\n              children: loading ? 'Publishing...' : 'Publish Reel'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2399,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2338,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1965,\n          columnNumber: 13\n        }, this), activeTab === 'media' && selectedAccount && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"media-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"media-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Recent Posts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2406,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Your latest Instagram content\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2406,\n              columnNumber: 66\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2406,\n            columnNumber: 15\n          }, this), loadingMedia ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-media\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-spinner\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2407,\n              columnNumber: 62\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Loading media...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2407,\n              columnNumber: 101\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2407,\n            columnNumber: 31\n          }, this) : userMedia.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"media-grid\",\n            children: userMedia.slice(0, 12).map(media => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"media-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"media-content\",\n                children: media.media_type === 'IMAGE' ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: media.media_url,\n                  alt: \"Instagram post\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2407,\n                  columnNumber: 329\n                }, this) : media.media_type === 'VIDEO' ? /*#__PURE__*/_jsxDEV(\"video\", {\n                  controls: true,\n                  children: /*#__PURE__*/_jsxDEV(\"source\", {\n                    src: media.media_url,\n                    type: \"video/mp4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2407,\n                    columnNumber: 429\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2407,\n                  columnNumber: 413\n                }, this) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2407,\n                columnNumber: 266\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"media-overlay\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"media-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"media-caption\",\n                    children: media.caption ? media.caption.substring(0, 100) + '...' : 'No caption'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2407,\n                    columnNumber: 559\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"media-date\",\n                    children: new Date(media.timestamp).toLocaleDateString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2407,\n                    columnNumber: 664\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2407,\n                  columnNumber: 531\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2407,\n                columnNumber: 500\n              }, this)]\n            }, media.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2407,\n              columnNumber: 223\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2407,\n            columnNumber: 156\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-media\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"No Media Found\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2407,\n              columnNumber: 797\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No media found for this account. Start creating posts to see them here!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2407,\n              columnNumber: 820\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2407,\n            columnNumber: 771\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2405,\n          columnNumber: 13\n        }, this), activeTab === 'bulk-composer' && selectedAccount && /*#__PURE__*/_jsxDEV(IgBulkComposer, {\n          selectedAccount: selectedAccount,\n          onClose: () => {}\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2411,\n          columnNumber: 13\n        }, this), activeTab === 'scheduled-posts' && /*#__PURE__*/_jsxDEV(ScheduledPostHistory, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2414,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1923,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1908,\n      columnNumber: 7\n    }, this), showDriveModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setShowDriveModal(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Select from Google Drive\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2424,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowDriveModal(false),\n            className: \"modal-close\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2425,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2423,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: !driveAuthenticated ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"drive-auth\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Connect to Google Drive to select files\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2430,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: authenticateGoogleDrive,\n              disabled: driveAuthLoading,\n              className: \"auth-button\",\n              children: driveAuthLoading ? 'Connecting...' : 'Connect Google Drive'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2431,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2429,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"drive-files\",\n            children: loadingDriveFiles ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-files\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-spinner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2439,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Loading files...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2440,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2438,\n              columnNumber: 21\n            }, this) : driveFiles.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"files-grid\",\n              children: driveFiles.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"file-item\",\n                onClick: () => handleDriveFileSelect(file.id, file.name),\n                children: [file.thumbnailLink ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: file.thumbnailLink,\n                  alt: file.name,\n                  className: \"file-thumbnail\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2447,\n                  columnNumber: 29\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"file-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2449,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"file-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"file-name\",\n                    children: file.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2452,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"file-size\",\n                    children: file.size ? `${Math.round(file.size / 1024)} KB` : 'Unknown size'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2453,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2451,\n                  columnNumber: 27\n                }, this)]\n              }, file.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2445,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2443,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-files\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"No image files found in Google Drive\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2460,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2459,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2436,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2427,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2422,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2421,\n      columnNumber: 9\n    }, this), showFilePicker && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: closeFilePicker,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Select \", filePickerType === 'photo' ? 'Photo' : 'Video']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2475,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: closeFilePicker,\n            className: \"modal-close\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"20\",\n              height: \"20\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              children: [/*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"18\",\n                y1: \"6\",\n                x2: \"6\",\n                y2: \"18\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2478,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"6\",\n                y1: \"6\",\n                x2: \"18\",\n                y2: \"18\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2479,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2477,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2476,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2474,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"file-picker-options\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"file-option\",\n              onClick: () => document.getElementById('local-file-input').click(),\n              onTouchStart: e => e.preventDefault(),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"file-option-icon\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"32\",\n                  height: \"32\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  strokeWidth: \"2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2492,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                    points: \"14,2 14,8 20,8\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2493,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                    x1: \"16\",\n                    y1: \"13\",\n                    x2: \"8\",\n                    y2: \"13\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2494,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                    x1: \"16\",\n                    y1: \"17\",\n                    x2: \"8\",\n                    y2: \"17\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2495,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                    points: \"10,9 9,9 8,9\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2496,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2491,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2490,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"file-option-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"From Device\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2500,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Select a file from your computer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2501,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2499,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2485,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `file-option ${!googleDriveAvailable ? 'disabled' : ''}`,\n              onClick: handleGoogleDriveSelect,\n              onTouchStart: e => {\n                if (!googleDriveAvailable) {\n                  e.preventDefault();\n                  return;\n                }\n                e.preventDefault();\n                handleGoogleDriveSelect();\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"file-option-icon\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"32\",\n                  height: \"32\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  strokeWidth: \"2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2519,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                    points: \"9,22 9,12 15,12 15,22\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2520,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2518,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2517,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"file-option-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"From Google Drive\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2524,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: googleDriveAvailable ? 'Select a file from your Google Drive' : 'Google Drive not configured. See setup guide.'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2525,\n                  columnNumber: 21\n                }, this), isLoadingGoogleDrive && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"loading-indicator\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"16\",\n                    height: \"16\",\n                    viewBox: \"0 0 24 24\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"2\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M21 12a9 9 0 11-6.219-8.56\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2534,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2533,\n                    columnNumber: 25\n                  }, this), \"Loading...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2532,\n                  columnNumber: 23\n                }, this), !googleDriveAvailable && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"unavailable-indicator\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"16\",\n                    height: \"16\",\n                    viewBox: \"0 0 24 24\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                      cx: \"12\",\n                      cy: \"12\",\n                      r: \"10\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2542,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                      x1: \"15\",\n                      y1: \"9\",\n                      x2: \"9\",\n                      y2: \"15\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2543,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                      x1: \"9\",\n                      y1: \"9\",\n                      x2: \"15\",\n                      y2: \"15\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2544,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2541,\n                    columnNumber: 25\n                  }, this), \"Not Available\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2540,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2523,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2505,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2484,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"local-file-input\",\n            type: \"file\",\n            accept: filePickerType === 'photo' ? 'image/*' : 'video/*',\n            multiple: filePickerFormType === 'carousel',\n            onChange: handleLocalFileSelect,\n            style: {\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2554,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2483,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2473,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2472,\n      columnNumber: 9\n    }, this), globalAutoReplyEnabled && globalAutoReplyProgress && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auto-reply-progress\",\n      style: {\n        margin: '16px 0',\n        padding: '12px',\n        background: '#f5f5f5',\n        borderRadius: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Auto-Reply Progress:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2569,\n          columnNumber: 14\n        }, this), \" \", globalAutoReplyProgress.status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2569,\n        columnNumber: 11\n      }, this), globalAutoReplyProgress.status === 'processing' && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Processing post \", globalAutoReplyProgress.current_post, \" of \", globalAutoReplyProgress.total_posts, \", comment \", globalAutoReplyProgress.current_comment, \" of \", globalAutoReplyProgress.total_comments]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2571,\n        columnNumber: 13\n      }, this), globalAutoReplyProgress.status === 'done' && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"All comments processed!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2573,\n        columnNumber: 57\n      }, this), globalAutoReplyProgress.details && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: globalAutoReplyProgress.details\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2574,\n        columnNumber: 47\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2568,\n      columnNumber: 9\n    }, this), apiError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"api-error\",\n      style: {\n        color: 'red',\n        margin: '12px 0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Error: \", apiError]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2579,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setApiError(null);\n          setRetrying(true);\n          setTimeout(() => {\n            setRetrying(false);\n            window.location.reload();\n          }, 500);\n        },\n        children: \"Retry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2580,\n        columnNumber: 11\n      }, this), retrying && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Retrying...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2581,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2578,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1800,\n    columnNumber: 5\n  }, this);\n};\n_s(InstagramPage, \"L6s7+FllV4dM3dRcE3Ra57fkHlo=\", false, function () {\n  return [useNavigate, useLocation, useAuth];\n});\n_c = InstagramPage;\nexport default InstagramPage;\nvar _c;\n$RefreshReg$(_c, \"InstagramPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","apiClient","useAuth","IgBulkComposer","ScheduledPostHistory","loadFacebookSDK","jsxDEV","_jsxDEV","Fragment","_Fragment","ACCEPTED_IMAGE_TYPES","ACCEPTED_VIDEO_TYPES","InstagramPage","_s","navigate","location","isAuthenticated","loading","authLoading","user","isConnected","setIsConnected","instagramAccounts","setInstagramAccounts","selectedAccount","setSelectedAccount","activeTab","setActiveTab","sdkLoaded","setSdkLoaded","fbAccessToken","setFbAccessToken","message","setMessage","setLoading","postType","setPostType","caption","setCaption","aiPrompt","setAiPrompt","aiGenerating","setAiGenerating","aiImageUrl","setAiImageUrl","imageSource","setImageSource","uploadedImageUrl","setUploadedImageUrl","uploadingImage","setUploadingImage","selectedImageFile","setSelectedImageFile","autoGenerateCaption","setAutoGenerateCaption","captionPrompt","setCaptionPrompt","generatingCaption","setGeneratingCaption","rateLimitCooldown","setRateLimitCooldown","strategyData","setStrategyData","promptTemplate","brandName","hookIdea","features","phone","website","callToAction","imagePrompt","customStrategyTemplate","showStrategyModal","setShowStrategyModal","strategyTemplates","setStrategyTemplates","id","name","prompt","carouselImages","setCarouselImages","carouselFiles","setCarouselFiles","carouselCount","setCarouselCount","carouselCaption","setCarouselCaption","carouselGenerating","setCarouselGenerating","reelFile","setReelFile","reelUrl","setReelUrl","reelFilename","setReelFilename","reelCaption","setReelCaption","reelUploading","setReelUploading","reelAutoGenerateCaption","setReelAutoGenerateCaption","reelCaptionPrompt","setReelCaptionPrompt","generatingReelCaption","setGeneratingReelCaption","reelThumbnailFile","setReelThumbnailFile","reelThumbnailUrl","setReelThumbnailUrl","reelThumbnailFilename","setReelThumbnailFilename","userMedia","setUserMedia","loadingMedia","setLoadingMedia","showDriveModal","setShowDriveModal","driveFiles","setDriveFiles","loadingDriveFiles","setLoadingDriveFiles","driveAuthenticated","setDriveAuthenticated","driveAuthLoading","setDriveAuthLoading","autoReplyEnabled","setAutoReplyEnabled","autoReplyTemplate","setAutoReplyTemplate","autoReplyPosts","setAutoReplyPosts","selectedAutoReplyPosts","setSelectedAutoReplyPosts","autoReplyLoading","setAutoReplyLoading","loadingAutoReplyPosts","setLoadingAutoReplyPosts","isSelectingPosts","setIsSelectingPosts","dmAutoReplyEnabled","setDmAutoReplyEnabled","dmAutoReplyTemplate","setDmAutoReplyTemplate","dmAutoReplyLoading","setDmAutoReplyLoading","showFilePicker","setShowFilePicker","filePickerType","setFilePickerType","filePickerFormType","setFilePickerFormType","isLoadingGoogleDrive","setIsLoadingGoogleDrive","googleDriveAvailable","setGoogleDriveAvailable","showBulkComposer","setShowBulkComposer","INSTAGRAM_APP_ID","process","env","REACT_APP_INSTAGRAM_APP_ID","isMobile","window","innerWidth","globalAutoReplyEnabled","setGlobalAutoReplyEnabled","globalAutoReplyLoading","setGlobalAutoReplyLoading","globalAutoReplyStatus","setGlobalAutoReplyStatus","globalAutoReplyProgress","setGlobalAutoReplyProgress","apiError","setApiError","retrying","setRetrying","toast","setToast","show","type","showToast","setTimeout","handleGlobalAutoReplyToggle","enableRes","enableGlobalInstagramAutoReply","platform_user_id","success","error","disableRes","disableGlobalInstagramAutoReply","err","JSON","stringify","toString","fetchGlobalAutoReplyStatus","statusRes","getGlobalInstagramAutoReplyStatus","enabled","intervalId","pollProgress","res","getGlobalInstagramAutoReplyProgress","progress","setInterval","clearInterval","checkLoginStatus","FB","getLoginStatus","response","status","authResponse","accessToken","handleConnectInstagram","initializeFacebookSDK","init","appId","cookie","xfbml","version","fbAsyncInit","d","s","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","REACT_APP_FACEBOOK_APP_ID","then","checkGoogleDriveAvailability","getInstagramAccounts","accounts","connectInstagram","allAccounts","getSocialAccounts","instagramAccountsFromBackend","filter","acc","platform","mappedAccounts","map","account","username","display_name","page_name","followers_count","follower_count","media_count","profile_picture_url","length","loadUserMedia","handleFacebookLogin","login","scope","instagramUserId","_media$data","media","getInstagramMedia","data","handleImageChange","e","file","target","files","includes","console","log","token","uploadImageToCloudinary","url","Error","handleGenerateAIImage","trim","generateInstagramImage","image_url","dimensions","width","height","enhanced_prompt","errorMessage","cooldownInterval","prev","handleAutoGenerateCaption","generateInstagramCaption","content","handleGenerateImageAndCaption","imageRes","captionRes","warn","handleRetryImageGeneration","handleCarouselFilesChange","Array","from","urls","push","handleCarouselAutoGenerateCaption","result","handleReelFileChange","_res$data","uploadVideoToCloudinary","_res$data2","_res$data3","videoUrl","filename","handleReelAutoGenerateCaption","handleReelThumbnailChange","_res$data4","uploadThumbnailToCloudinary","_res$data5","_res$data6","imageUrl","checkGoogleDriveAuth","getGoogleDriveStatus","authenticated","authenticateGoogleDrive","getGoogleDriveAuthorizeUrl","consent_url","popup","open","handleMessage","event","loadDriveFiles","removeEventListener","close","addEventListener","already_authenticated","getGoogleDriveFiles","handleDriveFileSelect","fileId","fileName","downloadGoogleDriveFile","fileContent","byteCharacters","atob","byteNumbers","i","charCodeAt","byteArray","Uint8Array","blob","Blob","mimeType","File","uploadResponse","openDriveModal","isAuth","openFilePicker","formType","closeFilePicker","handleLocalFileSelect","handleGoogleDriveSelect","openDriveAuthPopup","finalStatus","loadGoogleDriveAPI","google","picker","authResult","getGoogleDriveAuth","PickerBuilder","addView","DocsView","setIncludeFolders","setSelectFolderEnabled","setMimeTypes","setOAuthToken","access_token","setDeveloperKey","REACT_APP_GOOGLE_DEVELOPER_KEY","setCallback","handleGoogleDriveCallback","enableFeature","Feature","NAV_HIDDEN","MULTISELECT_ENABLED","setTitle","setSelectableMimeTypes","build","setVisible","Promise","resolve","reject","script","onload","gapi","load","onerror","head","appendChild","authUrl","messageHandler","action","Action","PICKED","docs","fileObjects","fileObj","handlePublish","options","instagram_user_id","post_type","media_type","finalImageUrl","postInstagramCarousel","startsWith","video_url","video_filename","is_reel","thumbnail_url","thumbnail_filename","media_file","media_filename","hasThumbnailUrl","hasThumbnailFilename","cleanOptions","Object","fromEntries","entries","key","value","undefined","originalPostType","originalOptions","cleanOptionsHasThumbnail","createUnifiedInstagramPost","updatedAccount","find","errorMsg","details","handleLogout","loadAutoReplySettings","rules","getAutomationRules","existingRule","rule","social_account_id","rule_type","_existingRule$actions","is_active","actions","template","loadPostsForAutoReply","_error$response","_error$response$data","detail","loadDmAutoReplySettings","statusResponse","getInstagramDmAutoReplyStatus","handleDmAutoReplyToggle","toggleInstagramDmAutoReply","getPosts","isArray","accountPosts","post","_post$social_account","_post$social_account2","_post$social_account3","_post$social_account4","_post$social_account5","_post$social_account6","matchesAccountId","social_account","matchesPlatformUserId","matchesUsername","isMatch","postId","postAccountId","postPlatformUserId","postUsername","selectedAccountId","selectedPlatformUserId","selectedUsername","_post$content","_post$social_account7","_post$social_account8","_post$social_account9","substring","syncResponse","syncInstagramPosts","refreshedResponse","refreshedAccountPosts","_post$social_account0","_post$social_account1","_post$social_account10","syncError","handlePostSelection","handlePostTouch","preventDefault","selectAllPosts","allPostIds","deselectAllPosts","handleSelectPosts","handleDoneSelecting","handleAutoReplyToggle","postCount","confirmMessage","confirm","toggleInstagramAutoReply","_response$data","_response$data2","_response$data3","successMessage","selected_posts_count","selectedPostsCount","validateAutoReplyState","socialAccounts","instagramAccount","scheduledGridRows","setScheduledGridRows","state","fetchScheduledPosts","posts","getScheduledPosts","className","children","_jsxFileName","lineNumber","columnNumber","onClick","style","display","alignItems","justifyContent","background","borderRadius","boxShadow","padding","marginBottom","border","flexWrap","gap","overflow","alt","objectFit","fontWeight","fontSize","color","marginTop","marginRight","disabled","cursor","transition","verticalAlign","marginLeft","borderTop","animation","position","top","right","zIndex","backgroundColor","role","onChange","placeholder","rows","Math","floor","padStart","checked","min","max","parseInt","generateInstagramCarousel","image_urls","slice","index","finalCaption","accept","controls","maxHeight","maxWidth","title","media_url","Date","timestamp","toLocaleDateString","onClose","stopPropagation","thumbnailLink","size","round","viewBox","fill","stroke","strokeWidth","x1","y1","x2","y2","click","onTouchStart","points","cx","cy","r","multiple","margin","current_post","total_posts","current_comment","total_comments","reload","_c","$RefreshReg$"],"sources":["C:/Users/THORSIGNIA/Projects/automation-dash/frontend/src/components/InstagramPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport apiClient from '../services/apiClient';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport IgBulkComposer from './igBulkComposer';\r\nimport './InstagramPage.css';\r\nimport ScheduledPostHistory from './ScheduledPostHistory';\r\nimport { loadFacebookSDK } from './FacebookUtils';\r\n\r\nconst ACCEPTED_IMAGE_TYPES = ['image/png', 'image/jpeg', 'image/jpg'];\r\nconst ACCEPTED_VIDEO_TYPES = ['video/mp4', 'video/quicktime'];\r\n\r\nconst InstagramPage = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { isAuthenticated, loading: authLoading, user } = useAuth();\r\n\r\n  // UI State\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [instagramAccounts, setInstagramAccounts] = useState([]);\r\n  const [selectedAccount, setSelectedAccount] = useState('');\r\n  const [activeTab, setActiveTab] = useState('connect');\r\n  const [sdkLoaded, setSdkLoaded] = useState(false);\r\n  const [fbAccessToken, setFbAccessToken] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Post State\r\n  const [postType, setPostType] = useState('photo'); // photo | carousel | reel\r\n  const [caption, setCaption] = useState('');\r\n  const [aiPrompt, setAiPrompt] = useState('');\r\n  const [aiGenerating, setAiGenerating] = useState(false);\r\n  const [aiImageUrl, setAiImageUrl] = useState('');\r\n  const [imageSource, setImageSource] = useState('ai'); // ai | upload | drive\r\n  const [uploadedImageUrl, setUploadedImageUrl] = useState('');\r\n  const [uploadingImage, setUploadingImage] = useState(false);\r\n  const [selectedImageFile, setSelectedImageFile] = useState(null);\r\n  const [autoGenerateCaption, setAutoGenerateCaption] = useState(false);\r\n  const [captionPrompt, setCaptionPrompt] = useState('');\r\n  const [generatingCaption, setGeneratingCaption] = useState(false);\r\n  const [rateLimitCooldown, setRateLimitCooldown] = useState(0);\r\n\r\n  // Strategy Template State\r\n  const [strategyData, setStrategyData] = useState({\r\n    promptTemplate: '',\r\n    brandName: '',\r\n    hookIdea: '',\r\n    features: '',\r\n    location: '',\r\n    phone: '',\r\n    website: '',\r\n    callToAction: '',\r\n    imagePrompt: '',\r\n    customStrategyTemplate: ''\r\n  });\r\n\r\n  const [showStrategyModal, setShowStrategyModal] = useState(false);\r\n  const [strategyTemplates, setStrategyTemplates] = useState([\r\n    { id: 'default', name: 'Default Template', prompt: 'Generate a catchy Instagram caption for this post.' },\r\n    { id: 'product', name: 'Product Showcase', prompt: 'Create an engaging caption highlighting the key features and benefits of this product.' },\r\n    { id: 'event', name: 'Event Promotion', prompt: 'Write an exciting caption to promote this event, including date, time, and location.' },\r\n    { id: 'custom', name: 'Custom Template', prompt: '' }\r\n  ]);\r\n\r\n  // Carousel State\r\n  const [carouselImages, setCarouselImages] = useState([]); // URLs\r\n  const [carouselFiles, setCarouselFiles] = useState([]); // File objects\r\n  const [carouselCount, setCarouselCount] = useState(3);\r\n  const [carouselCaption, setCarouselCaption] = useState('');\r\n  const [carouselGenerating, setCarouselGenerating] = useState(false);\r\n\r\n  // Reel State\r\n  const [reelFile, setReelFile] = useState(null);\r\n  const [reelUrl, setReelUrl] = useState('');\r\n  const [reelFilename, setReelFilename] = useState('');\r\n  const [reelCaption, setReelCaption] = useState('');\r\n  const [reelUploading, setReelUploading] = useState(false);\r\n  const [reelAutoGenerateCaption, setReelAutoGenerateCaption] = useState(false);\r\n  const [reelCaptionPrompt, setReelCaptionPrompt] = useState('');\r\n  const [generatingReelCaption, setGeneratingReelCaption] = useState(false);\r\n  // Thumbnail State for Reel\r\n  const [reelThumbnailFile, setReelThumbnailFile] = useState(null);\r\n  const [reelThumbnailUrl, setReelThumbnailUrl] = useState('');\r\n  const [reelThumbnailFilename, setReelThumbnailFilename] = useState('');\r\n\r\n  // Media Gallery\r\n  const [userMedia, setUserMedia] = useState([]);\r\n  const [loadingMedia, setLoadingMedia] = useState(false);\r\n\r\n  // Google Drive Integration\r\n  const [showDriveModal, setShowDriveModal] = useState(false);\r\n  const [driveFiles, setDriveFiles] = useState([]);\r\n  const [loadingDriveFiles, setLoadingDriveFiles] = useState(false);\r\n  const [driveAuthenticated, setDriveAuthenticated] = useState(false);\r\n  const [driveAuthLoading, setDriveAuthLoading] = useState(false);\r\n\r\n  // Auto-Reply State\r\n  const [autoReplyEnabled, setAutoReplyEnabled] = useState(false);\r\n  const [autoReplyTemplate, setAutoReplyTemplate] = useState('Thank you for your comment! We appreciate your engagement. ðŸ˜Š');\r\n  const [autoReplyPosts, setAutoReplyPosts] = useState([]);\r\n  const [selectedAutoReplyPosts, setSelectedAutoReplyPosts] = useState([]);\r\n  const [autoReplyLoading, setAutoReplyLoading] = useState(false);\r\n  const [loadingAutoReplyPosts, setLoadingAutoReplyPosts] = useState(false);\r\n  const [isSelectingPosts, setIsSelectingPosts] = useState(false);\r\n\r\n  // DM Auto-Reply State\r\n  const [dmAutoReplyEnabled, setDmAutoReplyEnabled] = useState(false);\r\n  const [dmAutoReplyTemplate, setDmAutoReplyTemplate] = useState('Thanks for your message! I\\'ll get back to you soon. ðŸ˜Š');\r\n  const [dmAutoReplyLoading, setDmAutoReplyLoading] = useState(false);\r\n\r\n  // File Picker Modal State\r\n  const [showFilePicker, setShowFilePicker] = useState(false);\r\n  const [filePickerType, setFilePickerType] = useState(''); // 'photo' or 'video'\r\n  const [filePickerFormType, setFilePickerFormType] = useState(''); // 'manual' or 'carousel'\r\n  const [isLoadingGoogleDrive, setIsLoadingGoogleDrive] = useState(false);\r\n  const [googleDriveAvailable, setGoogleDriveAvailable] = useState(false);\r\n\r\n  // Bulk Composer State\r\n  const [showBulkComposer, setShowBulkComposer] = useState(false);\r\n\r\n  // Facebook SDK\r\n  const INSTAGRAM_APP_ID = process.env.REACT_APP_INSTAGRAM_APP_ID || '24054495060908418';\r\n\r\n  // Mobile detection utility\r\n  const isMobile = () => window.innerWidth <= 768;\r\n\r\n  // --- New: Global Auto-Reply State ---\r\n  const [globalAutoReplyEnabled, setGlobalAutoReplyEnabled] = useState(false);\r\n  const [globalAutoReplyLoading, setGlobalAutoReplyLoading] = useState(false);\r\n  const [globalAutoReplyStatus, setGlobalAutoReplyStatus] = useState(''); // For toast/feedback\r\n\r\n  // --- New: Global Auto-Reply Progress State ---\r\n  const [globalAutoReplyProgress, setGlobalAutoReplyProgress] = useState(null);\r\n\r\n  // --- New: Global Auto-Reply Error and Retry State ---\r\n  const [apiError, setApiError] = useState(null);\r\n  const [retrying, setRetrying] = useState(false);\r\n\r\n  // --- New: Toast Notification ---\r\n  const [toast, setToast] = useState({ show: false, message: '', type: 'info' });\r\n  const showToast = (message, type = 'info') => {\r\n    setToast({ show: true, message, type });\r\n    setTimeout(() => setToast({ show: false, message: '', type: 'info' }), 3500);\r\n  };\r\n\r\n  // --- New: Global Auto-Reply API Logic ---\r\n  const handleGlobalAutoReplyToggle = async () => {\r\n    if (!selectedAccount) {\r\n      showToast('Please select an Instagram account first.', 'error');\r\n      return;\r\n    }\r\n    setGlobalAutoReplyLoading(true);\r\n    setApiError(null);\r\n    try {\r\n      if (!globalAutoReplyEnabled) {\r\n        const enableRes = await apiClient.enableGlobalInstagramAutoReply(selectedAccount.platform_user_id);\r\n        if (enableRes.success) {\r\n                  setGlobalAutoReplyEnabled(true);\r\n        // eslint-disable-next-line no-undef\r\n        setGlobalAutoReplyStatus('enabled');\r\n        showToast('Auto-reply enabled for all posts and comments!', 'success');\r\n        } else {\r\n          setApiError(enableRes.error || 'Failed to enable auto-reply.');\r\n          showToast('Failed to enable auto-reply: ' + (enableRes.error || 'Unknown error'), 'error');\r\n        }\r\n      } else {\r\n        const disableRes = await apiClient.disableGlobalInstagramAutoReply(selectedAccount.platform_user_id);\r\n        if (disableRes.success) {\r\n                  setGlobalAutoReplyEnabled(false);\r\n        // eslint-disable-next-line no-undef\r\n        setGlobalAutoReplyStatus('disabled');\r\n        showToast('Auto-reply disabled.', 'info');\r\n        } else {\r\n          setApiError(disableRes.error || 'Failed to disable auto-reply.');\r\n          showToast('Failed to disable auto-reply: ' + (disableRes.error || 'Unknown error'), 'error');\r\n        }\r\n      }\r\n    } catch (err) {\r\n      setApiError(err.message || JSON.stringify(err));\r\n      showToast('Error: ' + (err.message || err.toString()), 'error');\r\n    } finally {\r\n      setGlobalAutoReplyLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- New: Fetch initial global auto-reply status on account select ---\r\n  useEffect(() => {\r\n    const fetchGlobalAutoReplyStatus = async () => {\r\n      if (!selectedAccount) return;\r\n      try {\r\n        const statusRes = await apiClient.getGlobalInstagramAutoReplyStatus(selectedAccount.platform_user_id);\r\n        setGlobalAutoReplyEnabled(!!statusRes.enabled);\r\n        // eslint-disable-next-line no-undef\r\n        setGlobalAutoReplyStatus(statusRes.enabled ? 'enabled' : 'disabled');\r\n      } catch (err) {\r\n        setGlobalAutoReplyEnabled(false);\r\n        // eslint-disable-next-line no-undef\r\n        setGlobalAutoReplyStatus('disabled');\r\n      }\r\n    };\r\n    fetchGlobalAutoReplyStatus();\r\n  }, [selectedAccount]);\r\n\r\n  // --- New: Poll for global auto-reply progress when enabled ---\r\n  useEffect(() => {\r\n    let intervalId;\r\n    const pollProgress = async () => {\r\n      if (!selectedAccount || !globalAutoReplyEnabled) return;\r\n      try {\r\n        const res = await apiClient.getGlobalInstagramAutoReplyProgress(selectedAccount.platform_user_id);\r\n        if (res.success) {\r\n          setGlobalAutoReplyProgress(res.progress);\r\n          setApiError(null);\r\n        }\r\n      } catch (err) {\r\n        setApiError(err.message || JSON.stringify(err));\r\n        // Optionally, showToast('Progress error: ' + (err.message || err.toString()), 'error');\r\n      }\r\n    };\r\n    if (globalAutoReplyEnabled && selectedAccount) {\r\n      pollProgress();\r\n      intervalId = setInterval(pollProgress, 3000);\r\n    } else {\r\n      setGlobalAutoReplyProgress(null);\r\n    }\r\n    return () => intervalId && clearInterval(intervalId);\r\n  }, [globalAutoReplyEnabled, selectedAccount]);\r\n\r\n  // --- Facebook SDK Helpers ---\r\n    const checkLoginStatus = () => {\r\n      if (!window.FB || !isAuthenticated) return;\r\n      window.FB.getLoginStatus((response) => {\r\n        if (response.status === 'connected') {\r\n          setFbAccessToken(response.authResponse.accessToken);\r\n          setMessage('Instagram: Using existing Facebook login session');\r\n          handleConnectInstagram(response.authResponse.accessToken);\r\n        } else {\r\n          setMessage('Instagram: Please connect your Facebook account to continue');\r\n        }\r\n      });\r\n    };\r\n    const initializeFacebookSDK = () => {\r\n      if (window.FB) {\r\n      window.FB.init({ appId: INSTAGRAM_APP_ID, cookie: true, xfbml: true, version: 'v18.0' });\r\n        setSdkLoaded(true);\r\n        checkLoginStatus();\r\n        return;\r\n      }\r\n      window.fbAsyncInit = function() {\r\n      window.FB.init({ appId: INSTAGRAM_APP_ID, cookie: true, xfbml: true, version: 'v18.0' });\r\n        setSdkLoaded(true);\r\n        checkLoginStatus();\r\n      };\r\n      (function(d, s, id) {\r\n        var js, fjs = d.getElementsByTagName(s)[0];\r\n        if (d.getElementById(id)) return;\r\n        js = d.createElement(s); js.id = id;\r\n        js.src = \"https://connect.facebook.net/en_US/sdk.js\";\r\n        fjs.parentNode.insertBefore(js, fjs);\r\n      }(document, 'script', 'facebook-jssdk'));\r\n    };\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated && !authLoading) {\r\n      loadFacebookSDK(process.env.REACT_APP_FACEBOOK_APP_ID || '697225659875731').then(() => {\r\n        checkLoginStatus();\r\n        checkGoogleDriveAvailability();\r\n      });\r\n    }\r\n  }, [isAuthenticated, authLoading]);\r\n\r\n  useEffect(() => {\r\n    checkLoginStatus();\r\n    initializeFacebookSDK();\r\n    // eslint-disable-next-line\r\n  }, [INSTAGRAM_APP_ID, isAuthenticated]);\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      setInstagramAccounts([]); // Clear previous state\r\n      setSelectedAccount('');\r\n      setIsConnected(false);\r\n      setActiveTab('connect');\r\n      setMessage('');\r\n      // Fetch new user's Instagram accounts\r\n      apiClient.getInstagramAccounts().then(accounts => setInstagramAccounts(accounts));\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  // --- Instagram Connect ---\r\n  const handleConnectInstagram = async (accessToken = fbAccessToken) => {\r\n    if (!isAuthenticated) {\r\n      setMessage('Please log in to your account first before connecting Instagram.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    if (!accessToken) {\r\n      setMessage('No access token available. Please log in with Facebook first.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      setMessage('Fetching Instagram Business accounts...');\r\n      const response = await apiClient.connectInstagram(accessToken);\r\n\r\n      // Fetch the full list of social accounts from the backend\r\n      const allAccounts = await apiClient.getSocialAccounts();\r\n      // Filter for Instagram accounts\r\n      const instagramAccountsFromBackend = allAccounts.filter(acc => acc.platform === 'instagram');\r\n\r\n      // Map and merge info for display\r\n      const mappedAccounts = instagramAccountsFromBackend.map(account => ({\r\n        id: account.id, // Internal DB ID\r\n        platform_user_id: account.platform_user_id, // Instagram user ID\r\n        username: account.username,\r\n        name: account.display_name || account.page_name,\r\n        followers_count: account.follower_count || 0,\r\n        media_count: account.media_count || 0,\r\n        profile_picture_url: account.profile_picture_url\r\n      }));\r\n\r\n      setInstagramAccounts(mappedAccounts);\r\n      setIsConnected(true);\r\n      setMessage(`Found ${mappedAccounts.length} Instagram Business account(s)!`);\r\n      if (mappedAccounts.length === 1) {\r\n        setSelectedAccount(mappedAccounts[0]);\r\n        loadUserMedia(mappedAccounts[0].platform_user_id);\r\n      }\r\n    } catch (error) {\r\n      setMessage(error.message || 'Unknown error occurred');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFacebookLogin = () => {\r\n    if (!window.FB) {\r\n      setMessage('Facebook SDK not loaded');\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    setMessage('Initiating Instagram OAuth via Facebook...');\r\n    window.FB.login((response) => {\r\n      if (response.status === 'connected') {\r\n        const accessToken = response.authResponse.accessToken;\r\n        setFbAccessToken(accessToken);\r\n        setMessage('Facebook login successful! Connecting Instagram accounts...');\r\n        handleConnectInstagram(accessToken);\r\n      } else {\r\n        setMessage('Facebook login failed or was cancelled');\r\n        setLoading(false);\r\n      }\r\n    }, {\r\n      scope: 'pages_show_list,instagram_basic,instagram_content_publish,pages_read_engagement, business_management'\r\n    });\r\n  };\r\n\r\n  // --- Media Loading ---\r\n  const loadUserMedia = async (instagramUserId) => {\r\n    setLoadingMedia(true);\r\n    try {\r\n      const media = await apiClient.getInstagramMedia(instagramUserId);\r\n      setUserMedia(media?.data?.media || []);\r\n    } catch (error) {\r\n      setMessage(`Error loading media: ${error.message}`);\r\n    } finally {\r\n      setLoadingMedia(false);\r\n    }\r\n  };\r\n\r\n  // --- Image Upload ---\r\n  const handleImageChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    if (!ACCEPTED_IMAGE_TYPES.includes(file.type)) {\r\n      setMessage('Please select a PNG or JPG image');\r\n      return;\r\n    }\r\n\r\n    // Debug authentication status\r\n    console.log('ðŸ” DEBUG: Authentication check before upload');\r\n    console.log('ðŸ” DEBUG: isAuthenticated:', isAuthenticated);\r\n    console.log('ðŸ” DEBUG: user:', user);\r\n    console.log('ðŸ” DEBUG: apiClient token exists:', !!apiClient.token);\r\n    \r\n    setUploadingImage(true);\r\n    setMessage('Uploading image...');\r\n    try {\r\n      const res = await apiClient.uploadImageToCloudinary(file);\r\n      if (res && res.success && res.data && res.data.url) {\r\n        setUploadedImageUrl(res.data.url);\r\n        setAiImageUrl(res.data.url);\r\n        setSelectedImageFile(file);\r\n        setMessage('Image uploaded successfully!');\r\n      } else {\r\n        throw new Error(res?.error || 'Upload failed');\r\n      }\r\n    } catch (err) {\r\n      console.error('ðŸ” DEBUG: Upload error details:', err);\r\n      setMessage(`Image upload failed: ${err.message}`);\r\n    } finally {\r\n      setUploadingImage(false);\r\n    }\r\n  };\r\n\r\n  // --- AI Image Generation ---\r\n  const handleGenerateAIImage = async () => {\r\n    if (!aiPrompt.trim()) {\r\n      setMessage('Please enter a prompt for image generation.');\r\n      return;\r\n    }\r\n    \r\n    setAiGenerating(true);\r\n    setMessage('Generating Instagram-optimized image with AI...');\r\n    \r\n    try {\r\n      console.log('ðŸ” DEBUG: Generating Instagram image with prompt:', aiPrompt.trim());\r\n      \r\n      const res = await apiClient.generateInstagramImage(aiPrompt.trim());\r\n      console.log('ðŸ” DEBUG: Image generation response:', res);\r\n      \r\n      if (res && res.success && res.data && res.data.image_url) {\r\n        setAiImageUrl(res.data.image_url);\r\n        const dimensions = res.data.width && res.data.height ? `(${res.data.width}x${res.data.height})` : '';\r\n        setMessage(`AI image generated successfully! ${dimensions}`);\r\n        console.log('ðŸ” DEBUG: Generated image URL:', res.data.image_url);\r\n        console.log('ðŸ” DEBUG: Image dimensions:', res.data.width, 'x', res.data.height);\r\n        console.log('ðŸ” DEBUG: Enhanced prompt:', res.data.enhanced_prompt);\r\n      } else if (res && res.data && res.data.image_url) {\r\n        // Fallback for different response format\r\n        setAiImageUrl(res.data.image_url);\r\n        setMessage('AI image generated successfully!');\r\n        console.log('ðŸ” DEBUG: Generated image URL (fallback):', res.data.image_url);\r\n      } else {\r\n        console.error('ðŸ” DEBUG: Invalid response format:', res);\r\n        setMessage('Failed to generate image. Please try again.');\r\n      }\r\n    } catch (err) {\r\n      console.error('ðŸ” DEBUG: Image generation error:', err);\r\n      \r\n      // Handle specific error types\r\n      let errorMessage = err.message || err.toString();\r\n      \r\n      if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\r\n        errorMessage = 'Invalid or expired Stability AI API key. Please check your API key in the backend configuration.';\r\n      } else if (errorMessage.includes('429') || errorMessage.includes('Too Many Requests')) {\r\n        errorMessage = 'Rate limit exceeded. Please wait a few minutes before trying again, or upgrade your Stability AI plan.';\r\n        // Set a 5-minute cooldown\r\n        setRateLimitCooldown(300);\r\n        const cooldownInterval = setInterval(() => {\r\n          setRateLimitCooldown(prev => {\r\n            if (prev <= 1) {\r\n              clearInterval(cooldownInterval);\r\n              return 0;\r\n            }\r\n            return prev - 1;\r\n          });\r\n        }, 1000);\r\n      } else if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\r\n        errorMessage = 'Server error occurred. Please try again in a moment.';\r\n      } else if (errorMessage.includes('timeout')) {\r\n        errorMessage = 'Request timed out. Please try again.';\r\n      }\r\n      \r\n      setMessage('Error generating image: ' + errorMessage);\r\n    } finally {\r\n      setAiGenerating(false);\r\n    }\r\n  };\r\n\r\n  // --- Auto Generate Caption ---\r\n  const handleAutoGenerateCaption = async () => {\r\n    if (!captionPrompt.trim()) {\r\n      setMessage('Please enter a prompt for caption generation.');\r\n      return;\r\n    }\r\n    \r\n    setGeneratingCaption(true);\r\n    setMessage('Generating caption with AI...');\r\n    \r\n    try {\r\n      console.log('ðŸ” DEBUG: Generating Instagram caption with prompt:', captionPrompt.trim());\r\n      \r\n      const res = await apiClient.generateInstagramCaption(captionPrompt.trim());\r\n      console.log('ðŸ” DEBUG: Caption generation response:', res);\r\n      \r\n      if (res && res.success && res.data && res.data.content) {\r\n        setCaption(res.data.content);\r\n        setMessage('Caption generated successfully!');\r\n        console.log('ðŸ” DEBUG: Generated caption:', res.data.content);\r\n      } else if (res && res.content) {\r\n        // Fallback for different response format\r\n        setCaption(res.content);\r\n        setMessage('Caption generated successfully!');\r\n        console.log('ðŸ” DEBUG: Generated caption (fallback):', res.content);\r\n      } else {\r\n        console.error('ðŸ” DEBUG: Invalid response format:', res);\r\n        setMessage('Failed to generate caption. Please try again.');\r\n      }\r\n    } catch (err) {\r\n      console.error('ðŸ” DEBUG: Caption generation error:', err);\r\n      setMessage('Error generating caption: ' + (err.message || err.toString()));\r\n    } finally {\r\n      setGeneratingCaption(false);\r\n    }\r\n  };\r\n\r\n  // --- Generate Image and Caption Together ---\r\n  const handleGenerateImageAndCaption = async () => {\r\n    if (!aiPrompt.trim()) {\r\n      setMessage('Please enter a prompt for generation.');\r\n      return;\r\n    }\r\n\r\n    setAiGenerating(true);\r\n    setGeneratingCaption(true);\r\n    setMessage('Generating Instagram-optimized image and caption with AI...');\r\n    \r\n    try {\r\n      console.log('ðŸ” DEBUG: Generating image and caption with prompt:', aiPrompt.trim());\r\n      \r\n      // Generate image first\r\n      const imageRes = await apiClient.generateInstagramImage(aiPrompt.trim());\r\n      console.log('ðŸ” DEBUG: Image generation response:', imageRes);\r\n      \r\n      if (!imageRes || !imageRes.success || !imageRes.data || !imageRes.data.image_url) {\r\n        throw new Error('Failed to generate image');\r\n      }\r\n      \r\n      setAiImageUrl(imageRes.data.image_url);\r\n      console.log('ðŸ” DEBUG: Generated image URL:', imageRes.data.image_url);\r\n      console.log('ðŸ” DEBUG: Image dimensions:', imageRes.data.width, 'x', imageRes.data.height);\r\n      \r\n      // Generate caption using the same prompt\r\n      const captionRes = await apiClient.generateInstagramCaption(aiPrompt.trim());\r\n      console.log('ðŸ” DEBUG: Caption generation response:', captionRes);\r\n      \r\n      if (captionRes && captionRes.success && captionRes.data && captionRes.data.content) {\r\n        setCaption(captionRes.data.content);\r\n        console.log('ðŸ” DEBUG: Generated caption:', captionRes.data.content);\r\n      } else if (captionRes && captionRes.content) {\r\n        // Fallback for different response format\r\n        setCaption(captionRes.content);\r\n        console.log('ðŸ” DEBUG: Generated caption (fallback):', captionRes.content);\r\n      } else {\r\n        console.warn('ðŸ” DEBUG: Caption generation failed, using fallback');\r\n        setCaption(`Check out this amazing image! ${aiPrompt.trim()}`);\r\n      }\r\n      \r\n      const dimensions = imageRes.data.width && imageRes.data.height ? `(${imageRes.data.width}x${imageRes.data.height})` : '';\r\n      setMessage(`Image and caption generated successfully! ${dimensions}`);\r\n      \r\n    } catch (err) {\r\n      console.error('ðŸ” DEBUG: Image and caption generation error:', err);\r\n      \r\n      // Handle specific error types\r\n      let errorMessage = err.message || err.toString();\r\n      \r\n      if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\r\n        errorMessage = 'Invalid or expired Stability AI API key. Please check your API key in the backend configuration.';\r\n      } else if (errorMessage.includes('429') || errorMessage.includes('Too Many Requests')) {\r\n        errorMessage = 'Rate limit exceeded. Please wait a few minutes before trying again, or upgrade your Stability AI plan.';\r\n        // Set a 5-minute cooldown\r\n        setRateLimitCooldown(300);\r\n        const cooldownInterval = setInterval(() => {\r\n          setRateLimitCooldown(prev => {\r\n            if (prev <= 1) {\r\n              clearInterval(cooldownInterval);\r\n              return 0;\r\n            }\r\n            return prev - 1;\r\n          });\r\n        }, 1000);\r\n      } else if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\r\n        errorMessage = 'Server error occurred. Please try again in a moment.';\r\n      } else if (errorMessage.includes('timeout')) {\r\n        errorMessage = 'Request timed out. Please try again.';\r\n      }\r\n      \r\n      setMessage('Error generating image and caption: ' + errorMessage);\r\n      \r\n      // Clear any partial results on error\r\n      setAiImageUrl('');\r\n      setCaption('');\r\n    } finally {\r\n      setAiGenerating(false);\r\n      setGeneratingCaption(false);\r\n    }\r\n  };\r\n\r\n  // --- Retry Image Generation ---\r\n  const handleRetryImageGeneration = async () => {\r\n    if (!aiPrompt.trim()) {\r\n      setMessage('Please enter a prompt for image generation.');\r\n        return;\r\n    }\r\n    \r\n    setAiGenerating(true);\r\n    setMessage('Retrying image generation...');\r\n    \r\n    try {\r\n      console.log('ðŸ” DEBUG: Retrying image generation with prompt:', aiPrompt.trim());\r\n      \r\n      const res = await apiClient.generateInstagramImage(aiPrompt.trim());\r\n      console.log('ðŸ” DEBUG: Retry image generation response:', res);\r\n      \r\n      if (res && res.success && res.data && res.data.image_url) {\r\n        setAiImageUrl(res.data.image_url);\r\n        setMessage('Image generated successfully on retry!');\r\n        console.log('ðŸ” DEBUG: Generated image URL (retry):', res.data.image_url);\r\n      } else if (res && res.data && res.data.image_url) {\r\n        // Fallback for different response format\r\n        setAiImageUrl(res.data.image_url);\r\n        setMessage('Image generated successfully on retry!');\r\n        console.log('ðŸ” DEBUG: Generated image URL (retry fallback):', res.data.image_url);\r\n      } else {\r\n        console.error('ðŸ” DEBUG: Invalid response format on retry:', res);\r\n        setMessage('Failed to generate image on retry. Please try again.');\r\n      }\r\n    } catch (err) {\r\n      console.error('ðŸ” DEBUG: Retry image generation error:', err);\r\n      \r\n      // Handle specific error types\r\n      let errorMessage = err.message || err.toString();\r\n      \r\n      if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\r\n        errorMessage = 'Invalid or expired Stability AI API key. Please check your API key in the backend configuration.';\r\n      } else if (errorMessage.includes('429') || errorMessage.includes('Too Many Requests')) {\r\n        errorMessage = 'Rate limit exceeded. Please wait a few minutes before trying again, or upgrade your Stability AI plan.';\r\n        // Set a 5-minute cooldown\r\n        setRateLimitCooldown(300);\r\n        const cooldownInterval = setInterval(() => {\r\n          setRateLimitCooldown(prev => {\r\n            if (prev <= 1) {\r\n              clearInterval(cooldownInterval);\r\n              return 0;\r\n            }\r\n            return prev - 1;\r\n          });\r\n        }, 1000);\r\n      } else if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\r\n        errorMessage = 'Server error occurred. Please try again in a moment.';\r\n      } else if (errorMessage.includes('timeout')) {\r\n        errorMessage = 'Request timed out. Please try again.';\r\n      }\r\n      \r\n      setMessage('Error retrying image generation: ' + errorMessage);\r\n    } finally {\r\n      setAiGenerating(false);\r\n    }\r\n  };\r\n\r\n  // --- Carousel Upload ---\r\n  const handleCarouselFilesChange = async (e) => {\r\n    const files = Array.from(e.target.files);\r\n    if (files.length < 3 || files.length > 7) {\r\n      setMessage('Please select 3 to 7 images.');\r\n      return;\r\n    }\r\n    setCarouselGenerating(true);\r\n    setMessage('Uploading carousel images...');\r\n    try {\r\n      const urls = [];\r\n      for (const file of files) {\r\n        if (!ACCEPTED_IMAGE_TYPES.includes(file.type)) {\r\n          setMessage('All images must be PNG or JPG.');\r\n          setCarouselGenerating(false);\r\n          return;\r\n        }\r\n        const res = await apiClient.uploadImageToCloudinary(file);\r\n        if (res && res.success && res.data && res.data.url) {\r\n          urls.push(res.data.url);\r\n      } else {\r\n          throw new Error(res?.error || 'Upload failed');\r\n        }\r\n      }\r\n      setCarouselImages(urls);\r\n      setMessage(`Uploaded ${urls.length} images for carousel.`);\r\n    } catch (err) {\r\n      setMessage('Error uploading carousel images: ' + err.message);\r\n    } finally {\r\n      setCarouselGenerating(false);\r\n    }\r\n  };\r\n\r\n  // --- Carousel Auto Generate Caption ---\r\n  const handleCarouselAutoGenerateCaption = async () => {\r\n    if (!captionPrompt.trim()) {\r\n      setMessage('Please provide a prompt for caption generation.');\r\n      return;\r\n    }\r\n    \r\n    setGeneratingCaption(true);\r\n    setMessage('Generating carousel caption...');\r\n    \r\n    try {\r\n      const result = await apiClient.generateInstagramCaption(captionPrompt.trim());\r\n      if (result.success && result.content) {\r\n        setCarouselCaption(result.content);\r\n        setMessage('Caption generated successfully!');\r\n      } else {\r\n        setMessage('Failed to generate caption: ' + (result.error || 'Unknown error'));\r\n      }\r\n    } catch (err) {\r\n      setMessage('Error generating caption: ' + err.message);\r\n    } finally {\r\n      setGeneratingCaption(false);\r\n    }\r\n  };\r\n\r\n  // --- Reel Upload ---\r\n  const handleReelFileChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    if (!ACCEPTED_VIDEO_TYPES.includes(file.type)) {\r\n      setMessage('Only .mp4 or .mov files are allowed.');\r\n      return;\r\n    }\r\n    setReelUploading(true);\r\n    setMessage('Uploading video...');\r\n    try {\r\n      const res = await apiClient.uploadVideoToCloudinary(file);\r\n      console.log('Video upload response:', res);\r\n      \r\n      // Check for different response structures\r\n      if (res && res.success && (res.url || res.data?.url)) {\r\n        const videoUrl = res.url || res.data?.url;\r\n        const filename = res.filename || res.data?.filename;\r\n        setReelUrl(videoUrl);\r\n        setReelFilename(filename || '');\r\n        // eslint-disable-next-line no-undef\r\n        setReelFile(file);\r\n        console.log('ðŸ” DEBUG: Video uploaded successfully:', {\r\n          videoUrl,\r\n          filename,\r\n          res\r\n        });\r\n        setMessage('Video uploaded successfully!');\r\n      } else if (res && res.data && res.data.url) {\r\n        // Alternative response structure\r\n        setReelUrl(res.data.url);\r\n        setReelFilename(res.data.filename || '');\r\n        // eslint-disable-next-line no-undef\r\n        setReelFile(file);\r\n        setMessage('Video uploaded successfully!');\r\n      } else {\r\n        throw new Error(res?.error || res?.message || 'Upload failed');\r\n      }\r\n    } catch (err) {\r\n      console.error('Video upload error:', err);\r\n      setMessage('Error: ' + (err.message || err.toString()));\r\n    } finally {\r\n      setReelUploading(false);\r\n    }\r\n  };\r\n\r\n  // --- Reel Auto Generate Caption ---\r\n  const handleReelAutoGenerateCaption = async () => {\r\n    if (!reelCaptionPrompt.trim()) {\r\n      setMessage('Please provide a prompt for caption generation.');\r\n      return;\r\n    }\r\n    \r\n    setGeneratingReelCaption(true);\r\n    setMessage('Generating reel caption...');\r\n    \r\n    try {\r\n      const result = await apiClient.generateInstagramCaption(reelCaptionPrompt.trim());\r\n      if (result.success && result.content) {\r\n        setReelCaption(result.content);\r\n        setMessage('Reel caption generated successfully!');\r\n      } else {\r\n        setMessage('Failed to generate caption: ' + (result.error || 'Unknown error'));\r\n      }\r\n    } catch (err) {\r\n      setMessage('Error generating caption: ' + err.message);\r\n    } finally {\r\n      setGeneratingReelCaption(false);\r\n    }\r\n  };\r\n\r\n  // --- Reel Thumbnail Upload ---\r\n  const handleReelThumbnailChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    if (!ACCEPTED_IMAGE_TYPES.includes(file.type)) {\r\n      setMessage('Only .jpg, .jpeg, .png files are allowed for thumbnail.');\r\n      return;\r\n    }\r\n    setMessage('Uploading thumbnail image...');\r\n    try {\r\n      const res = await apiClient.uploadThumbnailToCloudinary(file);\r\n      if (res && res.success && (res.url || res.data?.url)) {\r\n        const imageUrl = res.url || res.data?.url;\r\n        const filename = res.filename || res.data?.filename;\r\n        setReelThumbnailUrl(imageUrl);\r\n        setReelThumbnailFilename(filename || '');\r\n        // eslint-disable-next-line no-undef\r\n        setReelThumbnailFile(file);\r\n        console.log('ðŸ” DEBUG: Thumbnail uploaded successfully:', {\r\n          imageUrl,\r\n          filename,\r\n          res\r\n        });\r\n        setMessage('Thumbnail uploaded successfully!');\r\n      } else {\r\n        throw new Error(res?.error || res?.message || 'Thumbnail upload failed');\r\n      }\r\n    } catch (err) {\r\n      setMessage('Error: ' + (err.message || err.toString()));\r\n    }\r\n  };\r\n\r\n  // --- Google Drive Integration ---\r\n  const checkGoogleDriveAuth = async () => {\r\n    try {\r\n      const response = await apiClient.getGoogleDriveStatus();\r\n      setDriveAuthenticated(response.authenticated);\r\n      return response.authenticated;\r\n    } catch (error) {\r\n      console.error('Error checking Google Drive auth:', error);\r\n      setDriveAuthenticated(false);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const authenticateGoogleDrive = async () => {\r\n    setDriveAuthLoading(true);\r\n    try {\r\n      const response = await apiClient.getGoogleDriveAuthorizeUrl();\r\n      if (response.consent_url) {\r\n        // Open popup for OAuth\r\n        const popup = window.open(\r\n          response.consent_url,\r\n          'google-drive-auth',\r\n          'width=500,height=600,scrollbars=yes,resizable=yes'\r\n        );\r\n\r\n        // Listen for OAuth completion\r\n        const handleMessage = (event) => {\r\n          if (event.data.success) {\r\n            setDriveAuthenticated(true);\r\n            setMessage('Google Drive connected successfully!');\r\n            loadDriveFiles();\r\n          } else if (event.data.error) {\r\n            setMessage(`Google Drive authentication failed: ${event.data.error}`);\r\n          }\r\n          window.removeEventListener('message', handleMessage);\r\n          if (popup) popup.close();\r\n        };\r\n\r\n        window.addEventListener('message', handleMessage);\r\n      } else if (response.already_authenticated) {\r\n        setDriveAuthenticated(true);\r\n        setMessage('Google Drive already authenticated!');\r\n        loadDriveFiles();\r\n      }\r\n    } catch (error) {\r\n      setMessage(`Google Drive authentication error: ${error.message}`);\r\n    } finally {\r\n      setDriveAuthLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadDriveFiles = async () => {\r\n    if (!driveAuthenticated) return;\r\n    \r\n    setLoadingDriveFiles(true);\r\n    try {\r\n      const response = await apiClient.getGoogleDriveFiles('image/');\r\n      if (response.success && response.files) {\r\n        setDriveFiles(response.files);\r\n      } else {\r\n        setMessage('Failed to load Google Drive files');\r\n      }\r\n    } catch (error) {\r\n      setMessage(`Error loading Google Drive files: ${error.message}`);\r\n    } finally {\r\n      setLoadingDriveFiles(false);\r\n    }\r\n  };\r\n\r\n  const handleDriveFileSelect = async (fileId, fileName) => {\r\n    setUploadingImage(true);\r\n    setMessage('Downloading file from Google Drive...');\r\n    try {\r\n      const response = await apiClient.downloadGoogleDriveFile(fileId);\r\n      if (response.success && response.fileContent) {\r\n        // Convert base64 to blob and upload to Cloudinary\r\n        const byteCharacters = atob(response.fileContent);\r\n        const byteNumbers = new Array(byteCharacters.length);\r\n        for (let i = 0; i < byteCharacters.length; i++) {\r\n          byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n        }\r\n        const byteArray = new Uint8Array(byteNumbers);\r\n        const blob = new Blob([byteArray], { type: response.mimeType });\r\n        \r\n        // Create a File object from the blob\r\n        const file = new File([blob], fileName, { type: response.mimeType });\r\n        \r\n        // Upload to Cloudinary\r\n        const uploadResponse = await apiClient.uploadImageToCloudinary(file);\r\n        if (uploadResponse.success && uploadResponse.data && uploadResponse.data.url) {\r\n          setUploadedImageUrl(uploadResponse.data.url);\r\n          setAiImageUrl(uploadResponse.data.url);\r\n          setMessage('File uploaded from Google Drive successfully!');\r\n          setShowDriveModal(false);\r\n        } else {\r\n          throw new Error(uploadResponse.error || 'Upload failed');\r\n        }\r\n      } else {\r\n        throw new Error(response.error || 'Download failed');\r\n      }\r\n    } catch (error) {\r\n      setMessage(`Error processing Google Drive file: ${error.message}`);\r\n    } finally {\r\n      setUploadingImage(false);\r\n    }\r\n  };\r\n\r\n  const openDriveModal = async () => {\r\n    const isAuth = await checkGoogleDriveAuth();\r\n    if (!isAuth) {\r\n      await authenticateGoogleDrive();\r\n    } else {\r\n      await loadDriveFiles();\r\n    }\r\n    setShowDriveModal(true);\r\n  };\r\n\r\n  // File Picker Functions\r\n  const openFilePicker = (type, formType) => {\r\n    setFilePickerType(type);\r\n    setFilePickerFormType(formType);\r\n    setShowFilePicker(true);\r\n  };\r\n\r\n  const closeFilePicker = () => {\r\n    setShowFilePicker(false);\r\n    setFilePickerType('');\r\n    setFilePickerFormType('');\r\n    setIsLoadingGoogleDrive(false);\r\n  };\r\n\r\n  const handleLocalFileSelect = (event) => {\r\n    const files = Array.from(event.target.files);\r\n    if (files.length === 0) return;\r\n    \r\n    if (filePickerFormType === 'carousel') {\r\n      // Handle carousel upload\r\n      handleCarouselFilesChange({ target: { files } });\r\n    } else {\r\n      // Handle single file upload\r\n      const file = files[0];\r\n      if (filePickerType === 'photo') {\r\n        handleImageChange({ target: { files: [file] } });\r\n      } else if (filePickerType === 'video') {\r\n        handleReelFileChange({ target: { files: [file] } });\r\n      }\r\n    }\r\n    closeFilePicker();\r\n  };\r\n\r\n  const handleGoogleDriveSelect = async () => {\r\n    setIsLoadingGoogleDrive(true);\r\n    try {\r\n      // Check if already authenticated\r\n      const status = await apiClient.getGoogleDriveStatus();\r\n      if (!status.authenticated) {\r\n        // Get consent URL for popup\r\n        const authResponse = await apiClient.getGoogleDriveAuthorizeUrl();\r\n        if (authResponse.consent_url) {\r\n          // Open popup and wait for completion\r\n          await openDriveAuthPopup(authResponse.consent_url);\r\n        }\r\n      }\r\n\r\n      // After popup closes, re-check authentication status\r\n      const finalStatus = await apiClient.getGoogleDriveStatus();\r\n      if (!finalStatus.authenticated) {\r\n        throw new Error('Authentication was not completed successfully');\r\n      }\r\n\r\n      // Update state and proceed with Google Drive picker\r\n      setGoogleDriveAvailable(true);\r\n\r\n      // Initialize Google Drive API\r\n      await loadGoogleDriveAPI();\r\n      \r\n      // Check if google object is available\r\n      if (typeof window.google === 'undefined' || !window.google.picker) {\r\n        throw new Error('Google Picker API failed to load');\r\n      }\r\n      \r\n      // Get fresh token for picker\r\n      const authResult = await apiClient.getGoogleDriveAuth();\r\n      \r\n      // Open Google Drive picker\r\n      const picker = new window.google.picker.PickerBuilder()\r\n        .addView(new window.google.picker.DocsView()\r\n          .setIncludeFolders(true)\r\n          .setSelectFolderEnabled(false)\r\n          .setMimeTypes(filePickerType === 'photo' ? 'image/*' : 'video/*'))\r\n        .setOAuthToken(authResult.access_token)\r\n        .setDeveloperKey(process.env.REACT_APP_GOOGLE_DEVELOPER_KEY || '')\r\n        .setCallback(handleGoogleDriveCallback)\r\n        .enableFeature(window.google.picker.Feature.NAV_HIDDEN)\r\n        .enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED, filePickerFormType === 'carousel')\r\n        .setTitle(filePickerFormType === 'carousel' ? 'Select multiple files from Google Drive' : 'Select a file from Google Drive')\r\n        .setSelectableMimeTypes(filePickerType === 'photo' ? 'image/*' : 'video/*')\r\n        .build();\r\n      \r\n      picker.setVisible(true);\r\n      \r\n    } catch (error) {\r\n      console.error('Error with Google Drive selection:', error);\r\n      setMessage(`Google Drive error: ${error.message}`);\r\n    } finally {\r\n      setIsLoadingGoogleDrive(false);\r\n    }\r\n  };\r\n\r\n  const loadGoogleDriveAPI = () => {\r\n    return new Promise((resolve, reject) => {\r\n      if (window.google && window.google.picker) {\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      const script = document.createElement('script');\r\n      script.src = 'https://apis.google.com/js/api.js';\r\n      script.onload = () => {\r\n        if (window.gapi) {\r\n          window.gapi.load('picker', () => {\r\n            resolve();\r\n          });\r\n        } else {\r\n          reject(new Error('Google API failed to load'));\r\n        }\r\n      };\r\n      script.onerror = reject;\r\n      document.head.appendChild(script);\r\n    });\r\n  };\r\n\r\n  const openDriveAuthPopup = (authUrl) => {\r\n    return new Promise((resolve, reject) => {\r\n      const popup = window.open(\r\n        authUrl,\r\n        'google-drive-auth',\r\n        'width=500,height=600,scrollbars=yes,resizable=yes'\r\n      );\r\n\r\n      const messageHandler = (event) => {\r\n        if (event.data.success) {\r\n          setGoogleDriveAvailable(true);\r\n          setMessage('Google Drive connected successfully!');\r\n          resolve();\r\n        } else if (event.data.error) {\r\n          setMessage(`Google Drive authentication failed: ${event.data.error}`);\r\n          reject(new Error(event.data.error));\r\n        }\r\n        window.removeEventListener('message', messageHandler);\r\n        if (popup) popup.close();\r\n      };\r\n\r\n      window.addEventListener('message', messageHandler);\r\n\r\n      // Timeout after 5 minutes\r\n      setTimeout(() => {\r\n        window.removeEventListener('message', messageHandler);\r\n        if (popup) popup.close();\r\n        reject(new Error('Authentication timeout'));\r\n      }, 300000);\r\n    });\r\n  };\r\n\r\n  const handleGoogleDriveCallback = async (data) => {\r\n    if (data.action === window.google.picker.Action.PICKED) {\r\n      const files = data.docs;\r\n      try {\r\n        if (filePickerFormType === 'carousel') {\r\n          // Handle multiple files for carousel\r\n          const fileObjects = [];\r\n          for (const file of files) {\r\n            const fileContent = await downloadGoogleDriveFile(file.id);\r\n            const blob = new Blob([fileContent], { type: file.mimeType });\r\n            const fileObj = new File([blob], file.name, { type: file.mimeType });\r\n            fileObjects.push(fileObj);\r\n          }\r\n          handleCarouselFilesChange({ target: { files: fileObjects } });\r\n        } else {\r\n          // Handle single file\r\n          const file = files[0];\r\n          const fileContent = await downloadGoogleDriveFile(file.id);\r\n          const blob = new Blob([fileContent], { type: file.mimeType });\r\n          const fileObj = new File([blob], file.name, { type: file.mimeType });\r\n          \r\n          if (filePickerType === 'photo') {\r\n            handleImageChange({ target: { files: [fileObj] } });\r\n          } else if (filePickerType === 'video') {\r\n            handleReelFileChange({ target: { files: [fileObj] } });\r\n          }\r\n        }\r\n        \r\n        closeFilePicker();\r\n        setMessage('File(s) selected from Google Drive successfully!');\r\n      } catch (error) {\r\n        console.error('Error downloading file from Google Drive:', error);\r\n        setMessage('Failed to download file from Google Drive: ' + error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const downloadGoogleDriveFile = async (fileId) => {\r\n    try {\r\n      const response = await apiClient.downloadGoogleDriveFile(fileId);\r\n      if (response.success && response.fileContent) {\r\n        // Convert base64 to blob\r\n        const byteCharacters = atob(response.fileContent);\r\n        const byteNumbers = new Array(byteCharacters.length);\r\n        for (let i = 0; i < byteCharacters.length; i++) {\r\n          byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n        }\r\n        const byteArray = new Uint8Array(byteNumbers);\r\n        return byteArray;\r\n      } else {\r\n        throw new Error(response.error || 'Download failed');\r\n      }\r\n    } catch (error) {\r\n      throw new Error(`Failed to download file: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  // --- Post Submission ---\r\n  const handlePublish = async () => {\r\n    if (!selectedAccount) {\r\n      setMessage('Please select an Instagram account first');\r\n      return;\r\n    }\r\n\r\n    if (postType === 'photo' && (!aiImageUrl || !aiImageUrl.trim()) && (!uploadedImageUrl || !uploadedImageUrl.trim())) {\r\n      setMessage('Please select or generate an image');\r\n      return;\r\n    }\r\n\r\n    if (postType === 'carousel' && carouselImages.length === 0) {\r\n      setMessage('Please generate or upload carousel images');\r\n      return;\r\n    }\r\n\r\n    if (postType === 'reel' && !reelUrl) {\r\n      setMessage('Please upload a video for the reel');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setMessage('Creating Instagram post...');\r\n\r\n    try {\r\n      // Use the unified Instagram post endpoint for all post types\r\n      const options = {\r\n        instagram_user_id: selectedAccount.platform_user_id,\r\n        post_type: postType === 'photo' ? 'feed' : (postType === 'reel' ? 'reel' : postType),\r\n        media_type: postType === 'reel' ? 'video' : 'image' // <-- robust: send 'video' for reels\r\n      };\r\n\r\n      // Handle different post types\r\n      if (postType === 'photo') {\r\n        options.caption = caption;\r\n        const imageUrl = imageSource === 'ai' ? aiImageUrl : uploadedImageUrl;\r\n        if (imageUrl && imageUrl.trim()) {\r\n          options.image_url = imageUrl;\r\n        } else {\r\n          // If no image is available, we can't create a photo post\r\n          setMessage('Please select or generate an image before creating a photo post');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        console.log('ðŸ” DEBUG: Photo post options:', {\r\n          postType,\r\n          imageSource,\r\n          aiImageUrl,\r\n          uploadedImageUrl,\r\n          finalImageUrl: options.image_url,\r\n          caption: options.caption\r\n        });\r\n      } else if (postType === 'carousel') {\r\n        // For carousel, we need to use the carousel-specific endpoint\r\n        const response = await apiClient.postInstagramCarousel(\r\n          selectedAccount.platform_user_id,\r\n          carouselCaption,\r\n          carouselImages\r\n        );\r\n        \r\n        if (response.success) {\r\n          setMessage('Instagram carousel post created successfully!');\r\n          // Reset form\r\n          setCarouselImages([]);\r\n          setCarouselCaption('');\r\n          setCaptionPrompt('');\r\n          setAutoGenerateCaption(false);\r\n          setAiPrompt('');\r\n          \r\n          // Reload user media\r\n          if (selectedAccount) {\r\n            loadUserMedia(selectedAccount.platform_user_id);\r\n          }\r\n        } else {\r\n          setMessage(`Failed to create carousel post: ${response.error}`);\r\n        }\r\n        setLoading(false);\r\n        return;\r\n      } else if (postType === 'reel') {\r\n        options.caption = reelCaption;\r\n        // Always use Cloudinary URL for Reels\r\n        if (reelUrl && reelUrl.trim().startsWith('http')) {\r\n          options.video_url = reelUrl;\r\n        } else if (reelFilename && reelFilename.trim()) {\r\n          options.video_filename = reelFilename;\r\n        }\r\n        options.is_reel = true;\r\n        if (reelThumbnailUrl && reelThumbnailUrl.trim()) {\r\n          options.thumbnail_url = reelThumbnailUrl;\r\n        } else if (reelThumbnailFilename && reelThumbnailFilename.trim()) {\r\n          options.thumbnail_filename = reelThumbnailFilename;\r\n        }\r\n        options.media_type = 'video';\r\n        // Do NOT send media_file or media_filename for Reels\r\n        if ('media_file' in options) delete options.media_file;\r\n        if ('media_filename' in options) delete options.media_filename;\r\n        if ('image_url' in options) delete options.image_url;\r\n        console.log('ðŸ” DEBUG: Reel post options:', options);\r\n        console.log('ðŸ” DEBUG: Thumbnail state values:', {\r\n          reelThumbnailUrl,\r\n          reelThumbnailFilename,\r\n          hasThumbnailUrl: reelThumbnailUrl && reelThumbnailUrl.trim(),\r\n          hasThumbnailFilename: reelThumbnailFilename && reelThumbnailFilename.trim()\r\n        });\r\n      }\r\n\r\n      // Remove any empty string values from options to avoid backend validation issues\r\n      const cleanOptions = Object.fromEntries(\r\n        Object.entries(options).filter(([key, value]) => \r\n          value !== null && value !== undefined && value !== ''\r\n        )\r\n      );\r\n      \r\n      // Additional validation for photo posts\r\n      if (postType === 'photo' && !cleanOptions.image_url) {\r\n        setMessage('Photo posts require an image. Please select or generate an image first.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      \r\n      // Additional validation for reel posts\r\n      if (postType === 'reel' && !cleanOptions.video_url && !cleanOptions.video_filename) {\r\n        setMessage('Reel posts require a video. Please upload a video first.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      \r\n      console.log('ðŸ” DEBUG: Calling createUnifiedInstagramPost with:', {\r\n        instagramUserId: selectedAccount.platform_user_id,\r\n        options: cleanOptions,\r\n        originalPostType: postType,\r\n        originalOptions: options,\r\n        reelUrl: reelUrl,\r\n        reelFilename: reelFilename\r\n      });\r\n      console.log('ðŸ” DEBUG: Final thumbnail state before API call:', {\r\n        reelThumbnailUrl,\r\n        reelThumbnailFilename,\r\n        hasThumbnailUrl: reelThumbnailUrl && reelThumbnailUrl.trim(),\r\n        hasThumbnailFilename: reelThumbnailFilename && reelThumbnailFilename.trim(),\r\n        cleanOptionsHasThumbnail: cleanOptions.thumbnail_url || cleanOptions.thumbnail_filename\r\n      });\r\n      const response = await apiClient.createUnifiedInstagramPost(selectedAccount.platform_user_id, cleanOptions);\r\n      \r\n      if (response.success) {\r\n        setMessage('Instagram post created successfully!');\r\n        // Reset form\r\n        setCaption('');\r\n        setReelCaption('');\r\n        setReelCaptionPrompt('');\r\n        setReelAutoGenerateCaption(false);\r\n        setAiImageUrl('');\r\n        setUploadedImageUrl('');\r\n        setReelUrl('');\r\n        setReelFilename(''); // Clear the filename too\r\n        // eslint-disable-next-line no-undef\r\n        setReelFile(null);\r\n        setSelectedImageFile(null);\r\n        setAiPrompt('');\r\n        setCaptionPrompt('');\r\n        setReelThumbnailUrl('');\r\n        setReelThumbnailFilename('');\r\n        // eslint-disable-next-line no-undef\r\n        setReelThumbnailFile(null);\r\n        // Reload user media\r\n        if (selectedAccount) {\r\n          loadUserMedia(selectedAccount.platform_user_id);\r\n        }\r\n        // --- Synchronize account info for post count ---\r\n        try {\r\n          const allAccounts = await apiClient.getSocialAccounts();\r\n          const updatedAccount = allAccounts.find(acc => acc.id === selectedAccount.id);\r\n          if (updatedAccount) {\r\n            setSelectedAccount(updatedAccount);\r\n            setInstagramAccounts(prev =>\r\n              prev.map(acc => acc.id === updatedAccount.id ? updatedAccount : acc)\r\n            );\r\n          }\r\n        } catch (err) {\r\n          console.warn('Failed to refresh account info after post:', err);\r\n        }\r\n        setActiveTab('scheduled-posts');\r\n      } else {\r\n        let errorMsg = `Failed to create post: ${response.error || 'Unknown error'}`;\r\n        if (response.details) {\r\n          errorMsg += `\\nDetails: ${typeof response.details === 'string' ? response.details : JSON.stringify(response.details)}`;\r\n        }\r\n        setMessage(errorMsg);\r\n        console.error('Instagram post error:', response);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating Instagram post:', error);\r\n      setMessage(`Error creating post: ${error.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Check Google Drive availability\r\n  const checkGoogleDriveAvailability = async () => {\r\n    try {\r\n      const status = await apiClient.getGoogleDriveStatus();\r\n      setGoogleDriveAvailable(status.authenticated);\r\n    } catch (error) {\r\n      console.error('Error checking Google Drive availability:', error);\r\n      setGoogleDriveAvailable(false);\r\n    }\r\n  };\r\n\r\n  // --- Logout ---\r\n  const handleLogout = () => {\r\n    setInstagramAccounts([]);\r\n    setSelectedAccount('');\r\n    setIsConnected(false);\r\n    setActiveTab('connect');\r\n    setMessage('Instagram accounts disconnected');\r\n  };\r\n\r\n  // Auto-Reply Functions\r\n  const loadAutoReplySettings = async () => {\r\n    if (!selectedAccount) return;\r\n    \r\n    try {\r\n      console.log('ðŸ”„ Loading auto-reply settings for Instagram account:', selectedAccount.platform_user_id, selectedAccount.username);\r\n      \r\n      // Get automation rules for Instagram auto-reply\r\n      const rules = await apiClient.getAutomationRules('instagram', 'auto_reply');\r\n      console.log('ðŸ“‹ Found automation rules:', rules);\r\n      \r\n      // Find existing auto-reply rule for this account\r\n      const existingRule = rules.find(rule => \r\n        rule.social_account_id === selectedAccount.id && \r\n        rule.rule_type === 'AUTO_REPLY'\r\n      );\r\n      \r\n      if (existingRule) {\r\n        setAutoReplyEnabled(existingRule.is_active);\r\n        setAutoReplyTemplate(existingRule.actions?.template || '');\r\n        console.log('âœ… Found existing auto-reply rule:', existingRule);\r\n      } else {\r\n        setAutoReplyEnabled(false);\r\n        setAutoReplyTemplate('');\r\n        console.log('ðŸ“ No existing auto-reply rule found');\r\n      }\r\n      \r\n      // Load posts for auto-reply selection\r\n      await loadPostsForAutoReply();\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Error loading auto-reply settings:', error);\r\n      \r\n      let errorMessage = 'Failed to load auto-reply settings';\r\n      if (error.response?.data?.detail) {\r\n        errorMessage += ': ' + error.response.data.detail;\r\n      } else if (error.message) {\r\n        errorMessage += ': ' + error.message;\r\n      }\r\n      \r\n      setMessage(errorMessage);\r\n    }\r\n  };\r\n\r\n  // DM Auto-Reply Functions\r\n  const loadDmAutoReplySettings = async () => {\r\n    if (!selectedAccount) return;\r\n    try {\r\n      console.log('ðŸ”„ Loading DM auto-reply settings for Instagram account:', selectedAccount.platform_user_id, selectedAccount.username);\r\n      const statusResponse = await apiClient.getInstagramDmAutoReplyStatus(selectedAccount.platform_user_id);\r\n      console.log('ðŸ“‹ DM auto-reply status:', statusResponse);\r\n      if (statusResponse.success) {\r\n        setDmAutoReplyEnabled(statusResponse.enabled);\r\n        console.log('âœ… DM auto-reply status loaded:', statusResponse.enabled);\r\n      } else {\r\n        setDmAutoReplyEnabled(false);\r\n        showToast('Failed to load DM auto-reply status: ' + (statusResponse.error || 'Unknown error'), 'error');\r\n        console.log('ðŸ“ No DM auto-reply status found');\r\n      }\r\n    } catch (error) {\r\n      setDmAutoReplyEnabled(false);\r\n      showToast('Error loading DM auto-reply settings: ' + (error?.message || 'Unknown error'), 'error');\r\n      console.error('âŒ Error loading DM auto-reply settings:', error);\r\n    }\r\n  };\r\n\r\n  const handleDmAutoReplyToggle = async () => {\r\n    if (!selectedAccount) {\r\n      showToast('Please select an Instagram account first.', 'error');\r\n      return;\r\n    }\r\n    setDmAutoReplyLoading(true);\r\n    try {\r\n      const response = await apiClient.toggleInstagramDmAutoReply(\r\n        selectedAccount.platform_user_id,\r\n        !dmAutoReplyEnabled\r\n      );\r\n      if (response.success) {\r\n        setDmAutoReplyEnabled(!dmAutoReplyEnabled);\r\n        showToast(\r\n          !dmAutoReplyEnabled\r\n            ? 'Auto DM Reply enabled successfully!'\r\n            : 'Auto DM Reply disabled successfully.',\r\n          'success'\r\n        );\r\n      } else {\r\n        showToast('Failed to toggle Auto DM Reply: ' + (response.error || 'Unknown error'), 'error');\r\n        console.error('âŒ Failed to toggle Auto DM Reply:', response);\r\n      }\r\n    } catch (error) {\r\n      showToast('Failed to toggle Auto DM Reply: ' + (error?.message || 'Unknown error'), 'error');\r\n      console.error('âŒ Error toggling Auto DM Reply:', error);\r\n    } finally {\r\n      setDmAutoReplyLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadPostsForAutoReply = async () => {\r\n    if (!selectedAccount) return;\r\n    \r\n    try {\r\n      setLoadingAutoReplyPosts(true);\r\n      console.log('ðŸ”„ Loading posts for auto-reply selection for Instagram account:', selectedAccount.platform_user_id);\r\n      \r\n      // First, try to get posts directly from the database\r\n      const response = await apiClient.getPosts('instagram');\r\n      console.log('ðŸ“‹ All Instagram posts from database:', response);\r\n      \r\n      if (response && Array.isArray(response)) {\r\n        console.log('ðŸ” Selected account details:', {\r\n          id: selectedAccount.id,\r\n          platform_user_id: selectedAccount.platform_user_id,\r\n          username: selectedAccount.username\r\n        });\r\n        \r\n        // Filter posts for this specific account with better debugging\r\n        const accountPosts = response.filter(post => {\r\n          // Primary match: social_account_id (most reliable)\r\n          const matchesAccountId = post.social_account?.id === selectedAccount.id;\r\n          \r\n          // Secondary matches for compatibility\r\n          const matchesPlatformUserId = post.social_account?.platform_user_id === selectedAccount.platform_user_id;\r\n          const matchesUsername = post.social_account?.username === selectedAccount.username;\r\n          \r\n          const isMatch = matchesAccountId || matchesPlatformUserId || matchesUsername;\r\n          \r\n          console.log('ðŸ” Checking post:', {\r\n            postId: post.id,\r\n            postAccountId: post.social_account?.id,\r\n            postPlatformUserId: post.social_account?.platform_user_id,\r\n            postUsername: post.social_account?.username,\r\n            selectedAccountId: selectedAccount.id,\r\n            selectedPlatformUserId: selectedAccount.platform_user_id,\r\n            selectedUsername: selectedAccount.username,\r\n            matchesAccountId,\r\n            matchesPlatformUserId,\r\n            matchesUsername,\r\n            isMatch\r\n          });\r\n          \r\n          return isMatch;\r\n        });\r\n        \r\n        console.log('ðŸ“‹ Posts for this account:', accountPosts.length);\r\n        console.log('ðŸ“‹ All posts in database:', response.length);\r\n        console.log('ðŸ“‹ Account posts details:', accountPosts.map(post => ({\r\n          id: post.id,\r\n          content: post.content?.substring(0, 50) + '...',\r\n          social_account_id: post.social_account?.id,\r\n          platform_user_id: post.social_account?.platform_user_id,\r\n          username: post.social_account?.username\r\n        })));\r\n        \r\n        if (accountPosts.length === 0) {\r\n          console.log('âš ï¸ No posts found for this specific account. Showing all Instagram posts for debugging...');\r\n          \r\n          // Show all Instagram posts for debugging\r\n          setAutoReplyPosts(response);\r\n          console.log('ðŸ“‹ Showing all Instagram posts for debugging:', response.length);\r\n          \r\n          // Also try to sync from Instagram API\r\n          console.log('ðŸ”„ Attempting to sync from Instagram...');\r\n          try {\r\n            const syncResponse = await apiClient.syncInstagramPosts(selectedAccount.platform_user_id);\r\n            console.log('ðŸ“¡ Sync response:', syncResponse);\r\n            \r\n            if (syncResponse.success) {\r\n              // Re-fetch posts after sync\r\n              const refreshedResponse = await apiClient.getPosts('instagram');\r\n              const refreshedAccountPosts = refreshedResponse.filter(post => {\r\n                // Primary match: social_account_id (most reliable)\r\n                const matchesAccountId = post.social_account?.id === selectedAccount.id;\r\n                \r\n                // Secondary matches for compatibility\r\n                const matchesPlatformUserId = post.social_account?.platform_user_id === selectedAccount.platform_user_id;\r\n                const matchesUsername = post.social_account?.username === selectedAccount.username;\r\n                \r\n                return matchesAccountId || matchesPlatformUserId || matchesUsername;\r\n              });\r\n              \r\n              if (refreshedAccountPosts.length > 0) {\r\n                setAutoReplyPosts(refreshedAccountPosts);\r\n                console.log('âœ… Posts loaded after sync:', refreshedAccountPosts.length);\r\n              } else {\r\n                console.log('âš ï¸ Still no posts found after sync. Showing all posts for debugging.');\r\n                setAutoReplyPosts(refreshedResponse);\r\n                setMessage('No posts found for this account. Showing all Instagram posts for debugging. Create some posts first using the Create Post tab.');\r\n              }\r\n            } else {\r\n              setMessage('Failed to sync posts from Instagram. Showing all posts for debugging.');\r\n            }\r\n          } catch (syncError) {\r\n            console.error('âŒ Sync error:', syncError);\r\n            setMessage('Failed to sync posts from Instagram. Showing all posts for debugging.');\r\n          }\r\n        } else {\r\n          setAutoReplyPosts(accountPosts);\r\n          console.log('âœ… Posts loaded for auto-reply selection:', accountPosts.length);\r\n        }\r\n      } else {\r\n        throw new Error('Failed to load posts');\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Error loading posts for auto-reply:', error);\r\n      \r\n      // Provide more specific error messages\r\n      let errorMessage = 'Failed to load posts for auto-reply selection';\r\n      if (error.message.includes('404')) {\r\n        errorMessage = 'Instagram account not found. Please reconnect your Instagram account.';\r\n      } else if (error.message.includes('401')) {\r\n        errorMessage = 'Authentication failed. Please log in again.';\r\n      } else if (error.message.includes('500')) {\r\n        errorMessage = 'Server error. Please try again later.';\r\n      }\r\n      \r\n      setMessage(errorMessage);\r\n    } finally {\r\n      setLoadingAutoReplyPosts(false);\r\n    }\r\n  };\r\n\r\n  const handlePostSelection = (postId) => {\r\n    setSelectedAutoReplyPosts(prev => {\r\n      if (prev.includes(postId)) {\r\n        return prev.filter(id => id !== postId);\r\n      } else {\r\n        return [...prev, postId];\r\n      }\r\n    });\r\n  };\r\n\r\n  const handlePostTouch = (postId, event) => {\r\n    event.preventDefault();\r\n    handlePostSelection(postId);\r\n  };\r\n\r\n  const selectAllPosts = () => {\r\n    const allPostIds = autoReplyPosts.map(post => post.id);\r\n    setSelectedAutoReplyPosts(allPostIds);\r\n  };\r\n\r\n  const deselectAllPosts = () => {\r\n    setSelectedAutoReplyPosts([]);\r\n  };\r\n\r\n\r\n\r\n  const handleSelectPosts = () => {\r\n    setIsSelectingPosts(true);\r\n    // Load posts when entering selection mode\r\n    if (autoReplyPosts.length === 0) {\r\n      loadPostsForAutoReply();\r\n    }\r\n  };\r\n\r\n  const handleDoneSelecting = () => {\r\n    setIsSelectingPosts(false);\r\n  };\r\n\r\n  const handleAutoReplyToggle = async () => {\r\n    if (!selectedAccount) {\r\n      setMessage('Please select an Instagram account first');\r\n      return;\r\n    }\r\n\r\n    // Check if posts are available when enabling\r\n    if (!autoReplyEnabled && autoReplyPosts.length === 0) {\r\n      setMessage('No posts available for auto-reply. Please create some posts first.');\r\n      return;\r\n    }\r\n\r\n    // If enabling auto-reply without selected posts, auto-select all posts\r\n    if (!autoReplyEnabled && selectedAutoReplyPosts.length === 0) {\r\n      const allPostIds = autoReplyPosts.map(post => post.id);\r\n      setSelectedAutoReplyPosts(allPostIds);\r\n      console.log('Auto-selecting all posts for auto-reply:', allPostIds);\r\n    }\r\n\r\n    // Add mobile-friendly confirmation for enabling auto-reply\r\n    if (!autoReplyEnabled) {\r\n      const isMobile = window.innerWidth <= 768;\r\n      const postCount = selectedAutoReplyPosts.length > 0 ? selectedAutoReplyPosts.length : autoReplyPosts.length;\r\n      const confirmMessage = isMobile \r\n        ? `Enable auto-reply for ${postCount} post(s)?`\r\n        : `Enable auto-reply for ${postCount} post(s)? AI will automatically reply to comments mentioning the commenter.`;\r\n      \r\n      if (!window.confirm(confirmMessage)) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    setAutoReplyLoading(true);\r\n    try {\r\n      console.log('ðŸ”„ Toggling auto-reply for Instagram account:', selectedAccount.platform_user_id, selectedAccount.username);\r\n      console.log('ðŸ“ Selected post IDs:', selectedAutoReplyPosts);\r\n      console.log('ðŸŽ¯ New state will be:', !autoReplyEnabled);\r\n      \r\n      const response = await apiClient.toggleInstagramAutoReply(\r\n        selectedAccount.platform_user_id,\r\n        !autoReplyEnabled,\r\n        autoReplyTemplate,\r\n        selectedAutoReplyPosts\r\n      );\r\n\r\n      console.log('ðŸ“¡ Backend response:', response);\r\n\r\n      if (response.success) {\r\n        setAutoReplyEnabled(!autoReplyEnabled);\r\n        \r\n        const successMessage = !autoReplyEnabled \r\n          ? isMobile()\r\n            ? `Auto-reply enabled for ${response.data?.selected_posts_count || selectedAutoReplyPosts.length} post(s)!`\r\n            : `Auto-reply enabled successfully for ${response.data?.selected_posts_count || selectedAutoReplyPosts.length} post(s)! AI will automatically reply to comments mentioning the commenter.`\r\n          : 'Auto-reply disabled successfully.';\r\n        \r\n        setMessage(successMessage);\r\n        \r\n        console.log('âœ… Auto-reply toggled successfully:', {\r\n          enabled: !autoReplyEnabled,\r\n          selectedPostsCount: response.data?.selected_posts_count\r\n        });\r\n      } else {\r\n        throw new Error(response.error || 'Failed to toggle auto-reply');\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Auto-reply toggle error:', error);\r\n      setMessage('Error toggling auto-reply: ' + (error.message || 'Unknown error'));\r\n    } finally {\r\n      setAutoReplyLoading(false);\r\n    }\r\n  };\r\n\r\n  // Load auto-reply settings when account is selected\r\n  useEffect(() => {\r\n    console.log('ðŸ” DEBUG: Auto-reply useEffect triggered');\r\n    console.log('ðŸ” DEBUG: selectedAccount:', selectedAccount);\r\n    console.log('ðŸ” DEBUG: activeTab:', activeTab);\r\n    if (selectedAccount && activeTab === 'auto-reply') {\r\n      console.log('ðŸ” DEBUG: Loading auto-reply settings');\r\n      loadAutoReplySettings();\r\n    }\r\n  }, [selectedAccount, activeTab]);\r\n\r\n  // Persist auto-reply state on page refresh\r\n  useEffect(() => {\r\n    if (selectedAccount && autoReplyEnabled) {\r\n      // Re-validate auto-reply state with backend\r\n      const validateAutoReplyState = async () => {\r\n        try {\r\n          const rules = await apiClient.getAutomationRules('instagram', 'auto_reply');\r\n          const socialAccounts = await apiClient.getSocialAccounts();\r\n          const instagramAccount = socialAccounts.find(acc => \r\n            acc.platform === 'instagram' && acc.platform_user_id === selectedAccount.platform_user_id\r\n          );\r\n          \r\n          if (instagramAccount) {\r\n            const existingRule = rules.find(rule => \r\n              rule.social_account_id === instagramAccount.id && \r\n              rule.rule_type === 'AUTO_REPLY'\r\n            );\r\n            \r\n            if (!existingRule || !existingRule.is_active) {\r\n              setAutoReplyEnabled(false);\r\n              setSelectedAutoReplyPosts([]);\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error('Error validating auto-reply state:', error);\r\n        }\r\n      };\r\n      \r\n      validateAutoReplyState();\r\n    }\r\n  }, [selectedAccount, autoReplyEnabled]);\r\n\r\n  // Load user media when account is selected\r\n  useEffect(() => {\r\n    if (selectedAccount && activeTab === 'post') {\r\n      loadUserMedia(selectedAccount.platform_user_id);\r\n    }\r\n  }, [selectedAccount, activeTab]);\r\n\r\n  // Load DM auto-reply settings when account is selected\r\n  useEffect(() => {\r\n    if (selectedAccount && activeTab === 'auto-reply') {\r\n      loadDmAutoReplySettings();\r\n    }\r\n  }, [selectedAccount, activeTab]);\r\n\r\n  // Add a useEffect to always load DM auto-reply settings when selectedAccount changes\r\n  useEffect(() => {\r\n    if (selectedAccount) {\r\n      loadDmAutoReplySettings();\r\n    }\r\n  }, [selectedAccount]);\r\n\r\n  // --- New: Scheduled Posts Grid State ---\r\n  const [scheduledGridRows, setScheduledGridRows] = useState([]);\r\n\r\n  // Show grid if redirected with scheduled posts\r\n  useEffect(() => {\r\n    if (location.state && location.state.scheduledGridRows) {\r\n      setScheduledGridRows(location.state.scheduledGridRows);\r\n    }\r\n  }, [location.state]);\r\n\r\n  // --- Auto-refresh scheduled posts grid ---\r\n  useEffect(() => {\r\n    let intervalId;\r\n    const fetchScheduledPosts = async () => {\r\n      try {\r\n        const posts = await apiClient.getScheduledPosts();\r\n        setScheduledGridRows(posts.filter(post => post.platform === 'instagram'));\r\n      } catch (err) {}\r\n    };\r\n    fetchScheduledPosts(); // Always fetch on mount\r\n    intervalId = setInterval(fetchScheduledPosts, 10000);\r\n    return () => clearInterval(intervalId);\r\n  }, []);\r\n\r\n  // --- UI Render ---\r\n  if (authLoading) {\r\n    return <div className=\"instagram-container\"><div className=\"loading-screen\"><div className=\"loading-spinner\"></div><p>Checking authentication...</p></div></div>;\r\n  }\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <div className=\"instagram-container\">\r\n        <div className=\"header-section\">\r\n          <button onClick={() => navigate('/')} className=\"back-button\">Back to Dashboard</button>\r\n          <h1>Instagram Management</h1>\r\n          <p>Please log in to your account to connect and manage Instagram.</p>\r\n        </div>\r\n        <div className=\"auth-required\">\r\n          <div className=\"auth-icon\"></div>\r\n          <h2>Authentication Required</h2>\r\n          <p>You need to be logged in to use Instagram features. Please log in first.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  if (!sdkLoaded) {\r\n    return <div className=\"instagram-container\"><div className=\"loading-screen\"><div className=\"loading-spinner\"></div><p>Loading Instagram SDK...</p></div></div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"instagram-container\">\r\n      <div className=\"header-section\">\r\n        <button onClick={() => navigate('/')} className=\"back-button\">Back to Dashboard</button>\r\n        <div className=\"header-content\">\r\n          <div className=\"header-icon\"></div>\r\n          <div className=\"header-text\">\r\n            <h1>Instagram Management</h1>\r\n            <p>Connect and manage your Instagram Business accounts</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* --- Moved: Global Auto-Reply Section --- */}\r\n      {isConnected && selectedAccount && (\r\n        <div className=\"global-auto-reply-section\" style={{\r\n          display: 'flex', alignItems: 'center', justifyContent: 'space-between',\r\n          background: '#fff', borderRadius: 12, boxShadow: '0 2px 8px rgba(0,0,0,0.04)',\r\n          padding: '18px 24px', marginBottom: 18, border: '1px solid #eee',\r\n          flexWrap: 'wrap', gap: 16\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: 16 }}>\r\n            <div style={{ width: 56, height: 56, borderRadius: '50%', overflow: 'hidden', background: '#f3f3f3', border: '1px solid #e0e0e0' }}>\r\n              {selectedAccount.profile_picture_url ? (\r\n                <img src={selectedAccount.profile_picture_url} alt={selectedAccount.username} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n              ) : (\r\n                <div style={{ width: '100%', height: '100%', background: '#eee' }} />\r\n              )}\r\n            </div>\r\n            <div>\r\n              <div style={{ fontWeight: 600, fontSize: 18 }}>@{selectedAccount.username}</div>\r\n              <div style={{ color: '#888', fontSize: 14 }}>{selectedAccount.name}</div>\r\n              <div style={{ color: '#666', fontSize: 13, marginTop: 2 }}>\r\n                <span style={{ marginRight: 12 }}>\r\n                  <b>{selectedAccount.followers_count}</b> followers\r\n                </span>\r\n                <span>\r\n                  <b>{selectedAccount.media_count}</b> posts\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: 16 }}>\r\n            <button\r\n              className=\"auto-reply-toggle-btn\"\r\n              onClick={handleGlobalAutoReplyToggle}\r\n              disabled={globalAutoReplyLoading}\r\n              style={{\r\n                display: 'flex', alignItems: 'center', gap: 10, fontWeight: 600,\r\n                background: globalAutoReplyEnabled ? '#38c172' : '#e0e0e0',\r\n                color: globalAutoReplyEnabled ? '#fff' : '#444',\r\n                border: 'none', borderRadius: 20, padding: '10px 22px', fontSize: 16,\r\n                cursor: globalAutoReplyLoading ? 'not-allowed' : 'pointer',\r\n                boxShadow: globalAutoReplyEnabled ? '0 2px 8px rgba(56,193,114,0.08)' : 'none',\r\n                transition: 'background 0.2s'\r\n              }}\r\n            >\r\n              <span style={{\r\n                display: 'inline-block', width: 14, height: 14, borderRadius: '50%',\r\n                background: globalAutoReplyEnabled ? '#2ecc40' : '#bbb',\r\n                marginRight: 6, border: globalAutoReplyEnabled ? '2px solid #fff' : '2px solid #ccc',\r\n                boxShadow: globalAutoReplyEnabled ? '0 0 4px #38c172' : 'none',\r\n                verticalAlign: 'middle',\r\n              }} />\r\n              Auto Comment Reply: {globalAutoReplyEnabled ? 'Enabled' : 'Disabled'}\r\n              {globalAutoReplyLoading && (\r\n                <span className=\"loading-spinner\" style={{ marginLeft: 10, width: 18, height: 18, border: '2px solid #fff', borderTop: '2px solid #38c172', borderRadius: '50%', display: 'inline-block', animation: 'spin 1s linear infinite' }} />\r\n              )}\r\n            </button>\r\n\r\n            {/* --- DM Auto-Reply Toggle Button --- */}\r\n            <button\r\n              className=\"auto-reply-toggle-btn\"\r\n              onClick={handleDmAutoReplyToggle}\r\n              disabled={dmAutoReplyLoading}\r\n              style={{\r\n                display: 'flex', alignItems: 'center', gap: 10, fontWeight: 600,\r\n                background: dmAutoReplyEnabled ? '#38c172' : '#e0e0e0',\r\n                color: dmAutoReplyEnabled ? '#fff' : '#444',\r\n                border: 'none', borderRadius: 20, padding: '10px 22px', fontSize: 16,\r\n                cursor: dmAutoReplyLoading ? 'not-allowed' : 'pointer',\r\n                boxShadow: dmAutoReplyEnabled ? '0 2px 8px rgba(56,193,114,0.08)' : 'none',\r\n                transition: 'background 0.2s'\r\n              }}\r\n            >\r\n              <span style={{\r\n                display: 'inline-block', width: 14, height: 14, borderRadius: '50%',\r\n                background: dmAutoReplyEnabled ? '#2ecc40' : '#bbb',\r\n                marginRight: 6, border: dmAutoReplyEnabled ? '2px solid #fff' : '2px solid #ccc',\r\n                boxShadow: dmAutoReplyEnabled ? '0 0 4px #38c172' : 'none',\r\n                verticalAlign: 'middle',\r\n              }} />\r\n              Auto DM Reply: {dmAutoReplyEnabled ? 'Enabled' : 'Disabled'}\r\n              {dmAutoReplyLoading && (\r\n                <span className=\"loading-spinner\" style={{ marginLeft: 10, width: 18, height: 18, border: '2px solid #fff', borderTop: '2px solid #38c172', borderRadius: '50%', display: 'inline-block', animation: 'spin 1s linear infinite' }} />\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* --- Toast Notification --- */}\r\n      {toast.show && (\r\n        <div className={`toast-notification toast-${toast.type}`} style={{\r\n          position: 'fixed', top: 24, right: 24, zIndex: 9999, background: toast.type === 'success' ? '#38c172' : toast.type === 'error' ? '#e53e3e' : '#333',\r\n          color: '#fff', padding: '14px 28px', borderRadius: 8, boxShadow: '0 2px 8px rgba(0,0,0,0.12)', fontWeight: 500, fontSize: 16\r\n        }}>\r\n          {toast.message}\r\n        </div>\r\n      )}\r\n      {message && <div className=\"status-message info\"><span className=\"message-text\">{message}</span></div>}\r\n      <div className=\"main-content\">\r\n        <div className=\"tab-navigation\">\r\n          <button className={`tab-button ${activeTab === 'connect' ? 'active' : ''}`} onClick={() => setActiveTab('connect')}>Connect Account</button>\r\n          <button className={`tab-button ${activeTab === 'post' ? 'active' : ''}`} onClick={() => setActiveTab('post')} disabled={!isConnected}>Create Post</button>\r\n          <button className={`tab-button ${activeTab === 'media' ? 'active' : ''}`} onClick={() => setActiveTab('media')} disabled={!isConnected || !selectedAccount}>Media Gallery</button>\r\n          <button \r\n            className={`tab-button ${activeTab === 'bulk-composer' ? 'active' : ''}`} \r\n            onClick={() => setActiveTab('bulk-composer')} \r\n            disabled={!isConnected || !selectedAccount}\r\n            style={{ backgroundColor: activeTab === 'bulk-composer' ? '#e4405f' : undefined, color: activeTab === 'bulk-composer' ? 'white' : undefined, border: 'none' }}\r\n          >\r\n            <span role=\"img\" aria-label=\"Bulk Composer\">ðŸ“…</span> Bulk Composer\r\n          </button>\r\n          <button className={`tab-button ${activeTab === 'scheduled-posts' ? 'active' : ''}`} onClick={() => setActiveTab('scheduled-posts')} disabled={!isConnected || !selectedAccount}>Scheduled Posts</button>\r\n        </div>\r\n        <div className=\"tab-content\">\r\n          {activeTab === 'connect' && (\r\n            <div className=\"connect-section\">\r\n              {!isConnected ? (\r\n                <div className=\"connection-card\">\r\n                  <div className=\"connection-icon\"></div>\r\n                  <h2>Connect Instagram Account</h2>\r\n                  <p>Connect your Instagram Business account through Facebook to start posting and managing content.</p>\r\n                  <button onClick={handleFacebookLogin} disabled={loading} className=\"connect-main-button\">{loading ? 'Connecting...' : 'Connect via Facebook'}</button>\r\n                  <div className=\"requirements-card\">\r\n                    <h3>Requirements</h3>\r\n                    <ul>\r\n                      <li>Instagram Business or Creator account</li>\r\n                      <li>Connected to a Facebook Page</li>\r\n                      <li>Admin access to the Facebook Page</li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"connected-accounts\">\r\n                  <div className=\"accounts-header\">\r\n                    <h2>Connected Instagram Accounts</h2>\r\n                    <button onClick={handleLogout} className=\"logout-button\">Disconnect</button>\r\n                  </div>\r\n                  <div className=\"accounts-grid\">\r\n                    {instagramAccounts.map(account => (\r\n                      <div key={account.id} className={`account-card ${selectedAccount.id === account.id ? 'selected' : ''}`} onClick={() => setSelectedAccount(account)}>\r\n                        <div className=\"account-avatar\">{account.profile_picture_url ? <img src={account.profile_picture_url} alt={account.username} /> : <div className=\"avatar-placeholder\"></div>}</div>\r\n                        <div className=\"account-info\">\r\n                          <h3>@{account.username}</h3>\r\n                          <p>{account.name}</p>\r\n                          <div className=\"account-stats\"><span>{account.followers_count} followers</span><span>{account.media_count} posts</span></div>\r\n                          </div>\r\n                        {selectedAccount.id === account.id && <div className=\"selected-indicator\"></div>}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n          {activeTab === 'post' && selectedAccount && (\r\n            <div className=\"post-section\">\r\n              <div className=\"post-type-toggle\">\r\n                <button className={postType === 'photo' ? 'active' : ''} onClick={() => setPostType('photo')}>Photo</button>\r\n                <button className={postType === 'carousel' ? 'active' : ''} onClick={() => setPostType('carousel')}>Carousel</button>\r\n                <button className={postType === 'reel' ? 'active' : ''} onClick={() => setPostType('reel')}>Reel</button>\r\n              </div>\r\n              {/* Photo Post */}\r\n              {postType === 'photo' && (\r\n              <div className=\"post-card\">\r\n                  <div className=\"form-group\">\r\n                    <label>Image Source</label>\r\n                    <div className=\"image-source-toggle\">\r\n                      <button className={imageSource === 'ai' ? 'active' : ''} onClick={() => setImageSource('ai')}>AI</button>\r\n                      <button className={imageSource === 'upload' ? 'active' : ''} onClick={() => setImageSource('upload')}>Upload</button>\r\n                </div>\r\n                  </div>\r\n                  {imageSource === 'ai' && (\r\n                  <div className=\"form-group\">\r\n                      <label>AI Prompt</label>\r\n                    <textarea\r\n                        value={aiPrompt} \r\n                        onChange={e => {\r\n                          setAiPrompt(e.target.value);\r\n                          // Clear generated content when prompt changes\r\n                          if (aiImageUrl) {\r\n                            setAiImageUrl('');\r\n                          }\r\n                          if (caption && !caption.trim().includes('Check out this amazing image!')) {\r\n                            setCaption('');\r\n                          }\r\n                        }} \r\n                        placeholder=\"Describe your image...\" \r\n                        rows={3} \r\n                      className=\"post-textarea\"\r\n                    />\r\n                      <div className=\"ai-buttons\">\r\n                        <button className=\"ai-generate-button\" onClick={handleGenerateAIImage} disabled={aiGenerating || !aiPrompt.trim() || rateLimitCooldown > 0}>\r\n                          {aiGenerating ? 'Generating...' : 'Generate Image'}\r\n                        </button>\r\n                        <button className=\"ai-generate-button secondary\" onClick={handleGenerateImageAndCaption} disabled={aiGenerating || generatingCaption || !aiPrompt.trim() || rateLimitCooldown > 0}>\r\n                          {aiGenerating || generatingCaption ? 'Generating...' : 'Generate Image & Caption'}\r\n                        </button>\r\n                        {message && message.includes('Error') && aiPrompt.trim() && (\r\n                          <button className=\"ai-generate-button retry\" onClick={handleRetryImageGeneration} disabled={aiGenerating || rateLimitCooldown > 0}>\r\n                            {aiGenerating ? 'Retrying...' : 'Retry Generation'}\r\n                          </button>\r\n                        )}\r\n                  </div>\r\n                      {rateLimitCooldown > 0 && (\r\n                        <div style={{ color: '#e53e3e', marginTop: 8, fontWeight: 500 }}>\r\n                          Too many requests. Please wait {Math.floor(rateLimitCooldown / 60)}:{(rateLimitCooldown % 60).toString().padStart(2, '0')} before trying again.\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  {imageSource === 'upload' && (\r\n                    <div className=\"form-group image-upload\">\r\n                      <label>Select Image</label>\r\n                      <button \r\n                        type=\"button\" \r\n                        onClick={() => openFilePicker('photo', 'manual')} \r\n                        className=\"file-picker-button\"\r\n                        disabled={uploadingImage}\r\n                      >\r\n                        {uploadingImage ? 'Uploading...' : 'Choose Image'}\r\n                      </button>\r\n                      {uploadedImageUrl && (\r\n                        <div className=\"image-preview\">\r\n                          <img src={uploadedImageUrl} alt=\"Preview\" className=\"preview-image\" />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  <div className=\"form-group\">\r\n                    <label>Caption</label>\r\n                    <div className=\"caption-section\">\r\n                      <div className=\"caption-toggle\">\r\n                        <label className=\"toggle-label\">\r\n                      <input\r\n                            type=\"checkbox\" \r\n                            checked={autoGenerateCaption} \r\n                            onChange={e => setAutoGenerateCaption(e.target.checked)}\r\n                          />\r\n                          <span className=\"toggle-text\">Auto Generate Caption</span>\r\n                      </label>\r\n                      </div>\r\n                      {autoGenerateCaption ? (\r\n                        <div className=\"caption-prompt-section\">\r\n                          <textarea \r\n                            value={captionPrompt} \r\n                            onChange={e => setCaptionPrompt(e.target.value)} \r\n                            placeholder=\"Describe what you want in the caption...\" \r\n                            rows={2} \r\n                            className=\"caption-prompt-textarea\" \r\n                          />\r\n                          <button \r\n                            onClick={handleAutoGenerateCaption} \r\n                            disabled={generatingCaption || !captionPrompt.trim()} \r\n                            className=\"generate-caption-button\"\r\n                          >\r\n                            {generatingCaption ? 'Generating...' : 'Generate Caption'}\r\n                          </button>\r\n                        </div>\r\n                      ) : null}\r\n                      <textarea \r\n                        value={caption} \r\n                        onChange={e => setCaption(e.target.value)} \r\n                        placeholder={autoGenerateCaption ? \"Caption will be generated...\" : \"Write your caption...\"} \r\n                        rows={3} \r\n                        className=\"post-textarea\" \r\n                        disabled={autoGenerateCaption}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  {(aiImageUrl || uploadedImageUrl) && <div className=\"generated-image\"><img src={aiImageUrl || uploadedImageUrl} alt=\"Preview\" /></div>}\r\n                  <button className=\"publish-button\" onClick={handlePublish} disabled={loading || !(aiImageUrl || uploadedImageUrl) || (!caption.trim() && !autoGenerateCaption)}>{loading ? 'Publishing...' : 'Publish Post'}</button>\r\n                </div>\r\n              )}\r\n              {/* Carousel Post */}\r\n              {postType === 'carousel' && (\r\n                <div className=\"post-card\">\r\n                  <div className=\"form-group\">\r\n                    <label>Carousel Mode</label>\r\n                    <div className=\"image-source-toggle\">\r\n                      <button \r\n                        className={imageSource === 'ai' ? 'active' : ''} \r\n                        onClick={() => setImageSource('ai')}\r\n                        disabled={carouselGenerating}\r\n                      >\r\n                        ðŸ¤– AI Generation\r\n                      </button>\r\n                      <button \r\n                        className={imageSource === 'upload' ? 'active' : ''} \r\n                        onClick={() => setImageSource('upload')}\r\n                        disabled={carouselGenerating}\r\n                      >\r\n                        ðŸ“¤ Manual Upload\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Image Count Selector */}\r\n                  <div className=\"form-group\">\r\n                    <label>Number of Images: {carouselCount}</label>\r\n                    <input\r\n                      type=\"range\"\r\n                      min=\"3\"\r\n                      max=\"7\"\r\n                      value={carouselCount}\r\n                      onChange={(e) => setCarouselCount(parseInt(e.target.value))}\r\n                      className=\"slider\"\r\n                      disabled={carouselGenerating}\r\n                    />\r\n                    <div className=\"slider-labels\">\r\n                      <span>3</span>\r\n                      <span>4</span>\r\n                      <span>5</span>\r\n                      <span>6</span>\r\n                      <span>7</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* AI Generation Mode */}\r\n                  {imageSource === 'ai' && (\r\n                    <div className=\"form-group\">\r\n                      <label>AI Prompt for Carousel</label>\r\n                      <textarea\r\n                        value={aiPrompt}\r\n                        onChange={(e) => setAiPrompt(e.target.value)}\r\n                        placeholder=\"Describe the carousel content you want to generate...\"\r\n                        rows=\"3\"\r\n                        className=\"post-textarea\"\r\n                        disabled={carouselGenerating}\r\n                      />\r\n                      <div className=\"ai-generation-note\">\r\n                        <small>ðŸ’¡ Tip: Carousel generation takes 3-5 minutes for {carouselCount} images. Please be patient!</small>\r\n                      </div>\r\n                  <button \r\n                        className=\"generate-button\"\r\n                        onClick={async () => {\r\n                          if (!aiPrompt.trim()) {\r\n                            setMessage('Please enter a prompt for carousel generation.');\r\n                            return;\r\n                          }\r\n                          setCarouselGenerating(true);\r\n                          setMessage(`Generating ${carouselCount} carousel images with AI... This may take 3-5 minutes.`);\r\n                          try {\r\n                            const response = await apiClient.generateInstagramCarousel(aiPrompt.trim(), carouselCount);\r\n                            if (response && response.success && response.image_urls) {\r\n                              setCarouselImages(response.image_urls);\r\n                              setCarouselCaption(response.caption || '');\r\n                              setMessage(`AI carousel generated successfully with ${response.image_urls.length} images!`);\r\n                            } else {\r\n                              setMessage(response.error || 'Failed to generate carousel images.');\r\n                            }\r\n                          } catch (error) {\r\n                            console.error('Carousel generation error:', error);\r\n                            if (error.message && error.message.includes('timeout')) {\r\n                              setMessage('Carousel generation timed out. This can happen with complex prompts or when generating many images. Please try again with a simpler prompt or fewer images.');\r\n                            } else {\r\n                              setMessage('Error generating carousel: ' + (error.message || error.toString()));\r\n                            }\r\n                          } finally {\r\n                            setCarouselGenerating(false);\r\n                          }\r\n                        }}\r\n                        disabled={carouselGenerating || !aiPrompt.trim()}\r\n                      >\r\n                        {carouselGenerating ? (\r\n                      <>\r\n                        <div className=\"button-spinner\"></div>\r\n                            Generating {carouselCount} Images...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                            <span role=\"img\" aria-label=\"Generate\">âœ¨</span> Generate Carousel\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n                  )}\r\n\r\n                                    {/* Manual Upload Mode */}\r\n                  {imageSource === 'upload' && (\r\n                    <div className=\"form-group\">\r\n                      <label>Upload Images (JPG/PNG)</label>\r\n                      <button \r\n                        type=\"button\" \r\n                        onClick={() => openFilePicker('photo', 'carousel')} \r\n                        className=\"file-picker-button\"\r\n                        disabled={carouselGenerating}\r\n                      >\r\n                        {carouselGenerating ? (\r\n                          <>\r\n                            <div className=\"button-spinner\"></div>\r\n                            Uploading...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <span role=\"img\" aria-label=\"Upload\">ðŸ“¤</span> Select {carouselCount} Images\r\n                          </>\r\n                        )}\r\n                      </button>\r\n                      <p className=\"file-upload-hint\">\r\n                        Select {carouselCount} images for your carousel\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Caption Generation */}\r\n                  <div className=\"form-group\">\r\n                    <label>Caption</label>\r\n                    <div className=\"caption-section\">\r\n                      <div className=\"caption-toggle\">\r\n                        <label className=\"toggle-label\">\r\n                          <input \r\n                            type=\"checkbox\" \r\n                            checked={autoGenerateCaption} \r\n                            onChange={e => setAutoGenerateCaption(e.target.checked)}\r\n                          />\r\n                          <span className=\"toggle-text\">Auto Generate Caption</span>\r\n                        </label>\r\n                      </div>\r\n                      {autoGenerateCaption ? (\r\n                        <div className=\"caption-prompt-section\">\r\n                          <textarea \r\n                            value={captionPrompt} \r\n                            onChange={e => setCaptionPrompt(e.target.value)} \r\n                            placeholder=\"Describe what you want in the caption...\" \r\n                            rows={2} \r\n                            className=\"caption-prompt-textarea\" \r\n                          />\r\n                          <button \r\n                            onClick={handleCarouselAutoGenerateCaption} \r\n                            disabled={generatingCaption || !captionPrompt.trim()} \r\n                            className=\"generate-caption-button\"\r\n                          >\r\n                            {generatingCaption ? 'Generating...' : 'Generate Caption'}\r\n                          </button>\r\n                        </div>\r\n                      ) : null}\r\n                      <textarea \r\n                        value={carouselCaption} \r\n                        onChange={e => setCarouselCaption(e.target.value)} \r\n                        placeholder={autoGenerateCaption ? \"Caption will be generated...\" : \"Write your caption...\"} \r\n                        rows={3} \r\n                        className=\"post-textarea\" \r\n                        disabled={autoGenerateCaption}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Carousel Preview */}\r\n                  {carouselImages.length > 0 && (\r\n                    <div className=\"carousel-preview-section\">\r\n                      <h4>Carousel Preview</h4>\r\n                      <div className=\"carousel-preview-grid\">\r\n                        {carouselImages.slice(0, carouselCount).map((url, index) => (\r\n                          <div key={index} className=\"carousel-preview-item\">\r\n                            <img src={url} alt={`Carousel item ${index + 1}`} />\r\n                            <span className=\"carousel-item-number\">{index + 1}</span>\r\n                          </div>\r\n                        ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n                  <button \r\n                    className=\"publish-button\" \r\n                    onClick={async () => {\r\n                      if (!selectedAccount) {\r\n                        setMessage('Please select an Instagram account first.');\r\n                        return;\r\n                      }\r\n                      if (carouselImages.length < 3) {\r\n                        setMessage('Please add at least 3 images for carousel.');\r\n                        return;\r\n                      }\r\n                      if (!carouselCaption.trim() && !autoGenerateCaption) {\r\n                        setMessage('Please write a caption or enable auto-generate caption.');\r\n                        return;\r\n                      }\r\n                      if (autoGenerateCaption && !captionPrompt.trim()) {\r\n                        setMessage('Please provide a prompt for auto-generating caption.');\r\n                        return;\r\n                      }\r\n                      \r\n                      setLoading(true);\r\n                      setMessage('Publishing carousel post...');\r\n                      try {\r\n                        console.log('ðŸ” DEBUG: Carousel publish - selectedAccount:', selectedAccount);\r\n                        console.log('ðŸ” DEBUG: Carousel publish - carouselImages:', carouselImages);\r\n                        console.log('ðŸ” DEBUG: Carousel publish - carouselCount:', carouselCount);\r\n                        \r\n                        const finalCaption = autoGenerateCaption && captionPrompt.trim() ? \r\n                          await (async () => {\r\n                            const res = await apiClient.generateInstagramCaption(captionPrompt.trim());\r\n                            return res.content || carouselCaption || 'Check out this amazing carousel!';\r\n                          })() : carouselCaption;\r\n                        \r\n                        console.log('ðŸ” DEBUG: Carousel publish - finalCaption:', finalCaption);\r\n                        \r\n                        const response = await apiClient.postInstagramCarousel(\r\n                          selectedAccount.platform_user_id, \r\n                          finalCaption, \r\n                          carouselImages.slice(0, carouselCount)\r\n                        );\r\n                        \r\n                        if (response.success) {\r\n                          setMessage('Carousel post published successfully!');\r\n                          setCarouselImages([]);\r\n                          setCarouselCaption('');\r\n                          setCaptionPrompt('');\r\n                          setAutoGenerateCaption(false);\r\n                          setAiPrompt('');\r\n                          loadUserMedia(selectedAccount.platform_user_id);\r\n                        } else {\r\n                          setMessage('Failed to publish carousel: ' + (response.error || 'Unknown error'));\r\n                        }\r\n                      } catch (err) {\r\n                        setMessage('Error publishing carousel: ' + (err.message || err.toString()));\r\n                      } finally {\r\n                        setLoading(false);\r\n                      }\r\n                    }} \r\n                    disabled={loading || carouselImages.length < 3 || (!carouselCaption.trim() && !autoGenerateCaption)}\r\n                  >\r\n                    {loading ? 'Publishing...' : 'Publish Carousel'}\r\n                  </button>\r\n                </div>\r\n              )}\r\n              {/* Reel Post */}\r\n              {postType === 'reel' && (\r\n                <div className=\"post-card\">\r\n                  <div className=\"form-group\">\r\n                    <label>Upload Reel Video (.mp4, .mov)</label>\r\n                    <input type=\"file\" accept=\"video/mp4,video/quicktime,.mp4,.mov\" onChange={handleReelFileChange} disabled={reelUploading} />\r\n                    {reelUrl && (\r\n                      <div className=\"video-preview\">\r\n                        <video src={reelUrl} controls style={{ width: '100%', maxHeight: '300px' }} />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Upload Reel Thumbnail (optional):</label>\r\n                    <input type=\"file\" accept=\"image/png,image/jpeg,image/jpg\" onChange={handleReelThumbnailChange} disabled={!reelUrl} />\r\n                    {reelThumbnailUrl && (\r\n                      <div style={{ display: 'flex', alignItems: 'center', gap: 8, marginTop: 8 }}>\r\n                        <img src={reelThumbnailUrl} alt=\"Reel Thumbnail Preview\" style={{ maxWidth: 120, borderRadius: 8, border: '1px solid #eee' }} />\r\n                        <button type=\"button\" onClick={() => { setReelThumbnailUrl(''); setReelThumbnailFilename(''); setReelThumbnailFile(null); }} style={{ background: 'none', border: 'none', cursor: 'pointer', color: '#e53e3e', fontSize: 18 }} title=\"Remove thumbnail\">&times;</button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Caption</label>\r\n                    <div className=\"caption-section\">\r\n                      <div className=\"caption-toggle\">\r\n                        <label className=\"toggle-label\">\r\n                          <input \r\n                            type=\"checkbox\" \r\n                            checked={reelAutoGenerateCaption} \r\n                            onChange={e => setReelAutoGenerateCaption(e.target.checked)}\r\n                          />\r\n                          <span className=\"toggle-text\">Auto Generate Caption</span>\r\n                        </label>\r\n                      </div>\r\n                      {reelAutoGenerateCaption ? (\r\n                        <div className=\"caption-prompt-section\">\r\n                          <textarea \r\n                            value={reelCaptionPrompt} \r\n                            onChange={e => setReelCaptionPrompt(e.target.value)} \r\n                            placeholder=\"Describe what you want in the caption...\" \r\n                            rows={2} \r\n                            className=\"caption-prompt-textarea\" \r\n                          />\r\n                          <button \r\n                            onClick={handleReelAutoGenerateCaption} \r\n                            disabled={generatingReelCaption || !reelCaptionPrompt.trim()} \r\n                            className=\"generate-caption-button\"\r\n                          >\r\n                            {generatingReelCaption ? 'Generating...' : 'Generate Caption'}\r\n                          </button>\r\n                        </div>\r\n                      ) : null}\r\n                      <textarea \r\n                        value={reelCaption} \r\n                        onChange={e => setReelCaption(e.target.value)} \r\n                        placeholder={reelAutoGenerateCaption ? \"Caption will be generated...\" : \"Write your caption...\"} \r\n                        rows={3} \r\n                        className=\"post-textarea\" \r\n                        disabled={reelAutoGenerateCaption}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <button className=\"publish-button\" onClick={handlePublish} disabled={loading || !reelUrl || (!reelCaption.trim() && !reelAutoGenerateCaption)}>{loading ? 'Publishing...' : 'Publish Reel'}</button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n          {activeTab === 'media' && selectedAccount && (\r\n            <div className=\"media-section\">\r\n              <div className=\"media-header\"><h2>Recent Posts</h2><p>Your latest Instagram content</p></div>\r\n              {loadingMedia ? <div className=\"loading-media\"><div className=\"loading-spinner\"></div><p>Loading media...</p></div> : userMedia.length > 0 ? <div className=\"media-grid\">{userMedia.slice(0, 12).map((media) => <div key={media.id} className=\"media-item\"><div className=\"media-content\">{media.media_type === 'IMAGE' ? <img src={media.media_url} alt=\"Instagram post\" /> : media.media_type === 'VIDEO' ? <video controls><source src={media.media_url} type=\"video/mp4\" /></video> : null}</div><div className=\"media-overlay\"><div className=\"media-info\"><p className=\"media-caption\">{media.caption ? media.caption.substring(0, 100) + '...' : 'No caption'}</p><p className=\"media-date\">{new Date(media.timestamp).toLocaleDateString()}</p></div></div></div>)}</div> : <div className=\"no-media\"><h3>No Media Found</h3><p>No media found for this account. Start creating posts to see them here!</p></div>}\r\n            </div>\r\n          )}\r\n          {activeTab === 'bulk-composer' && selectedAccount && (\r\n            <IgBulkComposer selectedAccount={selectedAccount} onClose={() => {}} />\r\n          )}\r\n          {activeTab === 'scheduled-posts' && (\r\n            <ScheduledPostHistory />\r\n          )}\r\n        </div>\r\n              </div>\r\n              \r\n      {/* Google Drive Modal */}\r\n      {showDriveModal && (\r\n        <div className=\"modal-overlay\" onClick={() => setShowDriveModal(false)}>\r\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h3>Select from Google Drive</h3>\r\n              <button onClick={() => setShowDriveModal(false)} className=\"modal-close\">&times;</button>\r\n                </div>\r\n            <div className=\"modal-body\">\r\n              {!driveAuthenticated ? (\r\n                <div className=\"drive-auth\">\r\n                  <p>Connect to Google Drive to select files</p>\r\n                  <button onClick={authenticateGoogleDrive} disabled={driveAuthLoading} className=\"auth-button\">\r\n                    {driveAuthLoading ? 'Connecting...' : 'Connect Google Drive'}\r\n                  </button>\r\n                      </div>\r\n              ) : (\r\n                <div className=\"drive-files\">\r\n                  {loadingDriveFiles ? (\r\n                    <div className=\"loading-files\">\r\n                      <div className=\"loading-spinner\"></div>\r\n                      <p>Loading files...</p>\r\n                        </div>\r\n                  ) : driveFiles.length > 0 ? (\r\n                    <div className=\"files-grid\">\r\n                      {driveFiles.map((file) => (\r\n                        <div key={file.id} className=\"file-item\" onClick={() => handleDriveFileSelect(file.id, file.name)}>\r\n                          {file.thumbnailLink ? (\r\n                            <img src={file.thumbnailLink} alt={file.name} className=\"file-thumbnail\" />\r\n                          ) : (\r\n                            <div className=\"file-icon\"></div>\r\n                          )}\r\n                          <div className=\"file-info\">\r\n                            <p className=\"file-name\">{file.name}</p>\r\n                            <p className=\"file-size\">{file.size ? `${Math.round(file.size / 1024)} KB` : 'Unknown size'}</p>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                    <div className=\"no-files\">\r\n                      <p>No image files found in Google Drive</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* File Picker Modal */}\r\n      {showFilePicker && (\r\n        <div className=\"modal-overlay\" onClick={closeFilePicker}>\r\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h3>Select {filePickerType === 'photo' ? 'Photo' : 'Video'}</h3>\r\n              <button onClick={closeFilePicker} className=\"modal-close\">\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/>\r\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"/>\r\n                  </svg>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <div className=\"file-picker-options\">\r\n                <div \r\n                  className=\"file-option\" \r\n                  onClick={() => document.getElementById('local-file-input').click()}\r\n                  onTouchStart={(e) => e.preventDefault()}\r\n                >\r\n                  <div className=\"file-option-icon\">\r\n                    <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"/>\r\n                      <polyline points=\"14,2 14,8 20,8\"/>\r\n                      <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\"/>\r\n                      <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\"/>\r\n                      <polyline points=\"10,9 9,9 8,9\"/>\r\n                    </svg>\r\n                  </div>\r\n                  <div className=\"file-option-content\">\r\n                    <h4>From Device</h4>\r\n                    <p>Select a file from your computer</p>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div \r\n                  className={`file-option ${!googleDriveAvailable ? 'disabled' : ''}`} \r\n                  onClick={handleGoogleDriveSelect}\r\n                  onTouchStart={(e) => {\r\n                    if (!googleDriveAvailable) {\r\n                      e.preventDefault();\r\n                      return;\r\n                    }\r\n                    e.preventDefault();\r\n                    handleGoogleDriveSelect();\r\n                  }}\r\n                >\r\n                  <div className=\"file-option-icon\">\r\n                    <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"/>\r\n                      <polyline points=\"9,22 9,12 15,12 15,22\"/>\r\n                    </svg>\r\n                  </div>\r\n                  <div className=\"file-option-content\">\r\n                    <h4>From Google Drive</h4>\r\n                    <p>\r\n                      {googleDriveAvailable \r\n                        ? 'Select a file from your Google Drive' \r\n                        : 'Google Drive not configured. See setup guide.'\r\n                      }\r\n                    </p>\r\n                    {isLoadingGoogleDrive && (\r\n                      <div className=\"loading-indicator\">\r\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                          <path d=\"M21 12a9 9 0 11-6.219-8.56\"/>\r\n                        </svg>\r\n                        Loading...\r\n                </div>\r\n              )}\r\n                    {!googleDriveAvailable && (\r\n                      <div className=\"unavailable-indicator\">\r\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                          <circle cx=\"12\" cy=\"12\" r=\"10\"/>\r\n                          <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"/>\r\n                          <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"/>\r\n                        </svg>\r\n                        Not Available\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n              </div>\r\n              \r\n              {/* Hidden file input for local file selection */}\r\n              <input\r\n                id=\"local-file-input\"\r\n                type=\"file\"\r\n                accept={filePickerType === 'photo' ? 'image/*' : 'video/*'}\r\n                multiple={filePickerFormType === 'carousel'}\r\n                onChange={handleLocalFileSelect}\r\n                style={{ display: 'none' }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {globalAutoReplyEnabled && globalAutoReplyProgress && (\r\n        <div className=\"auto-reply-progress\" style={{ margin: '16px 0', padding: '12px', background: '#f5f5f5', borderRadius: '8px' }}>\r\n          <p><strong>Auto-Reply Progress:</strong> {globalAutoReplyProgress.status}</p>\r\n          {globalAutoReplyProgress.status === 'processing' && (\r\n            <p>Processing post {globalAutoReplyProgress.current_post} of {globalAutoReplyProgress.total_posts}, comment {globalAutoReplyProgress.current_comment} of {globalAutoReplyProgress.total_comments}</p>\r\n          )}\r\n          {globalAutoReplyProgress.status === 'done' && <p>All comments processed!</p>}\r\n          {globalAutoReplyProgress.details && <p>{globalAutoReplyProgress.details}</p>}\r\n        </div>\r\n      )}\r\n      {apiError && (\r\n        <div className=\"api-error\" style={{ color: 'red', margin: '12px 0' }}>\r\n          <p>Error: {apiError}</p>\r\n          <button onClick={() => { setApiError(null); setRetrying(true); setTimeout(() => { setRetrying(false); window.location.reload(); }, 500); }}>Retry</button>\r\n          {retrying && <span>Retrying...</span>}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InstagramPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}